"use strict";(self.webpackChunkadmin_gui=self.webpackChunkadmin_gui||[]).push([[374],{54668:(x,P,n)=>{n.d(P,{l:()=>o});var C=n(65412),u=n(32105),S=n(35382),s=n(10036),e=n(95017),b=n(64080),l=n(24006),t=n(94650),v=n(89383),E=n(36895),R=n(59549),N=n(284),M=n(97392),L=n(4859),U=n(51572),D=n(98380),h=n(64877);function f(r,d){if(1&r&&t._UZ(0,"app-users-list",14),2&r){const m=t.oxw(2);t.Q6J("displayedColumns",m.displayedColumns)("selection",m.selection)("tableId",m.tableId)("disableRouting",!0)("users",m.identities)}}function A(r,d){if(1&r&&(t.TgZ(0,"div"),t.YNc(1,f,1,5,"app-users-list",13),t.qZA()),2&r){const m=t.oxw();t.xp6(1),t.Q6J("ngIf",void 0!==m.identities&&m.identities.length>0)}}function c(r,d){1&r&&(t.TgZ(0,"perun-web-apps-alert",15),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.CONNECT_IDENTITY.SEARCH_HINT")," "))}function p(r,d){1&r&&(t.TgZ(0,"perun-web-apps-alert",16),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.CONNECT_IDENTITY.NO_IDENTITIES")," "))}function a(r,d){1&r&&t._UZ(0,"mat-spinner",17)}let o=(()=>{class r{constructor(m,I,Z,B,F,Q){this.dialogRef=m,this.data=I,this.userManager=Z,this.storeService=B,this.notificator=F,this.translate=Q,this.loading=!1,this.selection=new e.Ov(!1,[]),this.firstSearchDone=!1,this.displayedColumns=["select","id","user","name","email","logins","organization"],this.tableId=s.Iz}ngOnInit(){this.target=this.data.target,this.theme=this.data.theme,this.userId=this.data.userId,this.isService=this.data.isService,this.searchCtrl=new l.p4("",[l.kI.required,l.kI.pattern(".*[\\S]+.*")])}onAdd(){let m,I;this.loading=!0,this.isService?(m=this.selection.selected[0].id,I=this.userId):(m=this.userId,I=this.selection.selected[0].id),this.userManager.addSpecificUserOwner(m,I).subscribe({next:()=>{this.notificator.showSuccess(this.translate.instant("DIALOGS.CONNECT_IDENTITY.SUCCESS")),this.dialogRef.close(!0)},error:()=>this.loading=!1})}onCancel(){this.dialogRef.close(!1)}onSearchByString(){if(this.searchCtrl.invalid)return void this.searchCtrl.markAllAsTouched();this.loading=!0,this.firstSearchDone=!0;let m=[b.r.USER_DEF_ORGANIZATION,b.r.USER_DEF_PREFERRED_MAIL];m=m.concat(this.storeService.getLoginAttributeNames()),this.userManager.findRichUsersWithAttributes(this.searchCtrl.value,m).subscribe(I=>{this.identities=this.filterIdentities(I),this.loading=!1},()=>{this.loading=!1})}onKeyInput(m){"Enter"===m.key&&this.onSearchByString()}filterIdentities(m){return m.filter(this.isService?I=>!I.serviceUser:I=>I.serviceUser)}}return r.\u0275fac=function(m){return new(m||r)(t.Y36(C.so),t.Y36(C.WI),t.Y36(u.Fv),t.Y36(S.d6),t.Y36(S.V6),t.Y36(v.sK))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-connect-identity-dialog"]],decls:25,vars:25,consts:[[3,"keyup"],["mat-dialog-title",""],["mat-dialog-content","",1,"dialog-container"],[1,"mr-2","search-field","no-border-mat-input"],["matInput","","autocomplete","false",3,"placeholder","formControl"],["color","primary","mat-flat-button","",1,"mr-2","search-btn",3,"disabled","click"],[4,"ngIf"],["alert_type","info",4,"ngIf"],["alert_type","warn",4,"ngIf"],["class","ml-auto mr-auto",4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["color","accent","mat-flat-button","",1,"ml-2",3,"disabled","click"],[3,"displayedColumns","selection","tableId","disableRouting","users",4,"ngIf"],[3,"displayedColumns","selection","tableId","disableRouting","users"],["alert_type","info"],["alert_type","warn"],[1,"ml-auto","mr-auto"]],template:function(m,I){1&m&&(t.TgZ(0,"div",0),t.NdJ("keyup",function(B){return I.onKeyInput(B)}),t.TgZ(1,"h1",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",2)(5,"mat-form-field",3),t._UZ(6,"input",4),t.ALo(7,"translate"),t.TgZ(8,"mat-error"),t._uU(9),t.ALo(10,"translate"),t.qZA()(),t.TgZ(11,"button",5),t.NdJ("click",function(){return I.onSearchByString()}),t.TgZ(12,"mat-icon"),t._uU(13,"search"),t.qZA()(),t.YNc(14,A,2,1,"div",6),t.YNc(15,c,3,3,"perun-web-apps-alert",7),t.YNc(16,p,3,3,"perun-web-apps-alert",8),t.qZA(),t.YNc(17,a,1,0,"mat-spinner",9),t.TgZ(18,"div",10)(19,"button",11),t.NdJ("click",function(){return I.onCancel()}),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"button",12),t.NdJ("click",function(){return I.onAdd()}),t._uU(23),t.ALo(24,"translate"),t.qZA()()()),2&m&&(t.Tol(I.theme),t.xp6(2),t.Oqu(t.lcZ(3,15,"DIALOGS.CONNECT_IDENTITY.TITLE_"+I.target)),t.xp6(4),t.s9C("placeholder",t.lcZ(7,17,"DIALOGS.CONNECT_IDENTITY.SEARCH")),t.Q6J("formControl",I.searchCtrl),t.xp6(3),t.hij(" ",t.lcZ(10,19,"DIALOGS.CONNECT_IDENTITY.EMPTY_SEARCH_MESSAGE")," "),t.xp6(2),t.Q6J("disabled",I.loading),t.xp6(3),t.Q6J("ngIf",!I.loading),t.xp6(1),t.Q6J("ngIf",!I.firstSearchDone),t.xp6(1),t.Q6J("ngIf",!I.loading&&I.firstSearchDone&&0===I.identities.length),t.xp6(1),t.Q6J("ngIf",I.loading),t.xp6(3),t.hij(" ",t.lcZ(21,21,"DIALOGS.CONNECT_IDENTITY.CANCEL")," "),t.xp6(2),t.Q6J("disabled",0===I.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(24,23,"DIALOGS.CONNECT_IDENTITY.CONNECT")," "))},dependencies:[E.O5,R.TO,R.KE,N.Nt,l.Fj,l.JJ,l.oH,M.Hw,L.lW,C.uh,C.xY,C.H8,U.Ou,D.w,h.C,v.X$],styles:[".search-field[_ngcontent-%COMP%]{width:300px}.search-btn[_ngcontent-%COMP%]{width:50px}"]}),r})()},94814:(x,P,n)=>{n.d(P,{B:()=>h});var C=n(32105),u=n(65412),S=n(35382),s=n(30671),e=n(94650),b=n(89383),l=n(36895),t=n(4859),v=n(98380),E=n(31359);function R(f,A){1&f&&e._UZ(0,"th",13)}function N(f,A){if(1&f&&(e.TgZ(0,"td",14),e._uU(1),e.ALo(2,"userFullName"),e.qZA()),2&f){const c=A.$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,c))}}function M(f,A){1&f&&e._UZ(0,"tr",15)}function L(f,A){1&f&&e._UZ(0,"tr",16)}function U(f,A){1&f&&(e.TgZ(0,"perun-web-apps-alert",17),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&f&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"DIALOGS.DISCONNECT_IDENTITY.WARNING_DISCONNECT_YOURSELF")," "))}function D(f,A){1&f&&(e.TgZ(0,"perun-web-apps-alert",17),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&f&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"DIALOGS.DISCONNECT_IDENTITY.WARNING_LAST_USER")," "))}let h=(()=>{class f{constructor(c,p,a,o,r,d){this.dialogRef=c,this.data=p,this.userManager=a,this.notificator=o,this.translate=r,this.store=d,this.displayedColumns=["name"]}ngOnInit(){let c;this.targetTitle=this.data.targetTitle,this.targetDescription=this.data.targetDescription,this.theme=this.data.theme,this.userId=Number(this.data.userId),this.dataSource=new s.by([this.data.specificUser]),this.isService=this.data.isService,this.isService?(c=this.userId,this.disconnectingSelf=this.dataSource.data[0].id===this.store.getPerunPrincipal().userId):(c=this.dataSource.data[0].id,this.disconnectingSelf=this.userId===this.store.getPerunPrincipal().userId),this.userManager.getUsersBySpecificUser(c).subscribe(p=>{this.disconnectingLastOwner=1===p.length})}onConfirm(){let c,p;this.isService?(c=this.dataSource.data[0].id,p=this.userId):(c=this.userId,p=this.dataSource.data[0].id),this.userManager.removeSpecificUserOwner(c,p).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("DIALOGS.DISCONNECT_IDENTITY.SUCCESS")),this.dialogRef.close(!0)})}onCancel(){this.dialogRef.close(!1)}}return f.\u0275fac=function(c){return new(c||f)(e.Y36(u.so),e.Y36(u.WI),e.Y36(C.Fv),e.Y36(S.V6),e.Y36(b.sK),e.Y36(S.d6))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-disconnect-identity-dialog"]],decls:26,vars:23,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"font-weight-bold"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["class","font-weight-bolder","mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["alert_type","warn",4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["color","warn","mat-flat-button","",1,"ml-2",3,"click"],["mat-header-cell",""],["mat-cell",""],["mat-header-row","",1,"font-weight-bolder"],["mat-row",""],["alert_type","warn"]],template:function(c,p){1&c&&(e.TgZ(0,"h1",0),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"div")(4,"div",1)(5,"p"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"div",2),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"table",3),e.ynx(12,4),e.YNc(13,R,1,0,"th",5),e.YNc(14,N,3,3,"td",6),e.BQk(),e.YNc(15,M,1,0,"tr",7),e.YNc(16,L,1,0,"tr",8),e.qZA(),e.YNc(17,U,3,3,"perun-web-apps-alert",9),e.YNc(18,D,3,3,"perun-web-apps-alert",9),e.qZA(),e.TgZ(19,"div",10)(20,"button",11),e.NdJ("click",function(){return p.onCancel()}),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.TgZ(23,"button",12),e.NdJ("click",function(){return p.onConfirm()}),e._uU(24),e.ALo(25,"translate"),e.qZA()()()),2&c&&(e.xp6(1),e.Oqu(e.lcZ(2,13,"DIALOGS.DISCONNECT_IDENTITY.TITLE_"+p.targetTitle)),e.xp6(2),e.Tol(p.theme),e.xp6(3),e.Oqu(e.lcZ(7,15,"DIALOGS.DISCONNECT_IDENTITY.DESCRIPTION_"+p.targetDescription)),e.xp6(3),e.hij(" ",e.lcZ(10,17,"DIALOGS.DISCONNECT_IDENTITY.ASK")," "),e.xp6(2),e.Q6J("dataSource",p.dataSource),e.xp6(4),e.Q6J("matHeaderRowDef",p.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",p.displayedColumns),e.xp6(1),e.Q6J("ngIf",p.disconnectingSelf),e.xp6(1),e.Q6J("ngIf",p.disconnectingLastOwner),e.xp6(3),e.hij(" ",e.lcZ(22,19,"DIALOGS.DISCONNECT_IDENTITY.CANCEL")," "),e.xp6(3),e.hij(" ",e.lcZ(25,21,"DIALOGS.DISCONNECT_IDENTITY.REMOVE")," "))},dependencies:[l.O5,t.lW,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,u.uh,u.xY,u.H8,v.w,b.X$,E.d]}),f})()},29862:(x,P,n)=>{n.d(P,{x:()=>D});var C=n(32105),u=n(65412),S=n(35382),s=n(24006),e=n(94650),b=n(89383),l=n(36895),t=n(59549),v=n(284),E=n(4859);function R(h,f){1&h&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&h&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"DIALOGS.EDIT_USER.ERROR_LENGTH")))}function N(h,f){1&h&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&h&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"DIALOGS.EDIT_USER.ERROR_LENGTH")))}function M(h,f){1&h&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&h&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"DIALOGS.EDIT_USER.ERROR_FIRST_NAME")))}function L(h,f){1&h&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&h&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"DIALOGS.EDIT_USER.ERROR_LENGTH")))}function U(h,f){1&h&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&h&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"DIALOGS.EDIT_USER.ERROR_LAST_NAME")))}let D=(()=>{class h{constructor(A,c,p,a,o){this.dialogRef=A,this.data=c,this.userService=p,this.notificator=a,this.translateService=o,this.loading=!1}ngOnInit(){this.theme=this.data.theme,this.titleBefore=new s.p4(this.data.user.titleBefore,[s.kI.pattern(".*[\\S]+.*"),s.kI.maxLength(129)]),this.titleAfter=new s.p4(this.data.user.titleAfter,[s.kI.pattern(".*[\\S]+.*"),s.kI.maxLength(129)]),this.firstName=new s.p4(this.data.user.firstName,[s.kI.required,s.kI.pattern(".*[\\S]+.*"),s.kI.maxLength(129)]),this.middleName=new s.p4(this.data.user.middleName,[s.kI.pattern(".*[\\S]+.*"),s.kI.maxLength(129)]),this.lastName=new s.p4(this.data.user.lastName,[s.kI.required,s.kI.pattern(".*[\\S]+.*"),s.kI.maxLength(129)])}onCancel(){this.dialogRef.close(!1)}onSave(){this.loading=!0,this.data.user.titleBefore=this.titleBefore.value,this.data.user.titleAfter=this.titleAfter.value,this.data.user.firstName=this.firstName.value,this.data.user.middleName=this.middleName.value,this.data.user.lastName=this.lastName.value,this.userService.updateUser({user:this.data.user}).subscribe(()=>{this.translateService.get("DIALOGS.EDIT_USER.SUCCESS").subscribe(A=>{this.notificator.showSuccess(A),this.dialogRef.close(!0)})},()=>this.loading=!1)}}return h.\u0275fac=function(A){return new(A||h)(e.Y36(u.so),e.Y36(u.WI),e.Y36(C.Fv),e.Y36(S.V6),e.Y36(b.sK))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-edit-user-dialog"]],decls:32,vars:38,consts:[[1,"mat-dialog-title"],["mat-dialog-content","",1,"dialog-container"],["matInput","",3,"formControl","placeholder"],[4,"ngIf"],["matInput","","data-cy","user-first-name-input","required","",3,"placeholder","formControl"],["matInput","","required","",3,"formControl","placeholder"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["color","accent","data-cy","user-save-button","mat-flat-button","",1,"ml-2",3,"disabled","click"]],template:function(A,c){1&A&&(e.TgZ(0,"div")(1,"h1",0),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",1)(5,"mat-form-field"),e._UZ(6,"input",2),e.ALo(7,"translate"),e.YNc(8,R,3,3,"mat-error",3),e.qZA(),e.TgZ(9,"mat-form-field"),e._UZ(10,"input",2),e.ALo(11,"translate"),e.YNc(12,N,3,3,"mat-error",3),e.qZA(),e.TgZ(13,"mat-form-field"),e._UZ(14,"input",4),e.ALo(15,"translate"),e.YNc(16,M,3,3,"mat-error",3),e.qZA(),e.TgZ(17,"mat-form-field"),e._UZ(18,"input",2),e.ALo(19,"translate"),e.YNc(20,L,3,3,"mat-error",3),e.qZA(),e.TgZ(21,"mat-form-field"),e._UZ(22,"input",5),e.ALo(23,"translate"),e.YNc(24,U,3,3,"mat-error",3),e.qZA()(),e.TgZ(25,"div",6)(26,"button",7),e.NdJ("click",function(){return c.onCancel()}),e._uU(27),e.ALo(28,"translate"),e.qZA(),e.TgZ(29,"button",8),e.NdJ("click",function(){return c.onSave()}),e._uU(30),e.ALo(31,"translate"),e.qZA()()()),2&A&&(e.Tol(c.theme),e.xp6(2),e.Oqu(e.lcZ(3,22,"DIALOGS.EDIT_USER.DIALOG_TITLE")),e.xp6(4),e.s9C("placeholder",e.lcZ(7,24,"DIALOGS.EDIT_USER.TITLE_BEFORE")),e.Q6J("formControl",c.titleBefore),e.xp6(2),e.Q6J("ngIf",c.titleBefore.invalid),e.xp6(2),e.s9C("placeholder",e.lcZ(11,26,"DIALOGS.EDIT_USER.TITLE_AFTER")),e.Q6J("formControl",c.titleAfter),e.xp6(2),e.Q6J("ngIf",c.titleAfter.invalid),e.xp6(2),e.s9C("placeholder",e.lcZ(15,28,"DIALOGS.EDIT_USER.FIRST_NAME")),e.Q6J("formControl",c.firstName),e.xp6(2),e.Q6J("ngIf",c.firstName.invalid),e.xp6(2),e.s9C("placeholder",e.lcZ(19,30,"DIALOGS.EDIT_USER.MIDDLE_NAME")),e.Q6J("formControl",c.middleName),e.xp6(2),e.Q6J("ngIf",c.middleName.invalid),e.xp6(2),e.s9C("placeholder",e.lcZ(23,32,"DIALOGS.EDIT_USER.LAST_NAME")),e.Q6J("formControl",c.lastName),e.xp6(2),e.Q6J("ngIf",c.lastName.invalid),e.xp6(3),e.hij(" ",e.lcZ(28,34,"DIALOGS.EDIT_USER.CANCEL")," "),e.xp6(2),e.Q6J("disabled",c.loading||c.firstName.invalid||c.lastName.invalid||c.titleBefore.invalid||c.titleAfter.invalid||c.middleName.invalid),e.xp6(1),e.hij(" ",e.lcZ(31,36,"DIALOGS.EDIT_USER.SAVE")," "))},dependencies:[l.O5,t.TO,t.KE,v.Nt,s.Fj,s.JJ,s.Q7,s.oH,E.lW,u.xY,u.H8,b.X$]}),h})()},98973:(x,P,n)=>{n.d(P,{u:()=>L});var C=n(35382),u=n(94650),S=n(94364),s=n(36895),e=n(3848),b=n(19191),l=n(12651),t=n(89383);function v(U,D){1&U&&(u._uU(0),u.ALo(1,"translate")),2&U&&u.hij(" ",u.lcZ(1,1,"ADMIN_USER.ENTITY")," ")}function E(U,D){if(1&U&&u._UZ(0,"app-one-entity-attribute-page",5),2&U){const h=u.oxw();u.Q6J("entityId",h.userId)("entity","user")}}function R(U,D){1&U&&(u._uU(0),u.ALo(1,"translate"),u.ALo(2,"translate")),2&U&&u.AsE(" ",u.lcZ(1,2,"ADMIN_USER.ENTITY")," - ",u.lcZ(2,4,"FACILITY_DETAIL.ENTITY")," ")}function N(U,D){if(1&U&&u._UZ(0,"app-two-entity-attribute-page",6),2&U){const h=u.oxw(2);u.Q6J("firstEntity","user")("firstEntityId",h.userId)("secondEntity","facility")}}function M(U,D){1&U&&(u.TgZ(0,"mat-tab"),u.YNc(1,R,3,6,"ng-template",2),u.YNc(2,N,1,3,"ng-template",3),u.qZA())}let L=(()=>{class U{constructor(h,f,A){this.route=h,this.store=f,this.authResolver=A}ngOnInit(){this.route.parent.params.subscribe(h=>{this.userId=Number(h.userId),this.userId||(this.userId=this.store.getPerunPrincipal().userId),this.userFacilityAttAuth=this.authResolver.isAuthorized("getAssignedFacilities_User_policy",[{id:this.userId,beanName:"User"}])})}}return U.\u0275fac=function(h){return new(h||U)(u.Y36(S.gz),u.Y36(C.d6),u.Y36(C.x4))},U.\u0275cmp=u.Xpm({type:U,selectors:[["app-user-settings-attributes"]],hostVars:2,hostBindings:function(h,f){2&h&&u.ekj("router-component",f.true)},decls:8,vars:4,consts:[[1,"page-subtitle"],[1,"mb-2"],["matTabLabel",""],["matTabContent",""],[4,"ngIf"],[3,"entityId","entity"],[3,"firstEntity","firstEntityId","secondEntity"]],template:function(h,f){1&h&&(u.TgZ(0,"h1",0),u._uU(1),u.ALo(2,"translate"),u.qZA(),u.TgZ(3,"mat-tab-group")(4,"mat-tab",1),u.YNc(5,v,2,3,"ng-template",2),u.YNc(6,E,1,2,"ng-template",3),u.qZA(),u.YNc(7,M,3,0,"mat-tab",4),u.qZA()),2&h&&(u.xp6(1),u.Oqu(u.lcZ(2,2,"USER_DETAIL.SETTINGS.ATTRIBUTES.TITLE")),u.xp6(6),u.Q6J("ngIf",f.userFacilityAttAuth))},dependencies:[s.O5,e.SP,e.uD,e.uX,e.Vc,b.Y,l.t,t.X$]}),U})()},85985:(x,P,n)=>{n.d(P,{u:()=>c});var C=n(35382),u=n(32105),S=n(10036),s=n(94650),e=n(94364),b=n(36895),l=n(51572),t=n(24179),v=n(96214),E=n(7434),R=n(89383);function N(p,a){1&p&&(s.TgZ(0,"h1",6),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&p&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"SHARED.COMPONENTS.USER_DETAIL.GROUPS.YOU_ARE_MEMBER"),"\n"))}function M(p,a){1&p&&(s.TgZ(0,"h1",6),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&p&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"SHARED.COMPONENTS.USER_DETAIL.GROUPS.USER_IS_MEMBER"),"\n"))}function L(p,a){1&p&&s._UZ(0,"mat-spinner",7)}const U=function(){return["id","vo","name","description"]};function D(p,a){if(1&p&&s._UZ(0,"perun-web-apps-groups-list",8),2&p){const o=s.oxw();s.Q6J("disableMembers",!1)("groups",o.membersGroups)("displayedColumns",s.DdM(5,U))("filter",o.memberFilterValue)("tableId",o.tableId)}}function h(p,a){1&p&&s._UZ(0,"mat-spinner",7)}function f(p,a){if(1&p&&s._UZ(0,"perun-web-apps-groups-list",8),2&p){const o=s.oxw(2);s.Q6J("disableMembers",!1)("groups",o.adminsGroups)("displayedColumns",s.DdM(5,U))("filter",o.adminFilterValue)("tableId",o.adminTableId)}}function A(p,a){if(1&p){const o=s.EpF();s.TgZ(0,"div",9)(1,"h1",6),s._uU(2),s.ALo(3,"translate"),s.qZA(),s.TgZ(4,"perun-web-apps-refresh-button",1),s.NdJ("refresh",function(){s.CHM(o);const d=s.oxw();return s.KtG(d.refreshAdminTable())}),s.qZA(),s.TgZ(5,"perun-web-apps-immediate-filter",2),s.NdJ("filter",function(d){s.CHM(o);const m=s.oxw();return s.KtG(m.adminFilter(d))}),s.qZA(),s.YNc(6,h,1,0,"mat-spinner",3),s.YNc(7,f,1,6,"perun-web-apps-groups-list",4),s.qZA()}if(2&p){const o=s.oxw();s.xp6(2),s.hij(" ",s.lcZ(3,4,"SHARED.COMPONENTS.USER_DETAIL.GROUPS.USER_IS_ADMIN")," "),s.xp6(3),s.Q6J("placeholder","SHARED_LIB.PERUN.ORGANIZATIONS.FILTER"),s.xp6(1),s.Q6J("ngIf",o.adminRefresh),s.xp6(1),s.Q6J("ngIf",!o.adminRefresh)}}let c=(()=>{class p{constructor(o,r,d,m,I){this.usersService=o,this.memberService=r,this.groupService=d,this.store=m,this.route=I,this.memberFilterValue="",this.adminFilterValue="",this.vos=[],this.membersGroups=[],this.adminsGroups=[],this.tableId=S.KE,this.adminTableId=S.Sb}ngOnInit(){(this.showPrincipal=this.route.snapshot.data.showPrincipal)?this.userId=this.store.getPerunPrincipal().user.id:this.route.parent.params.subscribe(o=>this.userId=Number(o.userId)),this.refreshAdminTable(),this.refreshMemberTable()}memberFilter(o){this.memberFilterValue=o}adminFilter(o){this.adminFilterValue=o}refreshAdminTable(){this.adminRefresh=!0,this.usersService.getGroupsWhereUserIsAdmin(this.userId).subscribe(o=>{this.adminsGroups=o,this.adminRefresh=!1})}refreshMemberTable(){this.memberRefresh=!0,this.membersGroups=[],this.usersService.getVosWhereUserIsMember(this.userId).subscribe(o=>{this.vos=o;for(const r of this.vos)this.memberService.getMemberByUser(r.id,this.userId).subscribe(d=>{this.groupService.getMemberGroups(d.id).subscribe(m=>{this.membersGroups=this.membersGroups.concat(m),this.vos.indexOf(r)===this.vos.length-1&&(this.memberRefresh=!1)})});0===o.length&&(this.memberRefresh=!1)})}}return p.\u0275fac=function(o){return new(o||p)(s.Y36(u.Fv),s.Y36(u.uq),s.Y36(u.ff),s.Y36(C.d6),s.Y36(e.gz))},p.\u0275cmp=s.Xpm({type:p,selectors:[["app-user-groups"]],hostVars:2,hostBindings:function(o,r){2&o&&s.ekj("router-component",r.true)},decls:7,vars:6,consts:[["class","page-subtitle",4,"ngIf"],[3,"refresh"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"disableMembers","groups","displayedColumns","filter","tableId",4,"ngIf"],["class","mt-5",4,"ngIf"],[1,"page-subtitle"],[1,"ml-auto","mr-auto"],[3,"disableMembers","groups","displayedColumns","filter","tableId"],[1,"mt-5"]],template:function(o,r){1&o&&(s.YNc(0,N,3,3,"h1",0),s.YNc(1,M,3,3,"h1",0),s.TgZ(2,"perun-web-apps-refresh-button",1),s.NdJ("refresh",function(){return r.refreshMemberTable()}),s.qZA(),s.TgZ(3,"perun-web-apps-immediate-filter",2),s.NdJ("filter",function(m){return r.memberFilter(m)}),s.qZA(),s.YNc(4,L,1,0,"mat-spinner",3),s.YNc(5,D,1,6,"perun-web-apps-groups-list",4),s.YNc(6,A,8,6,"div",5)),2&o&&(s.Q6J("ngIf",r.showPrincipal),s.xp6(1),s.Q6J("ngIf",!r.showPrincipal),s.xp6(2),s.Q6J("placeholder","SHARED_LIB.PERUN.ORGANIZATIONS.FILTER"),s.xp6(1),s.Q6J("ngIf",r.memberRefresh),s.xp6(1),s.Q6J("ngIf",!r.memberRefresh),s.xp6(1),s.Q6J("ngIf",!r.showPrincipal))},dependencies:[b.O5,l.Ou,t.W,v.t,E.L,R.X$]}),p})()},74837:(x,P,n)=>{n.d(P,{j:()=>A});var C=n(32105),u=n(35382),S=n(10036),s=n(94650),e=n(94364),b=n(36895),l=n(51572),t=n(87831),v=n(96214),E=n(7434),R=n(89383);function N(c,p){1&c&&(s.TgZ(0,"h1",6),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&c&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"SHARED_LIB.PERUN.ORGANIZATIONS.YOU_ARE_MEMBER"),"\n"))}function M(c,p){1&c&&(s.TgZ(0,"h1",6),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&c&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"SHARED_LIB.PERUN.ORGANIZATIONS.USER_IS_MEMBER"),"\n"))}function L(c,p){1&c&&s._UZ(0,"mat-spinner",7)}function U(c,p){if(1&c&&s._UZ(0,"perun-web-apps-vos-list",8),2&c){const a=s.oxw();s.Q6J("displayedColumns",a.displayedColumns)("tableId",a.memberTableId)("filterValue",a.memberFilterValue)("vos",a.vosWhereIsMember)}}function D(c,p){1&c&&s._UZ(0,"mat-spinner",7)}function h(c,p){if(1&c&&s._UZ(0,"perun-web-apps-vos-list",8),2&c){const a=s.oxw(2);s.Q6J("displayedColumns",a.displayedColumns)("tableId",a.adminTableId)("filterValue",a.adminFilterValue)("vos",a.vosWhereIsAdmin)}}function f(c,p){if(1&c){const a=s.EpF();s.TgZ(0,"div",9)(1,"h1",6),s._uU(2),s.ALo(3,"translate"),s.qZA(),s.TgZ(4,"perun-web-apps-refresh-button",1),s.NdJ("refresh",function(){s.CHM(a);const r=s.oxw();return s.KtG(r.refreshAdminTable())}),s.qZA(),s.TgZ(5,"perun-web-apps-immediate-filter",2),s.NdJ("filter",function(r){s.CHM(a);const d=s.oxw();return s.KtG(d.applyAdminFilter(r))}),s.qZA(),s.YNc(6,D,1,0,"mat-spinner",3),s.YNc(7,h,1,4,"perun-web-apps-vos-list",4),s.qZA()}if(2&c){const a=s.oxw();s.xp6(2),s.Oqu(s.lcZ(3,4,"SHARED_LIB.PERUN.ORGANIZATIONS.USER_IS_ADMIN")),s.xp6(3),s.Q6J("placeholder","SHARED_LIB.PERUN.ORGANIZATIONS.FILTER"),s.xp6(1),s.Q6J("ngIf",a.adminRefresh),s.xp6(1),s.Q6J("ngIf",!a.adminRefresh)}}let A=(()=>{class c{constructor(a,o,r,d){this.usersService=a,this.authResolver=o,this.store=r,this.route=d,this.adminFilterValue="",this.memberFilterValue="",this.displayedColumns=["id","name"],this.adminTableId=S.YF,this.memberTableId=S.gc}ngOnInit(){(this.isMyProfile=this.route.snapshot.data.showPrincipal)?this.userId=this.store.getPerunPrincipal().user.id:this.route.parent.params.subscribe(a=>this.userId=Number(a.userId)),this.refreshAdminTable(),this.refreshMemberTable()}refreshMemberTable(){this.memberRefresh=!0,this.usersService.getVosWhereUserIsMember(this.userId).subscribe(a=>{this.vosWhereIsMember=a,this.memberRefresh=!1},()=>this.memberRefresh=!1)}refreshAdminTable(){this.adminRefresh=!0,this.usersService.getVosWhereUserIsAdmin(this.userId).subscribe(a=>{this.vosWhereIsAdmin=a,this.adminRefresh=!1},()=>this.adminRefresh=!1)}applyMemberFilter(a){this.memberFilterValue=a}applyAdminFilter(a){this.adminFilterValue=a}}return c.\u0275fac=function(a){return new(a||c)(s.Y36(C.Fv),s.Y36(u.x4),s.Y36(u.d6),s.Y36(e.gz))},c.\u0275cmp=s.Xpm({type:c,selectors:[["app-user-organizations"]],hostVars:2,hostBindings:function(a,o){2&a&&s.ekj("router-component",o.true)},decls:7,vars:6,consts:[["class","page-subtitle",4,"ngIf"],[3,"refresh"],[3,"placeholder","filter"],["class","mr-auto ml-auto",4,"ngIf"],[3,"displayedColumns","tableId","filterValue","vos",4,"ngIf"],["class","mt-5",4,"ngIf"],[1,"page-subtitle"],[1,"mr-auto","ml-auto"],[3,"displayedColumns","tableId","filterValue","vos"],[1,"mt-5"]],template:function(a,o){1&a&&(s.YNc(0,N,3,3,"h1",0),s.YNc(1,M,3,3,"h1",0),s.TgZ(2,"perun-web-apps-refresh-button",1),s.NdJ("refresh",function(){return o.refreshMemberTable()}),s.qZA(),s.TgZ(3,"perun-web-apps-immediate-filter",2),s.NdJ("filter",function(d){return o.applyMemberFilter(d)}),s.qZA(),s.YNc(4,L,1,0,"mat-spinner",3),s.YNc(5,U,1,4,"perun-web-apps-vos-list",4),s.YNc(6,f,8,6,"div",5)),2&a&&(s.Q6J("ngIf",o.isMyProfile),s.xp6(1),s.Q6J("ngIf",!o.isMyProfile),s.xp6(2),s.Q6J("placeholder","SHARED_LIB.PERUN.ORGANIZATIONS.FILTER"),s.xp6(1),s.Q6J("ngIf",o.memberRefresh),s.xp6(1),s.Q6J("ngIf",!o.memberRefresh),s.xp6(1),s.Q6J("ngIf",!o.isMyProfile))},dependencies:[b.O5,l.Ou,t.Z,v.t,E.L,R.X$]}),c})()},17755:(x,P,n)=>{n.d(P,{Z:()=>a});var C=n(32105),u=n(30671),S=n(35382),s=n(64080),e=n(9244),b=n(74281),l=n(94650),t=n(94364),v=n(65412),E=n(36895),R=n(97392),N=n(4859),M=n(73546),L=n(71135),U=n(89383);function D(o,r){1&o&&l._UZ(0,"th",12)}function h(o,r){if(1&o&&(l.TgZ(0,"td",13),l._uU(1),l.qZA()),2&o){const d=r.$implicit;l.xp6(1),l.hij(" ",d.displayName,": ")}}function f(o,r){1&o&&l._UZ(0,"th",12)}function A(o,r){if(1&o){const d=l.EpF();l.TgZ(0,"td",14),l._uU(1),l.TgZ(2,"button",15),l.NdJ("click",function(){l.CHM(d);const I=l.oxw(2);return l.KtG(I.changeEmail())}),l.TgZ(3,"mat-icon"),l._uU(4,"edit"),l.qZA()()()}if(2&o){const d=r.$implicit;l.xp6(1),l.hij(" ",d.value," ")}}function c(o,r){1&o&&l._UZ(0,"tr",16)}function p(o,r){if(1&o&&(l.TgZ(0,"div",2)(1,"mat-card",3)(2,"mat-card-header")(3,"mat-card-title")(4,"h1",4),l._uU(5),l.ALo(6,"translate"),l.qZA()()(),l.TgZ(7,"mat-card-content")(8,"table",5),l.ynx(9,6),l.YNc(10,D,1,0,"th",7),l.YNc(11,h,2,1,"td",8),l.BQk(),l.ynx(12,9),l.YNc(13,f,1,0,"th",7),l.YNc(14,A,5,1,"td",10),l.BQk(),l.YNc(15,c,1,0,"tr",11),l.qZA()()()()),2&o){const d=l.oxw();l.xp6(5),l.Oqu(l.lcZ(6,3,"USER_DETAIL.OVERVIEW.GENERAL_SETTINGS")),l.xp6(3),l.Q6J("dataSource",d.mailDataSource),l.xp6(7),l.Q6J("matRowDefColumns",d.displayedColumns)}}let a=(()=>{class o{constructor(d,m,I,Z,B){this.userService=d,this.attributeService=m,this.storeService=I,this.route=Z,this.dialog=B,this.navItems=[],this.isServiceUser=!1,this.displayedColumns=["name","value"],this.inMyProfile=!1}ngOnInit(){this.route.params.subscribe(d=>{d.userId?this.userService.getUserById(Number(d.userId)).subscribe(m=>{this.user=m,this.isServiceUser=m.serviceUser,this.initNavItems()}):(this.inMyProfile=!0,this.userID=this.storeService.getPerunPrincipal().user.id,this.attributeService.getUserAttributeByName(this.userID,s.r.USER_DEF_PREFERRED_MAIL).subscribe(m=>{this.preferredMail=m,this.handleMailNotDefined(),this.mailDataSource=new u.by([this.preferredMail]),this.initNavItems()}))})}changeEmail(){const d=(0,e.kZ)();d.width="350px",d.data={userId:this.userID},this.dialog.open(b.gr,d).afterClosed().subscribe(I=>{I&&this.attributeService.getUserAttributeByName(this.userID,s.r.USER_DEF_PREFERRED_MAIL).subscribe(Z=>{this.preferredMail=Z,this.handleMailNotDefined(),this.mailDataSource=new u.by([this.preferredMail])})})}handleMailNotDefined(){null==this.preferredMail&&(this.preferredMail={id:-1,beanName:"Attribute",displayName:(0,e.Cz)(s.r.USER_DEF_PREFERRED_MAIL.split(":").pop()),value:new Object("-")})}initNavItems(){this.navItems=[{cssIcon:"perun-vo",url:"organizations",label:"MENU_ITEMS.ADMIN.ORGANIZATIONS",style:"user-btn"},{cssIcon:"perun-group",url:"groups",label:"MENU_ITEMS.ADMIN.GROUPS",style:"user-btn"}],window.location.pathname.startsWith("/admin")&&this.navItems.push({cssIcon:"perun-user",url:"accounts",label:"MENU_ITEMS.USER.ACCOUNTS",style:"user-btn"},{cssIcon:"perun-identity",url:"identities",label:"MENU_ITEMS.USER.IDENTITIES",style:"user-btn"},{cssIcon:"perun-facility-white",url:"facilities",label:"MENU_ITEMS.USER.FACILITIES",style:"user-btn"},{cssIcon:"perun-resource",url:"resources",label:"MENU_ITEMS.USER.RESOURCES",style:"user-btn"}),this.navItems.push({cssIcon:"perun-attributes",url:"attributes",label:"MENU_ITEMS.USER.ATTRIBUTES",style:"user-btn"}),this.navItems.push({cssIcon:"perun-roles",url:"roles",label:"MENU_ITEMS.USER.ROLES",style:"user-btn"}),this.navItems.push(this.isServiceUser?{cssIcon:"perun-manager",url:"associated-users",label:"MENU_ITEMS.USER.ASSOCIATED_USERS",style:"user-btn"}:{cssIcon:"perun-service-identity",url:"service-identities",label:"MENU_ITEMS.USER.SERVICE_IDENTITIES",style:"user-btn"}),window.location.pathname.startsWith("/admin")||this.navItems.push({cssIcon:"perun-settings2",url:"settings",label:"MENU_ITEMS.ADMIN.SETTINGS",style:"user-btn"})}}return o.\u0275fac=function(d){return new(d||o)(l.Y36(C.Fv),l.Y36(C.H8),l.Y36(S.d6),l.Y36(t.gz),l.Y36(v.uw))},o.\u0275cmp=l.Xpm({type:o,selectors:[["app-user-overview"]],hostVars:2,hostBindings:function(d,m){2&d&&l.ekj("router-component",m.true)},decls:2,vars:3,consts:[["class","align-cards",4,"ngIf"],[3,"items","size"],[1,"align-cards"],[1,"mat-elevation-z3"],[1,"page-subtitle"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["class","font-weight-bold","mat-cell","",4,"matCellDef"],["matColumnDef","value"],["mat-cell","",4,"matCellDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"font-weight-bold"],["mat-cell",""],["mat-icon-button","",1,"ml-3",3,"click"],["mat-row",""]],template:function(d,m){1&d&&(l.YNc(0,p,16,5,"div",0),l._UZ(1,"perun-web-apps-menu-buttons-field",1)),2&d&&(l.Q6J("ngIf",m.inMyProfile),l.xp6(1),l.Q6J("items",m.navItems)("size","small"))},dependencies:[E.O5,R.Hw,N.lW,u.BZ,u.fO,u.w1,u.Dz,u.nj,u.ge,u.ev,u.Gk,M.a8,M.dk,M.dn,M.n5,L.L,U.X$],styles:[".align-cards[_ngcontent-%COMP%]{margin:1rem;display:inline-block;vertical-align:top}"]}),o})()},6097:(x,P,n)=>{n.d(P,{t:()=>b});var C=n(32105),u=n(35382),S=n(94650),s=n(94364),e=n(34775);let b=(()=>{class l{constructor(v,E,R){this.authzResolverService=v,this.route=E,this.store=R,this.roles=new Map,this.roleNames=[],this.roleFilter=["SELF","GROUPADMIN","VOADMIN","RESOURCEADMIN","FACILITYADMIN","TOPGROUPCREATOR","SPONSORSHIP","SPONSOR","RESOURCESELFSERVICE","VOOBSERVER","RESOURCEOBSERVER","GROUPOBSERVER","TRUSTEDFACILITYADMIN","FACILITYOBSERVER","PERUNADMIN","PERUNOBSERVER","MEMBERSHIP","GROUPMEMBERSHIPMANAGER"]}ngOnInit(){this.outerLoading=!0,this.showDescription=!0,this.route.parent.params.subscribe(v=>{if(v.userId)this.userId=Number(v.userId),this.authzResolverService.getUserRoles(this.userId).subscribe(E=>{this.roleNames=Object.keys(E).map(R=>R.toUpperCase()),this.entityType="USER",this.prepareRoles(E)});else{const E=this.store.getPerunPrincipal();this.userId=E.userId,this.roleNames=Object.keys(E.roles),this.entityType="SELF",this.prepareRoles(E.roles)}})}prepareRoles(v){this.roleNames.forEach(E=>{const R=new Map;Object.keys(v[E]).forEach(M=>{R.set(M,v[E][M])}),this.roles.set(E,R)}),this.roleNames=this.roleNames.filter(E=>!this.roleFilter.includes(E)),this.outerLoading=!1}}return l.\u0275fac=function(v){return new(v||l)(S.Y36(C.Ct),S.Y36(s.gz),S.Y36(u.d6))},l.\u0275cmp=S.Xpm({type:l,selectors:[["app-user-roles"]],hostVars:2,hostBindings:function(v,E){2&v&&S.ekj("router-component",E.true)},decls:1,vars:6,consts:[[3,"outerLoading","roles","roleNames","entityId","showDescription","entityType"]],template:function(v,E){1&v&&S._UZ(0,"app-perun-web-apps-roles-page",0),2&v&&S.Q6J("outerLoading",E.outerLoading)("roles",E.roles)("roleNames",E.roleNames)("entityId",E.userId)("showDescription",E.showDescription)("entityType",E.entityType)},dependencies:[e._]}),l})()},46597:(x,P,n)=>{n.d(P,{d:()=>A});var C=n(10036),u=n(32105),S=n(95017),s=n(9244),e=n(54668),b=n(94814),l=n(35382),t=n(94650),v=n(65412),E=n(94364),R=n(36895),N=n(4859),M=n(51572),L=n(96214),U=n(64877),D=n(89383);function h(c,p){if(1&c&&(t._UZ(0,"app-users-list",6),t.ALo(1,"translate")),2&c){const a=t.oxw();t.Q6J("noUsersFoundLabel",t.lcZ(1,6,"USER_DETAIL.SETTINGS.ASSOCIATED_USERS.NO_ASSOCIATED_USERS"))("disableRouting",a.disableRouting)("displayedColumns",a.displayedColumns)("selection",a.selection)("tableId",a.tableId)("users",a.associatedUsers)}}function f(c,p){1&c&&t._UZ(0,"mat-spinner",7)}let A=(()=>{class c{constructor(a,o,r,d,m){this.dialog=a,this.router=o,this.authResolver=r,this.userManager=d,this.entityStorageService=m,this.loading=!1,this.selection=new S.Ov(!1,[]),this.associatedUsers=[],this.tableId=C.It,this.displayedColumns=["select","id","user","name"]}ngOnInit(){this.loading=!0,this.user=this.entityStorageService.getEntity(),this.userManager.getUsersBySpecificUser(this.user.id).subscribe(a=>{this.associatedUsers=a,this.setAuth(),this.loading=!1})}refreshTable(){this.loading=!0,this.userManager.getUsersBySpecificUser(this.user.id).subscribe(a=>{this.associatedUsers=a,this.selection.clear(),this.loading=!1})}setAuth(){this.addAuth=this.authResolver.isAuthorized("addSpecificUserOwner_User_User_policy",[this.user]),this.removeAuth=this.authResolver.isAuthorized("removeSpecificUserOwner_User_User_policy",[this.user]),this.disableRouting=!this.authResolver.isPerunAdminOrObserver()}onAdd(){const a=(0,s.kZ)();a.width="1250px",a.data={userId:this.user.id,theme:"user-theme",isService:!0,target:"USER"},this.dialog.open(e.l,a).afterClosed().subscribe(r=>{r&&this.refreshTable()})}onRemove(){const a=(0,s.kZ)();a.width="650px",a.data={identities:this.selection.selected,userId:this.user.id,specificUser:this.selection.selected[0],isService:!0,theme:"user-theme",targetTitle:"USER",targetDescription:"SERVICE"},this.dialog.open(b.B,a).afterClosed().subscribe(r=>{r&&(this.authResolver.isAuthorized("getUsersBySpecificUser_User_policy",[this.user])?this.refreshTable():this.router.navigate(["/myProfile"]))})}}return c.\u0275fac=function(a){return new(a||c)(t.Y36(v.uw),t.Y36(E.F0),t.Y36(l.x4),t.Y36(u.Fv),t.Y36(l.fb))},c.\u0275cmp=t.Xpm({type:c,selectors:[["app-user-settings-associated-users"]],decls:13,vars:12,consts:[[1,"page-subtitle"],[3,"refresh"],["color","accent","mat-flat-button","",1,"mr-2","action-button",3,"click"],["color","warn","mat-flat-button","",1,"mr-2",3,"disabled","click"],[3,"noUsersFoundLabel","disableRouting","displayedColumns","selection","tableId","users",4,"ngIf"],["class","mr-auto ml-auto",4,"ngIf"],[3,"noUsersFoundLabel","disableRouting","displayedColumns","selection","tableId","users"],[1,"mr-auto","ml-auto"]],template:function(a,o){1&a&&(t.TgZ(0,"div")(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"perun-web-apps-refresh-button",1),t.NdJ("refresh",function(){return o.refreshTable()}),t.qZA(),t.TgZ(5,"button",2),t.NdJ("click",function(){return o.onAdd()}),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"button",3),t.NdJ("click",function(){return o.onRemove()}),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.YNc(11,h,2,8,"app-users-list",4),t.qZA(),t.YNc(12,f,1,0,"mat-spinner",5)),2&a&&(t.xp6(2),t.Oqu(t.lcZ(3,6,"USER_DETAIL.SETTINGS.ASSOCIATED_USERS.TITLE")),t.xp6(4),t.hij(" ",t.lcZ(7,8,"USER_DETAIL.SETTINGS.ASSOCIATED_USERS.ADD")," "),t.xp6(2),t.Q6J("disabled",0===o.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(10,10,"USER_DETAIL.SETTINGS.ASSOCIATED_USERS.REMOVE")," "),t.xp6(2),t.Q6J("ngIf",!o.loading),t.xp6(1),t.Q6J("ngIf",o.loading))},dependencies:[R.O5,N.lW,M.Ou,L.t,U.C,D.X$]}),c})()},97453:(x,P,n)=>{n.d(P,{R:()=>p});var C=n(95017),u=n(32105),S=n(10036),s=n(9244),e=n(54668),b=n(94814),l=n(35382),t=n(94650),v=n(94364),E=n(65412),R=n(36895),N=n(4859),M=n(51572),L=n(96214),U=n(64877),D=n(89383);function h(a,o){if(1&a){const r=t.EpF();t.TgZ(0,"button",6),t.NdJ("click",function(){t.CHM(r);const m=t.oxw();return t.KtG(m.onAdd())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&a&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"USER_DETAIL.SETTINGS.SERVICE_IDENTITIES.CREATE"),"\n"))}function f(a,o){if(1&a){const r=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){t.CHM(r);const m=t.oxw();return t.KtG(m.onRemove())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&a){const r=t.oxw();t.Q6J("disabled",0===r.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(2,2,"USER_DETAIL.SETTINGS.SERVICE_IDENTITIES.DELETE"),"\n")}}function A(a,o){1&a&&t._UZ(0,"mat-spinner",8)}function c(a,o){if(1&a&&(t._UZ(0,"app-users-list",9),t.ALo(1,"translate")),2&a){const r=t.oxw();t.Q6J("noUsersFoundLabel",t.lcZ(1,6,"USER_DETAIL.SETTINGS.SERVICE_IDENTITIES.NO_IDENTITIES"))("displayedColumns",r.displayedColumns)("selection",r.selection)("tableId",r.tableId)("routeToAdmin",r.routeToAdminSection)("users",r.identities)}}let p=(()=>{class a{constructor(r,d,m,I,Z,B){this.route=r,this.dialog=d,this.router=m,this.userManager=I,this.authResolver=Z,this.store=B,this.loading=!1,this.selection=new C.Ov(!1,[]),this.identities=[],this.tableId=S.Iz,this.displayedColumns=["select","id","user","name"],this.routeToAdminSection=!0,this.targetTitle="SERVICE",this.targetDescription="SERVICE"}ngOnInit(){this.loading=!0,this.route.parent.params.subscribe(r=>{this.userId=Number(r.userId),this.userId||(this.targetTitle="SERVICE",this.targetDescription="SELF",this.userId=this.store.getPerunPrincipal().userId,this.routeToAdminSection=!1),this.setAuthRights(),this.refreshTable()})}refreshTable(){this.loading=!0,this.userManager.getSpecificUsersByUser(this.userId).subscribe(r=>{this.identities=r,this.selection.clear(),this.loading=!1})}setAuthRights(){this.addIdentity=this.authResolver.isPerunAdmin(),this.removeIdentity=this.authResolver.isAuthorized("removeSpecificUserOwner_User_User_policy",[{id:this.userId,beanName:"User"}])}onAdd(){const r=(0,s.kZ)();r.width="1250px",r.data={userId:this.userId,theme:"user-theme",isService:!1,target:this.targetTitle},this.dialog.open(e.l,r).afterClosed().subscribe(m=>{m&&this.refreshTable()})}onRemove(){const r=(0,s.kZ)();r.width="650px",r.data={identities:this.selection.selected,userId:this.userId,specificUser:this.selection.selected[0],theme:"user-theme",targetTitle:this.targetTitle,targetDescription:this.targetDescription},this.dialog.open(b.B,r).afterClosed().subscribe(m=>{m&&this.refreshTable()})}}return a.\u0275fac=function(r){return new(r||a)(t.Y36(v.gz),t.Y36(E.uw),t.Y36(v.F0),t.Y36(u.Fv),t.Y36(l.x4),t.Y36(l.d6))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-user-settings-service-identities"]],decls:8,vars:7,consts:[[1,"page-subtitle"],[3,"refresh"],["color","accent","class","mr-2 action-button","mat-flat-button","",3,"click",4,"ngIf"],["color","warn","class","mr-2","mat-flat-button","",3,"disabled","click",4,"ngIf"],["class","mr-auto ml-auto",4,"ngIf"],[3,"noUsersFoundLabel","displayedColumns","selection","tableId","routeToAdmin","users",4,"ngIf"],["color","accent","mat-flat-button","",1,"mr-2","action-button",3,"click"],["color","warn","mat-flat-button","",1,"mr-2",3,"disabled","click"],[1,"mr-auto","ml-auto"],[3,"noUsersFoundLabel","displayedColumns","selection","tableId","routeToAdmin","users"]],template:function(r,d){1&r&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"perun-web-apps-refresh-button",1),t.NdJ("refresh",function(){return d.refreshTable()}),t.qZA(),t.YNc(4,h,3,3,"button",2),t.YNc(5,f,3,4,"button",3),t.YNc(6,A,1,0,"mat-spinner",4),t.YNc(7,c,2,8,"app-users-list",5)),2&r&&(t.xp6(1),t.Oqu(t.lcZ(2,5,"USER_DETAIL.SETTINGS.SERVICE_IDENTITIES.TITLE")),t.xp6(3),t.Q6J("ngIf",d.addIdentity),t.xp6(1),t.Q6J("ngIf",d.removeIdentity),t.xp6(1),t.Q6J("ngIf",d.loading),t.xp6(1),t.Q6J("ngIf",!d.loading))},dependencies:[R.O5,N.lW,M.Ou,L.t,U.C,D.X$]}),a})()},46374:(x,P,n)=>{n.r(P),n.d(P,{UsersModule:()=>Qe});var C=n(36895),u=n(94364),S=n(74837),s=n(85985),e=n(94650),b=n(61283);let l=(()=>{class _{}return _.\u0275fac=function(i){return new(i||_)},_.\u0275cmp=e.Xpm({type:_,selectors:[["app-user-settings"]],hostVars:2,hostBindings:function(i,g){2&i&&e.ekj("router-component",g.true)},decls:1,vars:0,template:function(i,g){1&i&&e._UZ(0,"app-animated-router-outlet")},dependencies:[b.A]}),_})();var t=n(32105),v=n(51572),E=n(71135);function R(_,T){1&_&&e._UZ(0,"mat-spinner",2)}function N(_,T){if(1&_&&(e.TgZ(0,"div"),e._UZ(1,"perun-web-apps-menu-buttons-field",3),e.qZA()),2&_){const i=e.oxw();e.xp6(1),e.Q6J("items",i.navItems)("size","small")}}let M=(()=>{class _{constructor(i,g){this.route=i,this.userManager=g,this.navItems=[],this.loading=!1}ngOnInit(){window.location.pathname.startsWith("/admin")?(this.loading=!0,this.route.parent.parent.params.subscribe(i=>{const g=Number(i.userId);this.userManager.getUserById(g).subscribe(O=>{this.isServiceUser=O.serviceUser,this.initNavItems(),this.loading=!1},()=>this.loading=!1)})):this.initNavItems()}initNavItems(){this.navItems=[],window.location.pathname.startsWith("/admin")||this.navItems.push({cssIcon:"perun-settings2",url:"passwordReset",label:"MENU_ITEMS.USER.PASSWORD_RESET",style:"user-btn"},{cssIcon:"perun-settings1",url:"guiConfig",label:"MENU_ITEMS.USER.GUI_CONFIG",style:"user-btn"})}}return _.\u0275fac=function(i){return new(i||_)(e.Y36(u.gz),e.Y36(t.Fv))},_.\u0275cmp=e.Xpm({type:_,selectors:[["app-user-settings-overview"]],hostVars:2,hostBindings:function(i,g){2&i&&e.ekj("router-component",g.true)},decls:2,vars:2,consts:[["class","mr-auto ml-auto",4,"ngIf"],[4,"ngIf"],[1,"mr-auto","ml-auto"],[3,"items","size"]],template:function(i,g){1&i&&(e.YNc(0,R,1,0,"mat-spinner",0),e.YNc(1,N,2,2,"div",1)),2&i&&(e.Q6J("ngIf",g.loading),e.xp6(1),e.Q6J("ngIf",!g.loading))},dependencies:[C.O5,v.Ou,E.L]}),_})();var L=n(98973),U=n(33604),D=n(9244),h=n(6335),f=n(3238),A=n(59549),c=n(84385),p=n(89383);function a(_,T){if(1&_&&(e.TgZ(0,"mat-option",5),e._uU(1),e.qZA()),2&_){const i=T.$implicit;e.Q6J("value",i),e.xp6(1),e.hij(" ",i," ")}}let o=(()=>{class _{constructor(i){this.guiConfigService=i,this.tablePageSizeOptions=D.f7}ngOnInit(){this.preferredTablePageSize=this.guiConfigService.getNumber(h.Rc)}updatePreferredTablePageSize(){this.guiConfigService.setNumber(h.Rc,this.preferredTablePageSize)}}return _.\u0275fac=function(i){return new(i||_)(e.Y36(h.Ng))},_.\u0275cmp=e.Xpm({type:_,selectors:[["app-user-settings-app-configuration"]],decls:10,vars:8,consts:[[1,"page-subtitle"],[1,"col-12","col-lg-6","p-0"],[1,"w-100"],[3,"value","valueChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(i,g){1&i&&(e.TgZ(0,"h1",0),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"div",1)(4,"mat-form-field",2)(5,"mat-label"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"mat-select",3),e.NdJ("valueChange",function(){return g.updatePreferredTablePageSize()})("valueChange",function(y){return g.preferredTablePageSize=y}),e.YNc(9,a,2,2,"mat-option",4),e.qZA()()()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,4,"USER_DETAIL.SETTINGS.GUI_CONFIG.TITLE")),e.xp6(5),e.Oqu(e.lcZ(7,6,"USER_DETAIL.SETTINGS.GUI_CONFIG.PREF_TABLE_PAGE_SIZE")),e.xp6(2),e.Q6J("value",g.preferredTablePageSize),e.xp6(1),e.Q6J("ngForOf",g.tablePageSizeOptions))},dependencies:[C.sg,f.ey,A.KE,A.hX,c.gD,p.X$]}),_})();var r=n(17755),d=n(35382),m=n(77968),I=n(97392),Z=n(10266),B=n(4235),F=n(31359);const Q=function(){return{color:"black"}},H=function(){return["/myProfile"]};function V(_,T){if(1&_&&(e.TgZ(0,"div",1),e._UZ(1,"perun-web-apps-back-button"),e.TgZ(2,"div",2),e._UZ(3,"mat-icon",3),e.ALo(4,"translate"),e.TgZ(5,"div",4)(6,"div",5)(7,"a",6),e._uU(8),e.ALo(9,"userFullName"),e.qZA(),e.TgZ(10,"span",7),e._uU(11),e.qZA()(),e.TgZ(12,"span",8),e._uU(13),e.ALo(14,"translate"),e.ALo(15,"translate"),e.qZA()()(),e._UZ(16,"app-animated-router-outlet"),e.qZA()),2&_){const i=e.oxw();e.xp6(3),e.s9C("matTooltip",e.lcZ(4,8,"MENU_ITEMS.USER.ENTITY")),e.Q6J("ngStyle",e.DdM(16,Q)),e.xp6(4),e.Q6J("routerLink",e.DdM(17,H)),e.xp6(1),e.hij(" ",e.lcZ(9,10,i.user)," "),e.xp6(3),e.hij(" \xa0#",i.user.id," "),e.xp6(2),e.lnq(" ",e.lcZ(14,12,"MENU_ITEMS.USER.ENTITY"),", ",e.lcZ(15,14,"MENU_ITEMS.USER.USER_TYPE"),": ",i.getUserType()," ")}}let j=(()=>{class _{constructor(i,g,O){this.sideMenuService=i,this.store=g,this.router=O}ngOnInit(){this.path=this.router.url,this.router.events.subscribe(()=>{this.path=this.router.url}),this.principal=this.store.getPerunPrincipal(),this.user=this.principal.user,this.sideMenuService.setUserItems([])}getUserType(){return this.user.serviceUser?"Service":"Person"}}return _.\u0275fac=function(i){return new(i||_)(e.Y36(m.D),e.Y36(d.d6),e.Y36(u.F0))},_.\u0275cmp=e.Xpm({type:_,selectors:[["app-user-profile"]],decls:1,vars:1,consts:[["class","container-fluid pl-xl-5 pr-xl-5 user-theme",4,"ngIf"],[1,"container-fluid","pl-xl-5","pr-xl-5","user-theme"],[1,"d-flex","page-title-headtitle"],["svgIcon","perun-user-dark",1,"perun-icon","perun-icon-detail",3,"matTooltip","ngStyle"],[1,"page-title-block"],[1,"page-title-headline","d-flex","align-items-center"],["queryParamsHandling","merge",1,"user-link",3,"routerLink"],[1,"text-muted"],[1,"mt-1","entity-info"]],template:function(i,g){1&i&&e.YNc(0,V,17,18,"div",0),2&i&&e.Q6J("ngIf",void 0!==g.user)},dependencies:[C.O5,C.PC,u.yS,I.Hw,Z.gM,B.W,b.A,p.X$,F.d]}),_})();var X=n(6097),$=n(97453),k=n(69024),q=n(29862),G=n(65412),K=n(4859);function ee(_,T){1&_&&e._UZ(0,"mat-spinner",11)}function te(_,T){if(1&_){const i=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){e.CHM(i);const O=e.oxw(2);return e.KtG(O.editUser())}),e.TgZ(1,"mat-icon"),e._uU(2,"edit"),e.qZA()()}}const se=function(){return{color:"black"}},ne=function(_){return["/myProfile/service-identities",_]};function ie(_,T){if(1&_&&(e.TgZ(0,"div",1),e._UZ(1,"perun-web-apps-back-button"),e.YNc(2,ee,1,0,"mat-spinner",2),e.TgZ(3,"div",3),e._UZ(4,"mat-icon",4),e.ALo(5,"translate"),e.TgZ(6,"div",5)(7,"div",6)(8,"a",7),e._uU(9),e.ALo(10,"userFullName"),e.qZA(),e.TgZ(11,"span",8),e._uU(12),e.qZA(),e.YNc(13,te,3,0,"button",9),e.qZA(),e.TgZ(14,"div"),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"span",10),e._uU(18),e.ALo(19,"translate"),e.ALo(20,"translate"),e.qZA()()(),e._UZ(21,"app-animated-router-outlet"),e.qZA()),2&_){const i=e.oxw();e.xp6(2),e.Q6J("ngIf",i.loading),e.xp6(2),e.s9C("matTooltip",e.lcZ(5,12,"MENU_ITEMS.USER.ENTITY")),e.Q6J("ngStyle",e.DdM(22,se)),e.xp6(4),e.Q6J("routerLink",e.VKq(23,ne,i.user.id)),e.xp6(1),e.hij(" ",e.lcZ(10,14,i.user)," "),e.xp6(3),e.hij(" \xa0#",i.user.id," "),e.xp6(1),e.Q6J("ngIf",i.authResolver.isPerunAdmin()),e.xp6(2),e.AsE("",e.lcZ(16,16,"ADMIN_USER.UUID"),": ",i.user.uuid,""),e.xp6(3),e.lnq(" ",e.lcZ(19,18,"MENU_ITEMS.USER.ENTITY"),", ",e.lcZ(20,20,"MENU_ITEMS.USER.USER_TYPE"),": ",i.getUserType()," ")}}let re=(()=>{class _{constructor(i,g,O,y,W,w,J){this.sideMenuService=i,this.usersService=g,this.sideMenuItemService=O,this.route=y,this.dialog=W,this.authResolver=w,this.entityStorageService=J,this.loading=!1}ngOnInit(){this.loading=!0,this.route.params.subscribe(i=>{const g=Number(i.userId);this.entityStorageService.setEntity({id:g,beanName:"User"}),this.usersService.getUserById(g).subscribe(O=>{this.user=O;const y=this.sideMenuItemService.parseServiceIdentity(O);this.sideMenuService.setUserItems([y]),this.loading=!1},()=>this.loading=!1)})}getUserType(){return this.user.serviceUser?"Service":"Person"}editUser(){const i=(0,D.kZ)();i.width="450px",i.data={theme:"admin-theme",user:this.user},this.dialog.open(q.x,i).afterClosed().subscribe(O=>{O&&this.usersService.getUserById(this.user.id).subscribe(y=>{this.user=y})})}}return _.\u0275fac=function(i){return new(i||_)(e.Y36(m.D),e.Y36(t.Fv),e.Y36(k.V),e.Y36(u.gz),e.Y36(G.uw),e.Y36(d.x4),e.Y36(d.fb))},_.\u0275cmp=e.Xpm({type:_,selectors:[["app-service-identity-detail-page"]],decls:1,vars:1,consts:[["class","container-fluid pl-xl-5 pr-xl-5 user-theme",4,"ngIf"],[1,"container-fluid","pl-xl-5","pr-xl-5","user-theme"],["class","mr-auto ml-auto",4,"ngIf"],[1,"d-flex","page-title-headtitle"],["svgIcon","perun-service-identity",1,"perun-icon","perun-icon-detail",3,"matTooltip","ngStyle"],[1,"page-title-block"],[1,"page-title-headline","d-flex","align-items-center"],["queryParamsHandling","merge",1,"user-link",3,"routerLink"],[1,"text-muted"],["mat-icon-button","",3,"click",4,"ngIf"],[1,"mt-1","entity-info"],[1,"mr-auto","ml-auto"],["mat-icon-button","",3,"click"]],template:function(i,g){1&i&&e.YNc(0,ie,22,25,"div",0),2&i&&e.Q6J("ngIf",void 0!==g.user)},dependencies:[C.O5,C.PC,u.yS,I.Hw,K.lW,v.Ou,Z.gM,B.W,b.A,p.X$,F.d]}),_})(),ae=(()=>{class _{constructor(){this.navItems=[]}ngOnInit(){this.initNavItems()}initNavItems(){this.navItems=[{cssIcon:"perun-manager",url:"associated-users",label:"MENU_ITEMS.USER.ASSOCIATED_USERS",style:"user-btn"},{cssIcon:"perun-authentication",url:"authentication",label:"MENU_ITEMS.USER.AUTHENTICATION",style:"user-btn"}]}}return _.\u0275fac=function(i){return new(i||_)},_.\u0275cmp=e.Xpm({type:_,selectors:[["app-service-identity-overview"]],decls:1,vars:2,consts:[[3,"items","size"]],template:function(i,g){1&i&&e._UZ(0,"perun-web-apps-menu-buttons-field",0),2&i&&e.Q6J("items",g.navItems)("size","small")},dependencies:[E.L]}),_})();var oe=n(46597),Y=n(24006),le=n(28499),_e=n(95406);function ue(_,T){if(1&_&&(e.TgZ(0,"div",7),e._UZ(1,"app-login-password-form-with-generate-option",8),e.qZA()),2&_){const i=e.oxw();e.xp6(1),e.Q6J("formGroup",i.formGroup)("filteredNamespace",i.data.filteredNamespaces)}}function ce(_,T){1&_&&e._UZ(0,"mat-spinner",9)}let pe=(()=>{class _{constructor(i,g,O,y,W,w,J,ze,He,Ve){this.dialogRef=i,this.data=g,this.formBuilder=O,this.usersManagerService=y,this.membersManagerService=W,this.attributesManagerService=w,this.apiRequestConfiguration=J,this.notificator=ze,this.translate=He,this.cd=Ve,this.processing=!1}ngOnInit(){this.userId=this.data.userId,this.formGroup=this.formBuilder.group({namespaceCtrl:["Not selected"],loginCtrl:["",[Y.kI.pattern("^[a-z][a-z0-9_-]+$"),Y.kI.maxLength(15),Y.kI.minLength(2)]],passwordCtrl:["",Y.kI.required,[(0,le.yT)(null,this.usersManagerService,this.apiRequestConfiguration)]],passwordAgainCtrl:[""],generatePasswordCtrl:[!0]},{validators:D.dN.passwordMatchValidator})}ngAfterViewInit(){this.cd.detectChanges()}onSetLogin(){this.processing=!0;const i=this.formGroup.get("namespaceCtrl").value.toLowerCase(),g=this.formGroup.get("loginCtrl").value;if(g)this.setLogin(i,g);else{const O=`urn:perun:user:attribute-def:def:login-namespace:${i}`;this.attributesManagerService.getUserAttributeByName(this.userId,"urn:perun:user:attribute-def:core:lastName").subscribe(y=>{this.usersManagerService.generateAccountForName(i,y.value).subscribe(w=>{this.setLogin(i,w[O])},()=>this.processing=!1)})}}setLogin(i,g){this.usersManagerService.setLogin(this.userId,g,i).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("DIALOGS.SET_LOGIN.SUCCESS_LOGIN")),this.setPassword()},()=>{this.processing=!1})}setPassword(){const i=this.formGroup.get("namespaceCtrl").value.toLowerCase(),g=this.formGroup.get("passwordCtrl").value;if(this.formGroup.get("generatePasswordCtrl").value){if(!this.formGroup.get("loginCtrl").value)return;this.usersManagerService.reserveRandomPassword(this.userId,i).subscribe(()=>{this.usersManagerService.validatePasswordForUser(this.userId,i).subscribe(()=>{this.dialogRef.close(!0)},()=>{this.processing=!1})},()=>{this.processing=!1})}else this.usersManagerService.reservePasswordForUser({user:this.userId,namespace:i,password:g}).subscribe(()=>{this.usersManagerService.validatePasswordForUser(this.userId,i).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("DIALOGS.SET_LOGIN.SUCCESS_PASSWORD")),this.dialogRef.close(!0)},()=>{this.processing=!1})},()=>{this.processing=!1})}onCancel(){this.dialogRef.close(!1)}}return _.\u0275fac=function(i){return new(i||_)(e.Y36(G.so),e.Y36(G.WI),e.Y36(Y.QS),e.Y36(t.Fv),e.Y36(t.uq),e.Y36(t.H8),e.Y36(d.F5),e.Y36(d.V6),e.Y36(p.sK),e.Y36(e.sBO))},_.\u0275cmp=e.Xpm({type:_,selectors:[["app-perun-web-apps-set-login-dialog"]],decls:13,vars:12,consts:[[1,"vo-theme"],[1,"mat-dialog-title"],["class","dialog-container","mat-dialog-content","",4,"ngIf"],["class","ml-auto mr-auto",4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["color","accent","mat-flat-button","",1,"ml-2",3,"disabled","click"],["mat-dialog-content","",1,"dialog-container"],[3,"formGroup","filteredNamespace"],[1,"ml-auto","mr-auto"]],template:function(i,g){1&i&&(e.TgZ(0,"div",0)(1,"h1",1),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,ue,2,2,"div",2),e.YNc(5,ce,1,0,"mat-spinner",3),e.TgZ(6,"div",4)(7,"button",5),e.NdJ("click",function(){return g.onCancel()}),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"button",6),e.NdJ("click",function(){return g.onSetLogin()}),e._uU(11),e.ALo(12,"translate"),e.qZA()()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,6,"DIALOGS.SET_LOGIN.TITLE")),e.xp6(2),e.Q6J("ngIf",!g.processing),e.xp6(1),e.Q6J("ngIf",g.processing),e.xp6(3),e.hij(" ",e.lcZ(9,8,"DIALOGS.SET_LOGIN.CANCEL")," "),e.xp6(2),e.Q6J("disabled","Not selected"===g.formGroup.get("namespaceCtrl").value||g.formGroup.invalid||g.formGroup.pending||g.processing),e.xp6(1),e.hij(" ",e.lcZ(12,10,"DIALOGS.SET_LOGIN.SET_LOGIN")," "))},dependencies:[C.O5,Y.JL,Y.sg,K.lW,G.xY,G.H8,v.Ou,_e.r,p.X$]}),_})();var de=n(96214),me=n(53599);const ge=["logins"],fe=[{path:"",component:j,children:[{path:"",component:r.Z,data:{animation:"UserOverviewPage"}},{path:"attributes",component:L.u,data:{animation:"UserAttributesPage"}},{path:"organizations",component:S.j,data:{animation:"UserOrganizationsPage",showPrincipal:!0}},{path:"groups",component:s.u,data:{animation:"UserGroupsPage",showPrincipal:!0}},{path:"roles",component:X.t,data:{animation:"UserRolesPage"}},{path:"service-identities",component:$.R,data:{animation:"UserServiceIdentities"}},{path:"settings",component:l,children:[{path:"",component:M,data:{animation:"UserSettingsOverviewPage"}},{path:"passwordReset",component:U.Nj,data:{animation:"PasswordResetPage"}},{path:"guiConfig",component:o,data:{animation:"UserAppConfigurationPage"}}]}]},{path:"service-identities/:userId",component:re,children:[{path:"",component:ae},{path:"associated-users",component:oe.d},{path:"authentication",component:(()=>{class _{constructor(i,g){this.dialog=i,this.entityStorageService=g,this.filteredNamespaces=[]}ngOnInit(){this.userId=this.entityStorageService.getEntity().id}onAdd(){const i=(0,D.kZ)();i.width="500px",i.data={userId:this.userId,filteredNamespaces:this.filteredNamespaces},this.dialog.open(pe,i).afterClosed().subscribe(O=>{O&&this.logins.refreshTable()})}}return _.\u0275fac=function(i){return new(i||_)(e.Y36(G.uw),e.Y36(d.fb))},_.\u0275cmp=e.Xpm({type:_,selectors:[["app-perun-web-apps-user-setting-authentication"]],viewQuery:function(i,g){if(1&i&&e.Gf(ge,5),2&i){let O;e.iGM(O=e.CRH())&&(g.logins=O.first)}},decls:9,vars:7,consts:[[1,"page-subtitle"],[3,"refresh"],["color","accent","mat-flat-button","",1,"mr-2","action-button",3,"click"],[3,"authenticationPage","filteredNamespaces"],["logins",""]],template:function(i,g){if(1&i){const O=e.EpF();e.TgZ(0,"h1",0),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"perun-web-apps-refresh-button",1),e.NdJ("refresh",function(){e.CHM(O);const W=e.MAs(8);return e.KtG(W.refreshTable())}),e.qZA(),e.TgZ(4,"button",2),e.NdJ("click",function(){return g.onAdd()}),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"perun-web-apps-password-reset",3,4),e.NdJ("filteredNamespaces",function(W){return g.filteredNamespaces=W}),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,3,"USER_DETAIL.SETTINGS.AUTHENTICATION.TITLE")),e.xp6(4),e.hij(" ",e.lcZ(6,5,"USER_DETAIL.SETTINGS.AUTHENTICATION.ADD"),"\n"),e.xp6(2),e.Q6J("authenticationPage",!0))},dependencies:[K.lW,de.t,me.N,p.X$]}),_})()}]}];let Ee=(()=>{class _{}return _.\u0275fac=function(i){return new(i||_)},_.\u0275mod=e.oAB({type:_}),_.\u0275inj=e.cJS({imports:[u.Bz.forChild(fe),u.Bz]}),_})();var Ie=n(47957),Te=n(284),ve=n(23267),Ue=n(37084),Ae=n(96308),Ce=n(30671),Se=n(3848),De=n(35423),Oe=n(56709),Re=n(17009),be=n(73162),Me=n(90455),Pe=n(99602),Ne=n(71948),Le=n(44850),Ze=n(98739),z=n(73546),ye=n(86257),xe=n(73555),Be=n(77331),Ye=n(28255),We=n(67376),Ge=n(63189),Ke=n(42673),we=n(11243),Je=n(19516),Fe=n(14264);let Qe=(()=>{class _{constructor(i){this.translate=i,i.addLangs(["en","cs"])}}return _.\u0275fac=function(i){return new(i||_)(e.LFG(p.sK))},_.\u0275mod=e.oAB({type:_}),_.\u0275inj=e.cJS({imports:[C.ez,Ee,Ie.Bb,Te.c,A.lN,Y.UX,Y.u5,I.Ps,ve.SJ,Ue.To,p.aw.forChild({}),K.ot,Ae.JX,Ce.p0,Se.Nh,De.dp,K.ot,Oe.p9,G.Is,c.LD,Re.ZX,v.Cq,be.Cv,Z.AV,Me.rP,Pe.FA,f.XK,Ne.Fk,Le.t,f.si,Ze.TU,z.QW,ye.T5,xe._t,z.QW,Be.Hi,Ye.Tx,We.Cl,Ge.r,Ke.g,U.ez,we.r,Je.d4,Fe.m]}),_})()}}]);