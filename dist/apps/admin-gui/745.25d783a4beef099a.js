(self.webpackChunkadmin_gui=self.webpackChunkadmin_gui||[]).push([[745],{89397:function(w,E){!function(s){"use strict";function c(H,Q){return Q.forEach(function(it){it&&"string"!=typeof it&&!Array.isArray(it)&&Object.keys(it).forEach(function(q){if("default"!==q&&!(q in H)){var U=Object.getOwnPropertyDescriptor(it,q);Object.defineProperty(H,q,U.get?U:{enumerable:!0,get:function(){return it[q]}})}})}),Object.freeze(H)}var q,it,x={exports:{}};q=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0,it=function(U){var mt,St,D=typeof(U=U||{})<"u"?U:{};D.ready=new Promise(function(b,k){mt=b,St=k});var Et,Mt={};for(Et in D)D.hasOwnProperty(Et)&&(Mt[Et]=D[Et]);var gt,Nt,$t="./this.program",ut="";typeof document<"u"&&document.currentScript&&(ut=document.currentScript.src),q&&(ut=q),ut=0!==ut.indexOf("blob:")?ut.substr(0,ut.replace(/[?#].*/,"").lastIndexOf("/")+1):"",gt=function(b){var k=new XMLHttpRequest;return k.open("GET",b,!1),k.send(null),k.responseText},Nt=function(b,k,Z){var rt=new XMLHttpRequest;rt.open("GET",b,!0),rt.responseType="arraybuffer",rt.onload=function(){200==rt.status||0==rt.status&&rt.response?k(rt.response):Z()},rt.onerror=Z,rt.send(null)};var xe,Kt=D.print||console.log.bind(console),ce=D.printErr||console.warn.bind(console);for(Et in Mt)Mt.hasOwnProperty(Et)&&(D[Et]=Mt[Et]);Mt=null,D.thisProgram&&($t=D.thisProgram),D.wasmBinary&&(xe=D.wasmBinary),"object"!=typeof WebAssembly&&_n("no native wasm support detected");var Ge,Ne=!1;function It(b,k){b||_n("Assertion failed: "+k)}var Ue,Ze,ei,ve,oi,Xt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Zt(b,k,Z){for(var rt=k+Z,ht=k;b[ht]&&!(ht>=rt);)++ht;if(ht-k>16&&b.subarray&&Xt)return Xt.decode(b.subarray(k,ht));for(var bt="";k<ht;){var Ot=b[k++];if(128&Ot){var Bt=63&b[k++];if(192!=(224&Ot)){var re=63&b[k++];if((Ot=224==(240&Ot)?(15&Ot)<<12|Bt<<6|re:(7&Ot)<<18|Bt<<12|re<<6|63&b[k++])<65536)bt+=String.fromCharCode(Ot);else{var Ce=Ot-65536;bt+=String.fromCharCode(55296|Ce>>10,56320|1023&Ce)}}else bt+=String.fromCharCode((31&Ot)<<6|Bt)}else bt+=String.fromCharCode(Ot)}return bt}function jt(b,k){return b?Zt(ei,b,k):""}function ge(b,k,Z,rt){if(!(rt>0))return 0;for(var ht=Z,bt=Z+rt-1,Ot=0;Ot<b.length;++Ot){var Bt=b.charCodeAt(Ot);if(Bt>=55296&&Bt<=57343&&(Bt=65536+((1023&Bt)<<10)|1023&b.charCodeAt(++Ot)),Bt<=127){if(Z>=bt)break;k[Z++]=Bt}else if(Bt<=2047){if(Z+1>=bt)break;k[Z++]=192|Bt>>6,k[Z++]=128|63&Bt}else if(Bt<=65535){if(Z+2>=bt)break;k[Z++]=224|Bt>>12,k[Z++]=128|Bt>>6&63,k[Z++]=128|63&Bt}else{if(Z+3>=bt)break;k[Z++]=240|Bt>>18,k[Z++]=128|Bt>>12&63,k[Z++]=128|Bt>>6&63,k[Z++]=128|63&Bt}}return k[Z]=0,Z-ht}function Ee(b){for(var k=0,Z=0;Z<b.length;++Z){var rt=b.charCodeAt(Z);rt>=55296&&rt<=57343&&(rt=65536+((1023&rt)<<10)|1023&b.charCodeAt(++Z)),rt<=127?++k:k+=rt<=2047?2:rt<=65535?3:4}return k}function Ae(b,k){return b%k>0&&(b+=k-b%k),b}function Ct(b){Ue=b,D.HEAP8=Ze=new Int8Array(b),D.HEAP16=new Int16Array(b),D.HEAP32=ve=new Int32Array(b),D.HEAPU8=ei=new Uint8Array(b),D.HEAPU16=new Uint16Array(b),D.HEAPU32=new Uint32Array(b),D.HEAPF32=new Float32Array(b),D.HEAPF64=oi=new Float64Array(b)}var Ht,se=[],fe=[],qt=[];var gn=0,En=null;function Fn(b){gn++,D.monitorRunDependencies&&D.monitorRunDependencies(gn)}function Nn(b){if(gn--,D.monitorRunDependencies&&D.monitorRunDependencies(gn),0==gn&&En){var k=En;En=null,k()}}function _n(b){D.onAbort&&D.onAbort(b),ce(b="Aborted("+b+")"),Ne=!0,b+=". Build with -s ASSERTIONS=1 for more info.";var k=new WebAssembly.RuntimeError(b);throw St(k),k}D.preloadedImages={},D.preloadedAudios={};var he;function Rn(b){return b.startsWith("data:application/octet-stream;base64,")}function Si(b){try{if(b==he&&xe)return new Uint8Array(xe);throw"both async and sync fetching of the wasm failed"}catch(k){_n(k)}}Rn(he="expatlib.wasm")||(he=function ft(b){return D.locateFile?D.locateFile(b,ut):ut+b}(he));var gi,ii,Yi={11694:function(b){var k=D.getCache(D.CExpatJS)[b];if(!k.hasOwnProperty("startElement"))throw"a JSImplementation must implement all functions, you forgot CExpatJS::startElement.";k.startElement()},11912:function(b){var k=D.getCache(D.CExpatJS)[b];if(!k.hasOwnProperty("endElement"))throw"a JSImplementation must implement all functions, you forgot CExpatJS::endElement.";k.endElement()},12124:function(b){var k=D.getCache(D.CExpatJS)[b];if(!k.hasOwnProperty("characterData"))throw"a JSImplementation must implement all functions, you forgot CExpatJS::characterData.";k.characterData()}};function cn(b){for(;b.length>0;){var k=b.shift();if("function"!=typeof k){var Z=k.func;"number"==typeof Z?void 0===k.arg?Ii(Z)():Ii(Z)(k.arg):Z(void 0===k.arg?null:k.arg)}else k(D)}}function Ii(b){return Ht.get(b)}var Te={splitPath:function(b){return/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(b).slice(1)},normalizeArray:function(b,k){for(var Z=0,rt=b.length-1;rt>=0;rt--){var ht=b[rt];"."===ht?b.splice(rt,1):".."===ht?(b.splice(rt,1),Z++):Z&&(b.splice(rt,1),Z--)}if(k)for(;Z;Z--)b.unshift("..");return b},normalize:function(b){var k="/"===b.charAt(0),Z="/"===b.substr(-1);return!(b=Te.normalizeArray(b.split("/").filter(function(rt){return!!rt}),!k).join("/"))&&!k&&(b="."),b&&Z&&(b+="/"),(k?"/":"")+b},dirname:function(b){var k=Te.splitPath(b),Z=k[0],rt=k[1];return Z||rt?(rt&&(rt=rt.substr(0,rt.length-1)),Z+rt):"."},basename:function(b){if("/"===b)return"/";var k=(b=(b=Te.normalize(b)).replace(/\/$/,"")).lastIndexOf("/");return-1===k?b:b.substr(k+1)},extname:function(b){return Te.splitPath(b)[3]},join:function(){var b=Array.prototype.slice.call(arguments,0);return Te.normalize(b.join("/"))},join2:function(b,k){return Te.normalize(b+"/"+k)}};var Pi={resolve:function(){for(var b="",k=!1,Z=arguments.length-1;Z>=-1&&!k;Z--){var rt=Z>=0?arguments[Z]:A.cwd();if("string"!=typeof rt)throw new TypeError("Arguments to path.resolve must be strings");if(!rt)return"";b=rt+"/"+b,k="/"===rt.charAt(0)}return(k?"/":"")+(b=Te.normalizeArray(b.split("/").filter(function(ht){return!!ht}),!k).join("/"))||"."},relative:function(b,k){function Z(Ce){for(var $e=0;$e<Ce.length&&""===Ce[$e];$e++);for(var ni=Ce.length-1;ni>=0&&""===Ce[ni];ni--);return $e>ni?[]:Ce.slice($e,ni-$e+1)}b=Pi.resolve(b).substr(1),k=Pi.resolve(k).substr(1);for(var rt=Z(b.split("/")),ht=Z(k.split("/")),bt=Math.min(rt.length,ht.length),Ot=bt,Bt=0;Bt<bt;Bt++)if(rt[Bt]!==ht[Bt]){Ot=Bt;break}var re=[];for(Bt=Ot;Bt<rt.length;Bt++)re.push("..");return(re=re.concat(ht.slice(Ot))).join("/")}},hi={ttys:[],init:function(){},shutdown:function(){},register:function(b,k){hi.ttys[b]={input:[],output:[],ops:k},A.registerDevice(b,hi.stream_ops)},stream_ops:{open:function(b){var k=hi.ttys[b.node.rdev];if(!k)throw new A.ErrnoError(43);b.tty=k,b.seekable=!1},close:function(b){b.tty.ops.flush(b.tty)},flush:function(b){b.tty.ops.flush(b.tty)},read:function(b,k,Z,rt,ht){if(!b.tty||!b.tty.ops.get_char)throw new A.ErrnoError(60);for(var bt=0,Ot=0;Ot<rt;Ot++){var Bt;try{Bt=b.tty.ops.get_char(b.tty)}catch{throw new A.ErrnoError(29)}if(void 0===Bt&&0===bt)throw new A.ErrnoError(6);if(null==Bt)break;bt++,k[Z+Ot]=Bt}return bt&&(b.node.timestamp=Date.now()),bt},write:function(b,k,Z,rt,ht){if(!b.tty||!b.tty.ops.put_char)throw new A.ErrnoError(60);try{for(var bt=0;bt<rt;bt++)b.tty.ops.put_char(b.tty,k[Z+bt])}catch{throw new A.ErrnoError(29)}return rt&&(b.node.timestamp=Date.now()),bt}},default_tty_ops:{get_char:function(b){if(!b.input.length){var k=null;if(typeof window<"u"&&"function"==typeof window.prompt?null!==(k=window.prompt("Input: "))&&(k+="\n"):"function"==typeof readline&&null!==(k=readline())&&(k+="\n"),!k)return null;b.input=de(k,!0)}return b.input.shift()},put_char:function(b,k){null===k||10===k?(Kt(Zt(b.output,0)),b.output=[]):0!=k&&b.output.push(k)},flush:function(b){b.output&&b.output.length>0&&(Kt(Zt(b.output,0)),b.output=[])}},default_tty1_ops:{put_char:function(b,k){null===k||10===k?(ce(Zt(b.output,0)),b.output=[]):0!=k&&b.output.push(k)},flush:function(b){b.output&&b.output.length>0&&(ce(Zt(b.output,0)),b.output=[])}}};var $={ops_table:null,mount:function(b){return $.createNode(null,"/",16895,0)},createNode:function(b,k,Z,rt){if(A.isBlkdev(Z)||A.isFIFO(Z))throw new A.ErrnoError(63);$.ops_table||($.ops_table={dir:{node:{getattr:$.node_ops.getattr,setattr:$.node_ops.setattr,lookup:$.node_ops.lookup,mknod:$.node_ops.mknod,rename:$.node_ops.rename,unlink:$.node_ops.unlink,rmdir:$.node_ops.rmdir,readdir:$.node_ops.readdir,symlink:$.node_ops.symlink},stream:{llseek:$.stream_ops.llseek}},file:{node:{getattr:$.node_ops.getattr,setattr:$.node_ops.setattr},stream:{llseek:$.stream_ops.llseek,read:$.stream_ops.read,write:$.stream_ops.write,allocate:$.stream_ops.allocate,mmap:$.stream_ops.mmap,msync:$.stream_ops.msync}},link:{node:{getattr:$.node_ops.getattr,setattr:$.node_ops.setattr,readlink:$.node_ops.readlink},stream:{}},chrdev:{node:{getattr:$.node_ops.getattr,setattr:$.node_ops.setattr},stream:A.chrdev_stream_ops}});var ht=A.createNode(b,k,Z,rt);return A.isDir(ht.mode)?(ht.node_ops=$.ops_table.dir.node,ht.stream_ops=$.ops_table.dir.stream,ht.contents={}):A.isFile(ht.mode)?(ht.node_ops=$.ops_table.file.node,ht.stream_ops=$.ops_table.file.stream,ht.usedBytes=0,ht.contents=null):A.isLink(ht.mode)?(ht.node_ops=$.ops_table.link.node,ht.stream_ops=$.ops_table.link.stream):A.isChrdev(ht.mode)&&(ht.node_ops=$.ops_table.chrdev.node,ht.stream_ops=$.ops_table.chrdev.stream),ht.timestamp=Date.now(),b&&(b.contents[k]=ht,b.timestamp=ht.timestamp),ht},getFileDataAsTypedArray:function(b){return b.contents?b.contents.subarray?b.contents.subarray(0,b.usedBytes):new Uint8Array(b.contents):new Uint8Array(0)},expandFileStorage:function(b,k){var Z=b.contents?b.contents.length:0;if(!(Z>=k)){k=Math.max(k,Z*(Z<1048576?2:1.125)>>>0),0!=Z&&(k=Math.max(k,256));var ht=b.contents;b.contents=new Uint8Array(k),b.usedBytes>0&&b.contents.set(ht.subarray(0,b.usedBytes),0)}},resizeFileStorage:function(b,k){if(b.usedBytes!=k)if(0==k)b.contents=null,b.usedBytes=0;else{var Z=b.contents;b.contents=new Uint8Array(k),Z&&b.contents.set(Z.subarray(0,Math.min(k,b.usedBytes))),b.usedBytes=k}},node_ops:{getattr:function(b){var k={};return k.dev=A.isChrdev(b.mode)?b.id:1,k.ino=b.id,k.mode=b.mode,k.nlink=1,k.uid=0,k.gid=0,k.rdev=b.rdev,k.size=A.isDir(b.mode)?4096:A.isFile(b.mode)?b.usedBytes:A.isLink(b.mode)?b.link.length:0,k.atime=new Date(b.timestamp),k.mtime=new Date(b.timestamp),k.ctime=new Date(b.timestamp),k.blksize=4096,k.blocks=Math.ceil(k.size/k.blksize),k},setattr:function(b,k){void 0!==k.mode&&(b.mode=k.mode),void 0!==k.timestamp&&(b.timestamp=k.timestamp),void 0!==k.size&&$.resizeFileStorage(b,k.size)},lookup:function(b,k){throw A.genericErrors[44]},mknod:function(b,k,Z,rt){return $.createNode(b,k,Z,rt)},rename:function(b,k,Z){if(A.isDir(b.mode)){var rt;try{rt=A.lookupNode(k,Z)}catch{}if(rt)for(var ht in rt.contents)throw new A.ErrnoError(55)}delete b.parent.contents[b.name],b.parent.timestamp=Date.now(),b.name=Z,k.contents[Z]=b,k.timestamp=b.parent.timestamp,b.parent=k},unlink:function(b,k){delete b.contents[k],b.timestamp=Date.now()},rmdir:function(b,k){var Z=A.lookupNode(b,k);for(var rt in Z.contents)throw new A.ErrnoError(55);delete b.contents[k],b.timestamp=Date.now()},readdir:function(b){var k=[".",".."];for(var Z in b.contents)!b.contents.hasOwnProperty(Z)||k.push(Z);return k},symlink:function(b,k,Z){var rt=$.createNode(b,k,41471,0);return rt.link=Z,rt},readlink:function(b){if(!A.isLink(b.mode))throw new A.ErrnoError(28);return b.link}},stream_ops:{read:function(b,k,Z,rt,ht){var bt=b.node.contents;if(ht>=b.node.usedBytes)return 0;var Ot=Math.min(b.node.usedBytes-ht,rt);if(Ot>8&&bt.subarray)k.set(bt.subarray(ht,ht+Ot),Z);else for(var Bt=0;Bt<Ot;Bt++)k[Z+Bt]=bt[ht+Bt];return Ot},write:function(b,k,Z,rt,ht,bt){if(k.buffer===Ze.buffer&&(bt=!1),!rt)return 0;var Ot=b.node;if(Ot.timestamp=Date.now(),k.subarray&&(!Ot.contents||Ot.contents.subarray)){if(bt)return Ot.contents=k.subarray(Z,Z+rt),Ot.usedBytes=rt,rt;if(0===Ot.usedBytes&&0===ht)return Ot.contents=k.slice(Z,Z+rt),Ot.usedBytes=rt,rt;if(ht+rt<=Ot.usedBytes)return Ot.contents.set(k.subarray(Z,Z+rt),ht),rt}if($.expandFileStorage(Ot,ht+rt),Ot.contents.subarray&&k.subarray)Ot.contents.set(k.subarray(Z,Z+rt),ht);else for(var Bt=0;Bt<rt;Bt++)Ot.contents[ht+Bt]=k[Z+Bt];return Ot.usedBytes=Math.max(Ot.usedBytes,ht+rt),rt},llseek:function(b,k,Z){var rt=k;if(1===Z?rt+=b.position:2===Z&&A.isFile(b.node.mode)&&(rt+=b.node.usedBytes),rt<0)throw new A.ErrnoError(28);return rt},allocate:function(b,k,Z){$.expandFileStorage(b.node,k+Z),b.node.usedBytes=Math.max(b.node.usedBytes,k+Z)},mmap:function(b,k,Z,rt,ht,bt){if(0!==k)throw new A.ErrnoError(28);if(!A.isFile(b.node.mode))throw new A.ErrnoError(43);var Ot,Bt,re=b.node.contents;if(2&bt||re.buffer!==Ue){if((rt>0||rt+Z<re.length)&&(re=re.subarray?re.subarray(rt,rt+Z):Array.prototype.slice.call(re,rt,rt+Z)),Bt=!0,!(Ot=function z(b){_n()}()))throw new A.ErrnoError(48);Ze.set(re,Ot)}else Bt=!1,Ot=re.byteOffset;return{ptr:Ot,allocated:Bt}},msync:function(b,k,Z,rt,ht){if(!A.isFile(b.node.mode))throw new A.ErrnoError(43);return 2&ht||$.stream_ops.write(b,k,0,rt,Z,!1),0}}};var A={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:function(b,k){if(k=k||{},!(b=Pi.resolve(A.cwd(),b)))return{path:"",node:null};var Z={follow_mount:!0,recurse_count:0};for(var rt in Z)void 0===k[rt]&&(k[rt]=Z[rt]);if(k.recurse_count>8)throw new A.ErrnoError(32);for(var ht=Te.normalizeArray(b.split("/").filter(function(De){return!!De}),!1),bt=A.root,Ot="/",Bt=0;Bt<ht.length;Bt++){var re=Bt===ht.length-1;if(re&&k.parent)break;if(bt=A.lookupNode(bt,ht[Bt]),Ot=Te.join2(Ot,ht[Bt]),A.isMountpoint(bt)&&(!re||re&&k.follow_mount)&&(bt=bt.mounted.root),!re||k.follow)for(var Ce=0;A.isLink(bt.mode);){var $e=A.readlink(Ot);if(Ot=Pi.resolve(Te.dirname(Ot),$e),bt=A.lookupPath(Ot,{recurse_count:k.recurse_count}).node,Ce++>40)throw new A.ErrnoError(32)}}return{path:Ot,node:bt}},getPath:function(b){for(var k;;){if(A.isRoot(b)){var Z=b.mount.mountpoint;return k?"/"!==Z[Z.length-1]?Z+"/"+k:Z+k:Z}k=k?b.name+"/"+k:b.name,b=b.parent}},hashName:function(b,k){for(var Z=0,rt=0;rt<k.length;rt++)Z=(Z<<5)-Z+k.charCodeAt(rt)|0;return(b+Z>>>0)%A.nameTable.length},hashAddNode:function(b){var k=A.hashName(b.parent.id,b.name);b.name_next=A.nameTable[k],A.nameTable[k]=b},hashRemoveNode:function(b){var k=A.hashName(b.parent.id,b.name);if(A.nameTable[k]===b)A.nameTable[k]=b.name_next;else for(var Z=A.nameTable[k];Z;){if(Z.name_next===b){Z.name_next=b.name_next;break}Z=Z.name_next}},lookupNode:function(b,k){var Z=A.mayLookup(b);if(Z)throw new A.ErrnoError(Z,b);for(var rt=A.hashName(b.id,k),ht=A.nameTable[rt];ht;ht=ht.name_next)if(ht.parent.id===b.id&&ht.name===k)return ht;return A.lookup(b,k)},createNode:function(b,k,Z,rt){var ht=new A.FSNode(b,k,Z,rt);return A.hashAddNode(ht),ht},destroyNode:function(b){A.hashRemoveNode(b)},isRoot:function(b){return b===b.parent},isMountpoint:function(b){return!!b.mounted},isFile:function(b){return 32768==(61440&b)},isDir:function(b){return 16384==(61440&b)},isLink:function(b){return 40960==(61440&b)},isChrdev:function(b){return 8192==(61440&b)},isBlkdev:function(b){return 24576==(61440&b)},isFIFO:function(b){return 4096==(61440&b)},isSocket:function(b){return 49152==(49152&b)},flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:function(b){var k=A.flagModes[b];if(typeof k>"u")throw new Error("Unknown file open mode: "+b);return k},flagsToPermissionString:function(b){var k=["r","w","rw"][3&b];return 512&b&&(k+="w"),k},nodePermissions:function(b,k){return A.ignorePermissions?0:k.includes("r")&&!(292&b.mode)||k.includes("w")&&!(146&b.mode)||k.includes("x")&&!(73&b.mode)?2:0},mayLookup:function(b){return A.nodePermissions(b,"x")||(b.node_ops.lookup?0:2)},mayCreate:function(b,k){try{return A.lookupNode(b,k),20}catch{}return A.nodePermissions(b,"wx")},mayDelete:function(b,k,Z){var rt;try{rt=A.lookupNode(b,k)}catch(bt){return bt.errno}var ht=A.nodePermissions(b,"wx");if(ht)return ht;if(Z){if(!A.isDir(rt.mode))return 54;if(A.isRoot(rt)||A.getPath(rt)===A.cwd())return 10}else if(A.isDir(rt.mode))return 31;return 0},mayOpen:function(b,k){return b?A.isLink(b.mode)?32:A.isDir(b.mode)&&("r"!==A.flagsToPermissionString(k)||512&k)?31:A.nodePermissions(b,A.flagsToPermissionString(k)):44},MAX_OPEN_FDS:4096,nextfd:function(b,k){k=k||A.MAX_OPEN_FDS;for(var Z=b=b||0;Z<=k;Z++)if(!A.streams[Z])return Z;throw new A.ErrnoError(33)},getStream:function(b){return A.streams[b]},createStream:function(b,k,Z){A.FSStream||(A.FSStream=function(){},A.FSStream.prototype={object:{get:function(){return this.node},set:function(Ot){this.node=Ot}},isRead:{get:function(){return 1!=(2097155&this.flags)}},isWrite:{get:function(){return 0!=(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}}});var rt=new A.FSStream;for(var ht in b)rt[ht]=b[ht];b=rt;var bt=A.nextfd(k,Z);return b.fd=bt,A.streams[bt]=b,b},closeStream:function(b){A.streams[b]=null},chrdev_stream_ops:{open:function(b){var k=A.getDevice(b.node.rdev);b.stream_ops=k.stream_ops,b.stream_ops.open&&b.stream_ops.open(b)},llseek:function(){throw new A.ErrnoError(70)}},major:function(b){return b>>8},minor:function(b){return 255&b},makedev:function(b,k){return b<<8|k},registerDevice:function(b,k){A.devices[b]={stream_ops:k}},getDevice:function(b){return A.devices[b]},getMounts:function(b){for(var k=[],Z=[b];Z.length;){var rt=Z.pop();k.push(rt),Z.push.apply(Z,rt.mounts)}return k},syncfs:function(b,k){"function"==typeof b&&(k=b,b=!1),A.syncFSRequests++,A.syncFSRequests>1&&ce("warning: "+A.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var Z=A.getMounts(A.root.mount),rt=0;function ht(Ot){return A.syncFSRequests--,k(Ot)}function bt(Ot){if(Ot)return bt.errored?void 0:(bt.errored=!0,ht(Ot));++rt>=Z.length&&ht(null)}Z.forEach(function(Ot){if(!Ot.type.syncfs)return bt(null);Ot.type.syncfs(Ot,b,bt)})},mount:function(b,k,Z){var bt,rt="/"===Z,ht=!Z;if(rt&&A.root)throw new A.ErrnoError(10);if(!rt&&!ht){var Ot=A.lookupPath(Z,{follow_mount:!1});if(Z=Ot.path,A.isMountpoint(bt=Ot.node))throw new A.ErrnoError(10);if(!A.isDir(bt.mode))throw new A.ErrnoError(54)}var Bt={type:b,opts:k,mountpoint:Z,mounts:[]},re=b.mount(Bt);return re.mount=Bt,Bt.root=re,rt?A.root=re:bt&&(bt.mounted=Bt,bt.mount&&bt.mount.mounts.push(Bt)),re},unmount:function(b){var k=A.lookupPath(b,{follow_mount:!1});if(!A.isMountpoint(k.node))throw new A.ErrnoError(28);var Z=k.node,rt=Z.mounted,ht=A.getMounts(rt);Object.keys(A.nameTable).forEach(function(Ot){for(var Bt=A.nameTable[Ot];Bt;){var re=Bt.name_next;ht.includes(Bt.mount)&&A.destroyNode(Bt),Bt=re}}),Z.mounted=null;var bt=Z.mount.mounts.indexOf(rt);Z.mount.mounts.splice(bt,1)},lookup:function(b,k){return b.node_ops.lookup(b,k)},mknod:function(b,k,Z){var ht=A.lookupPath(b,{parent:!0}).node,bt=Te.basename(b);if(!bt||"."===bt||".."===bt)throw new A.ErrnoError(28);var Ot=A.mayCreate(ht,bt);if(Ot)throw new A.ErrnoError(Ot);if(!ht.node_ops.mknod)throw new A.ErrnoError(63);return ht.node_ops.mknod(ht,bt,k,Z)},create:function(b,k){return k=void 0!==k?k:438,k&=4095,A.mknod(b,k|=32768,0)},mkdir:function(b,k){return k=void 0!==k?k:511,k&=1023,A.mknod(b,k|=16384,0)},mkdirTree:function(b,k){for(var Z=b.split("/"),rt="",ht=0;ht<Z.length;++ht)if(Z[ht]){rt+="/"+Z[ht];try{A.mkdir(rt,k)}catch(bt){if(20!=bt.errno)throw bt}}},mkdev:function(b,k,Z){return typeof Z>"u"&&(Z=k,k=438),A.mknod(b,k|=8192,Z)},symlink:function(b,k){if(!Pi.resolve(b))throw new A.ErrnoError(44);var rt=A.lookupPath(k,{parent:!0}).node;if(!rt)throw new A.ErrnoError(44);var ht=Te.basename(k),bt=A.mayCreate(rt,ht);if(bt)throw new A.ErrnoError(bt);if(!rt.node_ops.symlink)throw new A.ErrnoError(63);return rt.node_ops.symlink(rt,ht,b)},rename:function(b,k){var Bt,re,Z=Te.dirname(b),rt=Te.dirname(k),ht=Te.basename(b),bt=Te.basename(k);if(Bt=A.lookupPath(b,{parent:!0}).node,re=A.lookupPath(k,{parent:!0}).node,!Bt||!re)throw new A.ErrnoError(44);if(Bt.mount!==re.mount)throw new A.ErrnoError(75);var ni,Ce=A.lookupNode(Bt,ht),$e=Pi.relative(b,rt);if("."!==$e.charAt(0))throw new A.ErrnoError(28);if("."!==($e=Pi.relative(k,Z)).charAt(0))throw new A.ErrnoError(55);try{ni=A.lookupNode(re,bt)}catch{}if(Ce!==ni){var De=A.isDir(Ce.mode),Le=A.mayDelete(Bt,ht,De);if(Le)throw new A.ErrnoError(Le);if(Le=ni?A.mayDelete(re,bt,De):A.mayCreate(re,bt))throw new A.ErrnoError(Le);if(!Bt.node_ops.rename)throw new A.ErrnoError(63);if(A.isMountpoint(Ce)||ni&&A.isMountpoint(ni))throw new A.ErrnoError(10);if(re!==Bt&&(Le=A.nodePermissions(Bt,"w")))throw new A.ErrnoError(Le);A.hashRemoveNode(Ce);try{Bt.node_ops.rename(Ce,re,bt)}catch(mi){throw mi}finally{A.hashAddNode(Ce)}}},rmdir:function(b){var Z=A.lookupPath(b,{parent:!0}).node,rt=Te.basename(b),ht=A.lookupNode(Z,rt),bt=A.mayDelete(Z,rt,!0);if(bt)throw new A.ErrnoError(bt);if(!Z.node_ops.rmdir)throw new A.ErrnoError(63);if(A.isMountpoint(ht))throw new A.ErrnoError(10);Z.node_ops.rmdir(Z,rt),A.destroyNode(ht)},readdir:function(b){var Z=A.lookupPath(b,{follow:!0}).node;if(!Z.node_ops.readdir)throw new A.ErrnoError(54);return Z.node_ops.readdir(Z)},unlink:function(b){var Z=A.lookupPath(b,{parent:!0}).node,rt=Te.basename(b),ht=A.lookupNode(Z,rt),bt=A.mayDelete(Z,rt,!1);if(bt)throw new A.ErrnoError(bt);if(!Z.node_ops.unlink)throw new A.ErrnoError(63);if(A.isMountpoint(ht))throw new A.ErrnoError(10);Z.node_ops.unlink(Z,rt),A.destroyNode(ht)},readlink:function(b){var Z=A.lookupPath(b).node;if(!Z)throw new A.ErrnoError(44);if(!Z.node_ops.readlink)throw new A.ErrnoError(28);return Pi.resolve(A.getPath(Z.parent),Z.node_ops.readlink(Z))},stat:function(b,k){var rt=A.lookupPath(b,{follow:!k}).node;if(!rt)throw new A.ErrnoError(44);if(!rt.node_ops.getattr)throw new A.ErrnoError(63);return rt.node_ops.getattr(rt)},lstat:function(b){return A.stat(b,!0)},chmod:function(b,k,Z){var rt;if(!(rt="string"==typeof b?A.lookupPath(b,{follow:!Z}).node:b).node_ops.setattr)throw new A.ErrnoError(63);rt.node_ops.setattr(rt,{mode:4095&k|-4096&rt.mode,timestamp:Date.now()})},lchmod:function(b,k){A.chmod(b,k,!0)},fchmod:function(b,k){var Z=A.getStream(b);if(!Z)throw new A.ErrnoError(8);A.chmod(Z.node,k)},chown:function(b,k,Z,rt){var ht;if(!(ht="string"==typeof b?A.lookupPath(b,{follow:!rt}).node:b).node_ops.setattr)throw new A.ErrnoError(63);ht.node_ops.setattr(ht,{timestamp:Date.now()})},lchown:function(b,k,Z){A.chown(b,k,Z,!0)},fchown:function(b,k,Z){var rt=A.getStream(b);if(!rt)throw new A.ErrnoError(8);A.chown(rt.node,k,Z)},truncate:function(b,k){if(k<0)throw new A.ErrnoError(28);var Z;if(!(Z="string"==typeof b?A.lookupPath(b,{follow:!0}).node:b).node_ops.setattr)throw new A.ErrnoError(63);if(A.isDir(Z.mode))throw new A.ErrnoError(31);if(!A.isFile(Z.mode))throw new A.ErrnoError(28);var ht=A.nodePermissions(Z,"w");if(ht)throw new A.ErrnoError(ht);Z.node_ops.setattr(Z,{size:k,timestamp:Date.now()})},ftruncate:function(b,k){var Z=A.getStream(b);if(!Z)throw new A.ErrnoError(8);if(0==(2097155&Z.flags))throw new A.ErrnoError(28);A.truncate(Z.node,k)},utime:function(b,k,Z){var ht=A.lookupPath(b,{follow:!0}).node;ht.node_ops.setattr(ht,{timestamp:Math.max(k,Z)})},open:function(b,k,Z,rt,ht){if(""===b)throw new A.ErrnoError(44);var bt;if(Z=typeof Z>"u"?438:Z,Z=64&(k="string"==typeof k?A.modeStringToFlags(k):k)?4095&Z|32768:0,"object"==typeof b)bt=b;else{b=Te.normalize(b);try{bt=A.lookupPath(b,{follow:!(131072&k)}).node}catch{}}var Bt=!1;if(64&k)if(bt){if(128&k)throw new A.ErrnoError(20)}else bt=A.mknod(b,Z,0),Bt=!0;if(!bt)throw new A.ErrnoError(44);if(A.isChrdev(bt.mode)&&(k&=-513),65536&k&&!A.isDir(bt.mode))throw new A.ErrnoError(54);if(!Bt){var re=A.mayOpen(bt,k);if(re)throw new A.ErrnoError(re)}512&k&&A.truncate(bt,0),k&=-131713;var Ce=A.createStream({node:bt,path:A.getPath(bt),id:bt.id,flags:k,mode:bt.mode,seekable:!0,position:0,stream_ops:bt.stream_ops,node_ops:bt.node_ops,ungotten:[],error:!1},rt,ht);return Ce.stream_ops.open&&Ce.stream_ops.open(Ce),D.logReadFiles&&!(1&k)&&(A.readFiles||(A.readFiles={}),b in A.readFiles||(A.readFiles[b]=1)),Ce},close:function(b){if(A.isClosed(b))throw new A.ErrnoError(8);b.getdents&&(b.getdents=null);try{b.stream_ops.close&&b.stream_ops.close(b)}catch(k){throw k}finally{A.closeStream(b.fd)}b.fd=null},isClosed:function(b){return null===b.fd},llseek:function(b,k,Z){if(A.isClosed(b))throw new A.ErrnoError(8);if(!b.seekable||!b.stream_ops.llseek)throw new A.ErrnoError(70);if(0!=Z&&1!=Z&&2!=Z)throw new A.ErrnoError(28);return b.position=b.stream_ops.llseek(b,k,Z),b.ungotten=[],b.position},read:function(b,k,Z,rt,ht){if(rt<0||ht<0)throw new A.ErrnoError(28);if(A.isClosed(b))throw new A.ErrnoError(8);if(1==(2097155&b.flags))throw new A.ErrnoError(8);if(A.isDir(b.node.mode))throw new A.ErrnoError(31);if(!b.stream_ops.read)throw new A.ErrnoError(28);var bt=typeof ht<"u";if(bt){if(!b.seekable)throw new A.ErrnoError(70)}else ht=b.position;var Ot=b.stream_ops.read(b,k,Z,rt,ht);return bt||(b.position+=Ot),Ot},write:function(b,k,Z,rt,ht,bt){if(rt<0||ht<0)throw new A.ErrnoError(28);if(A.isClosed(b))throw new A.ErrnoError(8);if(0==(2097155&b.flags))throw new A.ErrnoError(8);if(A.isDir(b.node.mode))throw new A.ErrnoError(31);if(!b.stream_ops.write)throw new A.ErrnoError(28);b.seekable&&1024&b.flags&&A.llseek(b,0,2);var Ot=typeof ht<"u";if(Ot){if(!b.seekable)throw new A.ErrnoError(70)}else ht=b.position;var Bt=b.stream_ops.write(b,k,Z,rt,ht,bt);return Ot||(b.position+=Bt),Bt},allocate:function(b,k,Z){if(A.isClosed(b))throw new A.ErrnoError(8);if(k<0||Z<=0)throw new A.ErrnoError(28);if(0==(2097155&b.flags))throw new A.ErrnoError(8);if(!A.isFile(b.node.mode)&&!A.isDir(b.node.mode))throw new A.ErrnoError(43);if(!b.stream_ops.allocate)throw new A.ErrnoError(138);b.stream_ops.allocate(b,k,Z)},mmap:function(b,k,Z,rt,ht,bt){if(0!=(2&ht)&&0==(2&bt)&&2!=(2097155&b.flags))throw new A.ErrnoError(2);if(1==(2097155&b.flags))throw new A.ErrnoError(2);if(!b.stream_ops.mmap)throw new A.ErrnoError(43);return b.stream_ops.mmap(b,k,Z,rt,ht,bt)},msync:function(b,k,Z,rt,ht){return b&&b.stream_ops.msync?b.stream_ops.msync(b,k,Z,rt,ht):0},munmap:function(b){return 0},ioctl:function(b,k,Z){if(!b.stream_ops.ioctl)throw new A.ErrnoError(59);return b.stream_ops.ioctl(b,k,Z)},readFile:function(b,k){if((k=k||{}).flags=k.flags||0,k.encoding=k.encoding||"binary","utf8"!==k.encoding&&"binary"!==k.encoding)throw new Error('Invalid encoding type "'+k.encoding+'"');var Z,rt=A.open(b,k.flags),bt=A.stat(b).size,Ot=new Uint8Array(bt);return A.read(rt,Ot,0,bt,0),"utf8"===k.encoding?Z=Zt(Ot,0):"binary"===k.encoding&&(Z=Ot),A.close(rt),Z},writeFile:function(b,k,Z){(Z=Z||{}).flags=Z.flags||577;var rt=A.open(b,Z.flags,Z.mode);if("string"==typeof k){var ht=new Uint8Array(Ee(k)+1),bt=ge(k,ht,0,ht.length);A.write(rt,ht,0,bt,void 0,Z.canOwn)}else{if(!ArrayBuffer.isView(k))throw new Error("Unsupported data type");A.write(rt,k,0,k.byteLength,void 0,Z.canOwn)}A.close(rt)},cwd:function(){return A.currentPath},chdir:function(b){var k=A.lookupPath(b,{follow:!0});if(null===k.node)throw new A.ErrnoError(44);if(!A.isDir(k.node.mode))throw new A.ErrnoError(54);var Z=A.nodePermissions(k.node,"x");if(Z)throw new A.ErrnoError(Z);A.currentPath=k.path},createDefaultDirectories:function(){A.mkdir("/tmp"),A.mkdir("/home"),A.mkdir("/home/web_user")},createDefaultDevices:function(){A.mkdir("/dev"),A.registerDevice(A.makedev(1,3),{read:function(){return 0},write:function(k,Z,rt,ht,bt){return ht}}),A.mkdev("/dev/null",A.makedev(1,3)),hi.register(A.makedev(5,0),hi.default_tty_ops),hi.register(A.makedev(6,0),hi.default_tty1_ops),A.mkdev("/dev/tty",A.makedev(5,0)),A.mkdev("/dev/tty1",A.makedev(6,0));var b=function Bn(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var b=new Uint8Array(1);return function(){return crypto.getRandomValues(b),b[0]}}return function(){_n("randomDevice")}}();A.createDevice("/dev","random",b),A.createDevice("/dev","urandom",b),A.mkdir("/dev/shm"),A.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){A.mkdir("/proc");var b=A.mkdir("/proc/self");A.mkdir("/proc/self/fd"),A.mount({mount:function(){var k=A.createNode(b,"fd",16895,73);return k.node_ops={lookup:function(Z,rt){var bt=A.getStream(+rt);if(!bt)throw new A.ErrnoError(8);var Ot={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return bt.path}}};return Ot.parent=Ot,Ot}},k}},{},"/proc/self/fd")},createStandardStreams:function(){D.stdin?A.createDevice("/dev","stdin",D.stdin):A.symlink("/dev/tty","/dev/stdin"),D.stdout?A.createDevice("/dev","stdout",null,D.stdout):A.symlink("/dev/tty","/dev/stdout"),D.stderr?A.createDevice("/dev","stderr",null,D.stderr):A.symlink("/dev/tty1","/dev/stderr"),A.open("/dev/stdin",0),A.open("/dev/stdout",1),A.open("/dev/stderr",1)},ensureErrnoError:function(){A.ErrnoError||(A.ErrnoError=function(k,Z){this.node=Z,this.setErrno=function(rt){this.errno=rt},this.setErrno(k),this.message="FS error"},A.ErrnoError.prototype=new Error,A.ErrnoError.prototype.constructor=A.ErrnoError,[44].forEach(function(b){A.genericErrors[b]=new A.ErrnoError(b),A.genericErrors[b].stack="<generic error, no stack>"}))},staticInit:function(){A.ensureErrnoError(),A.nameTable=new Array(4096),A.mount($,{},"/"),A.createDefaultDirectories(),A.createDefaultDevices(),A.createSpecialDirectories(),A.filesystems={MEMFS:$}},init:function(b,k,Z){A.init.initialized=!0,A.ensureErrnoError(),D.stdin=b||D.stdin,D.stdout=k||D.stdout,D.stderr=Z||D.stderr,A.createStandardStreams()},quit:function(){A.init.initialized=!1;var b=D._fflush;b&&b(0);for(var k=0;k<A.streams.length;k++){var Z=A.streams[k];!Z||A.close(Z)}},getMode:function(b,k){var Z=0;return b&&(Z|=365),k&&(Z|=146),Z},findObject:function(b,k){var Z=A.analyzePath(b,k);return Z.exists?Z.object:null},analyzePath:function(b,k){try{b=(Z=A.lookupPath(b,{follow:!k})).path}catch{}var rt={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var Z=A.lookupPath(b,{parent:!0});rt.parentExists=!0,rt.parentPath=Z.path,rt.parentObject=Z.node,rt.name=Te.basename(b),Z=A.lookupPath(b,{follow:!k}),rt.exists=!0,rt.path=Z.path,rt.object=Z.node,rt.name=Z.node.name,rt.isRoot="/"===Z.path}catch(ht){rt.error=ht.errno}return rt},createPath:function(b,k,Z,rt){b="string"==typeof b?b:A.getPath(b);for(var ht=k.split("/").reverse();ht.length;){var bt=ht.pop();if(bt){var Ot=Te.join2(b,bt);try{A.mkdir(Ot)}catch{}b=Ot}}return Ot},createFile:function(b,k,Z,rt,ht){var bt=Te.join2("string"==typeof b?b:A.getPath(b),k),Ot=A.getMode(rt,ht);return A.create(bt,Ot)},createDataFile:function(b,k,Z,rt,ht,bt){var Ot=k?Te.join2("string"==typeof b?b:A.getPath(b),k):b,Bt=A.getMode(rt,ht),re=A.create(Ot,Bt);if(Z){if("string"==typeof Z){for(var Ce=new Array(Z.length),$e=0,ni=Z.length;$e<ni;++$e)Ce[$e]=Z.charCodeAt($e);Z=Ce}A.chmod(re,146|Bt);var De=A.open(re,577);A.write(De,Z,0,Z.length,0,bt),A.close(De),A.chmod(re,Bt)}return re},createDevice:function(b,k,Z,rt){var ht=Te.join2("string"==typeof b?b:A.getPath(b),k),bt=A.getMode(!!Z,!!rt);A.createDevice.major||(A.createDevice.major=64);var Ot=A.makedev(A.createDevice.major++,0);return A.registerDevice(Ot,{open:function(Bt){Bt.seekable=!1},close:function(Bt){rt&&rt.buffer&&rt.buffer.length&&rt(10)},read:function(Bt,re,Ce,$e,ni){for(var De=0,Le=0;Le<$e;Le++){var mi;try{mi=Z()}catch{throw new A.ErrnoError(29)}if(void 0===mi&&0===De)throw new A.ErrnoError(6);if(null==mi)break;De++,re[Ce+Le]=mi}return De&&(Bt.node.timestamp=Date.now()),De},write:function(Bt,re,Ce,$e,ni){for(var De=0;De<$e;De++)try{rt(re[Ce+De])}catch{throw new A.ErrnoError(29)}return $e&&(Bt.node.timestamp=Date.now()),De}}),A.mkdev(ht,bt,Ot)},forceLoadFile:function(b){if(b.isDevice||b.isFolder||b.link||b.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!gt)throw new Error("Cannot load without read() or XMLHttpRequest.");try{b.contents=de(gt(b.url),!0),b.usedBytes=b.contents.length}catch{throw new A.ErrnoError(29)}},createLazyFile:function(b,k,Z,rt,ht){function bt(){this.lengthKnown=!1,this.chunks=[]}if(bt.prototype.get=function(De){if(!(De>this.length-1||De<0)){var Le=De%this.chunkSize;return this.getter(De/this.chunkSize|0)[Le]}},bt.prototype.setDataGetter=function(De){this.getter=De},bt.prototype.cacheLength=function(){var De=new XMLHttpRequest;if(De.open("HEAD",Z,!1),De.send(null),!(De.status>=200&&De.status<300||304===De.status))throw new Error("Couldn't load "+Z+". Status: "+De.status);var mi,Le=Number(De.getResponseHeader("Content-length")),ri=(mi=De.getResponseHeader("Accept-Ranges"))&&"bytes"===mi,er=(mi=De.getResponseHeader("Content-Encoding"))&&"gzip"===mi,Ki=1048576;ri||(Ki=Le);var Fi=this;Fi.setDataGetter(function(xn){var ir=xn*Ki,Ri=(xn+1)*Ki-1;if(Ri=Math.min(Ri,Le-1),typeof Fi.chunks[xn]>"u"&&(Fi.chunks[xn]=function(xn,ir){if(xn>ir)throw new Error("invalid range ("+xn+", "+ir+") or no bytes requested!");if(ir>Le-1)throw new Error("only "+Le+" bytes available! programmer error!");var Ri=new XMLHttpRequest;if(Ri.open("GET",Z,!1),Le!==Ki&&Ri.setRequestHeader("Range","bytes="+xn+"-"+ir),typeof Uint8Array<"u"&&(Ri.responseType="arraybuffer"),Ri.overrideMimeType&&Ri.overrideMimeType("text/plain; charset=x-user-defined"),Ri.send(null),!(Ri.status>=200&&Ri.status<300||304===Ri.status))throw new Error("Couldn't load "+Z+". Status: "+Ri.status);return void 0!==Ri.response?new Uint8Array(Ri.response||[]):de(Ri.responseText||"",!0)}(ir,Ri)),typeof Fi.chunks[xn]>"u")throw new Error("doXHR failed!");return Fi.chunks[xn]}),(er||!Le)&&(Ki=Le=1,Le=this.getter(0).length,Ki=Le,Kt("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=Le,this._chunkSize=Ki,this.lengthKnown=!0},typeof XMLHttpRequest<"u")throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var Bt,re=A.createFile(b,k,Bt={isDevice:!1,url:Z},rt,ht);Bt.contents?re.contents=Bt.contents:Bt.url&&(re.contents=null,re.url=Bt.url),Object.defineProperties(re,{usedBytes:{get:function(){return this.contents.length}}});var Ce={};return Object.keys(re.stream_ops).forEach(function(ni){var De=re.stream_ops[ni];Ce[ni]=function(){return A.forceLoadFile(re),De.apply(null,arguments)}}),Ce.read=function(De,Le,mi,ri,er){A.forceLoadFile(re);var Ki=De.node.contents;if(er>=Ki.length)return 0;var Xi=Math.min(Ki.length-er,ri);if(Ki.slice)for(var Fi=0;Fi<Xi;Fi++)Le[mi+Fi]=Ki[er+Fi];else for(Fi=0;Fi<Xi;Fi++)Le[mi+Fi]=Ki.get(er+Fi);return Xi},re.stream_ops=Ce,re},createPreloadedFile:function(b,k,Z,rt,ht,bt,Ot,Bt,re,Ce){Browser.init();var $e=k?Pi.resolve(Te.join2(b,k)):b;function ni(De){function Le(ri){Ce&&Ce(),Bt||A.createDataFile(b,k,ri,rt,ht,re),bt&&bt(),Nn()}var mi=!1;D.preloadPlugins.forEach(function(ri){mi||ri.canHandle($e)&&(ri.handle(De,$e,Le,function(){Ot&&Ot(),Nn()}),mi=!0)}),mi||Le(De)}Fn(),"string"==typeof Z?function ct(b,k,Z,rt){var ht=rt?"":"al "+b;Nt(b,function(bt){It(bt,'Loading data file "'+b+'" failed (no arrayBuffer).'),k(new Uint8Array(bt)),ht&&Nn()},function(bt){if(!Z)throw'Loading data file "'+b+'" failed.';Z()}),ht&&Fn()}(Z,function(De){ni(De)},Ot):ni(Z)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(b,k,Z){k=k||function(){},Z=Z||function(){};var rt=A.indexedDB();try{var ht=rt.open(A.DB_NAME(),A.DB_VERSION)}catch(bt){return Z(bt)}ht.onupgradeneeded=function(){Kt("creating db"),ht.result.createObjectStore(A.DB_STORE_NAME)},ht.onsuccess=function(){var Bt=ht.result.transaction([A.DB_STORE_NAME],"readwrite"),re=Bt.objectStore(A.DB_STORE_NAME),Ce=0,$e=0,ni=b.length;function De(){0==$e?k():Z()}b.forEach(function(Le){var mi=re.put(A.analyzePath(Le).object.contents,Le);mi.onsuccess=function(){++Ce+$e==ni&&De()},mi.onerror=function(){$e++,Ce+$e==ni&&De()}}),Bt.onerror=Z},ht.onerror=Z},loadFilesFromDB:function(b,k,Z){k=k||function(){},Z=Z||function(){};var rt=A.indexedDB();try{var ht=rt.open(A.DB_NAME(),A.DB_VERSION)}catch(bt){return Z(bt)}ht.onupgradeneeded=Z,ht.onsuccess=function(){var Ot=ht.result;try{var Bt=Ot.transaction([A.DB_STORE_NAME],"readonly")}catch(Le){return void Z(Le)}var re=Bt.objectStore(A.DB_STORE_NAME),Ce=0,$e=0,ni=b.length;function De(){0==$e?k():Z()}b.forEach(function(Le){var mi=re.get(Le);mi.onsuccess=function(){A.analyzePath(Le).exists&&A.unlink(Le),A.createDataFile(Te.dirname(Le),Te.basename(Le),mi.result,!0,!0,!0),++Ce+$e==ni&&De()},mi.onerror=function(){$e++,Ce+$e==ni&&De()}}),Bt.onerror=Z},ht.onerror=Z}},Tt={mappings:{},DEFAULT_POLLMASK:5,calculateAt:function(b,k,Z){if("/"===k[0])return k;var rt;if(-100===b)rt=A.cwd();else{var ht=A.getStream(b);if(!ht)throw new A.ErrnoError(8);rt=ht.path}if(0==k.length){if(!Z)throw new A.ErrnoError(44);return rt}return Te.join2(rt,k)},doStat:function(b,k,Z){try{var rt=b(k)}catch(ht){if(ht&&ht.node&&Te.normalize(k)!==Te.normalize(A.getPath(ht.node)))return-54;throw ht}return ve[Z>>2]=rt.dev,ve[Z+4>>2]=0,ve[Z+8>>2]=rt.ino,ve[Z+12>>2]=rt.mode,ve[Z+16>>2]=rt.nlink,ve[Z+20>>2]=rt.uid,ve[Z+24>>2]=rt.gid,ve[Z+28>>2]=rt.rdev,ve[Z+32>>2]=0,ii=[rt.size>>>0,(gi=rt.size,+Math.abs(gi)>=1?gi>0?(0|Math.min(+Math.floor(gi/4294967296),4294967295))>>>0:~~+Math.ceil((gi-+(~~gi>>>0))/4294967296)>>>0:0)],ve[Z+40>>2]=ii[0],ve[Z+44>>2]=ii[1],ve[Z+48>>2]=4096,ve[Z+52>>2]=rt.blocks,ve[Z+56>>2]=rt.atime.getTime()/1e3|0,ve[Z+60>>2]=0,ve[Z+64>>2]=rt.mtime.getTime()/1e3|0,ve[Z+68>>2]=0,ve[Z+72>>2]=rt.ctime.getTime()/1e3|0,ve[Z+76>>2]=0,ii=[rt.ino>>>0,(gi=rt.ino,+Math.abs(gi)>=1?gi>0?(0|Math.min(+Math.floor(gi/4294967296),4294967295))>>>0:~~+Math.ceil((gi-+(~~gi>>>0))/4294967296)>>>0:0)],ve[Z+80>>2]=ii[0],ve[Z+84>>2]=ii[1],0},doMsync:function(b,k,Z,rt,ht){var bt=ei.slice(b,b+Z);A.msync(k,bt,ht,Z,rt)},doMkdir:function(b,k){return"/"===(b=Te.normalize(b))[b.length-1]&&(b=b.substr(0,b.length-1)),A.mkdir(b,k,0),0},doMknod:function(b,k,Z){switch(61440&k){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}return A.mknod(b,k,Z),0},doReadlink:function(b,k,Z){if(Z<=0)return-28;var rt=A.readlink(b),ht=Math.min(Z,Ee(rt)),bt=Ze[k+ht];return function ye(b,k,Z){return ge(b,ei,k,Z)}(rt,k,Z+1),Ze[k+ht]=bt,ht},doAccess:function(b,k){if(-8&k)return-28;var rt=A.lookupPath(b,{follow:!0}).node;if(!rt)return-44;var ht="";return 4&k&&(ht+="r"),2&k&&(ht+="w"),1&k&&(ht+="x"),ht&&A.nodePermissions(rt,ht)?-2:0},doDup:function(b,k,Z){var rt=A.getStream(Z);return rt&&A.close(rt),A.open(b,k,0,Z,Z).fd},doReadv:function(b,k,Z,rt){for(var ht=0,bt=0;bt<Z;bt++){var Bt=ve[k+(8*bt+4)>>2],re=A.read(b,Ze,ve[k+8*bt>>2],Bt,rt);if(re<0)return-1;if(ht+=re,re<Bt)break}return ht},doWritev:function(b,k,Z,rt){for(var ht=0,bt=0;bt<Z;bt++){var re=A.write(b,Ze,ve[k+8*bt>>2],ve[k+(8*bt+4)>>2],rt);if(re<0)return-1;ht+=re}return ht},varargs:void 0,get:function(){return Tt.varargs+=4,ve[Tt.varargs-4>>2]},getStr:function(b){return jt(b)},getStreamFromFD:function(b){var k=A.getStream(b);if(!k)throw new A.ErrnoError(8);return k},get64:function(b,k){return b}};var Gt=[];function pt(b){try{return Ge.grow(b-Ue.byteLength+65535>>>16),Ct(Ge.buffer),1}catch{}}var vt={};function Yt(){if(!Yt.strings){var k={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:$t||"./this.program"};for(var Z in vt)void 0===vt[Z]?delete k[Z]:k[Z]=vt[Z];var rt=[];for(var Z in k)rt.push(Z+"="+k[Z]);Yt.strings=rt}return Yt.strings}var Oe=function(b,k,Z,rt){b||(b=this),this.parent=b,this.mount=b.mount,this.mounted=null,this.id=A.nextInode++,this.name=k,this.mode=Z,this.node_ops={},this.stream_ops={},this.rdev=rt};function de(b,k,Z){var rt=Z>0?Z:Ee(b)+1,ht=new Array(rt),bt=ge(b,ht,0,ht.length);return k&&(ht.length=bt),ht}Object.defineProperties(Oe.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(b){b?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(b){b?this.mode|=146:this.mode&=-147}},isFolder:{get:function(){return A.isDir(this.mode)}},isDevice:{get:function(){return A.isChrdev(this.mode)}}}),A.FSNode=Oe,A.staticInit();var Fe={h:function Dt(b,k,Z){Tt.varargs=Z;try{var rt=Tt.getStr(b),ht=Z?Tt.get():0;return A.open(rt,k,ht).fd}catch(Ot){if(typeof A>"u"||!(Ot instanceof A.ErrnoError))throw Ot;return-Ot.errno}},b:function Pt(){_n("")},a:function zt(b,k,Z){var rt=function Qt(b,k){var Z;for(Gt.length=0,k>>=2;Z=ei[b++];){var rt=Z<105;rt&&1&k&&k++,Gt.push(rt?oi[k++>>1]:ve[k]),++k}return Gt}(k,Z);return Yi[b].apply(null,rt)},k:function J(b,k,Z){ei.copyWithin(b,k,k+Z)},e:function _t(b){var k=ei.length,Z=2147483648;if((b>>>=0)>Z)return!1;for(var rt=1;rt<=4;rt*=2){var ht=k*(1+.2/rt);if(ht=Math.min(ht,b+100663296),pt(Math.min(Z,Ae(Math.max(b,ht),65536))))return!0}return!1},f:function Lt(b,k){var Z=0;return Yt().forEach(function(rt,ht){var bt=k+Z;ve[b+4*ht>>2]=bt,function Ie(b,k,Z){for(var rt=0;rt<b.length;++rt)Ze[k++>>0]=b.charCodeAt(rt);Z||(Ze[k>>0]=0)}(rt,bt),Z+=rt.length+1}),0},g:function ae(b,k){var Z=Yt();ve[b>>2]=Z.length;var rt=0;return Z.forEach(function(ht){rt+=ht.length+1}),ve[k>>2]=rt,0},d:function O(b){try{var k=Tt.getStreamFromFD(b);return A.close(k),0}catch(Z){if(typeof A>"u"||!(Z instanceof A.ErrnoError))throw Z;return Z.errno}},i:function ne(b,k,Z,rt){try{var ht=Tt.getStreamFromFD(b),bt=Tt.doReadv(ht,k,Z);return ve[rt>>2]=bt,0}catch(Ot){if(typeof A>"u"||!(Ot instanceof A.ErrnoError))throw Ot;return Ot.errno}},j:function we(b,k,Z,rt,ht){try{var bt=Tt.getStreamFromFD(b),Bt=4294967296*Z+(k>>>0),re=9007199254740992;return Bt<=-re||Bt>=re?-61:(A.llseek(bt,Bt,rt),ii=[bt.position>>>0,(gi=bt.position,+Math.abs(gi)>=1?gi>0?(0|Math.min(+Math.floor(gi/4294967296),4294967295))>>>0:~~+Math.ceil((gi-+(~~gi>>>0))/4294967296)>>>0:0)],ve[ht>>2]=ii[0],ve[ht+4>>2]=ii[1],bt.getdents&&0===Bt&&0===rt&&(bt.getdents=null),0)}catch(Ce){if(typeof A>"u"||!(Ce instanceof A.ErrnoError))throw Ce;return Ce.errno}},c:function be(b,k,Z,rt){try{var ht=Tt.getStreamFromFD(b),bt=Tt.doWritev(ht,k,Z);return ve[rt>>2]=bt,0}catch(Ot){if(typeof A>"u"||!(Ot instanceof A.ErrnoError))throw Ot;return Ot.errno}},l:function je(b){var k=Date.now();return ve[b>>2]=k/1e3|0,ve[b+4>>2]=k%1e3*1e3|0,0}};(function Oi(){var b={a:Fe};function k(Ot,Bt){D.asm=Ot.exports,Ct((Ge=D.asm.m).buffer),Ht=D.asm.G,function Mn(b){fe.unshift(b)}(D.asm.n),Nn()}function Z(Ot){k(Ot.instance)}function rt(Ot){return function jn(){return xe||"function"!=typeof fetch?Promise.resolve().then(function(){return Si(he)}):fetch(he,{credentials:"same-origin"}).then(function(b){if(!b.ok)throw"failed to load wasm binary file at '"+he+"'";return b.arrayBuffer()}).catch(function(){return Si(he)})}().then(function(Bt){return WebAssembly.instantiate(Bt,b)}).then(function(Bt){return Bt}).then(Ot,function(Bt){ce("failed to asynchronously prepare wasm: "+Bt),_n(Bt)})}if(Fn(),D.instantiateWasm)try{return D.instantiateWasm(b,k)}catch(Ot){return ce("Module.instantiateWasm callback failed with error: "+Ot),!1}return function ht(){return xe||"function"!=typeof WebAssembly.instantiateStreaming||Rn(he)||"function"!=typeof fetch?rt(Z):fetch(he,{credentials:"same-origin"}).then(function(Ot){return WebAssembly.instantiateStreaming(Ot,b).then(Z,function(re){return ce("wasm streaming compile failed: "+re),ce("falling back to ArrayBuffer instantiation"),rt(Z)})})}().catch(St),{}})(),D.___wasm_call_ctors=function(){return(D.___wasm_call_ctors=D.asm.n).apply(null,arguments)};var Ei,di=D._emscripten_bind_CExpat_CExpat_0=function(){return(di=D._emscripten_bind_CExpat_CExpat_0=D.asm.o).apply(null,arguments)},pi=D._emscripten_bind_CExpat_version_0=function(){return(pi=D._emscripten_bind_CExpat_version_0=D.asm.p).apply(null,arguments)},Xe=D._emscripten_bind_CExpat_create_0=function(){return(Xe=D._emscripten_bind_CExpat_create_0=D.asm.q).apply(null,arguments)},Ye=D._emscripten_bind_CExpat_destroy_0=function(){return(Ye=D._emscripten_bind_CExpat_destroy_0=D.asm.r).apply(null,arguments)},wi=D._emscripten_bind_CExpat_parse_1=function(){return(wi=D._emscripten_bind_CExpat_parse_1=D.asm.s).apply(null,arguments)},Vi=D._emscripten_bind_CExpat_tag_0=function(){return(Vi=D._emscripten_bind_CExpat_tag_0=D.asm.t).apply(null,arguments)},Gi=D._emscripten_bind_CExpat_attrs_0=function(){return(Gi=D._emscripten_bind_CExpat_attrs_0=D.asm.u).apply(null,arguments)},Wi=D._emscripten_bind_CExpat_content_0=function(){return(Wi=D._emscripten_bind_CExpat_content_0=D.asm.v).apply(null,arguments)},Pn=D._emscripten_bind_CExpat_startElement_0=function(){return(Pn=D._emscripten_bind_CExpat_startElement_0=D.asm.w).apply(null,arguments)},le=D._emscripten_bind_CExpat_endElement_0=function(){return(le=D._emscripten_bind_CExpat_endElement_0=D.asm.x).apply(null,arguments)},We=D._emscripten_bind_CExpat_characterData_0=function(){return(We=D._emscripten_bind_CExpat_characterData_0=D.asm.y).apply(null,arguments)},vi=D._emscripten_bind_CExpat___destroy___0=function(){return(vi=D._emscripten_bind_CExpat___destroy___0=D.asm.z).apply(null,arguments)},Ci=D._emscripten_bind_VoidPtr___destroy___0=function(){return(Ci=D._emscripten_bind_VoidPtr___destroy___0=D.asm.A).apply(null,arguments)},ji=D._emscripten_bind_CExpatJS_CExpatJS_0=function(){return(ji=D._emscripten_bind_CExpatJS_CExpatJS_0=D.asm.B).apply(null,arguments)},un=D._emscripten_bind_CExpatJS_startElement_0=function(){return(un=D._emscripten_bind_CExpatJS_startElement_0=D.asm.C).apply(null,arguments)},vn=D._emscripten_bind_CExpatJS_endElement_0=function(){return(vn=D._emscripten_bind_CExpatJS_endElement_0=D.asm.D).apply(null,arguments)},Ui=D._emscripten_bind_CExpatJS_characterData_0=function(){return(Ui=D._emscripten_bind_CExpatJS_characterData_0=D.asm.E).apply(null,arguments)},Mi=D._emscripten_bind_CExpatJS___destroy___0=function(){return(Mi=D._emscripten_bind_CExpatJS___destroy___0=D.asm.F).apply(null,arguments)};function bn(b){function k(){Ei||(Ei=!0,D.calledRun=!0,!Ne&&(function ze(){!D.noFSInit&&!A.init.initialized&&A.init(),A.ignorePermissions=!1,cn(fe)}(),mt(D),D.onRuntimeInitialized&&D.onRuntimeInitialized(),function Ti(){if(D.postRun)for("function"==typeof D.postRun&&(D.postRun=[D.postRun]);D.postRun.length;)b=D.postRun.shift(),qt.unshift(b);var b;cn(qt)}()))}gn>0||(function Be(){if(D.preRun)for("function"==typeof D.preRun&&(D.preRun=[D.preRun]);D.preRun.length;)b=D.preRun.shift(),se.unshift(b);var b;cn(se)}(),gn>0)||(D.setStatus?(D.setStatus("Running..."),setTimeout(function(){setTimeout(function(){D.setStatus("")},1),k()},1)):k())}if(D._malloc=function(){return(D._malloc=D.asm.H).apply(null,arguments)},En=function b(){Ei||bn(),Ei||(En=b)},D.run=bn,D.preInit)for("function"==typeof D.preInit&&(D.preInit=[D.preInit]);D.preInit.length>0;)D.preInit.pop()();function fi(){}function li(b){return(b||fi).__cache__}function hn(b,k){var Z=li(k),rt=Z[b];return rt||((rt=Object.create((k||fi).prototype)).ptr=b,Z[b]=rt)}bn(),(fi.prototype=Object.create(fi.prototype)).constructor=fi,fi.prototype.__class__=fi,fi.__cache__={},D.WrapperObject=fi,D.getCache=li,D.wrapPointer=hn,D.castObject=function Jn(b,k){return hn(b.ptr,k)},D.NULL=hn(0),D.destroy=function dn(b){if(!b.__destroy__)throw"Error: Cannot destroy object. (Did you create it yourself?)";b.__destroy__(),delete li(b.__class__)[b.ptr]},D.compare=function Un(b,k){return b.ptr===k.ptr},D.getPointer=function Ni(b){return b.ptr},D.getClass=function Tn(b){return b.__class__};var si={buffer:0,size:0,pos:0,temps:[],needed:0,prepare:function(){if(si.needed){for(var b=0;b<si.temps.length;b++)D._free(si.temps[b]);si.temps.length=0,D._free(si.buffer),si.buffer=0,si.size+=si.needed,si.needed=0}si.buffer||(si.size+=128,si.buffer=D._malloc(si.size),It(si.buffer)),si.pos=0},alloc:function(b,k){It(si.buffer);var ht,rt=b.length*k.BYTES_PER_ELEMENT;return si.pos+(rt=rt+7&-8)>=si.size?(It(rt>0),si.needed+=rt,ht=D._malloc(rt),si.temps.push(ht)):(ht=si.buffer+si.pos,si.pos+=rt),ht},copy:function(b,k,Z){switch(Z>>>=0,k.BYTES_PER_ELEMENT){case 2:Z>>>=1;break;case 4:Z>>>=2;break;case 8:Z>>>=3}for(var ht=0;ht<b.length;ht++)k[Z+ht]=b[ht]}};function Je(){this.ptr=di(),li(Je)[this.ptr]=this}function Ji(){throw"cannot construct a VoidPtr, no constructor in IDL"}function ki(){this.ptr=ji(),li(ki)[this.ptr]=this}return(Je.prototype=Object.create(fi.prototype)).constructor=Je,Je.prototype.__class__=Je,Je.__cache__={},D.CExpat=Je,Je.prototype.version=Je.prototype.version=function(){return jt(pi(this.ptr))},Je.prototype.create=Je.prototype.create=function(){return!!Xe(this.ptr)},Je.prototype.destroy=Je.prototype.destroy=function(){Ye(this.ptr)},Je.prototype.parse=Je.prototype.parse=function(b){var k=this.ptr;return si.prepare(),b=b&&"object"==typeof b?b.ptr:function zn(b){if("string"==typeof b){var k=de(b),Z=si.alloc(k,Ze);return si.copy(k,Ze,Z),Z}return b}(b),!!wi(k,b)},Je.prototype.tag=Je.prototype.tag=function(){return jt(Vi(this.ptr))},Je.prototype.attrs=Je.prototype.attrs=function(){return jt(Gi(this.ptr))},Je.prototype.content=Je.prototype.content=function(){return jt(Wi(this.ptr))},Je.prototype.startElement=Je.prototype.startElement=function(){Pn(this.ptr)},Je.prototype.endElement=Je.prototype.endElement=function(){le(this.ptr)},Je.prototype.characterData=Je.prototype.characterData=function(){We(this.ptr)},Je.prototype.__destroy__=Je.prototype.__destroy__=function(){vi(this.ptr)},(Ji.prototype=Object.create(fi.prototype)).constructor=Ji,Ji.prototype.__class__=Ji,Ji.__cache__={},D.VoidPtr=Ji,Ji.prototype.__destroy__=Ji.prototype.__destroy__=function(){Ci(this.ptr)},(ki.prototype=Object.create(Je.prototype)).constructor=ki,ki.prototype.__class__=ki,ki.__cache__={},D.CExpatJS=ki,ki.prototype.startElement=ki.prototype.startElement=function(){un(this.ptr)},ki.prototype.endElement=ki.prototype.endElement=function(){vn(this.ptr)},ki.prototype.characterData=ki.prototype.characterData=function(){Ui(this.ptr)},ki.prototype.__destroy__=ki.prototype.__destroy__=function(){Mi(this.ptr)},U.ready},x.exports=it;var m=Object.freeze(c({__proto__:null,default:x.exports},[x.exports]));var d=function p(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}().__hpcc_wasmFolder||void 0;function l(H){if(!arguments.length)return d;var Q=d;return d=H,Q}function u(H,Q,it){var q=H.default||H;return q.__hpcc_promise||(q.__hpcc_promise=q({wasmBinary:it,locateFile:function(U,D){return"".concat(function h(H,Q){for(;H.charAt(H.length-1)===Q;)H=H.substring(0,H.length-1);return H}(Q||l()||D||".","/"),"/").concat(function f(H,Q){for(;H.charAt(0)===Q;)H=H.substring(1);return H}(U,"/"))}})),q.__hpcc_promise}var g=function(){function H(Q,it){this.tag=Q,this.attrs=it,this._content=""}return Object.defineProperty(H.prototype,"content",{get:function(){return this._content},enumerable:!1,configurable:!0}),H.prototype.appendContent=function(Q){this._content+=Q},H}(),C=function(){function H(){this._stack=[]}return H.prototype.parse=function(Q,it,q){return R(Q,this,it,q)},H.prototype.top=function(){return this._stack[this._stack.length-1]},H.prototype.startElement=function(Q,it){var q=new g(Q,it);return this._stack.push(q),q},H.prototype.endElement=function(Q){return this._stack.pop()},H.prototype.characterData=function(Q){this.top().appendContent(Q)},H}();function R(H,Q,it,q){return u(m,it,q).then(function(U){var D=new U.CExpatJS;D.startElement=function(){Q.startElement(this.tag(),function L(H){var Q={},it=H,q="".concat(String.fromCharCode(1)),U="".concat(q).concat(q);return it.split(U).filter(function(D){return!!D}).forEach(function(D){var mt=D.split(q);Q[mt[0]]=mt[1]}),Q}(this.attrs()))},D.endElement=function(){Q.endElement(this.tag())},D.characterData=function(){Q.characterData(this.content())},D.create();var mt=D.parse(H);return D.destroy(),U.destroy(D),mt})}var M={exports:{}};!function(H,Q){var it=function(){var q=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return function(U){var mt,St,D=typeof(U=U||{})<"u"?U:{};D.ready=new Promise(function(y,S){mt=y,St=S});var Et,Mt={};for(Et in D)D.hasOwnProperty(Et)&&(Mt[Et]=D[Et]);var Nt,ee,$t="./this.program",ue=function(y,S){throw S},ft="";typeof document<"u"&&document.currentScript&&(ft=document.currentScript.src),q&&(ft=q),ft=0!==ft.indexOf("blob:")?ft.substr(0,ft.replace(/[?#].*/,"").lastIndexOf("/")+1):"",Nt=function(y){var S=new XMLHttpRequest;return S.open("GET",y,!1),S.send(null),S.responseText},ee=function(y,S,P){var j=new XMLHttpRequest;j.open("GET",y,!0),j.responseType="arraybuffer",j.onload=function(){200==j.status||0==j.status&&j.response?S(j.response):P()},j.onerror=P,j.send(null)};var ce=D.print||console.log.bind(console),xe=D.printErr||console.warn.bind(console);for(Et in Mt)Mt.hasOwnProperty(Et)&&(D[Et]=Mt[Et]);Mt=null,D.thisProgram&&($t=D.thisProgram),D.quit&&(ue=D.quit);var Xt,Ge=0;D.wasmBinary&&(Xt=D.wasmBinary);var Zt=D.noExitRuntime||!0;"object"!=typeof WebAssembly&&ii("no native wasm support detected");var jt,ge=!1;function ye(y,S){y||ii("Assertion failed: "+S)}var Ct,Ht,se,fe,qt,Be,Ee=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Ie(y,S,P){for(var j=S+P,dt=S;y[dt]&&!(dt>=j);)++dt;if(dt-S>16&&y.subarray&&Ee)return Ee.decode(y.subarray(S,dt));for(var yt="";S<dt;){var At=y[S++];if(128&At){var Rt=63&y[S++];if(192!=(224&At)){var te=63&y[S++];if((At=224==(240&At)?(15&At)<<12|Rt<<6|te:(7&At)<<18|Rt<<12|te<<6|63&y[S++])<65536)yt+=String.fromCharCode(At);else{var ke=At-65536;yt+=String.fromCharCode(55296|ke>>10,56320|1023&ke)}}else yt+=String.fromCharCode((31&At)<<6|Rt)}else yt+=String.fromCharCode(At)}return yt}function Ae(y,S){return y?Ie(se,y,S):""}function Ue(y,S,P,j){if(!(j>0))return 0;for(var dt=P,yt=P+j-1,At=0;At<y.length;++At){var Rt=y.charCodeAt(At);if(Rt>=55296&&Rt<=57343&&(Rt=65536+((1023&Rt)<<10)|1023&y.charCodeAt(++At)),Rt<=127){if(P>=yt)break;S[P++]=Rt}else if(Rt<=2047){if(P+1>=yt)break;S[P++]=192|Rt>>6,S[P++]=128|63&Rt}else if(Rt<=65535){if(P+2>=yt)break;S[P++]=224|Rt>>12,S[P++]=128|Rt>>6&63,S[P++]=128|63&Rt}else{if(P+3>=yt)break;S[P++]=240|Rt>>18,S[P++]=128|Rt>>12&63,S[P++]=128|Rt>>6&63,S[P++]=128|63&Rt}}return S[P]=0,P-dt}function ei(y){for(var S=0,P=0;P<y.length;++P){var j=y.charCodeAt(P);j>=55296&&j<=57343&&(j=65536+((1023&j)<<10)|1023&y.charCodeAt(++P)),j<=127?++S:S+=j<=2047?2:j<=65535?3:4}return S}function oi(y,S){return y%S>0&&(y+=S-y%S),y}function ze(y){Ct=y,D.HEAP8=Ht=new Int8Array(y),D.HEAP16=fe=new Int16Array(y),D.HEAP32=qt=new Int32Array(y),D.HEAPU8=se=new Uint8Array(y),D.HEAPU16=new Uint16Array(y),D.HEAPU32=new Uint32Array(y),D.HEAPF32=new Float32Array(y),D.HEAPF64=Be=new Float64Array(y)}var Ti,ln=[],Mn=[],mn=[];var he=0,Si=null;function Oi(y){he++,D.monitorRunDependencies&&D.monitorRunDependencies(he)}function gi(y){if(he--,D.monitorRunDependencies&&D.monitorRunDependencies(he),0==he&&Si){var S=Si;Si=null,S()}}function ii(y){D.onAbort&&D.onAbort(y),xe(y="Aborted("+y+")"),ge=!0,y+=". Build with -s ASSERTIONS=1 for more info.";var S=new WebAssembly.RuntimeError(y);throw St(S),S}D.preloadedImages={},D.preloadedAudios={};var Ii;function cn(y){return y.startsWith("data:application/octet-stream;base64,")}function Te(y){try{if(y==Ii&&Xt)return new Uint8Array(Xt);throw"both async and sync fetching of the wasm failed"}catch(S){ii(S)}}cn(Ii="graphvizlib.wasm")||(Ii=function gt(y){return D.locateFile?D.locateFile(y,ft):ft+y}(Ii));var hi,z,Tt,$={161580:function(y,S){var P=Ae(y),j=Ae(S);O.createPath("/",zt.dirname(P)),O.writeFile(zt.join("/",P),j)}};function ct(y){for(;y.length>0;){var S=y.shift();if("function"!=typeof S){var P=S.func;"number"==typeof P?void 0===S.arg?A(P)():A(P)(S.arg):P(void 0===S.arg?null:S.arg)}else S(D)}}function A(y){return Ti.get(y)}Tt=function(){return performance.now()};function Pt(y){return qt[Ot()>>2]=y,y}var zt={splitPath:function(y){return/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(y).slice(1)},normalizeArray:function(y,S){for(var P=0,j=y.length-1;j>=0;j--){var dt=y[j];"."===dt?y.splice(j,1):".."===dt?(y.splice(j,1),P++):P&&(y.splice(j,1),P--)}if(S)for(;P;P--)y.unshift("..");return y},normalize:function(y){var S="/"===y.charAt(0),P="/"===y.substr(-1);return!(y=zt.normalizeArray(y.split("/").filter(function(j){return!!j}),!S).join("/"))&&!S&&(y="."),y&&P&&(y+="/"),(S?"/":"")+y},dirname:function(y){var S=zt.splitPath(y),P=S[0],j=S[1];return P||j?(j&&(j=j.substr(0,j.length-1)),P+j):"."},basename:function(y){if("/"===y)return"/";var S=(y=(y=zt.normalize(y)).replace(/\/$/,"")).lastIndexOf("/");return-1===S?y:y.substr(S+1)},extname:function(y){return zt.splitPath(y)[3]},join:function(){var y=Array.prototype.slice.call(arguments,0);return zt.normalize(y.join("/"))},join2:function(y,S){return zt.normalize(y+"/"+S)}};var pt={resolve:function(){for(var y="",S=!1,P=arguments.length-1;P>=-1&&!S;P--){var j=P>=0?arguments[P]:O.cwd();if("string"!=typeof j)throw new TypeError("Arguments to path.resolve must be strings");if(!j)return"";y=j+"/"+y,S="/"===j.charAt(0)}return(S?"/":"")+(y=zt.normalizeArray(y.split("/").filter(function(dt){return!!dt}),!S).join("/"))||"."},relative:function(y,S){function P(ke){for(var Ke=0;Ke<ke.length&&""===ke[Ke];Ke++);for(var ci=ke.length-1;ci>=0&&""===ke[ci];ci--);return Ke>ci?[]:ke.slice(Ke,ci-Ke+1)}y=pt.resolve(y).substr(1),S=pt.resolve(S).substr(1);for(var j=P(y.split("/")),dt=P(S.split("/")),yt=Math.min(j.length,dt.length),At=yt,Rt=0;Rt<yt;Rt++)if(j[Rt]!==dt[Rt]){At=Rt;break}var te=[];for(Rt=At;Rt<j.length;Rt++)te.push("..");return(te=te.concat(dt.slice(At))).join("/")}},_t={ttys:[],init:function(){},shutdown:function(){},register:function(y,S){_t.ttys[y]={input:[],output:[],ops:S},O.registerDevice(y,_t.stream_ops)},stream_ops:{open:function(y){var S=_t.ttys[y.node.rdev];if(!S)throw new O.ErrnoError(43);y.tty=S,y.seekable=!1},close:function(y){y.tty.ops.flush(y.tty)},flush:function(y){y.tty.ops.flush(y.tty)},read:function(y,S,P,j,dt){if(!y.tty||!y.tty.ops.get_char)throw new O.ErrnoError(60);for(var yt=0,At=0;At<j;At++){var Rt;try{Rt=y.tty.ops.get_char(y.tty)}catch{throw new O.ErrnoError(29)}if(void 0===Rt&&0===yt)throw new O.ErrnoError(6);if(null==Rt)break;yt++,S[P+At]=Rt}return yt&&(y.node.timestamp=Date.now()),yt},write:function(y,S,P,j,dt){if(!y.tty||!y.tty.ops.put_char)throw new O.ErrnoError(60);try{for(var yt=0;yt<j;yt++)y.tty.ops.put_char(y.tty,S[P+yt])}catch{throw new O.ErrnoError(29)}return j&&(y.node.timestamp=Date.now()),yt}},default_tty_ops:{get_char:function(y){if(!y.input.length){var S=null;if(typeof window<"u"&&"function"==typeof window.prompt?null!==(S=window.prompt("Input: "))&&(S+="\n"):"function"==typeof readline&&null!==(S=readline())&&(S+="\n"),!S)return null;y.input=zn(S,!0)}return y.input.shift()},put_char:function(y,S){null===S||10===S?(ce(Ie(y.output,0)),y.output=[]):0!=S&&y.output.push(S)},flush:function(y){y.output&&y.output.length>0&&(ce(Ie(y.output,0)),y.output=[])}},default_tty1_ops:{put_char:function(y,S){null===S||10===S?(xe(Ie(y.output,0)),y.output=[]):0!=S&&y.output.push(S)},flush:function(y){y.output&&y.output.length>0&&(xe(Ie(y.output,0)),y.output=[])}}};function Yt(y){y=function Ut(y,S){return Math.ceil(y/S)*S}(y,65536);var S=$e(65536,y);return S?(function vt(y,S){se.fill(0,y,y+S)}(S,y),S):0}var Lt={ops_table:null,mount:function(y){return Lt.createNode(null,"/",16895,0)},createNode:function(y,S,P,j){if(O.isBlkdev(P)||O.isFIFO(P))throw new O.ErrnoError(63);Lt.ops_table||(Lt.ops_table={dir:{node:{getattr:Lt.node_ops.getattr,setattr:Lt.node_ops.setattr,lookup:Lt.node_ops.lookup,mknod:Lt.node_ops.mknod,rename:Lt.node_ops.rename,unlink:Lt.node_ops.unlink,rmdir:Lt.node_ops.rmdir,readdir:Lt.node_ops.readdir,symlink:Lt.node_ops.symlink},stream:{llseek:Lt.stream_ops.llseek}},file:{node:{getattr:Lt.node_ops.getattr,setattr:Lt.node_ops.setattr},stream:{llseek:Lt.stream_ops.llseek,read:Lt.stream_ops.read,write:Lt.stream_ops.write,allocate:Lt.stream_ops.allocate,mmap:Lt.stream_ops.mmap,msync:Lt.stream_ops.msync}},link:{node:{getattr:Lt.node_ops.getattr,setattr:Lt.node_ops.setattr,readlink:Lt.node_ops.readlink},stream:{}},chrdev:{node:{getattr:Lt.node_ops.getattr,setattr:Lt.node_ops.setattr},stream:O.chrdev_stream_ops}});var dt=O.createNode(y,S,P,j);return O.isDir(dt.mode)?(dt.node_ops=Lt.ops_table.dir.node,dt.stream_ops=Lt.ops_table.dir.stream,dt.contents={}):O.isFile(dt.mode)?(dt.node_ops=Lt.ops_table.file.node,dt.stream_ops=Lt.ops_table.file.stream,dt.usedBytes=0,dt.contents=null):O.isLink(dt.mode)?(dt.node_ops=Lt.ops_table.link.node,dt.stream_ops=Lt.ops_table.link.stream):O.isChrdev(dt.mode)&&(dt.node_ops=Lt.ops_table.chrdev.node,dt.stream_ops=Lt.ops_table.chrdev.stream),dt.timestamp=Date.now(),y&&(y.contents[S]=dt,y.timestamp=dt.timestamp),dt},getFileDataAsTypedArray:function(y){return y.contents?y.contents.subarray?y.contents.subarray(0,y.usedBytes):new Uint8Array(y.contents):new Uint8Array(0)},expandFileStorage:function(y,S){var P=y.contents?y.contents.length:0;if(!(P>=S)){S=Math.max(S,P*(P<1048576?2:1.125)>>>0),0!=P&&(S=Math.max(S,256));var dt=y.contents;y.contents=new Uint8Array(S),y.usedBytes>0&&y.contents.set(dt.subarray(0,y.usedBytes),0)}},resizeFileStorage:function(y,S){if(y.usedBytes!=S)if(0==S)y.contents=null,y.usedBytes=0;else{var P=y.contents;y.contents=new Uint8Array(S),P&&y.contents.set(P.subarray(0,Math.min(S,y.usedBytes))),y.usedBytes=S}},node_ops:{getattr:function(y){var S={};return S.dev=O.isChrdev(y.mode)?y.id:1,S.ino=y.id,S.mode=y.mode,S.nlink=1,S.uid=0,S.gid=0,S.rdev=y.rdev,S.size=O.isDir(y.mode)?4096:O.isFile(y.mode)?y.usedBytes:O.isLink(y.mode)?y.link.length:0,S.atime=new Date(y.timestamp),S.mtime=new Date(y.timestamp),S.ctime=new Date(y.timestamp),S.blksize=4096,S.blocks=Math.ceil(S.size/S.blksize),S},setattr:function(y,S){void 0!==S.mode&&(y.mode=S.mode),void 0!==S.timestamp&&(y.timestamp=S.timestamp),void 0!==S.size&&Lt.resizeFileStorage(y,S.size)},lookup:function(y,S){throw O.genericErrors[44]},mknod:function(y,S,P,j){return Lt.createNode(y,S,P,j)},rename:function(y,S,P){if(O.isDir(y.mode)){var j;try{j=O.lookupNode(S,P)}catch{}if(j)for(var dt in j.contents)throw new O.ErrnoError(55)}delete y.parent.contents[y.name],y.parent.timestamp=Date.now(),y.name=P,S.contents[P]=y,S.timestamp=y.parent.timestamp,y.parent=S},unlink:function(y,S){delete y.contents[S],y.timestamp=Date.now()},rmdir:function(y,S){var P=O.lookupNode(y,S);for(var j in P.contents)throw new O.ErrnoError(55);delete y.contents[S],y.timestamp=Date.now()},readdir:function(y){var S=[".",".."];for(var P in y.contents)!y.contents.hasOwnProperty(P)||S.push(P);return S},symlink:function(y,S,P){var j=Lt.createNode(y,S,41471,0);return j.link=P,j},readlink:function(y){if(!O.isLink(y.mode))throw new O.ErrnoError(28);return y.link}},stream_ops:{read:function(y,S,P,j,dt){var yt=y.node.contents;if(dt>=y.node.usedBytes)return 0;var At=Math.min(y.node.usedBytes-dt,j);if(At>8&&yt.subarray)S.set(yt.subarray(dt,dt+At),P);else for(var Rt=0;Rt<At;Rt++)S[P+Rt]=yt[dt+Rt];return At},write:function(y,S,P,j,dt,yt){if(S.buffer===Ht.buffer&&(yt=!1),!j)return 0;var At=y.node;if(At.timestamp=Date.now(),S.subarray&&(!At.contents||At.contents.subarray)){if(yt)return At.contents=S.subarray(P,P+j),At.usedBytes=j,j;if(0===At.usedBytes&&0===dt)return At.contents=S.slice(P,P+j),At.usedBytes=j,j;if(dt+j<=At.usedBytes)return At.contents.set(S.subarray(P,P+j),dt),j}if(Lt.expandFileStorage(At,dt+j),At.contents.subarray&&S.subarray)At.contents.set(S.subarray(P,P+j),dt);else for(var Rt=0;Rt<j;Rt++)At.contents[dt+Rt]=S[P+Rt];return At.usedBytes=Math.max(At.usedBytes,dt+j),j},llseek:function(y,S,P){var j=S;if(1===P?j+=y.position:2===P&&O.isFile(y.node.mode)&&(j+=y.node.usedBytes),j<0)throw new O.ErrnoError(28);return j},allocate:function(y,S,P){Lt.expandFileStorage(y.node,S+P),y.node.usedBytes=Math.max(y.node.usedBytes,S+P)},mmap:function(y,S,P,j,dt,yt){if(0!==S)throw new O.ErrnoError(28);if(!O.isFile(y.node.mode))throw new O.ErrnoError(43);var At,Rt,te=y.node.contents;if(2&yt||te.buffer!==Ct){if((j>0||j+P<te.length)&&(te=te.subarray?te.subarray(j,j+P):Array.prototype.slice.call(te,j,j+P)),Rt=!0,!(At=Yt(P)))throw new O.ErrnoError(48);Ht.set(te,At)}else Rt=!1,At=te.byteOffset;return{ptr:At,allocated:Rt}},msync:function(y,S,P,j,dt){if(!O.isFile(y.node.mode))throw new O.ErrnoError(43);return 2&dt||Lt.stream_ops.write(y,S,0,j,P,!1),0}}};var O={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:function(y,S){if(S=S||{},!(y=pt.resolve(O.cwd(),y)))return{path:"",node:null};var P={follow_mount:!0,recurse_count:0};for(var j in P)void 0===S[j]&&(S[j]=P[j]);if(S.recurse_count>8)throw new O.ErrnoError(32);for(var dt=zt.normalizeArray(y.split("/").filter(function(Me){return!!Me}),!1),yt=O.root,At="/",Rt=0;Rt<dt.length;Rt++){var te=Rt===dt.length-1;if(te&&S.parent)break;if(yt=O.lookupNode(yt,dt[Rt]),At=zt.join2(At,dt[Rt]),O.isMountpoint(yt)&&(!te||te&&S.follow_mount)&&(yt=yt.mounted.root),!te||S.follow)for(var ke=0;O.isLink(yt.mode);){var Ke=O.readlink(At);if(At=pt.resolve(zt.dirname(At),Ke),yt=O.lookupPath(At,{recurse_count:S.recurse_count}).node,ke++>40)throw new O.ErrnoError(32)}}return{path:At,node:yt}},getPath:function(y){for(var S;;){if(O.isRoot(y)){var P=y.mount.mountpoint;return S?"/"!==P[P.length-1]?P+"/"+S:P+S:P}S=S?y.name+"/"+S:y.name,y=y.parent}},hashName:function(y,S){for(var P=0,j=0;j<S.length;j++)P=(P<<5)-P+S.charCodeAt(j)|0;return(y+P>>>0)%O.nameTable.length},hashAddNode:function(y){var S=O.hashName(y.parent.id,y.name);y.name_next=O.nameTable[S],O.nameTable[S]=y},hashRemoveNode:function(y){var S=O.hashName(y.parent.id,y.name);if(O.nameTable[S]===y)O.nameTable[S]=y.name_next;else for(var P=O.nameTable[S];P;){if(P.name_next===y){P.name_next=y.name_next;break}P=P.name_next}},lookupNode:function(y,S){var P=O.mayLookup(y);if(P)throw new O.ErrnoError(P,y);for(var j=O.hashName(y.id,S),dt=O.nameTable[j];dt;dt=dt.name_next)if(dt.parent.id===y.id&&dt.name===S)return dt;return O.lookup(y,S)},createNode:function(y,S,P,j){var dt=new O.FSNode(y,S,P,j);return O.hashAddNode(dt),dt},destroyNode:function(y){O.hashRemoveNode(y)},isRoot:function(y){return y===y.parent},isMountpoint:function(y){return!!y.mounted},isFile:function(y){return 32768==(61440&y)},isDir:function(y){return 16384==(61440&y)},isLink:function(y){return 40960==(61440&y)},isChrdev:function(y){return 8192==(61440&y)},isBlkdev:function(y){return 24576==(61440&y)},isFIFO:function(y){return 4096==(61440&y)},isSocket:function(y){return 49152==(49152&y)},flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:function(y){var S=O.flagModes[y];if(typeof S>"u")throw new Error("Unknown file open mode: "+y);return S},flagsToPermissionString:function(y){var S=["r","w","rw"][3&y];return 512&y&&(S+="w"),S},nodePermissions:function(y,S){return O.ignorePermissions?0:S.includes("r")&&!(292&y.mode)||S.includes("w")&&!(146&y.mode)||S.includes("x")&&!(73&y.mode)?2:0},mayLookup:function(y){return O.nodePermissions(y,"x")||(y.node_ops.lookup?0:2)},mayCreate:function(y,S){try{return O.lookupNode(y,S),20}catch{}return O.nodePermissions(y,"wx")},mayDelete:function(y,S,P){var j;try{j=O.lookupNode(y,S)}catch(yt){return yt.errno}var dt=O.nodePermissions(y,"wx");if(dt)return dt;if(P){if(!O.isDir(j.mode))return 54;if(O.isRoot(j)||O.getPath(j)===O.cwd())return 10}else if(O.isDir(j.mode))return 31;return 0},mayOpen:function(y,S){return y?O.isLink(y.mode)?32:O.isDir(y.mode)&&("r"!==O.flagsToPermissionString(S)||512&S)?31:O.nodePermissions(y,O.flagsToPermissionString(S)):44},MAX_OPEN_FDS:4096,nextfd:function(y,S){S=S||O.MAX_OPEN_FDS;for(var P=y=y||0;P<=S;P++)if(!O.streams[P])return P;throw new O.ErrnoError(33)},getStream:function(y){return O.streams[y]},createStream:function(y,S,P){O.FSStream||(O.FSStream=function(){},O.FSStream.prototype={object:{get:function(){return this.node},set:function(At){this.node=At}},isRead:{get:function(){return 1!=(2097155&this.flags)}},isWrite:{get:function(){return 0!=(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}}});var j=new O.FSStream;for(var dt in y)j[dt]=y[dt];y=j;var yt=O.nextfd(S,P);return y.fd=yt,O.streams[yt]=y,y},closeStream:function(y){O.streams[y]=null},chrdev_stream_ops:{open:function(y){var S=O.getDevice(y.node.rdev);y.stream_ops=S.stream_ops,y.stream_ops.open&&y.stream_ops.open(y)},llseek:function(){throw new O.ErrnoError(70)}},major:function(y){return y>>8},minor:function(y){return 255&y},makedev:function(y,S){return y<<8|S},registerDevice:function(y,S){O.devices[y]={stream_ops:S}},getDevice:function(y){return O.devices[y]},getMounts:function(y){for(var S=[],P=[y];P.length;){var j=P.pop();S.push(j),P.push.apply(P,j.mounts)}return S},syncfs:function(y,S){"function"==typeof y&&(S=y,y=!1),O.syncFSRequests++,O.syncFSRequests>1&&xe("warning: "+O.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var P=O.getMounts(O.root.mount),j=0;function dt(At){return O.syncFSRequests--,S(At)}function yt(At){if(At)return yt.errored?void 0:(yt.errored=!0,dt(At));++j>=P.length&&dt(null)}P.forEach(function(At){if(!At.type.syncfs)return yt(null);At.type.syncfs(At,y,yt)})},mount:function(y,S,P){var yt,j="/"===P,dt=!P;if(j&&O.root)throw new O.ErrnoError(10);if(!j&&!dt){var At=O.lookupPath(P,{follow_mount:!1});if(P=At.path,O.isMountpoint(yt=At.node))throw new O.ErrnoError(10);if(!O.isDir(yt.mode))throw new O.ErrnoError(54)}var Rt={type:y,opts:S,mountpoint:P,mounts:[]},te=y.mount(Rt);return te.mount=Rt,Rt.root=te,j?O.root=te:yt&&(yt.mounted=Rt,yt.mount&&yt.mount.mounts.push(Rt)),te},unmount:function(y){var S=O.lookupPath(y,{follow_mount:!1});if(!O.isMountpoint(S.node))throw new O.ErrnoError(28);var P=S.node,j=P.mounted,dt=O.getMounts(j);Object.keys(O.nameTable).forEach(function(At){for(var Rt=O.nameTable[At];Rt;){var te=Rt.name_next;dt.includes(Rt.mount)&&O.destroyNode(Rt),Rt=te}}),P.mounted=null;var yt=P.mount.mounts.indexOf(j);P.mount.mounts.splice(yt,1)},lookup:function(y,S){return y.node_ops.lookup(y,S)},mknod:function(y,S,P){var dt=O.lookupPath(y,{parent:!0}).node,yt=zt.basename(y);if(!yt||"."===yt||".."===yt)throw new O.ErrnoError(28);var At=O.mayCreate(dt,yt);if(At)throw new O.ErrnoError(At);if(!dt.node_ops.mknod)throw new O.ErrnoError(63);return dt.node_ops.mknod(dt,yt,S,P)},create:function(y,S){return S=void 0!==S?S:438,S&=4095,O.mknod(y,S|=32768,0)},mkdir:function(y,S){return S=void 0!==S?S:511,S&=1023,O.mknod(y,S|=16384,0)},mkdirTree:function(y,S){for(var P=y.split("/"),j="",dt=0;dt<P.length;++dt)if(P[dt]){j+="/"+P[dt];try{O.mkdir(j,S)}catch(yt){if(20!=yt.errno)throw yt}}},mkdev:function(y,S,P){return typeof P>"u"&&(P=S,S=438),O.mknod(y,S|=8192,P)},symlink:function(y,S){if(!pt.resolve(y))throw new O.ErrnoError(44);var j=O.lookupPath(S,{parent:!0}).node;if(!j)throw new O.ErrnoError(44);var dt=zt.basename(S),yt=O.mayCreate(j,dt);if(yt)throw new O.ErrnoError(yt);if(!j.node_ops.symlink)throw new O.ErrnoError(63);return j.node_ops.symlink(j,dt,y)},rename:function(y,S){var Rt,te,P=zt.dirname(y),j=zt.dirname(S),dt=zt.basename(y),yt=zt.basename(S);if(Rt=O.lookupPath(y,{parent:!0}).node,te=O.lookupPath(S,{parent:!0}).node,!Rt||!te)throw new O.ErrnoError(44);if(Rt.mount!==te.mount)throw new O.ErrnoError(75);var ci,ke=O.lookupNode(Rt,dt),Ke=pt.relative(y,j);if("."!==Ke.charAt(0))throw new O.ErrnoError(28);if("."!==(Ke=pt.relative(S,P)).charAt(0))throw new O.ErrnoError(55);try{ci=O.lookupNode(te,yt)}catch{}if(ke!==ci){var Me=O.isDir(ke.mode),Ve=O.mayDelete(Rt,dt,Me);if(Ve)throw new O.ErrnoError(Ve);if(Ve=ci?O.mayDelete(te,yt,Me):O.mayCreate(te,yt))throw new O.ErrnoError(Ve);if(!Rt.node_ops.rename)throw new O.ErrnoError(63);if(O.isMountpoint(ke)||ci&&O.isMountpoint(ci))throw new O.ErrnoError(10);if(te!==Rt&&(Ve=O.nodePermissions(Rt,"w")))throw new O.ErrnoError(Ve);O.hashRemoveNode(ke);try{Rt.node_ops.rename(ke,te,yt)}catch(_i){throw _i}finally{O.hashAddNode(ke)}}},rmdir:function(y){var P=O.lookupPath(y,{parent:!0}).node,j=zt.basename(y),dt=O.lookupNode(P,j),yt=O.mayDelete(P,j,!0);if(yt)throw new O.ErrnoError(yt);if(!P.node_ops.rmdir)throw new O.ErrnoError(63);if(O.isMountpoint(dt))throw new O.ErrnoError(10);P.node_ops.rmdir(P,j),O.destroyNode(dt)},readdir:function(y){var P=O.lookupPath(y,{follow:!0}).node;if(!P.node_ops.readdir)throw new O.ErrnoError(54);return P.node_ops.readdir(P)},unlink:function(y){var P=O.lookupPath(y,{parent:!0}).node,j=zt.basename(y),dt=O.lookupNode(P,j),yt=O.mayDelete(P,j,!1);if(yt)throw new O.ErrnoError(yt);if(!P.node_ops.unlink)throw new O.ErrnoError(63);if(O.isMountpoint(dt))throw new O.ErrnoError(10);P.node_ops.unlink(P,j),O.destroyNode(dt)},readlink:function(y){var P=O.lookupPath(y).node;if(!P)throw new O.ErrnoError(44);if(!P.node_ops.readlink)throw new O.ErrnoError(28);return pt.resolve(O.getPath(P.parent),P.node_ops.readlink(P))},stat:function(y,S){var j=O.lookupPath(y,{follow:!S}).node;if(!j)throw new O.ErrnoError(44);if(!j.node_ops.getattr)throw new O.ErrnoError(63);return j.node_ops.getattr(j)},lstat:function(y){return O.stat(y,!0)},chmod:function(y,S,P){var j;if(!(j="string"==typeof y?O.lookupPath(y,{follow:!P}).node:y).node_ops.setattr)throw new O.ErrnoError(63);j.node_ops.setattr(j,{mode:4095&S|-4096&j.mode,timestamp:Date.now()})},lchmod:function(y,S){O.chmod(y,S,!0)},fchmod:function(y,S){var P=O.getStream(y);if(!P)throw new O.ErrnoError(8);O.chmod(P.node,S)},chown:function(y,S,P,j){var dt;if(!(dt="string"==typeof y?O.lookupPath(y,{follow:!j}).node:y).node_ops.setattr)throw new O.ErrnoError(63);dt.node_ops.setattr(dt,{timestamp:Date.now()})},lchown:function(y,S,P){O.chown(y,S,P,!0)},fchown:function(y,S,P){var j=O.getStream(y);if(!j)throw new O.ErrnoError(8);O.chown(j.node,S,P)},truncate:function(y,S){if(S<0)throw new O.ErrnoError(28);var P;if(!(P="string"==typeof y?O.lookupPath(y,{follow:!0}).node:y).node_ops.setattr)throw new O.ErrnoError(63);if(O.isDir(P.mode))throw new O.ErrnoError(31);if(!O.isFile(P.mode))throw new O.ErrnoError(28);var dt=O.nodePermissions(P,"w");if(dt)throw new O.ErrnoError(dt);P.node_ops.setattr(P,{size:S,timestamp:Date.now()})},ftruncate:function(y,S){var P=O.getStream(y);if(!P)throw new O.ErrnoError(8);if(0==(2097155&P.flags))throw new O.ErrnoError(28);O.truncate(P.node,S)},utime:function(y,S,P){var dt=O.lookupPath(y,{follow:!0}).node;dt.node_ops.setattr(dt,{timestamp:Math.max(S,P)})},open:function(y,S,P,j,dt){if(""===y)throw new O.ErrnoError(44);var yt;if(P=typeof P>"u"?438:P,P=64&(S="string"==typeof S?O.modeStringToFlags(S):S)?4095&P|32768:0,"object"==typeof y)yt=y;else{y=zt.normalize(y);try{yt=O.lookupPath(y,{follow:!(131072&S)}).node}catch{}}var Rt=!1;if(64&S)if(yt){if(128&S)throw new O.ErrnoError(20)}else yt=O.mknod(y,P,0),Rt=!0;if(!yt)throw new O.ErrnoError(44);if(O.isChrdev(yt.mode)&&(S&=-513),65536&S&&!O.isDir(yt.mode))throw new O.ErrnoError(54);if(!Rt){var te=O.mayOpen(yt,S);if(te)throw new O.ErrnoError(te)}512&S&&O.truncate(yt,0),S&=-131713;var ke=O.createStream({node:yt,path:O.getPath(yt),id:yt.id,flags:S,mode:yt.mode,seekable:!0,position:0,stream_ops:yt.stream_ops,node_ops:yt.node_ops,ungotten:[],error:!1},j,dt);return ke.stream_ops.open&&ke.stream_ops.open(ke),D.logReadFiles&&!(1&S)&&(O.readFiles||(O.readFiles={}),y in O.readFiles||(O.readFiles[y]=1)),ke},close:function(y){if(O.isClosed(y))throw new O.ErrnoError(8);y.getdents&&(y.getdents=null);try{y.stream_ops.close&&y.stream_ops.close(y)}catch(S){throw S}finally{O.closeStream(y.fd)}y.fd=null},isClosed:function(y){return null===y.fd},llseek:function(y,S,P){if(O.isClosed(y))throw new O.ErrnoError(8);if(!y.seekable||!y.stream_ops.llseek)throw new O.ErrnoError(70);if(0!=P&&1!=P&&2!=P)throw new O.ErrnoError(28);return y.position=y.stream_ops.llseek(y,S,P),y.ungotten=[],y.position},read:function(y,S,P,j,dt){if(j<0||dt<0)throw new O.ErrnoError(28);if(O.isClosed(y))throw new O.ErrnoError(8);if(1==(2097155&y.flags))throw new O.ErrnoError(8);if(O.isDir(y.node.mode))throw new O.ErrnoError(31);if(!y.stream_ops.read)throw new O.ErrnoError(28);var yt=typeof dt<"u";if(yt){if(!y.seekable)throw new O.ErrnoError(70)}else dt=y.position;var At=y.stream_ops.read(y,S,P,j,dt);return yt||(y.position+=At),At},write:function(y,S,P,j,dt,yt){if(j<0||dt<0)throw new O.ErrnoError(28);if(O.isClosed(y))throw new O.ErrnoError(8);if(0==(2097155&y.flags))throw new O.ErrnoError(8);if(O.isDir(y.node.mode))throw new O.ErrnoError(31);if(!y.stream_ops.write)throw new O.ErrnoError(28);y.seekable&&1024&y.flags&&O.llseek(y,0,2);var At=typeof dt<"u";if(At){if(!y.seekable)throw new O.ErrnoError(70)}else dt=y.position;var Rt=y.stream_ops.write(y,S,P,j,dt,yt);return At||(y.position+=Rt),Rt},allocate:function(y,S,P){if(O.isClosed(y))throw new O.ErrnoError(8);if(S<0||P<=0)throw new O.ErrnoError(28);if(0==(2097155&y.flags))throw new O.ErrnoError(8);if(!O.isFile(y.node.mode)&&!O.isDir(y.node.mode))throw new O.ErrnoError(43);if(!y.stream_ops.allocate)throw new O.ErrnoError(138);y.stream_ops.allocate(y,S,P)},mmap:function(y,S,P,j,dt,yt){if(0!=(2&dt)&&0==(2&yt)&&2!=(2097155&y.flags))throw new O.ErrnoError(2);if(1==(2097155&y.flags))throw new O.ErrnoError(2);if(!y.stream_ops.mmap)throw new O.ErrnoError(43);return y.stream_ops.mmap(y,S,P,j,dt,yt)},msync:function(y,S,P,j,dt){return y&&y.stream_ops.msync?y.stream_ops.msync(y,S,P,j,dt):0},munmap:function(y){return 0},ioctl:function(y,S,P){if(!y.stream_ops.ioctl)throw new O.ErrnoError(59);return y.stream_ops.ioctl(y,S,P)},readFile:function(y,S){if((S=S||{}).flags=S.flags||0,S.encoding=S.encoding||"binary","utf8"!==S.encoding&&"binary"!==S.encoding)throw new Error('Invalid encoding type "'+S.encoding+'"');var P,j=O.open(y,S.flags),yt=O.stat(y).size,At=new Uint8Array(yt);return O.read(j,At,0,yt,0),"utf8"===S.encoding?P=Ie(At,0):"binary"===S.encoding&&(P=At),O.close(j),P},writeFile:function(y,S,P){(P=P||{}).flags=P.flags||577;var j=O.open(y,P.flags,P.mode);if("string"==typeof S){var dt=new Uint8Array(ei(S)+1),yt=Ue(S,dt,0,dt.length);O.write(j,dt,0,yt,void 0,P.canOwn)}else{if(!ArrayBuffer.isView(S))throw new Error("Unsupported data type");O.write(j,S,0,S.byteLength,void 0,P.canOwn)}O.close(j)},cwd:function(){return O.currentPath},chdir:function(y){var S=O.lookupPath(y,{follow:!0});if(null===S.node)throw new O.ErrnoError(44);if(!O.isDir(S.node.mode))throw new O.ErrnoError(54);var P=O.nodePermissions(S.node,"x");if(P)throw new O.ErrnoError(P);O.currentPath=S.path},createDefaultDirectories:function(){O.mkdir("/tmp"),O.mkdir("/home"),O.mkdir("/home/web_user")},createDefaultDevices:function(){O.mkdir("/dev"),O.registerDevice(O.makedev(1,3),{read:function(){return 0},write:function(S,P,j,dt,yt){return dt}}),O.mkdev("/dev/null",O.makedev(1,3)),_t.register(O.makedev(5,0),_t.default_tty_ops),_t.register(O.makedev(6,0),_t.default_tty1_ops),O.mkdev("/dev/tty",O.makedev(5,0)),O.mkdev("/dev/tty1",O.makedev(6,0));var y=function J(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var y=new Uint8Array(1);return function(){return crypto.getRandomValues(y),y[0]}}return function(){ii("randomDevice")}}();O.createDevice("/dev","random",y),O.createDevice("/dev","urandom",y),O.mkdir("/dev/shm"),O.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){O.mkdir("/proc");var y=O.mkdir("/proc/self");O.mkdir("/proc/self/fd"),O.mount({mount:function(){var S=O.createNode(y,"fd",16895,73);return S.node_ops={lookup:function(P,j){var yt=O.getStream(+j);if(!yt)throw new O.ErrnoError(8);var At={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return yt.path}}};return At.parent=At,At}},S}},{},"/proc/self/fd")},createStandardStreams:function(){D.stdin?O.createDevice("/dev","stdin",D.stdin):O.symlink("/dev/tty","/dev/stdin"),D.stdout?O.createDevice("/dev","stdout",null,D.stdout):O.symlink("/dev/tty","/dev/stdout"),D.stderr?O.createDevice("/dev","stderr",null,D.stderr):O.symlink("/dev/tty1","/dev/stderr"),O.open("/dev/stdin",0),O.open("/dev/stdout",1),O.open("/dev/stderr",1)},ensureErrnoError:function(){O.ErrnoError||(O.ErrnoError=function(S,P){this.node=P,this.setErrno=function(j){this.errno=j},this.setErrno(S),this.message="FS error"},O.ErrnoError.prototype=new Error,O.ErrnoError.prototype.constructor=O.ErrnoError,[44].forEach(function(y){O.genericErrors[y]=new O.ErrnoError(y),O.genericErrors[y].stack="<generic error, no stack>"}))},staticInit:function(){O.ensureErrnoError(),O.nameTable=new Array(4096),O.mount(Lt,{},"/"),O.createDefaultDirectories(),O.createDefaultDevices(),O.createSpecialDirectories(),O.filesystems={MEMFS:Lt}},init:function(y,S,P){O.init.initialized=!0,O.ensureErrnoError(),D.stdin=y||D.stdin,D.stdout=S||D.stdout,D.stderr=P||D.stderr,O.createStandardStreams()},quit:function(){O.init.initialized=!1;var y=D._fflush;y&&y(0);for(var S=0;S<O.streams.length;S++){var P=O.streams[S];!P||O.close(P)}},getMode:function(y,S){var P=0;return y&&(P|=365),S&&(P|=146),P},findObject:function(y,S){var P=O.analyzePath(y,S);return P.exists?P.object:null},analyzePath:function(y,S){try{y=(P=O.lookupPath(y,{follow:!S})).path}catch{}var j={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var P=O.lookupPath(y,{parent:!0});j.parentExists=!0,j.parentPath=P.path,j.parentObject=P.node,j.name=zt.basename(y),P=O.lookupPath(y,{follow:!S}),j.exists=!0,j.path=P.path,j.object=P.node,j.name=P.node.name,j.isRoot="/"===P.path}catch(dt){j.error=dt.errno}return j},createPath:function(y,S,P,j){y="string"==typeof y?y:O.getPath(y);for(var dt=S.split("/").reverse();dt.length;){var yt=dt.pop();if(yt){var At=zt.join2(y,yt);try{O.mkdir(At)}catch{}y=At}}return At},createFile:function(y,S,P,j,dt){var yt=zt.join2("string"==typeof y?y:O.getPath(y),S),At=O.getMode(j,dt);return O.create(yt,At)},createDataFile:function(y,S,P,j,dt,yt){var At=S?zt.join2("string"==typeof y?y:O.getPath(y),S):y,Rt=O.getMode(j,dt),te=O.create(At,Rt);if(P){if("string"==typeof P){for(var ke=new Array(P.length),Ke=0,ci=P.length;Ke<ci;++Ke)ke[Ke]=P.charCodeAt(Ke);P=ke}O.chmod(te,146|Rt);var Me=O.open(te,577);O.write(Me,P,0,P.length,0,yt),O.close(Me),O.chmod(te,Rt)}return te},createDevice:function(y,S,P,j){var dt=zt.join2("string"==typeof y?y:O.getPath(y),S),yt=O.getMode(!!P,!!j);O.createDevice.major||(O.createDevice.major=64);var At=O.makedev(O.createDevice.major++,0);return O.registerDevice(At,{open:function(Rt){Rt.seekable=!1},close:function(Rt){j&&j.buffer&&j.buffer.length&&j(10)},read:function(Rt,te,ke,Ke,ci){for(var Me=0,Ve=0;Ve<Ke;Ve++){var _i;try{_i=P()}catch{throw new O.ErrnoError(29)}if(void 0===_i&&0===Me)throw new O.ErrnoError(6);if(null==_i)break;Me++,te[ke+Ve]=_i}return Me&&(Rt.node.timestamp=Date.now()),Me},write:function(Rt,te,ke,Ke,ci){for(var Me=0;Me<Ke;Me++)try{j(te[ke+Me])}catch{throw new O.ErrnoError(29)}return Ke&&(Rt.node.timestamp=Date.now()),Me}}),O.mkdev(dt,yt,At)},forceLoadFile:function(y){if(y.isDevice||y.isFolder||y.link||y.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!Nt)throw new Error("Cannot load without read() or XMLHttpRequest.");try{y.contents=zn(Nt(y.url),!0),y.usedBytes=y.contents.length}catch{throw new O.ErrnoError(29)}},createLazyFile:function(y,S,P,j,dt){function yt(){this.lengthKnown=!1,this.chunks=[]}if(yt.prototype.get=function(Me){if(!(Me>this.length-1||Me<0)){var Ve=Me%this.chunkSize;return this.getter(Me/this.chunkSize|0)[Ve]}},yt.prototype.setDataGetter=function(Me){this.getter=Me},yt.prototype.cacheLength=function(){var Me=new XMLHttpRequest;if(Me.open("HEAD",P,!1),Me.send(null),!(Me.status>=200&&Me.status<300||304===Me.status))throw new Error("Couldn't load "+P+". Status: "+Me.status);var _i,Ve=Number(Me.getResponseHeader("Content-length")),Cn=(_i=Me.getResponseHeader("Accept-Ranges"))&&"bytes"===_i,Kn=(_i=Me.getResponseHeader("Content-Encoding"))&&"gzip"===_i,Dn=1048576;Cn||(Dn=Ve);var yn=this;yn.setDataGetter(function(Yn){var gr=Yn*Dn,qi=(Yn+1)*Dn-1;if(qi=Math.min(qi,Ve-1),typeof yn.chunks[Yn]>"u"&&(yn.chunks[Yn]=function(Yn,gr){if(Yn>gr)throw new Error("invalid range ("+Yn+", "+gr+") or no bytes requested!");if(gr>Ve-1)throw new Error("only "+Ve+" bytes available! programmer error!");var qi=new XMLHttpRequest;if(qi.open("GET",P,!1),Ve!==Dn&&qi.setRequestHeader("Range","bytes="+Yn+"-"+gr),typeof Uint8Array<"u"&&(qi.responseType="arraybuffer"),qi.overrideMimeType&&qi.overrideMimeType("text/plain; charset=x-user-defined"),qi.send(null),!(qi.status>=200&&qi.status<300||304===qi.status))throw new Error("Couldn't load "+P+". Status: "+qi.status);return void 0!==qi.response?new Uint8Array(qi.response||[]):zn(qi.responseText||"",!0)}(gr,qi)),typeof yn.chunks[Yn]>"u")throw new Error("doXHR failed!");return yn.chunks[Yn]}),(Kn||!Ve)&&(Dn=Ve=1,Ve=this.getter(0).length,Dn=Ve,ce("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=Ve,this._chunkSize=Dn,this.lengthKnown=!0},typeof XMLHttpRequest<"u")throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var Rt,te=O.createFile(y,S,Rt={isDevice:!1,url:P},j,dt);Rt.contents?te.contents=Rt.contents:Rt.url&&(te.contents=null,te.url=Rt.url),Object.defineProperties(te,{usedBytes:{get:function(){return this.contents.length}}});var ke={};return Object.keys(te.stream_ops).forEach(function(ci){var Me=te.stream_ops[ci];ke[ci]=function(){return O.forceLoadFile(te),Me.apply(null,arguments)}}),ke.read=function(Me,Ve,_i,Cn,Kn){O.forceLoadFile(te);var Dn=Me.node.contents;if(Kn>=Dn.length)return 0;var wr=Math.min(Dn.length-Kn,Cn);if(Dn.slice)for(var yn=0;yn<wr;yn++)Ve[_i+yn]=Dn[Kn+yn];else for(yn=0;yn<wr;yn++)Ve[_i+yn]=Dn.get(Kn+yn);return wr},te.stream_ops=ke,te},createPreloadedFile:function(y,S,P,j,dt,yt,At,Rt,te,ke){Browser.init();var Ke=S?pt.resolve(zt.join2(y,S)):y;function ci(Me){function Ve(Cn){ke&&ke(),Rt||O.createDataFile(y,S,Cn,j,dt,te),yt&&yt(),gi()}var _i=!1;D.preloadPlugins.forEach(function(Cn){_i||Cn.canHandle(Ke)&&(Cn.handle(Me,Ke,Ve,function(){At&&At(),gi()}),_i=!0)}),_i||Ve(Me)}Oi(),"string"==typeof P?function ae(y,S,P,j){var dt=j?"":"al "+y;ee(y,function(yt){ye(yt,'Loading data file "'+y+'" failed (no arrayBuffer).'),S(new Uint8Array(yt)),dt&&gi()},function(yt){if(!P)throw'Loading data file "'+y+'" failed.';P()}),dt&&Oi()}(P,function(Me){ci(Me)},At):ci(P)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(y,S,P){S=S||function(){},P=P||function(){};var j=O.indexedDB();try{var dt=j.open(O.DB_NAME(),O.DB_VERSION)}catch(yt){return P(yt)}dt.onupgradeneeded=function(){ce("creating db"),dt.result.createObjectStore(O.DB_STORE_NAME)},dt.onsuccess=function(){var Rt=dt.result.transaction([O.DB_STORE_NAME],"readwrite"),te=Rt.objectStore(O.DB_STORE_NAME),ke=0,Ke=0,ci=y.length;function Me(){0==Ke?S():P()}y.forEach(function(Ve){var _i=te.put(O.analyzePath(Ve).object.contents,Ve);_i.onsuccess=function(){++ke+Ke==ci&&Me()},_i.onerror=function(){Ke++,ke+Ke==ci&&Me()}}),Rt.onerror=P},dt.onerror=P},loadFilesFromDB:function(y,S,P){S=S||function(){},P=P||function(){};var j=O.indexedDB();try{var dt=j.open(O.DB_NAME(),O.DB_VERSION)}catch(yt){return P(yt)}dt.onupgradeneeded=P,dt.onsuccess=function(){var At=dt.result;try{var Rt=At.transaction([O.DB_STORE_NAME],"readonly")}catch(Ve){return void P(Ve)}var te=Rt.objectStore(O.DB_STORE_NAME),ke=0,Ke=0,ci=y.length;function Me(){0==Ke?S():P()}y.forEach(function(Ve){var _i=te.get(Ve);_i.onsuccess=function(){O.analyzePath(Ve).exists&&O.unlink(Ve),O.createDataFile(zt.dirname(Ve),zt.basename(Ve),_i.result,!0,!0,!0),++ke+Ke==ci&&Me()},_i.onerror=function(){Ke++,ke+Ke==ci&&Me()}}),Rt.onerror=P},dt.onerror=P}},ne={mappings:{},DEFAULT_POLLMASK:5,calculateAt:function(y,S,P){if("/"===S[0])return S;var j;if(-100===y)j=O.cwd();else{var dt=O.getStream(y);if(!dt)throw new O.ErrnoError(8);j=dt.path}if(0==S.length){if(!P)throw new O.ErrnoError(44);return j}return zt.join2(j,S)},doStat:function(y,S,P){try{var j=y(S)}catch(dt){if(dt&&dt.node&&zt.normalize(S)!==zt.normalize(O.getPath(dt.node)))return-54;throw dt}return qt[P>>2]=j.dev,qt[P+4>>2]=0,qt[P+8>>2]=j.ino,qt[P+12>>2]=j.mode,qt[P+16>>2]=j.nlink,qt[P+20>>2]=j.uid,qt[P+24>>2]=j.gid,qt[P+28>>2]=j.rdev,qt[P+32>>2]=0,z=[j.size>>>0,(hi=j.size,+Math.abs(hi)>=1?hi>0?(0|Math.min(+Math.floor(hi/4294967296),4294967295))>>>0:~~+Math.ceil((hi-+(~~hi>>>0))/4294967296)>>>0:0)],qt[P+40>>2]=z[0],qt[P+44>>2]=z[1],qt[P+48>>2]=4096,qt[P+52>>2]=j.blocks,qt[P+56>>2]=j.atime.getTime()/1e3|0,qt[P+60>>2]=0,qt[P+64>>2]=j.mtime.getTime()/1e3|0,qt[P+68>>2]=0,qt[P+72>>2]=j.ctime.getTime()/1e3|0,qt[P+76>>2]=0,z=[j.ino>>>0,(hi=j.ino,+Math.abs(hi)>=1?hi>0?(0|Math.min(+Math.floor(hi/4294967296),4294967295))>>>0:~~+Math.ceil((hi-+(~~hi>>>0))/4294967296)>>>0:0)],qt[P+80>>2]=z[0],qt[P+84>>2]=z[1],0},doMsync:function(y,S,P,j,dt){var yt=se.slice(y,y+P);O.msync(S,yt,dt,P,j)},doMkdir:function(y,S){return"/"===(y=zt.normalize(y))[y.length-1]&&(y=y.substr(0,y.length-1)),O.mkdir(y,S,0),0},doMknod:function(y,S,P){switch(61440&S){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}return O.mknod(y,S,P),0},doReadlink:function(y,S,P){if(P<=0)return-28;var j=O.readlink(y),dt=Math.min(P,ei(j)),yt=Ht[S+dt];return function Ze(y,S,P){return Ue(y,se,S,P)}(j,S,P+1),Ht[S+dt]=yt,dt},doAccess:function(y,S){if(-8&S)return-28;var j=O.lookupPath(y,{follow:!0}).node;if(!j)return-44;var dt="";return 4&S&&(dt+="r"),2&S&&(dt+="w"),1&S&&(dt+="x"),dt&&O.nodePermissions(j,dt)?-2:0},doDup:function(y,S,P){var j=O.getStream(P);return j&&O.close(j),O.open(y,S,0,P,P).fd},doReadv:function(y,S,P,j){for(var dt=0,yt=0;yt<P;yt++){var Rt=qt[S+(8*yt+4)>>2],te=O.read(y,Ht,qt[S+8*yt>>2],Rt,j);if(te<0)return-1;if(dt+=te,te<Rt)break}return dt},doWritev:function(y,S,P,j){for(var dt=0,yt=0;yt<P;yt++){var te=O.write(y,Ht,qt[S+8*yt>>2],qt[S+(8*yt+4)>>2],j);if(te<0)return-1;dt+=te}return dt},varargs:void 0,get:function(){return ne.varargs+=4,qt[ne.varargs-4>>2]},getStr:function(y){return Ae(y)},getStreamFromFD:function(y){var S=O.getStream(y);if(!S)throw new O.ErrnoError(8);return S},get64:function(y,S){return y}};var Gi=[];function We(y){try{return jt.grow(y-Ct.byteLength+65535>>>16),ze(jt.buffer),1}catch{}}var Ci={};function un(){if(!un.strings){var S={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:$t||"./this.program"};for(var P in Ci)void 0===Ci[P]?delete S[P]:S[P]=Ci[P];var j=[];for(var P in S)j.push(P+"="+S[P]);un.strings=j}return un.strings}var Ni=function(y,S,P,j){y||(y=this),this.parent=y,this.mount=y.mount,this.mounted=null,this.id=O.nextInode++,this.name=S,this.mode=P,this.node_ops={},this.stream_ops={},this.rdev=j};function zn(y,S,P){var j=P>0?P:ei(y)+1,dt=new Array(j),yt=Ue(y,dt,0,dt.length);return S&&(dt.length=yt),dt}Object.defineProperties(Ni.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(y){y?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(y){y?this.mode|=146:this.mode&=-147}},isFolder:{get:function(){return O.isDir(this.mode)}},isDevice:{get:function(){return O.isChrdev(this.mode)}}}),O.FSNode=Ni,O.staticInit();var Je={A:function Qt(y,S){return function Gt(y,S){var P;if(0===y)P=Date.now();else{if(1!==y&&4!==y)return Pt(28),-1;P=Tt()}return qt[S>>2]=P/1e3|0,qt[S+4>>2]=P%1e3*1e3*1e3|0,0}(y,S)},B:function we(y,S){try{return y=ne.getStr(y),ne.doAccess(y,S)}catch(P){if(typeof O>"u"||!(P instanceof O.ErrnoError))throw P;return-P.errno}},h:function be(y,S,P){ne.varargs=P;try{var j=ne.getStreamFromFD(y);switch(S){case 0:return(dt=ne.get())<0?-28:O.open(j.path,j.flags,0,dt).fd;case 1:case 2:case 6:case 7:return 0;case 3:return j.flags;case 4:var dt=ne.get();return j.flags|=dt,0;case 5:return dt=ne.get(),fe[dt+0>>1]=2,0;case 16:case 8:default:return-28;case 9:return Pt(28),-1}}catch(Rt){if(typeof O>"u"||!(Rt instanceof O.ErrnoError))throw Rt;return-Rt.errno}},x:function je(y,S){try{var P=ne.getStreamFromFD(y);return ne.doStat(O.stat,P.path,S)}catch(j){if(typeof O>"u"||!(j instanceof O.ErrnoError))throw j;return-j.errno}},u:function Oe(y,S,P,j){try{S=ne.getStr(S);var dt=256&j,yt=4096&j;return j&=-4353,S=ne.calculateAt(y,S,yt),ne.doStat(dt?O.lstat:O.stat,S,P)}catch(At){if(typeof O>"u"||!(At instanceof O.ErrnoError))throw At;return-At.errno}},y:function Pe(y,S,P){ne.varargs=P;try{var j=ne.getStreamFromFD(y);switch(S){case 21509:case 21505:case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:case 21523:case 21524:return j.tty?0:-59;case 21519:if(!j.tty)return-59;var dt=ne.get();return qt[dt>>2]=0,0;case 21520:return j.tty?-28:-59;case 21531:return dt=ne.get(),O.ioctl(j,S,dt);default:ii("bad ioctl syscall "+S)}}catch(yt){if(typeof O>"u"||!(yt instanceof O.ErrnoError))throw yt;return-yt.errno}},k:function de(y,S,P,j,dt,yt){try{return function oe(y,S,P,j,dt,yt){yt<<=12;var At,Rt=!1;if(0!=(16&j)&&y%65536!=0)return-28;if(0!=(32&j)){if(!(At=Yt(S)))return-48;Rt=!0}else{var te=O.getStream(dt);if(!te)return-8;var ke=O.mmap(te,y,S,yt,P,j);At=ke.ptr,Rt=ke.allocated}return ne.mappings[At]={malloc:At,len:S,allocated:Rt,fd:dt,prot:P,flags:j,offset:yt},At}(y,S,P,j,dt,yt)}catch(At){if(typeof O>"u"||!(At instanceof O.ErrnoError))throw At;return-At.errno}},j:function di(y,S){try{return function Fe(y,S){var P=ne.mappings[y];if(0===S||!P)return-28;if(S===P.len){var j=O.getStream(P.fd);j&&2&P.prot&&ne.doMsync(y,j,S,P.flags,P.offset),ne.mappings[y]=null,P.allocated&&bt(P.malloc)}return 0}(y,S)}catch(P){if(typeof O>"u"||!(P instanceof O.ErrnoError))throw P;return-P.errno}},e:function pi(y,S,P){ne.varargs=P;try{var j=ne.getStr(y),dt=P?ne.get():0;return O.open(j,S,dt).fd}catch(At){if(typeof O>"u"||!(At instanceof O.ErrnoError))throw At;return-At.errno}},v:function Xe(y,S){try{return y=ne.getStr(y),ne.doStat(O.stat,y,S)}catch(P){if(typeof O>"u"||!(P instanceof O.ErrnoError))throw P;return-P.errno}},z:function Ye(y){try{return y=ne.getStr(y),O.unlink(y),0}catch(S){if(typeof O>"u"||!(S instanceof O.ErrnoError))throw S;return-S.errno}},r:function wi(){throw"longjmp"},q:function Vi(){ii("")},C:function Pn(y,S,P){var j=function Wi(y,S){var P;for(Gi.length=0,S>>=2;P=se[y++];){var j=P<105;j&&1&S&&S++,Gi.push(j?Be[S++>>1]:qt[S]),++S}return Gi}(S,P);return $[y].apply(null,j)},o:function le(y,S,P){se.copyWithin(y,S,S+P)},p:function vi(y){var S=se.length,P=2147483648;if((y>>>=0)>P)return!1;for(var j=1;j<=4;j*=2){var dt=S*(1+.2/j);if(dt=Math.min(dt,y+100663296),We(Math.min(P,oi(Math.max(y,dt),65536))))return!0}return!1},s:function vn(y,S){var P=0;return un().forEach(function(j,dt){var yt=S+P;qt[y+4*dt>>2]=yt,function ve(y,S,P){for(var j=0;j<y.length;++j)Ht[S++>>0]=y.charCodeAt(j);P||(Ht[S>>0]=0)}(j,yt),P+=j.length+1}),0},t:function Ui(y,S){var P=un();qt[y>>2]=P.length;var j=0;return P.forEach(function(dt){j+=dt.length+1}),qt[S>>2]=j,0},a:function Mi(y){!function er(y,S){!function Ki(y){(function En(){return Zt||!1})()||(D.onExit&&D.onExit(y),ge=!0),ue(y,new mi(y))}(y)}(y)},d:function Ei(y){try{var S=ne.getStreamFromFD(y);return O.close(S),0}catch(P){if(typeof O>"u"||!(P instanceof O.ErrnoError))throw P;return P.errno}},i:function bn(y,S,P,j){try{var dt=ne.getStreamFromFD(y),yt=ne.doReadv(dt,S,P);return qt[j>>2]=yt,0}catch(At){if(typeof O>"u"||!(At instanceof O.ErrnoError))throw At;return At.errno}},n:function fi(y,S,P,j,dt){try{var yt=ne.getStreamFromFD(y),Rt=4294967296*P+(S>>>0),te=9007199254740992;return Rt<=-te||Rt>=te?-61:(O.llseek(yt,Rt,j),z=[yt.position>>>0,(hi=yt.position,+Math.abs(hi)>=1?hi>0?(0|Math.min(+Math.floor(hi/4294967296),4294967295))>>>0:~~+Math.ceil((hi-+(~~hi>>>0))/4294967296)>>>0:0)],qt[dt>>2]=z[0],qt[dt+4>>2]=z[1],yt.getdents&&0===Rt&&0===j&&(yt.getdents=null),0)}catch(ke){if(typeof O>"u"||!(ke instanceof O.ErrnoError))throw ke;return ke.errno}},g:function li(y,S,P,j){try{var dt=ne.getStreamFromFD(y),yt=ne.doWritev(dt,S,P);return qt[j>>2]=yt,0}catch(At){if(typeof O>"u"||!(At instanceof O.ErrnoError))throw At;return At.errno}},c:function hn(){return Ge},w:function Jn(y){var S=Date.now();return qt[y>>2]=S/1e3|0,qt[y+4>>2]=S%1e3*1e3|0,0},l:function De(y,S,P,j,dt,yt,At){var Rt=Bt();try{return A(y)(S,P,j,dt,yt,At)}catch(te){if(re(Rt),te!==te+0&&"longjmp"!==te)throw te;Ce(1,0)}},m:function ni(y,S){var P=Bt();try{A(y)(S)}catch(j){if(re(P),j!==j+0&&"longjmp"!==j)throw j;Ce(1,0)}},b:function dn(y){!function(y){Ge=y}(y)},f:function Un(y){var S=Date.now()/1e3|0;return y&&(qt[y>>2]=S),S}};(function Pi(){var y={a:Je};function S(At,Rt){D.asm=At.exports,ze((jt=D.asm.D).buffer),Ti=D.asm.M,function Qn(y){Mn.unshift(y)}(D.asm.E),gi()}function P(At){S(At.instance)}function j(At){return function Bn(){return Xt||"function"!=typeof fetch?Promise.resolve().then(function(){return Te(Ii)}):fetch(Ii,{credentials:"same-origin"}).then(function(y){if(!y.ok)throw"failed to load wasm binary file at '"+Ii+"'";return y.arrayBuffer()}).catch(function(){return Te(Ii)})}().then(function(Rt){return WebAssembly.instantiate(Rt,y)}).then(function(Rt){return Rt}).then(At,function(Rt){xe("failed to asynchronously prepare wasm: "+Rt),ii(Rt)})}if(Oi(),D.instantiateWasm)try{return D.instantiateWasm(y,S)}catch(At){return xe("Module.instantiateWasm callback failed with error: "+At),!1}return function dt(){return Xt||"function"!=typeof WebAssembly.instantiateStreaming||cn(Ii)||"function"!=typeof fetch?j(P):fetch(Ii,{credentials:"same-origin"}).then(function(At){return WebAssembly.instantiateStreaming(At,y).then(P,function(te){return xe("wasm streaming compile failed: "+te),xe("falling back to ArrayBuffer instantiation"),j(P)})})}().catch(St),{}})(),D.___wasm_call_ctors=function(){return(D.___wasm_call_ctors=D.asm.E).apply(null,arguments)};var Ji=D._emscripten_bind_VoidPtr___destroy___0=function(){return(Ji=D._emscripten_bind_VoidPtr___destroy___0=D.asm.F).apply(null,arguments)},ki=D._emscripten_bind_Graphviz_Graphviz_2=function(){return(ki=D._emscripten_bind_Graphviz_Graphviz_2=D.asm.G).apply(null,arguments)},b=D._emscripten_bind_Graphviz_version_0=function(){return(b=D._emscripten_bind_Graphviz_version_0=D.asm.H).apply(null,arguments)},k=D._emscripten_bind_Graphviz_lastError_0=function(){return(k=D._emscripten_bind_Graphviz_lastError_0=D.asm.I).apply(null,arguments)},Z=D._emscripten_bind_Graphviz_layout_3=function(){return(Z=D._emscripten_bind_Graphviz_layout_3=D.asm.J).apply(null,arguments)},rt=D._emscripten_bind_Graphviz_createFile_2=function(){return(rt=D._emscripten_bind_Graphviz_createFile_2=D.asm.K).apply(null,arguments)},ht=D._emscripten_bind_Graphviz___destroy___0=function(){return(ht=D._emscripten_bind_Graphviz___destroy___0=D.asm.L).apply(null,arguments)};D._malloc=function(){return(D._malloc=D.asm.N).apply(null,arguments)};var Le,bt=D._free=function(){return(bt=D._free=D.asm.O).apply(null,arguments)},Ot=D.___errno_location=function(){return(Ot=D.___errno_location=D.asm.P).apply(null,arguments)},Bt=D.stackSave=function(){return(Bt=D.stackSave=D.asm.Q).apply(null,arguments)},re=D.stackRestore=function(){return(re=D.stackRestore=D.asm.R).apply(null,arguments)},Ce=D._setThrew=function(){return(Ce=D._setThrew=D.asm.S).apply(null,arguments)},$e=D._memalign=function(){return($e=D._memalign=D.asm.T).apply(null,arguments)};function mi(y){this.name="ExitStatus",this.message="Program terminated with exit("+y+")",this.status=y}function ri(y){function S(){Le||(Le=!0,D.calledRun=!0,!ge&&(function Fn(){!D.noFSInit&&!O.init.initialized&&O.init(),O.ignorePermissions=!1,ct(Mn)}(),mt(D),D.onRuntimeInitialized&&D.onRuntimeInitialized(),function Nn(){if(D.postRun)for("function"==typeof D.postRun&&(D.postRun=[D.postRun]);D.postRun.length;)y=D.postRun.shift(),mn.unshift(y);var y;ct(mn)}()))}he>0||(function tr(){if(D.preRun)for("function"==typeof D.preRun&&(D.preRun=[D.preRun]);D.preRun.length;)y=D.preRun.shift(),ln.unshift(y);var y;ct(ln)}(),he>0)||(D.setStatus?(D.setStatus("Running..."),setTimeout(function(){setTimeout(function(){D.setStatus("")},1),S()},1)):S())}if(Si=function y(){Le||ri(),Le||(Si=y)},D.run=ri,D.preInit)for("function"==typeof D.preInit&&(D.preInit=[D.preInit]);D.preInit.length>0;)D.preInit.pop()();function Xi(){}function Fi(y){return(y||Xi).__cache__}function xn(y,S){var P=Fi(S),j=P[y];return j||((j=Object.create((S||Xi).prototype)).ptr=y,P[y]=j)}ri(),(Xi.prototype=Object.create(Xi.prototype)).constructor=Xi,Xi.prototype.__class__=Xi,Xi.__cache__={},D.WrapperObject=Xi,D.getCache=Fi,D.wrapPointer=xn,D.castObject=function ir(y,S){return xn(y.ptr,S)},D.NULL=xn(0),D.destroy=function Ri(y){if(!y.__destroy__)throw"Error: Cannot destroy object. (Did you create it yourself?)";y.__destroy__(),delete Fi(y.__class__)[y.ptr]},D.compare=function Ua(y,S){return y.ptr===S.ptr},D.getPointer=function _a(y){return y.ptr},D.getClass=function za(y){return y.__class__};var xi={buffer:0,size:0,pos:0,temps:[],needed:0,prepare:function(){if(xi.needed){for(var y=0;y<xi.temps.length;y++)D._free(xi.temps[y]);xi.temps.length=0,D._free(xi.buffer),xi.buffer=0,xi.size+=xi.needed,xi.needed=0}xi.buffer||(xi.size+=128,xi.buffer=D._malloc(xi.size),ye(xi.buffer)),xi.pos=0},alloc:function(y,S){ye(xi.buffer);var dt,j=y.length*S.BYTES_PER_ELEMENT;return xi.pos+(j=j+7&-8)>=xi.size?(ye(j>0),xi.needed+=j,dt=D._malloc(j),xi.temps.push(dt)):(dt=xi.buffer+xi.pos,xi.pos+=j),dt},copy:function(y,S,P){switch(P>>>=0,S.BYTES_PER_ELEMENT){case 2:P>>>=1;break;case 4:P>>>=2;break;case 8:P>>>=3}for(var dt=0;dt<y.length;dt++)S[P+dt]=y[dt]}};function Cr(y){if("string"==typeof y){var S=zn(y),P=xi.alloc(S,Ht);return xi.copy(S,Ht,P),P}return y}function Hn(){throw"cannot construct a VoidPtr, no constructor in IDL"}function $i(y,S){y&&"object"==typeof y&&(y=y.ptr),S&&"object"==typeof S&&(S=S.ptr),this.ptr=ki(y,S),Fi($i)[this.ptr]=this}return(Hn.prototype=Object.create(Xi.prototype)).constructor=Hn,Hn.prototype.__class__=Hn,Hn.__cache__={},D.VoidPtr=Hn,Hn.prototype.__destroy__=Hn.prototype.__destroy__=function(){Ji(this.ptr)},($i.prototype=Object.create(Xi.prototype)).constructor=$i,$i.prototype.__class__=$i,$i.__cache__={},D.Graphviz=$i,$i.prototype.version=$i.prototype.version=function(){return Ae(b(this.ptr))},$i.prototype.lastError=$i.prototype.lastError=function(){return Ae(k(this.ptr))},$i.prototype.layout=$i.prototype.layout=function(y,S,P){var j=this.ptr;return xi.prepare(),y=y&&"object"==typeof y?y.ptr:Cr(y),S=S&&"object"==typeof S?S.ptr:Cr(S),P=P&&"object"==typeof P?P.ptr:Cr(P),Ae(Z(j,y,S,P))},$i.prototype.createFile=$i.prototype.createFile=function(y,S){var P=this.ptr;xi.prepare(),y=y&&"object"==typeof y?y.ptr:Cr(y),S=S&&"object"==typeof S?S.ptr:Cr(S),rt(P,y,S)},$i.prototype.__destroy__=$i.prototype.__destroy__=function(){ht(this.ptr)},U.ready}}();H.exports=it}(M);var B=Object.freeze(c({__proto__:null,default:M.exports},[M.exports])),Y=function(){return Y=Object.assign||function(H){for(var Q,it=1,q=arguments.length;it<q;it++)for(var U in Q=arguments[it])Object.prototype.hasOwnProperty.call(Q,U)&&(H[U]=Q[U]);return H},Y.apply(this,arguments)},V=function(H,Q,it){if(it||2===arguments.length)for(var D,q=0,U=Q.length;q<U;q++)(D||!(q in Q))&&(D||(D=Array.prototype.slice.call(Q,0,q)),D[q]=Q[q]);return H.concat(D||Array.prototype.slice.call(Q))};function nt(H){return{path:H.path,data:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg width="'.concat(H.width,'" height="').concat(H.height,'"></svg>')}}function st(H,Q){var it=Y({images:[],files:[]},Q);V(V([],it.files,!0),function et(H){return H.map(nt)}(it.images),!0).forEach(function(q){return H.createFile(q.path,q.data)})}var X={layout:function(H,Q,it,q){return void 0===Q&&(Q="svg"),void 0===it&&(it="dot"),H?u(B,q?.wasmFolder,q?.wasmBinary).then(function(U){var D=new U.Graphviz(void 0!==q?.yInvert&&q?.yInvert,void 0!==q?.nop?q?.nop:0);st(D,q);var mt=D.layout(H,Q,it);if(U.destroy(D),!mt)throw new Error(U.Graphviz.prototype.lastError());return mt}):Promise.resolve("")},circo:function(H,Q,it){return void 0===Q&&(Q="svg"),this.layout(H,Q,"circo",it)},dot:function(H,Q,it){return void 0===Q&&(Q="svg"),this.layout(H,Q,"dot",it)},fdp:function(H,Q,it){return void 0===Q&&(Q="svg"),this.layout(H,Q,"fdp",it)},sfdp:function(H,Q,it){return void 0===Q&&(Q="svg"),this.layout(H,Q,"sfdp",it)},neato:function(H,Q,it){return void 0===Q&&(Q="svg"),this.layout(H,Q,"neato",it)},osage:function(H,Q,it){return void 0===Q&&(Q="svg"),this.layout(H,Q,"osage",it)},patchwork:function(H,Q,it){return void 0===Q&&(Q="svg"),this.layout(H,Q,"patchwork",it)},twopi:function(H,Q,it){return void 0===Q&&(Q="svg"),this.layout(H,Q,"twopi",it)}},W=function(){function H(Q){this._wasm=Q}return H.prototype.layout=function(Q,it,q,U){if(void 0===it&&(it="svg"),void 0===q&&(q="dot"),!Q)return"";var D=new this._wasm.Graphviz(U?.yInvert?1:0,U?.nop?U?.nop:0);st(D,U);var mt=D.layout(Q,it,q);if(this._wasm.destroy(D),!mt)throw new Error(this._wasm.Graphviz.prototype.lastError());return mt},H.prototype.circo=function(Q,it,q){return void 0===it&&(it="svg"),this.layout(Q,it,"circo",q)},H.prototype.dot=function(Q,it,q){return void 0===it&&(it="svg"),this.layout(Q,it,"dot",q)},H.prototype.fdp=function(Q,it,q){return void 0===it&&(it="svg"),this.layout(Q,it,"fdp",q)},H.prototype.sfdp=function(Q,it,q){return void 0===it&&(it="svg"),this.layout(Q,it,"sfdp",q)},H.prototype.neato=function(Q,it,q){return void 0===it&&(it="svg"),this.layout(Q,it,"neato",q)},H.prototype.osage=function(Q,it,q){return void 0===it&&(it="svg"),this.layout(Q,it,"osage",q)},H.prototype.patchwork=function(Q,it,q){return void 0===it&&(it="svg"),this.layout(Q,it,"patchwork",q)},H.prototype.twopi=function(Q,it,q){return void 0===it&&(it="svg"),this.layout(Q,it,"twopi",q)},H}();s.GraphvizSync=W,s.StackElement=g,s.StackParser=C,s.expatVersion=function I(H,Q){return u(m,H,Q).then(function(it){return it.CExpat.prototype.version()})},s.graphviz=X,s.graphvizSync=function at(H,Q){return u(B,H,Q).then(function(it){return new W(it)})},s.graphvizVersion=function K(H,Q){return u(B,H,Q).then(function(it){return it.Graphviz.prototype.version()})},s.parse=R,s.wasmFolder=l,Object.defineProperty(s,"__esModule",{value:!0})}(E)},82745:(w,E,s)=>{"use strict";s.r(E),s.d(E,{AdminModule:()=>Cy});var c={};s.r(c),s.d(c,{forceCenter:()=>od,forceCollide:()=>Vo,forceLink:()=>Yo,forceManyBody:()=>Xo,forceRadial:()=>Nd,forceSimulation:()=>Wo,forceX:()=>Pd,forceY:()=>Fd});var x={};s.r(x),s.d(x,{dispatch:()=>ya.Z});var _={};s.r(_),s.d(_,{interval:()=>Bd,now:()=>lr.zO,timeout:()=>$a.Z,timer:()=>lr.HT,timerFlush:()=>lr.R8});var m=s(36895),p=s(94364),t=s(94650),d=s(77968),l=s(97392),h=s(61283),f=s(4235),u=s(89383);const g=function(){return{color:"black"}};let C=(()=>{class i{constructor(e){this.sideMenuService=e}ngOnInit(){this.sideMenuService.setAdminItems([])}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(d.D))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-admin-page"]],decls:7,vars:5,consts:[[1,"container-fluid","pl-xl-5","pr-xl-5","admin-theme"],[1,"page-title","d-flex"],["svgIcon","perun-perun-admin",1,"perun-icon","icon-scale",3,"ngStyle"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"perun-web-apps-back-button"),t.TgZ(2,"h1",1),t._UZ(3,"mat-icon",2),t._uU(4),t.ALo(5,"translate"),t.qZA(),t._UZ(6,"app-animated-router-outlet"),t.qZA()),2&e&&(t.xp6(3),t.Q6J("ngStyle",t.DdM(4,g)),t.xp6(1),t.hij(" ",t.lcZ(5,2,"ADMIN.TITLE")," "))},dependencies:[m.PC,l.Hw,h.A,f.W,u.X$]}),i})();var L=s(71135);let I=(()=>{class i{constructor(){this.navItems=[{cssIcon:"perun-attributes",url:"/admin/attributes",label:"MENU_ITEMS.ADMIN.ATTRIBUTES",style:"admin-btn"},{cssIcon:"perun-user",url:"/admin/users",label:"MENU_ITEMS.ADMIN.USERS",style:"admin-btn"},{cssIcon:"perun-owner-grey",url:"/admin/owners",label:"MENU_ITEMS.ADMIN.OWNERS",style:"admin-btn"},{cssIcon:"perun-service",url:"/admin/services",label:"MENU_ITEMS.ADMIN.SERVICES",style:"admin-btn"},{cssIcon:"perun-preview",url:"/admin/visualizer",label:"MENU_ITEMS.ADMIN.VISUALIZER",style:"admin-btn"},{cssIcon:"perun-external-sources",url:"/admin/ext_sources",label:"MENU_ITEMS.ADMIN.EXT_SOURCES",style:"admin-btn"},{cssIcon:"perun-audit-log",url:"/admin/audit_log",label:"MENU_ITEMS.ADMIN.AUDIT_LOG",style:"admin-btn"},{cssIcon:"perun-consent-hubs",url:"/admin/consent_hubs",label:"MENU_ITEMS.ADMIN.CONSENT_HUBS",style:"admin-btn"},{cssIcon:"perun-searcher",url:"/admin/searcher",label:"MENU_ITEMS.ADMIN.SEARCHER",style:"admin-btn"}]}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-admin-overview"]],hostVars:2,hostBindings:function(e,n){2&e&&t.ekj("router-component",n.true)},decls:2,vars:2,consts:[[3,"items","size"]],template:function(e,n){1&e&&(t.TgZ(0,"div"),t._UZ(1,"perun-web-apps-menu-buttons-field",0),t.qZA()),2&e&&(t.xp6(1),t.Q6J("items",n.navItems)("size","small"))},dependencies:[L.L]}),i})();var R=s(95017),M=s(65412),F=s(30671),B=s(35382),Y=s(32105),V=s(4859),nt=s(51572),et=s(98380);function st(i,r){1&i&&t._UZ(0,"mat-spinner",6)}function K(i,r){1&i&&t._UZ(0,"th",16)}function X(i,r){if(1&i&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.Oqu(e.friendlyName)}}function W(i,r){1&i&&t._UZ(0,"tr",18)}function at(i,r){1&i&&t._UZ(0,"tr",19)}function H(i,r){if(1&i&&(t.TgZ(0,"div",7)(1,"div"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",8),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"table",9),t.ynx(8,10),t.YNc(9,K,1,0,"th",11),t.YNc(10,X,2,1,"td",12),t.BQk(),t.YNc(11,W,1,0,"tr",13),t.YNc(12,at,1,0,"tr",14),t.qZA(),t.TgZ(13,"perun-web-apps-alert",15),t._uU(14),t.ALo(15,"translate"),t.qZA()()),2&i){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,6,"DIALOGS.DELETE_ATTRIBUTE_DEFINITION.TEXT_LINE1")," "),t.xp6(3),t.hij(" ",t.lcZ(6,8,"DIALOGS.DELETE_ATTRIBUTE_DEFINITION.TEXT_LINE2")," "),t.xp6(2),t.Q6J("dataSource",e.dataSource),t.xp6(4),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns),t.xp6(2),t.hij(" ",t.lcZ(15,10,"DIALOGS.DELETE_ATTRIBUTE_DEFINITION.WARNING")," ")}}let Q=(()=>{class i{constructor(e,n,a,o,v){this.dialogRef=e,this.data=n,this.notificator=a,this.translate=o,this.attributesManager=v,this.displayedColumns=["name"],this.loading=!1}ngOnInit(){this.theme=this.data.theme,this.dataSource=new F.by(this.data.attributes)}onCancel(){this.dialogRef.close(!1)}onSubmit(){this.loading=!0;const e=[];for(const n of this.data.attributes)e.push(n.id);this.attributesManager.deleteAttributeDefinitions(e).subscribe(()=>{this.translate.get("DIALOGS.DELETE_ATTRIBUTE_DEFINITION.SUCCESS").subscribe(n=>{this.notificator.showSuccess(n),this.dialogRef.close(!0)})},()=>this.loading=!1)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(M.so),t.Y36(M.WI),t.Y36(B.V6),t.Y36(u.sK),t.Y36(Y.H8))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-delete-attribute-definition-dialog"]],decls:13,vars:15,consts:[["mat-dialog-title",""],["class","ml-auto mr-auto",4,"ngIf"],["mat-dialog-content","",4,"ngIf"],["mat-dialog-actions","",1,"mt-3"],["mat-flat-button","",1,"ml-auto",3,"click"],["color","warn","mat-flat-button","","data-cy","confirm-delete-attr-definition-button",1,"ml-2",3,"disabled","click"],[1,"ml-auto","mr-auto"],["mat-dialog-content",""],[1,"font-weight-bold"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["class","font-weight-bolder","mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["alert_type","warn",1,"mt-3"],["mat-header-cell",""],["mat-cell",""],["mat-header-row","",1,"font-weight-bolder"],["mat-row",""]],template:function(e,n){1&e&&(t.TgZ(0,"div")(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,st,1,0,"mat-spinner",1),t.YNc(5,H,16,12,"div",2),t.TgZ(6,"div",3)(7,"button",4),t.NdJ("click",function(){return n.onCancel()}),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"button",5),t.NdJ("click",function(){return n.onSubmit()}),t._uU(11),t.ALo(12,"translate"),t.qZA()()()),2&e&&(t.Tol(n.theme),t.xp6(2),t.Oqu(t.lcZ(3,9,"DIALOGS.DELETE_ATTRIBUTE_DEFINITION.TITLE")),t.xp6(2),t.Q6J("ngIf",n.loading),t.xp6(1),t.Q6J("ngIf",!n.loading),t.xp6(3),t.hij(" ",t.lcZ(9,11,"DIALOGS.DELETE_ATTRIBUTE_DEFINITION.CANCEL")," "),t.xp6(2),t.Q6J("disabled",n.loading),t.xp6(1),t.hij(" ",t.lcZ(12,13,"DIALOGS.DELETE_ATTRIBUTE_DEFINITION.CONFIRM")," "))},dependencies:[m.O5,V.lW,F.BZ,F.fO,F.as,F.w1,F.Dz,F.nj,F.ge,F.ev,F.XQ,F.Gk,M.uh,M.xY,M.H8,nt.Ou,et.w,u.X$]}),i})();var it=s(24006),q=s(78372),U=s(63900),D=s(61135),mt=s(69751),St=s(38421),Mt=s(75797),Et=s(60515),$t=s(25403),ue=s(63269);function ut(...i){const r=(0,ue.jO)(i),e=(0,Mt.k)(i);return e.length?new mt.y(n=>{let a=e.map(()=>[]),o=e.map(()=>!1);n.add(()=>{a=o=null});for(let v=0;!n.closed&&v<e.length;v++)(0,St.Xf)(e[v]).subscribe((0,$t.x)(n,T=>{if(a[v].push(T),a.every(N=>N.length)){const N=a.map(G=>G.shift());n.next(r?r(...N):N),a.some((G,tt)=>!G.length&&o[tt])&&n.complete()}},()=>{o[v]=!0,!a[v].length&&n.complete()}));return()=>{a=o=null}}):Et.E}var ft=s(39646),gt=s(19516),Nt=s(3238),ee=s(39349),Kt=s(59549),ce=s(284),xe=s(84385),Ge=s(3848),Ne=s(23123);function It(i,r){if(1&i&&(t.TgZ(0,"mat-option",7),t._uU(1),t.ALo(2,"displayedRole"),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(t.lcZ(2,2,e))}}function Xt(i,r){if(1&i&&(t.TgZ(0,"mat-option",7),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}let Zt=(()=>{class i{constructor(e){this.attrRightsService=e,this.policyRemoved=new t.vpe,this.roles=this.attrRightsService.getRoles()}ngOnInit(){this.selectedRole=new D.X(this.policy.role),this.objects=this.selectedRole.pipe((0,U.w)(e=>this.attrRightsService.getObjects(e)))}changeRole(e){this.selectedRole.next(e.value),this.policy.object="None"}remove(){this.policyRemoved.emit()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(B.eE))},i.\u0275cmp=t.Xpm({type:i,selectors:[["perun-web-apps-attribute-rights-item"]],inputs:{policy:"policy"},outputs:{policyRemoved:"policyRemoved"},decls:14,vars:14,consts:[[1,"flex-row"],[1,"grow-item"],[3,"ngModel","placeholder","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"ngModel","placeholder","ngModelChange"],["color","warn","mat-icon-button","",1,"close-button",3,"click"],["inline","true"],[3,"value"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"mat-form-field",1)(2,"mat-select",2),t.NdJ("ngModelChange",function(o){return n.policy.role=o})("selectionChange",function(o){return n.changeRole(o)}),t.ALo(3,"translate"),t.YNc(4,It,3,4,"mat-option",3),t.ALo(5,"async"),t.qZA()(),t.TgZ(6,"mat-form-field")(7,"mat-select",4),t.NdJ("ngModelChange",function(o){return n.policy.object=o}),t.ALo(8,"translate"),t.YNc(9,Xt,2,2,"mat-option",3),t.ALo(10,"async"),t.qZA()(),t.TgZ(11,"button",5),t.NdJ("click",function(){return n.remove()}),t.TgZ(12,"mat-icon",6),t._uU(13,"remove_circle"),t.qZA()()()),2&e&&(t.xp6(2),t.s9C("placeholder",t.lcZ(3,6,"SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTE_RIGHTS.ROLE")),t.Q6J("ngModel",n.policy.role),t.xp6(2),t.Q6J("ngForOf",t.lcZ(5,8,n.roles)),t.xp6(3),t.s9C("placeholder",t.lcZ(8,10,"SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTE_RIGHTS.ENTITY")),t.Q6J("ngModel",n.policy.object),t.xp6(2),t.Q6J("ngForOf",t.lcZ(10,12,n.objects)))},dependencies:[m.sg,it.JJ,it.On,l.Hw,V.lW,Kt.KE,Nt.ey,xe.gD,m.Ov,u.X$,Ne.i],styles:[".flex-row[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:row;justify-content:flex-start;align-items:flex-start;background:white;border-radius:1em;padding:1em 1em 0}.grow-item[_ngcontent-%COMP%]{flex-grow:2;margin:0 1em}.close-button[_ngcontent-%COMP%]{position:absolute;font-size:1.3em;top:-15px;right:-15px;z-index:100}"]}),i})();function jt(i,r){1&i&&(t.TgZ(0,"div",9),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTE_RIGHTS.AND")," "))}function ge(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"perun-web-apps-attribute-rights-item",7),t.NdJ("policyRemoved",function(){const o=t.CHM(e).index,v=t.oxw(2);return t.KtG(v.removePolicy(o))}),t.qZA(),t.YNc(2,jt,3,3,"div",8),t.qZA()}if(2&i){const e=r.$implicit,n=r.index,a=t.oxw(2);t.xp6(1),t.Q6J("policy",e),t.xp6(1),t.Q6J("ngIf",n!==a.collection.policies.length-1)}}function ye(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",2),t.YNc(2,ge,3,2,"div",3),t.qZA(),t.TgZ(3,"div",4)(4,"button",5),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.removeCollection())}),t.TgZ(5,"mat-icon"),t._uU(6,"delete"),t.qZA()(),t.TgZ(7,"button",6),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.addPolicy())}),t.TgZ(8,"mat-icon"),t._uU(9,"add_circle"),t.qZA()()()()}if(2&i){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.collection.policies)}}let Ee=(()=>{class i{constructor(){this.collectionRemoved=new t.vpe}addPolicy(){this.collection.policies.push({id:-1,role:null,object:null,policyCollectionId:this.collection.id})}removePolicy(e){this.collection.policies.splice(e,1),0===this.collection.policies.length&&this.removeCollection()}removeCollection(){this.collectionRemoved.emit()}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["perun-web-apps-attribute-rights-collection"]],inputs:{collection:"collection"},outputs:{collectionRemoved:"collectionRemoved"},decls:1,vars:1,consts:[["class","collection",4,"ngIf"],[1,"collection"],[1,"column","role-selection"],[4,"ngFor","ngForOf"],[1,"column","controls"],["mat-icon-button","",3,"click"],["color","accent","mat-icon-button","",3,"click"],[3,"policy","policyRemoved"],["class","divider",4,"ngIf"],[1,"divider"]],template:function(e,n){1&e&&t.YNc(0,ye,10,1,"div",0),2&e&&t.Q6J("ngIf",n.collection)},dependencies:[m.sg,m.O5,l.Hw,V.lW,Zt,u.X$],styles:[".collection[_ngcontent-%COMP%]{background-color:#0000001a;padding:1em;border-radius:1em;margin-top:1em;display:flex;flex-direction:row;justify-content:center;align-items:center;gap:1em}.column[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1em}.role-selection[_ngcontent-%COMP%]{flex-grow:2}.controls[_ngcontent-%COMP%]{align-items:flex-end;justify-content:center}.divider[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:1em}"]}),i})();function Ie(i,r){1&i&&(t.TgZ(0,"div",7),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTE_RIGHTS.OR")," "))}function Ae(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"perun-web-apps-attribute-rights-collection",5),t.NdJ("collectionRemoved",function(){const o=t.CHM(e).index,v=t.oxw();return t.KtG(v.removeCollection(o))}),t.qZA(),t.YNc(2,Ie,3,3,"div",6),t.qZA()}if(2&i){const e=r.$implicit,n=r.index,a=t.oxw();t.xp6(1),t.Q6J("collection",e.action===a.action?e:null),t.xp6(1),t.Q6J("ngIf",n!==a.lastIndex&&e.action===a.action)}}let Ue=(()=>{class i{ngOnChanges(){this.lastIndex=this.findLastIndex()}addCollection(){this.collections.push({id:-1,attributeId:this.attributeId,action:this.action,policies:[{id:-1,role:null,object:null,policyCollectionId:-1}]}),this.lastIndex=this.findLastIndex()}removeCollection(e){this.collections.splice(e,1),this.lastIndex=this.findLastIndex()}findLastIndex(){let e=0;for(let n=0;n<this.collections.length;n++)this.collections[n].action===this.action&&(e=n);return e}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["perun-web-apps-attribute-rights-tab"]],inputs:{attributeId:"attributeId",collections:"collections",action:"action"},features:[t.TTD],decls:8,vars:4,consts:[["alert_type","info"],[4,"ngFor","ngForOf"],[1,"button-container"],["color","accent","mat-icon-button","",1,"add-button",3,"click"],["inline","true"],[3,"collection","collectionRemoved"],["class","divider",4,"ngIf"],[1,"divider"]],template:function(e,n){1&e&&(t.TgZ(0,"perun-web-apps-alert",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.YNc(3,Ae,3,2,"div",1),t.TgZ(4,"div",2)(5,"button",3),t.NdJ("click",function(){return n.addCollection()}),t.TgZ(6,"mat-icon",4),t._uU(7,"add_circle"),t.qZA()()()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,2,"SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTE_RIGHTS.INFO"),"\n"),t.xp6(2),t.Q6J("ngForOf",n.collections))},dependencies:[m.sg,m.O5,et.w,l.Hw,V.lW,Ee,u.X$],styles:[".add-button[_ngcontent-%COMP%]{font-size:2em}.divider[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:1em;font-weight:700}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:1em}"]}),i})();function Ze(i,r){if(1&i&&(t._uU(0),t.ALo(1,"translate")),2&i){const e=t.oxw().$implicit;t.hij(" ",t.lcZ(1,1,"SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTE_RIGHTS."+e)," ")}}function ei(i,r){if(1&i&&(t.TgZ(0,"mat-tab"),t.YNc(1,Ze,2,3,"ng-template",1),t._UZ(2,"perun-web-apps-attribute-rights-tab",2),t.qZA()),2&i){const e=r.$implicit,n=t.oxw();t.xp6(2),t.Q6J("attributeId",null==n.attDef?null:n.attDef.id)("collections",n.collections)("action",e)}}let ve=(()=>{class i{constructor(){this.collections=[],this.actionTabs=["READ","WRITE"]}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["perun-web-apps-attribute-rights-tab-group"]],inputs:{attDef:"attDef",collections:"collections"},decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],["matTabLabel",""],[3,"attributeId","collections","action"]],template:function(e,n){1&e&&(t.TgZ(0,"mat-tab-group"),t.YNc(1,ei,3,3,"mat-tab",0),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",n.actionTabs))},dependencies:[m.sg,Ge.SP,Ge.uD,Ge.uX,Ue,u.X$]}),i})();var oi=s(10266),Ct=s(90455),Ht=s(4765);function se(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",1),t.ALo(1,"translate"),t.TgZ(2,"mat-slide-toggle",2),t.NdJ("ngModelChange",function(a){t.CHM(e);const o=t.oxw();return t.KtG(o.attDef.unique=a)}),t._uU(3),t.ALo(4,"translate"),t.qZA()()}if(2&i){const e=r.ngIf,n=t.oxw();t.s9C("matTooltip",t.lcZ(1,5,"SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTE_UNIQUE_TOGGLE.TOOLTIP")),t.Q6J("matTooltipDisabled",!e.disable),t.xp6(2),t.Q6J("ngModel",n.attDef.unique)("disabled",e.disable),t.xp6(1),t.hij(" ",t.lcZ(4,7,"SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTE_UNIQUE_TOGGLE.UNIQUE")," ")}}const fe=function(i){return{disable:i}};let qt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["perun-web-apps-attribute-unique-toggle"]],inputs:{attDef:"attDef"},decls:2,vars:5,consts:[["class","unique-toggle-container","matTooltipPosition","above",3,"matTooltipDisabled","matTooltip",4,"ngIf"],["matTooltipPosition","above",1,"unique-toggle-container",3,"matTooltipDisabled","matTooltip"],["color","accent","labelPosition","before",3,"ngModel","disabled","ngModelChange"]],template:function(e,n){1&e&&(t.YNc(0,se,5,9,"div",0),t.ALo(1,"disableUniqueAttribute")),2&e&&t.Q6J("ngIf",t.VKq(3,fe,t.lcZ(1,1,n.attDef)))},dependencies:[m.O5,it.JJ,it.On,oi.gM,Ct.Rr,u.X$,Ht.b],styles:[".unique-toggle-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin:1em 0;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;font-size:1.125rem}"]}),i})(),Be=(()=>{class i{constructor(){this.readOperation=!1,this.writeOperation=!1,this.readOperationChanged=new t.vpe,this.writeOperationChanged=new t.vpe}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["perun-web-apps-attribute-critical-operations-toggles"]],inputs:{readOperation:"readOperation",writeOperation:"writeOperation"},outputs:{readOperationChanged:"readOperationChanged",writeOperationChanged:"writeOperationChanged"},decls:10,vars:11,consts:[["color","accent","labelPosition","before",1,"toggle-font",3,"ngModel","ngModelChange","toggleChange"],["alert_type","info"]],template:function(e,n){1&e&&(t.TgZ(0,"mat-slide-toggle",0),t.NdJ("ngModelChange",function(o){return n.readOperation=o})("toggleChange",function(){return n.readOperationChanged.emit(!n.readOperation)}),t._uU(1),t.ALo(2,"translate"),t.qZA(),t._UZ(3,"br"),t.TgZ(4,"mat-slide-toggle",0),t.NdJ("ngModelChange",function(o){return n.writeOperation=o})("toggleChange",function(){return n.writeOperationChanged.emit(!n.writeOperation)}),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"perun-web-apps-alert",1),t._uU(8),t.ALo(9,"translate"),t.qZA()),2&e&&(t.Q6J("ngModel",n.readOperation),t.xp6(1),t.hij(" ",t.lcZ(2,5,"SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTE_CRITICAL_OPERATIONS_TOGGLE.READ"),"\n"),t.xp6(3),t.Q6J("ngModel",n.writeOperation),t.xp6(1),t.hij(" ",t.lcZ(6,7,"SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTE_CRITICAL_OPERATIONS_TOGGLE.WRITE"),"\n"),t.xp6(3),t.hij(" ",t.lcZ(9,9,"SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTE_CRITICAL_OPERATIONS_TOGGLE.INFO"),"\n"))},dependencies:[it.JJ,it.On,et.w,Ct.Rr,u.X$],styles:[".toggle-font[_ngcontent-%COMP%]{font-size:1.125rem}"]}),i})(),ze=(()=>{class i{transform(e){if(null===e)return null;const n=e;return n.substring(n.lastIndexOf(".")+1,n.length)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275pipe=t.Yjl({name:"attributeTypeClean",type:i,pure:!0}),i})();function Ti(i,r){1&i&&t._UZ(0,"mat-spinner",7)}function ln(i,r){1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.ERROR_FIELD_EMPTY")," "))}function Mn(i,r){1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.ERROR_FIELD_EMPTY")," "))}function mn(i,r){1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.ERROR_FIELD_EMPTY")," "))}function gn(i,r){if(1&i&&(t.TgZ(0,"mat-option",21),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function En(i,r){1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.ERROR_FIELD_EMPTY")," "))}function tr(i,r){if(1&i&&(t.TgZ(0,"mat-option",21),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.hij("",e," ")}}function Fn(i,r){1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.ERROR_FIELD_EMPTY")," "))}function Nn(i,r){if(1&i&&(t.TgZ(0,"mat-option",21),t._uU(1),t.ALo(2,"attributeTypeClean"),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",t.lcZ(2,2,e)," ")}}function _n(i,r){1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.ERROR_FIELD_EMPTY")," "))}function Qn(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",8)(1,"form",9)(2,"mat-form-field"),t._UZ(3,"input",10),t.ALo(4,"translate"),t.YNc(5,ln,3,3,"mat-error",11),t.qZA(),t.TgZ(6,"mat-form-field"),t._UZ(7,"input",12),t.ALo(8,"translate"),t.YNc(9,Mn,3,3,"mat-error",11),t.qZA(),t.TgZ(10,"mat-form-field")(11,"textarea",13),t.ALo(12,"translate"),t._uU(13,"        "),t.qZA(),t.YNc(14,mn,3,3,"mat-error",11),t.qZA(),t.TgZ(15,"mat-form-field")(16,"mat-select",14),t.ALo(17,"translate"),t.YNc(18,gn,2,2,"mat-option",15),t.qZA(),t.YNc(19,En,3,3,"mat-error",11),t.qZA(),t.TgZ(20,"mat-form-field")(21,"mat-select",16),t.ALo(22,"translate"),t.YNc(23,tr,2,2,"mat-option",15),t.qZA(),t.YNc(24,Fn,3,3,"mat-error",11),t.qZA(),t.TgZ(25,"mat-form-field")(26,"mat-select",17),t.ALo(27,"translate"),t.YNc(28,Nn,3,4,"mat-option",15),t.qZA(),t.YNc(29,_n,3,3,"mat-error",11),t.qZA()(),t._UZ(30,"perun-web-apps-attribute-unique-toggle",18),t.ALo(31,"async"),t.TgZ(32,"perun-web-apps-attribute-critical-operations-toggles",19),t.NdJ("readOperationChanged",function(a){t.CHM(e);const o=t.oxw();return t.KtG(o.finalReadOperations=a)})("writeOperationChanged",function(a){t.CHM(e);const o=t.oxw();return t.KtG(o.finalWriteOperations=a)}),t.qZA(),t._UZ(33,"perun-web-apps-attribute-rights-tab-group",20),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.attributeControl),t.xp6(2),t.s9C("placeholder",t.lcZ(4,18,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.FRIENDLY_NAME")),t.xp6(2),t.Q6J("ngIf",e.attributeControl.hasError("required","friendlyName")),t.xp6(2),t.s9C("placeholder",t.lcZ(8,20,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.DISPLAY_NAME")),t.xp6(2),t.Q6J("ngIf",e.attributeControl.hasError("required","displayName")),t.xp6(2),t.s9C("placeholder",t.lcZ(12,22,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.DESCRIPTION")),t.xp6(3),t.Q6J("ngIf",e.attributeControl.hasError("required","description")),t.xp6(2),t.s9C("placeholder",t.lcZ(17,24,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.ENTITY")),t.xp6(2),t.Q6J("ngForOf",e.entities),t.xp6(1),t.Q6J("ngIf",e.attributeControl.hasError("required","entity")),t.xp6(2),t.s9C("placeholder",t.lcZ(22,26,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.DEFINITION")),t.xp6(2),t.Q6J("ngForOf",e.definitionTypes),t.xp6(1),t.Q6J("ngIf",e.attributeControl.hasError("required","definitionType")),t.xp6(2),t.s9C("placeholder",t.lcZ(27,28,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.VALUE_TYPE")),t.xp6(2),t.Q6J("ngForOf",e.valueTypes),t.xp6(1),t.Q6J("ngIf",e.attributeControl.hasError("required","valueType")),t.xp6(1),t.Q6J("attDef",t.lcZ(31,30,e.attDef)),t.xp6(3),t.Q6J("collections",e.collections)}}let Rn=(()=>{class i{constructor(e,n,a,o,v,T,N){this.dialogRef=e,this.formBuilder=n,this.attributeService=a,this.attributeRightsService=o,this.notificator=v,this.translate=T,this.uniqueAttPipe=N,this.loading=!1,this.attributeControl=this.formBuilder.group({friendlyName:["",it.kI.required],displayName:["",it.kI.required],description:["",it.kI.required],entity:["",it.kI.required],definitionType:["",it.kI.required],valueType:["",it.kI.required]}),this.entities=["facility","resource","group","group_resource","host","member","member_group","member_resource","user","ues","user_facility","vo","entityless"],this.definitionTypes=["def","opt","virt","core"],this.valueTypes=["java.lang.String","java.lang.Integer","java.lang.Boolean","java.util.Array","java.util.LinkedHashMap"],this.attDef=new D.X({id:0,beanName:"",namespace:"",unique:!1}),this.collections=[],this.attributeControl.valueChanges.pipe((0,q.b)(200)).subscribe(G=>{this.setAttribute(G)})}submit(){this.loading=!0,this.attributeService.createAttributeDefinition({attribute:this.attDef.getValue()}).pipe((0,U.w)(e=>(this.attDefCreated=e,ut((0,ft.of)(e.id),(0,ft.of)(this.collections)))),this.attributeRightsService.addAttributeId(),this.attributeRightsService.filterNullInPolicy(),(0,U.w)(e=>this.attributeService.setAttributePolicyCollections({policyCollections:e})),(0,U.w)(()=>this.attributeRightsService.updateAttributeAction(this.finalReadOperations,!1,this.attDefCreated.id,Y.oW.READ)),(0,U.w)(()=>this.attributeRightsService.updateAttributeAction(this.finalWriteOperations,!0,this.attDefCreated.id,Y.oW.WRITE))).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("DIALOGS.CREATE_ATTRIBUTE_DEFINITION.SUCCESS")),this.dialogRef.close(!0)},()=>this.loading=!1)}cancel(){this.dialogRef.close(!1)}setAttribute(e){const n={id:0,beanName:"",friendlyName:e.friendlyName,displayName:e.displayName,description:e.description,type:e.valueType,namespace:this.createNamespace(e.entity,e.definitionType)};n.unique=this.attDef.getValue().unique&&!this.uniqueAttPipe.transform(n),this.attDef.next(n)}createNamespace(e,n){return"urn:perun:"+e+":attribute-def:"+n}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(M.so),t.Y36(it.QS),t.Y36(Y.H8),t.Y36(B.eE),t.Y36(B.V6),t.Y36(u.sK),t.Y36(gt.bY))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-create-attribute-definition-dialog"]],features:[t._Bn([gt.bY])],decls:13,vars:12,consts:[[1,"admin-theme"],["mat-dialog-title",""],["class","mr-auto ml-auto",4,"ngIf"],["mat-dialog-content","",4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["color","accent","data-cy","create-attr-definition-button","mat-flat-button","",1,"ml-2",3,"disabled","click"],[1,"mr-auto","ml-auto"],["mat-dialog-content",""],[1,"dialog-container",3,"formGroup"],["matInput","","formControlName","friendlyName","data-cy","attribute-friendly-name-input","required","",3,"placeholder"],[4,"ngIf"],["matInput","","formControlName","displayName","data-cy","attribute-display-name-input","required","",3,"placeholder"],["matInput","","formControlName","description","cdkTextareaAutosize","","data-cy","attribute-description-input","required","",3,"placeholder"],["formControlName","entity","data-cy","attribute-entity-input","required","",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],["formControlName","definitionType","data-cy","attribute-definition-type-input","required","",3,"placeholder"],["formControlName","valueType","data-cy","attribute-value-type-input","required","",3,"placeholder"],[3,"attDef"],[3,"readOperationChanged","writeOperationChanged"],[3,"collections"],[3,"value"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,Ti,1,0,"mat-spinner",2),t.YNc(5,Qn,34,32,"div",3),t.TgZ(6,"div",4)(7,"button",5),t.NdJ("click",function(){return n.cancel()}),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"button",6),t.NdJ("click",function(){return n.submit()}),t._uU(11),t.ALo(12,"translate"),t.qZA()()()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,6,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.TITLE")),t.xp6(2),t.Q6J("ngIf",n.loading),t.xp6(1),t.Q6J("ngIf",!n.loading),t.xp6(3),t.hij(" ",t.lcZ(9,8,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.CANCEL")," "),t.xp6(2),t.Q6J("disabled",n.loading||n.attributeControl.invalid),t.xp6(1),t.hij(" ",t.lcZ(12,10,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.CONFIRM")," "))},dependencies:[m.sg,m.O5,Nt.ey,ee.IC,Kt.TO,Kt.KE,ce.Nt,it._Y,it.Fj,it.JJ,it.JL,it.Q7,it.sg,it.u,V.lW,M.uh,M.xY,M.H8,xe.gD,nt.Ou,ve,qt,Be,m.Ov,u.X$,ze]}),i})();var he=s(9244),Si=s(10036);function jn(i,r){1&i&&t._UZ(0,"mat-spinner",7)}function Oi(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",8)(1,"perun-web-apps-alert",9),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"mat-form-field",10)(5,"input",11),t.NdJ("ngModelChange",function(a){t.CHM(e);const o=t.oxw();return t.KtG(o.value=a)}),t.ALo(6,"translate"),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,3,"DIALOGS.IMPORT_ATTRIBUTE.INFO")," "),t.xp6(3),t.Q6J("ngModel",e.value)("placeholder",t.lcZ(6,5,"DIALOGS.IMPORT_ATTRIBUTE.HINT"))}}let gi=(()=>{class i{constructor(e,n,a,o,v){this.dialogRef=e,this.notificator=n,this.translate=a,this.attributesManager=o,this.attributesRightsService=v,this.value="",this.loading=!1}create(){this.loading=!0,this.attributeData=JSON.parse(this.value),this.attributesManager.createAttributeDefinition({attribute:this.attributeData.attributeDefinition}).pipe((0,U.w)(e=>ut((0,ft.of)(e.id),(0,ft.of)(this.attributeData.attributeRights))),this.attributesRightsService.addAttributeId(),(0,U.w)(e=>this.attributesManager.setAttributePolicyCollections({policyCollections:e}))).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("DIALOGS.IMPORT_ATTRIBUTE_DEFINITION.SUCCESS")),this.dialogRef.close(!0)},()=>this.loading=!1)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(M.so),t.Y36(B.V6),t.Y36(u.sK),t.Y36(Y.H8),t.Y36(B.eE))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-attribute-import-dialog"]],decls:13,vars:12,consts:[[1,"admin-theme"],["mat-dialog-title",""],["class","mr-auto ml-auto",4,"ngIf"],["mat-dialog-content","",4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["color","accent","mat-flat-button","",1,"ml-2",3,"disabled","click"],[1,"mr-auto","ml-auto"],["mat-dialog-content",""],["alert_type","info"],[1,"w-100"],["matInput","","required","",3,"ngModel","placeholder","ngModelChange"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,jn,1,0,"mat-spinner",2),t.YNc(5,Oi,7,7,"div",3),t.TgZ(6,"div",4)(7,"button",5),t.NdJ("click",function(){return n.dialogRef.close()}),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"button",6),t.NdJ("click",function(){return n.create()}),t._uU(11),t.ALo(12,"translate"),t.qZA()()()),2&e&&(t.xp6(2),t.hij(" ",t.lcZ(3,6,"DIALOGS.IMPORT_ATTRIBUTE.TITLE")," "),t.xp6(2),t.Q6J("ngIf",n.loading),t.xp6(1),t.Q6J("ngIf",!n.loading),t.xp6(3),t.hij(" ",t.lcZ(9,8,"DIALOGS.IMPORT_ATTRIBUTE.CANCEL")," "),t.xp6(2),t.Q6J("disabled",0===n.value.trim().length||n.loading),t.xp6(1),t.hij(" ",t.lcZ(12,10,"DIALOGS.IMPORT_ATTRIBUTE.CREATE")," "))},dependencies:[m.O5,Kt.KE,ce.Nt,it.Fj,it.JJ,it.Q7,it.On,V.lW,M.uh,M.xY,M.H8,nt.Ou,et.w,u.X$]}),i})();var ii=s(96308),Yi=s(36769),cn=s(68675),Ii=s(64425),Te=s(37084),Bn=s(33604),Pi=s(56709),hi=s(43532),z=s(18750);function $(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"th",22)(1,"mat-checkbox",23),t.NdJ("change",function(a){t.CHM(e);const o=t.oxw(2);return t.KtG(a?o.masterToggle():null)}),t.qZA()()}if(2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("aria-label",e.checkboxLabel())("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected())}}function ct(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"td",24)(1,"mat-checkbox",25),t.NdJ("change",function(a){const v=t.CHM(e).$implicit,T=t.oxw(2);return t.KtG(a?T.selection.toggle(v):null)})("click",function(a){return a.stopPropagation()}),t.qZA()()}if(2&i){const e=r.$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("aria-label",n.checkboxLabel(e))("checked",n.selection.isSelected(e))}}function A(i,r){1&i&&(t.TgZ(0,"th",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.ENTITYLESS_ATTRIBUTES_LIST.KEY")," "))}function Tt(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"td",27)(1,"label")(2,"input",28),t.NdJ("ngModelChange",function(){const o=t.CHM(e).$implicit,v=t.oxw(2);return t.KtG(v.onValueChange(o))})("ngModelChange",function(a){const v=t.CHM(e).$implicit;return t.KtG(v[0]=a)}),t.qZA()()()}if(2&i){const e=r.$implicit;t.xp6(2),t.Q6J("ngModel",e[0])}}function Dt(i,r){1&i&&(t.TgZ(0,"th",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.ENTITYLESS_ATTRIBUTES_LIST.VALUE")," "))}function Pt(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"td",27)(1,"perun-web-apps-attribute-value",29),t.NdJ("sendEventToParent2",function(){const o=t.CHM(e).$implicit,v=t.oxw(2);return t.KtG(v.onValueChange(o))}),t.qZA()()}if(2&i){const e=r.$implicit;t.xp6(1),t.Q6J("attribute",e[1])}}function Gt(i,r){1&i&&t._UZ(0,"tr",30)}function Qt(i,r){1&i&&t._UZ(0,"tr",31)}function zt(i,r){if(1&i&&(t.TgZ(0,"div",10)(1,"perun-web-apps-table-wrapper",11)(2,"table",12),t.ynx(3,13),t.YNc(4,$,2,3,"th",14),t.YNc(5,ct,2,2,"td",15),t.BQk(),t.ynx(6,16),t.YNc(7,A,3,3,"th",17),t.YNc(8,Tt,3,1,"td",18),t.BQk(),t.ynx(9,19),t.YNc(10,Dt,3,3,"th",17),t.YNc(11,Pt,2,1,"td",18),t.BQk(),t.YNc(12,Gt,1,0,"tr",20),t.YNc(13,Qt,1,0,"tr",21),t.qZA()()()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("pageSizeOptions",e.pageSizeOptions)("dataLength",e.dataSource.filteredData.length)("hideExport",!0)("tableId",e.tableId),t.xp6(1),t.Q6J("dataSource",e.dataSource),t.xp6(10),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns)}}function J(i,r){1&i&&t._UZ(0,"mat-spinner",32)}function pt(i,r){1&i&&(t.TgZ(0,"perun-web-apps-alert",33),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.ENTITYLESS_ATTRIBUTES_LIST.NO_KEYS_WARNING")," "))}let _t=(()=>{class i{constructor(e,n,a,o,v){this.dialogRef=e,this.data=n,this.notificator=a,this.translate=o,this.attributesManager=v,this.switchView=new t.vpe,this.records=[],this.displayedColumns=["select","key","value"],this.dataSource=new F.by,this.selection=new R.Ov(!0,[]),this.isAddButtonDisabled=!1,this.pageSizeOptions=he.f7}set matSort(e){this.sort=e}ngOnChanges(){this.ngOnInit()}ngOnInit(){this.loading=!0,this.attDef=this.data.attDef,this.attributesManager.getEntitylessKeys(this.attDef.id).subscribe(e=>{this.attributesManager.getEntitylessAttributesByName(`${this.attDef.namespace}:${this.attDef.friendlyName}`).subscribe(n=>{let a=0;this.records=[];for(const o of e)this.records.push([o,n[a]]),a++;this.dataSource=new F.by(this.records),this.setDataSource(),this.loading=!1})})}setDataSource(){!this.child||!this.child.paginator||this.dataSource&&(this.dataSource.sort=this.sort,this.dataSource.paginator=this.child.paginator)}onSave(){this.updateMapAttributes();for(const e of this.selection.selected)this.attributesManager.setEntitylessAttribute({key:e[0],attribute:e[1]}).subscribe(()=>{this.translate.get("SHARED.COMPONENTS.ENTITYLESS_ATTRIBUTES_LIST.SAVE_SUCCESS").subscribe(n=>{this.notificator.showSuccess(n),this.ngOnInit()})});this.selection.clear(),this.isAddButtonDisabled=!1}onRemove(){for(const e of this.selection.selected)this.attributesManager.removeEntitylessAttribute(e[0],e[1].id).subscribe(()=>{this.translate.get("SHARED.COMPONENTS.ENTITYLESS_ATTRIBUTES_LIST.REMOVE_SUCCESS").subscribe(n=>{this.notificator.showSuccess(n),this.ngOnInit()})});this.ngOnInit(),this.selection.clear(),this.isAddButtonDisabled=!1}onAdd(){const e=["",this.attDef];e[1].value=void 0,this.records.unshift(e),this.dataSource.data=this.records,this.setDataSource(),this.selection.clear(),this.selection.select(e),this.isAddButtonDisabled=!0}onCancel(){this.dialogRef.close(!1)}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.data.forEach(e=>this.selection.select(e))}checkboxLabel(e){return e?`${this.selection.isSelected(e)?"deselect":"select"} row ${e[1].id+1}`:(this.isAllSelected()?"select":"deselect")+" all"}onValueChange(e){this.selection.select(e)}updateMapAttributes(){for(const e of this.items.toArray())"java.util.LinkedHashMap"===e.attribute.type&&e.updateMapAttribute()}ngAfterViewInit(){this.children.changes.subscribe(e=>{this.child=e.first,this.dataSource.paginator=this.child.paginator})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(M.so),t.Y36(M.WI),t.Y36(B.V6),t.Y36(u.sK),t.Y36(Y.H8))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-entityless-attribute-keys-list"]],viewQuery:function(e,n){if(1&e&&(t.Gf(ii.YE,7),t.Gf(Bn.Mw,5),t.Gf(he.l9,5)),2&e){let a;t.iGM(a=t.CRH())&&(n.matSort=a.first),t.iGM(a=t.CRH())&&(n.items=a),t.iGM(a=t.CRH())&&(n.children=a)}},inputs:{attDef:"attDef",tableId:"tableId"},outputs:{switchView:"switchView"},features:[t.TTD],decls:19,vars:19,consts:[["mat-dialog-title",""],["mat-dialog-actions","",1,"mt-3"],["mat-stroked-button","",3,"click"],["color","accent","mat-flat-button","",1,"ml-2",3,"click"],["color","accent","matTooltip","save or remove new attribute first","mat-flat-button","","matTooltipPosition","above",1,"ml-2",3,"disabled","matTooltipDisabled","click"],["color","warn","mat-flat-button","",1,"ml-2",3,"click"],["mat-dialog-content","",1,"mt-3",3,"hidden"],["class","card mt-3",4,"ngIf"],["class","ml-auto mr-auto",4,"ngIf"],["alert_type","warn","class","mt-3",4,"ngIf"],[1,"card","mt-3"],[3,"pageSizeOptions","dataLength","hideExport","tableId"],["mat-table","","matSort","","matSortActive","key","matSortDirection","asc","matSortDisableClear","",1,"w-100",3,"dataSource"],["matColumnDef","select"],["class","align-checkbox","mat-header-cell","",4,"matHeaderCellDef"],["class","static-column-size align-checkbox","mat-cell","",4,"matCellDef"],["matColumnDef","key"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","value"],["mat-header-row","",4,"matHeaderRowDef"],["class","dark-hover-list-item","mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"align-checkbox"],["color","primary",3,"aria-label","checked","indeterminate","change"],["mat-cell","",1,"static-column-size","align-checkbox"],["color","primary",3,"aria-label","checked","change","click"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["matInput","","placeholder","New key",1,"mt-2",3,"ngModel","ngModelChange"],[3,"attribute","sendEventToParent2"],["mat-header-row",""],["mat-row","",1,"dark-hover-list-item"],[1,"ml-auto","mr-auto"],["alert_type","warn",1,"mt-3"]],template:function(e,n){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.qZA(),t.TgZ(2,"div",1)(3,"button",2),t.NdJ("click",function(){return n.switchView.emit()}),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"button",3),t.NdJ("click",function(){return n.onSave()}),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"button",4),t.NdJ("click",function(){return n.onAdd()}),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"button",5),t.NdJ("click",function(){return n.onRemove()}),t._uU(13),t.ALo(14,"translate"),t.qZA()(),t.TgZ(15,"div",6),t.YNc(16,zt,14,7,"div",7),t.YNc(17,J,1,0,"mat-spinner",8),t.YNc(18,pt,3,3,"perun-web-apps-alert",9),t.qZA()),2&e&&(t.xp6(1),t.Oqu(n.attDef.namespace+":"+n.attDef.friendlyName),t.xp6(3),t.hij(" ",t.lcZ(5,11,"SHARED.COMPONENTS.ENTITYLESS_ATTRIBUTES_LIST.CANCEL")," "),t.xp6(3),t.hij(" ",t.lcZ(8,13,"SHARED.COMPONENTS.ENTITYLESS_ATTRIBUTES_LIST.SAVE")," "),t.xp6(2),t.Q6J("disabled",n.isAddButtonDisabled)("matTooltipDisabled",!n.isAddButtonDisabled),t.xp6(1),t.hij(" ",t.lcZ(11,15,"SHARED.COMPONENTS.ENTITYLESS_ATTRIBUTES_LIST.ADD")," "),t.xp6(3),t.hij(" ",t.lcZ(14,17,"SHARED.COMPONENTS.ENTITYLESS_ATTRIBUTES_LIST.REMOVE")," "),t.xp6(2),t.Q6J("hidden",n.loading),t.xp6(1),t.Q6J("ngIf",n.records&&n.records.length),t.xp6(1),t.Q6J("ngIf",n.loading),t.xp6(1),t.Q6J("ngIf",0===n.records.length))},dependencies:[m.O5,ce.Nt,it.Fj,it.JJ,it.On,V.lW,ii.YE,ii.nU,F.BZ,F.fO,F.as,F.w1,F.Dz,F.nj,F.ge,F.ev,F.XQ,F.Gk,Pi.oG,M.uh,M.xY,M.H8,nt.Ou,oi.gM,et.w,hi.M,z.l,u.X$],styles:[".mat-cell[_ngcontent-%COMP%]{padding:8px 8px 8px 0}"]}),i})();var vt=s(60205);function Ut(i,r){1&i&&t._UZ(0,"mat-spinner",10)}function Yt(i,r){1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.ERROR_FIELD_EMPTY")," "))}function Lt(i,r){1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.ERROR_FIELD_EMPTY")," "))}const ae=function(){return["id","name","enabled","script"]};function O(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",11)(1,"form",12)(2,"mat-form-field"),t._UZ(3,"input",13),t.ALo(4,"translate"),t.YNc(5,Yt,3,3,"mat-error",1),t.qZA(),t.TgZ(6,"mat-form-field")(7,"textarea",14),t.ALo(8,"translate"),t._uU(9,"          "),t.qZA(),t.YNc(10,Lt,3,3,"mat-error",1),t.qZA()(),t._UZ(11,"perun-web-apps-attribute-unique-toggle",15),t.TgZ(12,"perun-web-apps-attribute-critical-operations-toggles",16),t.NdJ("readOperationChanged",function(a){t.CHM(e);const o=t.oxw(2);return t.KtG(o.finalReadOperations=a)})("writeOperationChanged",function(a){t.CHM(e);const o=t.oxw(2);return t.KtG(o.finalWriteOperations=a)}),t.qZA(),t._UZ(13,"perun-web-apps-attribute-rights-tab-group",17),t.ALo(14,"async"),t.TgZ(15,"mat-accordion")(16,"mat-expansion-panel",18)(17,"mat-expansion-panel-header")(18,"mat-panel-title"),t._uU(19),t.ALo(20,"translate"),t.qZA()(),t._UZ(21,"app-services-list",19),t.ALo(22,"async"),t.qZA()()()}if(2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("formGroup",e.attributeControl),t.xp6(2),t.s9C("placeholder",t.lcZ(4,14,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.DISPLAY_NAME")),t.xp6(2),t.Q6J("ngIf",e.attributeControl.hasError("required","name")),t.xp6(2),t.s9C("placeholder",t.lcZ(8,16,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.DESCRIPTION")),t.xp6(3),t.Q6J("ngIf",e.attributeControl.hasError("required","description")),t.xp6(1),t.Q6J("attDef",e.attDef),t.xp6(1),t.Q6J("readOperation",e.initReadOperations)("writeOperation",e.initWriteOperations),t.xp6(1),t.Q6J("attDef",e.attDef)("collections",t.lcZ(14,18,e.collections$)),t.xp6(6),t.hij(" ",t.lcZ(20,20,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.SERVICES")," "),t.xp6(2),t.Q6J("disableRouting",!0)("displayedColumns",t.DdM(24,ae))("services",t.lcZ(22,22,e.services$))}}function ne(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.switchShowKeys())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.SHOW_KEYS")," "))}function we(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"h1",2),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,Ut,1,0,"mat-spinner",3),t.YNc(5,O,23,25,"div",4),t.TgZ(6,"div",5),t.YNc(7,ne,3,3,"button",6),t.TgZ(8,"button",7),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onCopy())}),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"button",8),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onCancel())}),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"button",9),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onSubmit())}),t._uU(15),t.ALo(16,"translate"),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,8,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.TITLE")),t.xp6(2),t.Q6J("ngIf",e.loading),t.xp6(1),t.Q6J("ngIf",!e.loading),t.xp6(2),t.Q6J("ngIf","entityless"===(null==e.attDef?null:e.attDef.entity)),t.xp6(2),t.hij(" ",t.lcZ(10,10,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.COPY_FOR_IMPORT")," "),t.xp6(3),t.hij(" ",t.lcZ(13,12,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.CANCEL")," "),t.xp6(2),t.Q6J("disabled",e.loading||e.attributeControl.invalid),t.xp6(1),t.hij(" ",t.lcZ(16,14,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.CONFIRM")," ")}}function be(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"app-entityless-attribute-keys-list",21),t.NdJ("switchView",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.switchShowKeys())}),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("attDef",e.attDef)("tableId",e.tableId)}}let je=(()=>{class i{constructor(e,n,a,o,v,T,N,G,tt){this.dialogRef=e,this.data=n,this.notificator=a,this.translate=o,this.clipboard=v,this.attributesManager=T,this.serviceService=N,this.formBuilder=G,this.attributeRightsService=tt,this.tableId=Si.Wv,this.loading=!1,this.showKeys=!1,this.attDef=this.data.attDef,this.attributeControl=this.formBuilder.group({name:[this.attDef.displayName,it.kI.required],description:[this.attDef.description,it.kI.required]}),this.collections$=new D.X([]),this.services$=this.serviceService.getServicesByAttributeDefinition(this.attDef.id).pipe((0,cn.O)([]))}ngOnInit(){this.dialogRef.addPanelClass("mat-dialog-height-transition"),this.attributesManager.getAttributeRules(this.attDef.id).subscribe(e=>{this.collections$=new D.X(e.attributePolicyCollections),this.initReadOperations=e.criticalActions.includes("READ"),this.initWriteOperations=e.criticalActions.includes("WRITE")})}onSubmit(){this.loading=!0,this.updateAttribute(),this.attributesManager.updateAttributeDefinition({attributeDefinition:this.attDef}).pipe((0,U.w)(()=>(0,ft.of)(this.collections$.getValue())),this.attributeRightsService.filterNullInPolicy(),(0,U.w)(e=>this.attributesManager.setAttributePolicyCollections({policyCollections:e})),(0,U.w)(()=>this.attributeRightsService.updateAttributeAction(this.finalReadOperations,this.initReadOperations,this.attDef.id,Y.oW.READ)),(0,U.w)(()=>this.attributeRightsService.updateAttributeAction(this.finalWriteOperations,this.initWriteOperations,this.attDef.id,Y.oW.WRITE))).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("DIALOGS.EDIT_ATTRIBUTE_DEFINITION.SUCCESS")),this.dialogRef.close(!0)},()=>this.loading=!1)}onCancel(){this.dialogRef.close(!1)}switchShowKeys(){this.showKeys=!this.showKeys,this.dialogRef.updateSize(this.showKeys?"800px":"700px")}onCopy(){this.updateAttribute();const e={attributeDefinition:this.attDef,attributeRights:this.collections$.getValue()};this.clipboard.copy(JSON.stringify(e))?this.notificator.showSuccess(this.translate.instant("DIALOGS.EDIT_ATTRIBUTE_DEFINITION.COPIED")):this.notificator.showError(this.translate.instant("DIALOGS.EDIT_ATTRIBUTE_DEFINITION.COPY_FAILED"))}updateAttribute(){this.attDef.displayName=this.attributeControl.get("name").value,this.attDef.description=this.attributeControl.get("description").value}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(M.so),t.Y36(M.WI),t.Y36(B.V6),t.Y36(u.sK),t.Y36(Ii.TU),t.Y36(Y.H8),t.Y36(Y.KK),t.Y36(it.QS),t.Y36(B.eE))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-edit-attribute-definition-dialog"]],decls:3,vars:2,consts:[[1,"admin-theme"],[4,"ngIf"],["mat-dialog-title",""],["class","ml-auto mr-auto",4,"ngIf"],["mat-dialog-content","",4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",3,"click",4,"ngIf"],["mat-flat-button","",1,"ml-auto",3,"click"],["mat-flat-button","",1,"ml-2",3,"click"],["color","accent","mat-flat-button","",1,"ml-2",3,"disabled","click"],[1,"ml-auto","mr-auto"],["mat-dialog-content",""],[1,"fields-container",3,"formGroup"],["matInput","","data-cy","display-name-input","formControlName","name","required","",3,"placeholder"],["matInput","","formControlName","description","cdkTextareaAutosize","","required","",3,"placeholder"],[3,"attDef"],[3,"readOperation","writeOperation","readOperationChanged","writeOperationChanged"],[3,"attDef","collections"],[1,"mt-4","mb-4"],[3,"disableRouting","displayedColumns","services"],["mat-flat-button","",3,"click"],[3,"attDef","tableId","switchView"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.YNc(1,we,17,16,"div",1),t.YNc(2,be,2,2,"div",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",!n.showKeys),t.xp6(1),t.Q6J("ngIf",n.showKeys))},dependencies:[m.O5,ee.IC,Kt.TO,Kt.KE,ce.Nt,it._Y,it.Fj,it.JJ,it.JL,it.Q7,it.sg,it.u,Te.pp,Te.ib,Te.yz,Te.yK,V.lW,M.uh,M.xY,M.H8,nt.Ou,ve,qt,Be,_t,vt.Q,m.Ov,u.X$],styles:[".fields-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}"],data:{animation:[Yi.SG,Yi.GH,Yi.Ls]}}),i})();var Oe=s(70844),Pe=s(64597);let oe=(()=>{class i{transform(e){if(null===e)return null;const n=e;return n.substring(n.lastIndexOf(":")+1,n.length)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275pipe=t.Yjl({name:"nameSpaceToDef",type:i,pure:!0}),i})();function de(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"th",19)(1,"mat-checkbox",20),t.NdJ("change",function(a){t.CHM(e);const o=t.oxw();return t.KtG(a?o.masterToggle():null)}),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("aria-label",e.checkboxLabel())("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected())}}function Fe(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"td",21)(1,"mat-checkbox",22),t.NdJ("change",function(a){const v=t.CHM(e).$implicit,T=t.oxw();return t.KtG(a?T.selection.toggle(v):null)})("click",function(a){return a.stopPropagation()}),t.ALo(2,"multiWordDataCy"),t.ALo(3,"consentRelatedAttribute"),t.ALo(4,"translate"),t.ALo(5,"consentRelatedAttribute"),t.qZA()()}if(2&i){const e=r.$implicit,n=t.oxw();t.xp6(1),t.Q2q("data-cy","",t.lcZ(2,6,e.displayName),"-checkbox"),t.Q6J("aria-label",n.checkboxLabel(e))("checked",n.selection.isSelected(e))("disabled",t.Dn7(3,8,e.namespace,n.serviceEnabled,n.consentRequired))("matTooltip",t.lcZ(4,12,"ADMIN.ATTRIBUTES.CONSENT_RELATED_DISABLED"))("matTooltipDisabled",!t.Dn7(5,14,e.namespace,n.serviceEnabled,n.consentRequired))}}function di(i,r){1&i&&(t.TgZ(0,"th",23),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.ATTRIBUTES.TABLE_ATTR_ID")," "))}function pi(i,r){if(1&i&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.Oqu(e.id)}}function Xe(i,r){1&i&&(t.TgZ(0,"th",23),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.ATTRIBUTES.TABLE_ATTR_FRIENDLY_NAME")," "))}function Ye(i,r){if(1&i&&(t.TgZ(0,"td",25),t.ALo(1,"multiWordDataCy"),t._uU(2),t.qZA()),2&i){const e=r.$implicit;t.Q2q("data-cy","",t.lcZ(1,2,e.friendlyName),"-friendly-name"),t.xp6(2),t.hij(" ",e.friendlyName," ")}}function wi(i,r){1&i&&(t.TgZ(0,"th",23),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.ATTRIBUTES.TABLE_ATTR_ENTITY")," "))}function Vi(i,r){if(1&i&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.Oqu(e.entity)}}function Gi(i,r){1&i&&(t.TgZ(0,"th",23),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.ATTRIBUTES.TABLE_ATTR_DEF")," "))}function Wi(i,r){if(1&i&&(t.TgZ(0,"td",25),t._uU(1),t.ALo(2,"nameSpaceToDef"),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.namespace))}}function Pn(i,r){1&i&&(t.TgZ(0,"th",23),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.ATTRIBUTES.TABLE_ATTR_TYPE")," "))}function le(i,r){if(1&i&&(t.TgZ(0,"td",25),t._uU(1),t.ALo(2,"attributeTypeClean"),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.type))}}function We(i,r){1&i&&(t.TgZ(0,"th",23),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.ATTRIBUTES.TABLE_ATTR_UNIQUE")," "))}function vi(i,r){if(1&i&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.Oqu(e.unique)}}function Ci(i,r){1&i&&t._UZ(0,"tr",26)}function ji(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"tr",27),t.NdJ("click",function(){const o=t.CHM(e).$implicit,v=t.oxw();return t.KtG(v.onRowClick(o))}),t.qZA()}if(2&i){const e=t.oxw();t.ekj("cursor-pointer",!e.disableRouting)}}function un(i,r){1&i&&(t.TgZ(0,"perun-web-apps-alert",28),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.ATTRIBUTES.NO_ATTRIBUTES"),"\n"))}function vn(i,r){1&i&&(t.TgZ(0,"perun-web-apps-alert",28),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED_LIB.UI.ALERTS.NO_FILTER_RESULTS_ALERT"),"\n"))}let Ui=(()=>{class i{constructor(e,n,a,o){this.dialog=e,this.authResolver=n,this.tableCheckbox=a,this.consentRelatedPipe=o,this.selection=new R.Ov(!0,[]),this.displayedColumns=["select","id","friendlyName","entity","namespace","type","unique"],this.disableRouting=!1,this.consentRequired=!1,this.serviceEnabled=!1,this.refreshEvent=new t.vpe,this.pageSizeOptions=he.f7,this.canBeSelected=v=>!this.consentRelatedPipe.transform(v.namespace,this.serviceEnabled,this.consentRequired)}set matSort(e){this.sort=e,this.setDataSource()}static getDataForColumn(e,n){switch(n){case"id":return e.id.toString();case"friendlyName":return e.friendlyName;case"entity":return e.entity;case"namespace":if(e.namespace){const a=e.namespace;return a.substring(a.lastIndexOf(":")+1,a.length)}return"";case"type":if(e.type){const a=e.type;return a.substring(a.lastIndexOf(".")+1,a.length)}return"";case"unique":return e.unique?"true":"false";default:return""}}ngOnChanges(){this.authResolver.isPerunAdminOrObserver()||(this.displayedColumns=this.displayedColumns.filter(e=>"id"!==e)),this.dataSource=new F.by(this.definitions),this.setDataSource()}ngAfterViewInit(){this.dataSource.paginator=this.child.paginator}exportAllData(e){(0,he.O6)((0,he.Xn)(this.dataSource.filteredData,this.displayedColumns,i.getDataForColumn),e)}exportDisplayedData(e){const n=this.dataSource.paginator.pageIndex*this.dataSource.paginator.pageSize,a=n+this.dataSource.paginator.pageSize;(0,he.O6)((0,he.Xn)(this.dataSource.sortData(this.dataSource.filteredData,this.dataSource.sort).slice(n,a),this.displayedColumns,i.getDataForColumn),e)}setDataSource(){this.dataSource&&(this.dataSource.filter=this.filterValue,this.dataSource.sort=this.sort,this.dataSource.filterPredicate=(e,n)=>(0,he.Sd)(e,n,this.displayedColumns,i.getDataForColumn),this.dataSource.sortData=(e,n)=>(0,he.pR)(e,n,i.getDataForColumn),this.dataSource.paginator=this.child.paginator)}isAllSelected(){return this.tableCheckbox.isAllSelectedWithDisabledCheckbox(this.selection.selected.length,this.filterValue,this.child.paginator.pageSize,this.child.paginator.hasNextPage(),this.child.paginator.pageIndex,this.dataSource,this.sort,this.canBeSelected)}masterToggle(){this.tableCheckbox.masterToggle(this.isAllSelected(),this.selection,this.filterValue,this.dataSource,this.sort,this.child.paginator.pageSize,this.child.paginator.pageIndex,!0,this.canBeSelected)}checkboxLabel(e){return e?`${this.selection.isSelected(e)?"deselect":"select"} row ${e.id+1}`:(this.isAllSelected()?"select":"deselect")+" all"}onRowClick(e){if(!this.disableRouting){const n=(0,he.kZ)();n.width="700px",n.data={attDef:e},this.dialog.open(je,n).afterClosed().subscribe(o=>{o&&(this.selection.clear(),this.refreshEvent.emit())})}}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(M.uw),t.Y36(B.x4),t.Y36(B.UA),t.Y36(Oe.u))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-attr-def-list"]],viewQuery:function(e,n){if(1&e&&(t.Gf(he.l9,7),t.Gf(ii.YE,7)),2&e){let a;t.iGM(a=t.CRH())&&(n.child=a.first),t.iGM(a=t.CRH())&&(n.matSort=a.first)}},inputs:{definitions:"definitions",selection:"selection",displayedColumns:"displayedColumns",filterValue:"filterValue",tableId:"tableId",disableRouting:"disableRouting",consentRequired:"consentRequired",serviceEnabled:"serviceEnabled"},outputs:{refreshEvent:"refreshEvent"},features:[t.TTD],decls:29,vars:9,consts:[[1,"card","mt-2",3,"hidden"],[3,"pageSizeOptions","dataLength","tableId","exportDisplayedData","exportAllData"],[1,"overflow-auto"],["mat-table","","matSort","","matSortActive","id","matSortDirection","asc","matSortDisableClear","",1,"w-100",3,"dataSource"],["matColumnDef","select"],["class","align-checkbox","mat-header-cell","",4,"matHeaderCellDef"],["class","static-column-size align-checkbox","mat-cell","",4,"matCellDef"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","static-column-size","mat-cell","",4,"matCellDef"],["matColumnDef","friendlyName"],["mat-cell","",4,"matCellDef"],["matColumnDef","entity"],["matColumnDef","namespace"],["matColumnDef","type"],["matColumnDef","unique"],["mat-header-row","",4,"matHeaderRowDef"],["class","dark-hover-list-item","mat-row","",3,"cursor-pointer","click",4,"matRowDef","matRowDefColumns"],["alert_type","warn",4,"ngIf"],["mat-header-cell","",1,"align-checkbox"],["color","primary",3,"aria-label","checked","indeterminate","change"],["mat-cell","",1,"static-column-size","align-checkbox"],["matTooltipPosition","left","color","primary",3,"aria-label","checked","disabled","matTooltip","matTooltipDisabled","change","click"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"static-column-size"],["mat-cell",""],["mat-header-row",""],["mat-row","",1,"dark-hover-list-item",3,"click"],["alert_type","warn"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"perun-web-apps-table-wrapper",1),t.NdJ("exportDisplayedData",function(o){return n.exportDisplayedData(o)})("exportAllData",function(o){return n.exportAllData(o)}),t.TgZ(2,"div",2)(3,"table",3),t.ynx(4,4),t.YNc(5,de,2,3,"th",5),t.YNc(6,Fe,6,18,"td",6),t.BQk(),t.ynx(7,7),t.YNc(8,di,3,3,"th",8),t.YNc(9,pi,2,1,"td",9),t.BQk(),t.ynx(10,10),t.YNc(11,Xe,3,3,"th",8),t.YNc(12,Ye,3,4,"td",11),t.BQk(),t.ynx(13,12),t.YNc(14,wi,3,3,"th",8),t.YNc(15,Vi,2,1,"td",11),t.BQk(),t.ynx(16,13),t.YNc(17,Gi,3,3,"th",8),t.YNc(18,Wi,3,3,"td",11),t.BQk(),t.ynx(19,14),t.YNc(20,Pn,3,3,"th",8),t.YNc(21,le,3,3,"td",11),t.BQk(),t.ynx(22,15),t.YNc(23,We,3,3,"th",8),t.YNc(24,vi,2,1,"td",11),t.BQk(),t.YNc(25,Ci,1,0,"tr",16),t.YNc(26,ji,1,2,"tr",17),t.qZA()()()(),t.YNc(27,un,3,3,"perun-web-apps-alert",18),t.YNc(28,vn,3,3,"perun-web-apps-alert",18)),2&e&&(t.Q6J("hidden",0===n.dataSource.filteredData.length||0===n.definitions.length),t.xp6(1),t.Q6J("pageSizeOptions",n.pageSizeOptions)("dataLength",n.dataSource.filteredData.length)("tableId",n.tableId),t.xp6(2),t.Q6J("dataSource",n.dataSource),t.xp6(22),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(1),t.Q6J("ngIf",0===n.definitions.length),t.xp6(1),t.Q6J("ngIf",0===n.dataSource.filteredData.length&&0!==n.definitions.length))},dependencies:[m.O5,ii.YE,ii.nU,F.BZ,F.fO,F.as,F.w1,F.Dz,F.nj,F.ge,F.ev,F.XQ,F.Gk,Pi.oG,oi.gM,et.w,z.l,u.X$,Pe.R,ze,oe,Oe.u],styles:[".cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}"]}),i})();var Mi=s(96214),Ei=s(7434);function bn(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onCreate())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.ATTRIBUTES.CREATE")," "))}function fi(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onImport())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.ATTRIBUTES.IMPORT")," "))}function li(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",10),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onDelete())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("disabled",0===e.selected.selected.length),t.xp6(1),t.hij(" ",t.lcZ(2,2,"ADMIN.ATTRIBUTES.DELETE")," ")}}function hn(i,r){1&i&&t._UZ(0,"mat-spinner",11)}function Jn(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"app-attr-def-list",12),t.NdJ("refreshEvent",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.refreshTable())}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("definitions",e.attrDefinitions)("disableRouting",!e.authResolver.isPerunAdminOrObserver())("filterValue",e.filterValue)("selection",e.selected)("tableId",e.tableId)}}let dn=(()=>{class i{constructor(e,n,a){this.dialog=e,this.attributesManager=n,this.authResolver=a,this.attrDefinitions=[],this.selected=new R.Ov(!0,[]),this.filterValue="",this.tableId=Si.uM}ngOnInit(){this.refreshTable()}onCreate(){const e=(0,he.kZ)();e.width="650px",this.dialog.open(Rn,e).afterClosed().subscribe(a=>{a&&this.refreshTable()})}onDelete(){const e=(0,he.kZ)();e.width="450px",e.data={attributes:this.selected.selected,theme:"admin-theme"},this.dialog.open(Q,e).afterClosed().subscribe(a=>{a&&(this.refreshTable(),this.selected.clear())})}refreshTable(){this.loading=!0,this.attributesManager.getAllAttributeDefinitions().subscribe(e=>{this.attrDefinitions=e,this.loading=!1})}applyFilter(e){this.filterValue=e}onImport(){const e=(0,he.kZ)();e.width="700px",this.dialog.open(gi,e).afterClosed().subscribe(a=>{!0===a&&this.refreshTable()})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(M.uw),t.Y36(Y.H8),t.Y36(B.x4))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-admin-attributes"]],hostVars:2,hostBindings:function(e,n){2&e&&t.ekj("router-component",n.true)},decls:11,vars:9,consts:[[1,"page-subtitle"],[3,"refresh"],["class","mr-2 action-button","color","accent","data-cy","new-attr-definition-button","mat-flat-button","",3,"click",4,"ngIf"],["class","mr-2 action-button","color","accent","mat-flat-button","",3,"click",4,"ngIf"],["color","warn","class","mr-2","data-cy","delete-attr-definition-button","mat-flat-button","",3,"disabled","click",4,"ngIf"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"definitions","disableRouting","filterValue","selection","tableId","refreshEvent",4,"ngIf"],["color","accent","data-cy","new-attr-definition-button","mat-flat-button","",1,"mr-2","action-button",3,"click"],["color","accent","mat-flat-button","",1,"mr-2","action-button",3,"click"],["color","warn","data-cy","delete-attr-definition-button","mat-flat-button","",1,"mr-2",3,"disabled","click"],[1,"ml-auto","mr-auto"],[3,"definitions","disableRouting","filterValue","selection","tableId","refreshEvent"]],template:function(e,n){1&e&&(t.TgZ(0,"div")(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"perun-web-apps-refresh-button",1),t.NdJ("refresh",function(){return n.refreshTable()}),t.qZA(),t.YNc(5,bn,3,3,"button",2),t.YNc(6,fi,3,3,"button",3),t.YNc(7,li,3,4,"button",4),t.TgZ(8,"perun-web-apps-immediate-filter",5),t.NdJ("filter",function(o){return n.applyFilter(o)}),t.qZA(),t.YNc(9,hn,1,0,"mat-spinner",6),t.YNc(10,Jn,1,5,"app-attr-def-list",7),t.qZA()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,7,"ADMIN.ATTRIBUTES.TITLE")),t.xp6(3),t.Q6J("ngIf",n.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("ngIf",n.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("ngIf",n.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("placeholder","ADMIN.ATTRIBUTES.SEARCH"),t.xp6(1),t.Q6J("ngIf",n.loading),t.xp6(1),t.Q6J("ngIf",!n.loading))},dependencies:[m.O5,V.lW,nt.Ou,Ui,Mi.t,Ei.L,u.X$]}),i})(),Un=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-admin-visualizer"]],hostVars:2,hostBindings:function(e,n){2&e&&t.ekj("router-component",n.true)},decls:1,vars:0,template:function(e,n){1&e&&t._UZ(0,"app-animated-router-outlet")},dependencies:[h.A]}),i})();var Ni=s(9921);let Tn=(()=>{class i{constructor(e){this.attributesManager=e}ngOnInit(){this.attributesManager.getAttributeModulesDependenciesGraphText("DOT").subscribe(e=>{const n=e.graph.replace("\\t","").replace("\\n","").replace("\\","");(0,Ni.graphviz)("#dependenciesGraph",{zoom:!1}).renderDot(n)})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Y.H8))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-visualizer-attr-modules"]],hostVars:2,hostBindings:function(e,n){2&e&&t.ekj("router-component",n.true)},decls:4,vars:3,consts:[[1,"page-subtitle"],["id","dependenciesGraph",1,"card"]],template:function(e,n){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t._UZ(3,"div",1)),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.VISUALIZER.ATTR_DEPENDENCIES.TITLE"),"\n"))},dependencies:[u.X$],styles:["#dependenciesGraph[_ngcontent-%COMP%]{overflow-y:scroll}"]}),i})(),si=(()=>{class i{constructor(){this.items=[{cssIcon:"perun-module-dependencies",url:"attrDependencies",label:"MENU_ITEMS.VISUALIZER.ATTR_DEPENDENCIES",style:"admin-btn"},{cssIcon:"perun-user-destination-relationship",url:"userDestinationRelationship",label:"MENU_ITEMS.VISUALIZER.USER_DESTINATION",style:"admin-btn"}]}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-visualizer-overview"]],hostVars:2,hostBindings:function(e,n){2&e&&t.ekj("router-component",n.true)},decls:2,vars:2,consts:[[3,"items","size"]],template:function(e,n){1&e&&(t.TgZ(0,"div"),t._UZ(1,"perun-web-apps-menu-buttons-field",0),t.qZA()),2&e&&(t.xp6(1),t.Q6J("items",n.items)("size","small"))},dependencies:[L.L]}),i})();var zn=s(71884),Je=s(18505),Ji=s(47957),ki=s(71948),b=s(86257);function k(i,r){1&i&&(t._uU(0),t.ALo(1,"translate")),2&i&&t.Oqu(t.lcZ(1,1,"ADMIN.VISUALIZER.USER_DESTINATION.SELECT_USER"))}function Z(i,r){1&i&&t._UZ(0,"mat-spinner",17),2&i&&t.Q6J("diameter",20)("strokeWidth",2)}function rt(i,r){if(1&i&&(t.TgZ(0,"mat-option",18)(1,"span",19),t._uU(2),t.qZA(),t._uU(3),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",e.firstName+" "+e.lastName),t.xp6(2),t.hij("#",e.id,""),t.xp6(1),t.AsE(" ",e.firstName," ",e.lastName," ")}}function ht(i,r){1&i&&(t._uU(0),t.ALo(1,"translate")),2&i&&t.Oqu(t.lcZ(1,1,"ADMIN.VISUALIZER.USER_DESTINATION.SELECT_DESTINATION"))}function bt(i,r){1&i&&(t._uU(0),t.ALo(1,"translate")),2&i&&t.Oqu(t.lcZ(1,1,"ADMIN.VISUALIZER.USER_DESTINATION.SELECT_SERVICE"))}function Ot(i,r){if(1&i&&(t.TgZ(0,"mat-radio-button",20),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}let Bt=(()=>{class i{constructor(e,n,a,o,v,T){this.usersService=e,this.translate=n,this.facilityManager=a,this.serviceService=o,this.router=v,this.notificator=T,this.searchField=new it.p4,this.chosenService="",this.availableServices=[],this.loading=!1,this.destination=""}ngOnInit(){this.searchField.setValue(""),this.users=this.searchField.valueChanges.pipe((0,q.b)(400),(0,zn.x)(),(0,Je.b)(()=>this.loading=!0),(0,U.w)(e=>this.usersService.findUsers(e)),(0,Je.b)(()=>this.loading=!1)),this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.SELECT_NO_SERVICE").subscribe(e=>{this.noServiceText=e,this.availableServices.push(this.noServiceText)})}validateName(e){""!==this.searchField.value?this.usersService.findUsers(this.searchField.value).subscribe(n=>{for(const a of n){if((a.firstName+" "+a.lastName).toLowerCase()===this.searchField.value.toLowerCase()){this.selectedUser=a,e.selected.completed=!0,e.next();break}this.selectedUser=null}this.selectedUser||this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.ERROR_WRONG_NAME").subscribe(a=>{this.notificator.showError(a)})}):this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.ERROR_NO_NAME").subscribe(n=>{this.notificator.showError(n)})}validateDestination(e){""!==this.destination?(this.availableServices=[],this.availableServices.push(this.noServiceText),this.chosenService="",this.facilityManager.getFacilitiesByDestination(this.destination).subscribe(n=>{if(0!==n.length){e.selected.completed=!0,e.next();for(const a of n)this.serviceService.getAllRichDestinationsForFacility(a.id).subscribe(o=>{for(const v of o)v.destination===this.destination&&(this.availableServices.includes(v.service.name)||this.availableServices.push(v.service.name))})}else this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.ERROR_WRONG_DESTINATION").subscribe(a=>{this.notificator.showError(a)})})):this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.ERROR_NO_DESTINATION").subscribe(n=>{this.notificator.showError(n)})}getGraph(){""!==this.chosenService?this.router.navigate(["admin/visualizer/userDestinationRelationship/graph"],this.chosenService===this.noServiceText?{queryParams:{user:this.selectedUser.id,destination:this.destination,service:"noService"}}:{queryParams:{user:this.selectedUser.id,destination:this.destination,service:this.chosenService}}):this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.ERROR_NOT_CHOSEN_SERVICE").subscribe(e=>{this.notificator.showError(e)})}notCompleted(e){e.selected.completed=!1}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Y.Fv),t.Y36(u.sK),t.Y36(Y.IQ),t.Y36(Y.KK),t.Y36(p.F0),t.Y36(B.V6))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-user-destination-relationship"]],hostVars:2,hostBindings:function(e,n){2&e&&t.ekj("router-component",n.true)},decls:46,vars:36,consts:[[1,"p-3","card","settings-card","col-12","col-xl-5"],[1,"page-subtitle"],["linear",""],["stepper",""],["completed","false"],["matStepLabel",""],[1,"w-100"],["matInput","","type","text",3,"placeholder","formControl","matAutocomplete","keydown.enter","ngModelChange"],["matSuffix","",3,"diameter","strokeWidth",4,"ngIf"],["align","start"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["mat-stroked-button","",1,"mt-2",3,"click"],["matInput","","type","text",3,"placeholder","ngModel","keydown.enter","ngModelChange"],["mat-stroked-button","","matStepperPrevious","",1,"mt-2"],[1,"mb-2",3,"ngModel","ngModelChange"],["class","flex-column d-flex","color","primary",3,"value",4,"ngFor","ngForOf"],["matSuffix","",3,"diameter","strokeWidth"],[3,"value"],[1,"text-muted"],["color","primary",1,"flex-column","d-flex",3,"value"]],template:function(e,n){if(1&e){const a=t.EpF();t.TgZ(0,"div",0)(1,"h1",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"mat-vertical-stepper",2,3)(6,"mat-step",4),t.YNc(7,k,2,3,"ng-template",5),t.TgZ(8,"mat-form-field",6)(9,"input",7),t.NdJ("keydown.enter",function(){t.CHM(a);const v=t.MAs(5);return t.KtG(n.validateName(v))})("ngModelChange",function(){t.CHM(a);const v=t.MAs(5);return t.KtG(n.notCompleted(v))}),t.ALo(10,"translate"),t.qZA(),t.YNc(11,Z,1,2,"mat-spinner",8),t.TgZ(12,"mat-hint",9),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"mat-autocomplete",null,10),t.YNc(17,rt,4,4,"mat-option",11),t.ALo(18,"async"),t.qZA()(),t.TgZ(19,"div")(20,"button",12),t.NdJ("click",function(){t.CHM(a);const v=t.MAs(5);return t.KtG(n.validateName(v))}),t._uU(21),t.ALo(22,"translate"),t.qZA()()(),t.TgZ(23,"mat-step",4),t.YNc(24,ht,2,3,"ng-template",5),t.TgZ(25,"mat-form-field",6)(26,"input",13),t.NdJ("keydown.enter",function(){t.CHM(a);const v=t.MAs(5);return t.KtG(n.validateDestination(v))})("ngModelChange",function(){t.CHM(a);const v=t.MAs(5);return t.KtG(n.notCompleted(v))})("ngModelChange",function(v){return n.destination=v}),t.ALo(27,"translate"),t.qZA()(),t.TgZ(28,"div")(29,"button",14),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"button",12),t.NdJ("click",function(){t.CHM(a);const v=t.MAs(5);return t.KtG(n.validateDestination(v))}),t._uU(33),t.ALo(34,"translate"),t.qZA()()(),t.TgZ(35,"mat-step"),t.YNc(36,bt,2,3,"ng-template",5),t.TgZ(37,"mat-radio-group",15),t.NdJ("ngModelChange",function(v){return n.chosenService=v}),t.YNc(38,Ot,2,2,"mat-radio-button",16),t.qZA(),t.TgZ(39,"div")(40,"button",14),t._uU(41),t.ALo(42,"translate"),t.qZA(),t.TgZ(43,"button",12),t.NdJ("click",function(){return n.getGraph()}),t._uU(44),t.ALo(45,"translate"),t.qZA()()()()()}if(2&e){const a=t.MAs(16);t.xp6(2),t.hij(" ",t.lcZ(3,16,"ADMIN.VISUALIZER.USER_DESTINATION.TITLE")," "),t.xp6(7),t.s9C("placeholder",t.lcZ(10,18,"ADMIN.VISUALIZER.USER_DESTINATION.USER_EXAMPLE")),t.Q6J("formControl",n.searchField)("matAutocomplete",a),t.xp6(2),t.Q6J("ngIf",n.loading),t.xp6(2),t.Oqu(t.lcZ(14,20,"ADMIN.VISUALIZER.USER_DESTINATION.USER_HINT")),t.xp6(4),t.Q6J("ngForOf",t.lcZ(18,22,n.users)),t.xp6(4),t.hij(" ",t.lcZ(22,24,"ADMIN.VISUALIZER.USER_DESTINATION.BUTTON_NEXT")," "),t.xp6(5),t.s9C("placeholder",t.lcZ(27,26,"ADMIN.VISUALIZER.USER_DESTINATION.DESTINATION_EXAMPLE")),t.Q6J("ngModel",n.destination),t.xp6(4),t.hij(" ",t.lcZ(31,28,"ADMIN.VISUALIZER.USER_DESTINATION.BUTTON_BACK")," "),t.xp6(3),t.hij(" ",t.lcZ(34,30,"ADMIN.VISUALIZER.USER_DESTINATION.BUTTON_NEXT")," "),t.xp6(4),t.Q6J("ngModel",n.chosenService),t.xp6(1),t.Q6J("ngForOf",n.availableServices),t.xp6(3),t.hij(" ",t.lcZ(42,32,"ADMIN.VISUALIZER.USER_DESTINATION.BUTTON_BACK")," "),t.xp6(3),t.hij(" ",t.lcZ(45,34,"ADMIN.VISUALIZER.USER_DESTINATION.SUBMIT_BUTTON")," ")}},dependencies:[m.sg,m.O5,Ji.XC,Ji.ZL,Nt.ey,Kt.KE,Kt.bx,Kt.R9,ce.Nt,it.Fj,it.JJ,it.oH,it.On,V.lW,nt.Ou,ki.VQ,ki.U0,b.C0,b.VY,b.Vq,b.fd,m.Ov,u.X$]}),i})();function re(i,r,e){i._context.bezierCurveTo((2*i._x0+i._x1)/3,(2*i._y0+i._y1)/3,(i._x0+2*i._x1)/3,(i._y0+2*i._y1)/3,(i._x0+4*i._x1+r)/6,(i._y0+4*i._y1+e)/6)}function Ce(i){this._context=i}function ni(i,r){this._basis=new Ce(i),this._beta=r}Ce.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:re(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(i,r){switch(i=+i,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(i,r):this._context.moveTo(i,r);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:re(this,i,r)}this._x0=this._x1,this._x1=i,this._y0=this._y1,this._y1=r}},ni.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var i=this._x,r=this._y,e=i.length-1;if(e>0)for(var N,n=i[0],a=r[0],o=i[e]-n,v=r[e]-a,T=-1;++T<=e;)this._basis.point(this._beta*i[T]+(1-this._beta)*(n+(N=T/e)*o),this._beta*r[T]+(1-this._beta)*(a+N*v));this._x=this._y=null,this._basis.lineEnd()},point:function(i,r){this._x.push(+i),this._y.push(+r)}};const De=function i(r){function e(n){return 1===r?new Ce(n):new ni(n,r)}return e.beta=function(n){return i(+n)},e}(.85);var Le=s(77579),mi=s(70655),ri=s(37340);function er(){}function Ki(i){return null==i?er:function(){return this.querySelector(i)}}function Fi(){return[]}function xn(i){return null==i?Fi:function(){return this.querySelectorAll(i)}}function Ri(i){return function(){return this.matches(i)}}function _a(i){return new Array(i.length)}function xi(i,r){this.ownerDocument=i.ownerDocument,this.namespaceURI=i.namespaceURI,this._next=null,this._parent=i,this.__data__=r}function $i(i,r,e,n,a,o){for(var T,v=0,N=r.length,G=o.length;v<G;++v)(T=r[v])?(T.__data__=o[v],n[v]=T):e[v]=new xi(i,o[v]);for(;v<N;++v)(T=r[v])&&(a[v]=T)}function y(i,r,e,n,a,o,v){var T,N,wt,G={},tt=r.length,lt=o.length,ot=new Array(tt);for(T=0;T<tt;++T)(N=r[T])&&(ot[T]=wt="$"+v.call(N,N.__data__,T,r),wt in G?a[T]=N:G[wt]=N);for(T=0;T<lt;++T)(N=G[wt="$"+v.call(i,o[T],T,o)])?(n[T]=N,N.__data__=o[T],G[wt]=null):e[T]=new xi(i,o[T]);for(T=0;T<tt;++T)(N=r[T])&&G[ot[T]]===N&&(a[T]=N)}function Rt(i,r){return i<r?-1:i>r?1:i>=r?0:NaN}xi.prototype={constructor:xi,appendChild:function(i){return this._parent.insertBefore(i,this._next)},insertBefore:function(i,r){return this._parent.insertBefore(i,r)},querySelector:function(i){return this._parent.querySelector(i)},querySelectorAll:function(i){return this._parent.querySelectorAll(i)}};var _i="http://www.w3.org/1999/xhtml";const Cn={svg:"http://www.w3.org/2000/svg",xhtml:_i,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Kn(i){var r=i+="",e=r.indexOf(":");return e>=0&&"xmlns"!==(r=i.slice(0,e))&&(i=i.slice(e+1)),Cn.hasOwnProperty(r)?{space:Cn[r],local:i}:i}function Dn(i){return function(){this.removeAttribute(i)}}function wr(i){return function(){this.removeAttributeNS(i.space,i.local)}}function yn(i,r){return function(){this.setAttribute(i,r)}}function Yn(i,r){return function(){this.setAttributeNS(i.space,i.local,r)}}function gr(i,r){return function(){var e=r.apply(this,arguments);null==e?this.removeAttribute(i):this.setAttribute(i,e)}}function qi(i,r){return function(){var e=r.apply(this,arguments);null==e?this.removeAttributeNS(i.space,i.local):this.setAttributeNS(i.space,i.local,e)}}function Gs(i){return i.ownerDocument&&i.ownerDocument.defaultView||i.document&&i||i.defaultView}function bc(i){return function(){this.style.removeProperty(i)}}function Tc(i,r,e){return function(){this.style.setProperty(i,r,e)}}function Cc(i,r,e){return function(){var n=r.apply(this,arguments);null==n?this.style.removeProperty(i):this.style.setProperty(i,n,e)}}function Mr(i,r){return i.style.getPropertyValue(r)||Gs(i).getComputedStyle(i,null).getPropertyValue(r)}function Ac(i){return function(){delete this[i]}}function Sc(i,r){return function(){this[i]=r}}function Ec(i,r){return function(){var e=r.apply(this,arguments);null==e?delete this[i]:this[i]=e}}function Us(i){return i.trim().split(/^|\s+/)}function Ha(i){return i.classList||new zs(i)}function zs(i){this._node=i,this._names=Us(i.getAttribute("class")||"")}function Hs(i,r){for(var e=Ha(i),n=-1,a=r.length;++n<a;)e.add(r[n])}function Ys(i,r){for(var e=Ha(i),n=-1,a=r.length;++n<a;)e.remove(r[n])}function Lc(i){return function(){Hs(this,i)}}function kc(i){return function(){Ys(this,i)}}function Ic(i,r){return function(){(r.apply(this,arguments)?Hs:Ys)(this,i)}}function Mc(){this.textContent=""}function Nc(i){return function(){this.textContent=i}}function Pc(i){return function(){var r=i.apply(this,arguments);this.textContent=r??""}}function Rc(){this.innerHTML=""}function Bc(i){return function(){this.innerHTML=i}}function Zc(i){return function(){var r=i.apply(this,arguments);this.innerHTML=r??""}}function Gc(){this.nextSibling&&this.parentNode.appendChild(this)}function zc(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Yc(i){return function(){var r=this.ownerDocument,e=this.namespaceURI;return e===_i&&r.documentElement.namespaceURI===_i?r.createElement(i):r.createElementNS(e,i)}}function Wc(i){return function(){return this.ownerDocument.createElementNS(i.space,i.local)}}function Ws(i){var r=Kn(i);return(r.local?Wc:Yc)(r)}function $c(){return null}function jc(){var i=this.parentNode;i&&i.removeChild(this)}function Kc(){var i=this.cloneNode(!1),r=this.parentNode;return r?r.insertBefore(i,this.nextSibling):i}function qc(){var i=this.cloneNode(!0),r=this.parentNode;return r?r.insertBefore(i,this.nextSibling):i}zs.prototype={add:function(i){this._names.indexOf(i)<0&&(this._names.push(i),this._node.setAttribute("class",this._names.join(" ")))},remove:function(i){var r=this._names.indexOf(i);r>=0&&(this._names.splice(r,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(i){return this._names.indexOf(i)>=0}};var Xs={},Ar=null;function nu(i,r,e){return i=$s(i,r,e),function(n){var a=n.relatedTarget;(!a||a!==this&&!(8&a.compareDocumentPosition(this)))&&i.call(this,n)}}function $s(i,r,e){return function(n){var a=Ar;Ar=n;try{i.call(this,this.__data__,r,e)}finally{Ar=a}}}function ru(i){return i.trim().split(/^|\s+/).map(function(r){var e="",n=r.indexOf(".");return n>=0&&(e=r.slice(n+1),r=r.slice(0,n)),{type:r,name:e}})}function au(i){return function(){var r=this.__on;if(r){for(var o,e=0,n=-1,a=r.length;e<a;++e)o=r[e],i.type&&o.type!==i.type||o.name!==i.name?r[++n]=o:this.removeEventListener(o.type,o.listener,o.capture);++n?r.length=n:delete this.__on}}}function su(i,r,e){var n=Xs.hasOwnProperty(i.type)?nu:$s;return function(a,o,v){var N,T=this.__on,G=n(r,o,v);if(T)for(var tt=0,lt=T.length;tt<lt;++tt)if((N=T[tt]).type===i.type&&N.name===i.name)return this.removeEventListener(N.type,N.listener,N.capture),this.addEventListener(N.type,N.listener=G,N.capture=e),void(N.value=r);this.addEventListener(i.type,G,e),N={type:i.type,name:i.name,value:r,listener:G,capture:e},T?T.push(N):this.__on=[N]}}function Qs(i,r,e){var n=Gs(i),a=n.CustomEvent;"function"==typeof a?a=new a(r,e):(a=n.document.createEvent("Event"),e?(a.initEvent(r,e.bubbles,e.cancelable),a.detail=e.detail):a.initEvent(r,!1,!1)),i.dispatchEvent(a)}function lu(i,r){return function(){return Qs(this,i,r)}}function cu(i,r){return function(){return Qs(this,i,r.apply(this,arguments))}}typeof document<"u"&&("onmouseenter"in document.documentElement||(Xs={mouseenter:"mouseover",mouseleave:"mouseout"}));var js=[null];function Zn(i,r){this._groups=i,this._parents=r}function Js(){return new Zn([[document.documentElement]],js)}Zn.prototype=Js.prototype={constructor:Zn,select:function Xi(i){"function"!=typeof i&&(i=Ki(i));for(var r=this._groups,e=r.length,n=new Array(e),a=0;a<e;++a)for(var N,G,o=r[a],v=o.length,T=n[a]=new Array(v),tt=0;tt<v;++tt)(N=o[tt])&&(G=i.call(N,N.__data__,tt,o))&&("__data__"in N&&(G.__data__=N.__data__),T[tt]=G);return new Zn(n,this._parents)},selectAll:function ir(i){"function"!=typeof i&&(i=xn(i));for(var r=this._groups,e=r.length,n=[],a=[],o=0;o<e;++o)for(var N,v=r[o],T=v.length,G=0;G<T;++G)(N=v[G])&&(n.push(i.call(N,N.__data__,G,v)),a.push(N));return new Zn(n,a)},filter:function Ua(i){"function"!=typeof i&&(i=Ri(i));for(var r=this._groups,e=r.length,n=new Array(e),a=0;a<e;++a)for(var N,o=r[a],v=o.length,T=n[a]=[],G=0;G<v;++G)(N=o[G])&&i.call(N,N.__data__,G,o)&&T.push(N);return new Zn(n,this._parents)},data:function S(i,r){if(!i)return wt=new Array(this.size()),G=-1,this.each(function(pe){wt[++G]=pe}),wt;var e=r?y:$i,n=this._parents,a=this._groups;"function"!=typeof i&&(i=function Cr(i){return function(){return i}}(i));for(var o=a.length,v=new Array(o),T=new Array(o),N=new Array(o),G=0;G<o;++G){var tt=n[G],lt=a[G],ot=lt.length,wt=i.call(tt,tt&&tt.__data__,G,n),kt=wt.length,Ft=T[G]=new Array(kt),xt=v[G]=new Array(kt);e(tt,lt,Ft,xt,N[G]=new Array(ot),wt,r);for(var _e,Se,Jt=0,Wt=0;Jt<kt;++Jt)if(_e=Ft[Jt]){for(Jt>=Wt&&(Wt=Jt+1);!(Se=xt[Wt])&&++Wt<kt;);_e._next=Se||null}}return(v=new Zn(v,n))._enter=T,v._exit=N,v},enter:function za(){return new Zn(this._enter||this._groups.map(_a),this._parents)},exit:function P(){return new Zn(this._exit||this._groups.map(_a),this._parents)},join:function j(i,r,e){var n=this.enter(),a=this,o=this.exit();return n="function"==typeof i?i(n):n.append(i+""),null!=r&&(a=r(a)),null==e?o.remove():e(o),n&&a?n.merge(a).order():a},merge:function dt(i){for(var r=this._groups,e=i._groups,n=r.length,o=Math.min(n,e.length),v=new Array(n),T=0;T<o;++T)for(var ot,N=r[T],G=e[T],tt=N.length,lt=v[T]=new Array(tt),wt=0;wt<tt;++wt)(ot=N[wt]||G[wt])&&(lt[wt]=ot);for(;T<n;++T)v[T]=r[T];return new Zn(v,this._parents)},order:function yt(){for(var i=this._groups,r=-1,e=i.length;++r<e;)for(var v,n=i[r],a=n.length-1,o=n[a];--a>=0;)(v=n[a])&&(o&&4^v.compareDocumentPosition(o)&&o.parentNode.insertBefore(v,o),o=v);return this},sort:function At(i){function r(lt,ot){return lt&&ot?i(lt.__data__,ot.__data__):!lt-!ot}i||(i=Rt);for(var e=this._groups,n=e.length,a=new Array(n),o=0;o<n;++o){for(var G,v=e[o],T=v.length,N=a[o]=new Array(T),tt=0;tt<T;++tt)(G=v[tt])&&(N[tt]=G);N.sort(r)}return new Zn(a,this._parents).order()},call:function te(){var i=arguments[0];return arguments[0]=this,i.apply(null,arguments),this},nodes:function ke(){var i=new Array(this.size()),r=-1;return this.each(function(){i[++r]=this}),i},node:function Ke(){for(var i=this._groups,r=0,e=i.length;r<e;++r)for(var n=i[r],a=0,o=n.length;a<o;++a){var v=n[a];if(v)return v}return null},size:function ci(){var i=0;return this.each(function(){++i}),i},empty:function Me(){return!this.node()},each:function Ve(i){for(var r=this._groups,e=0,n=r.length;e<n;++e)for(var T,a=r[e],o=0,v=a.length;o<v;++o)(T=a[o])&&i.call(T,T.__data__,o,a);return this},attr:function yc(i,r){var e=Kn(i);if(arguments.length<2){var n=this.node();return e.local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}return this.each((null==r?e.local?wr:Dn:"function"==typeof r?e.local?qi:gr:e.local?Yn:yn)(e,r))},style:function wc(i,r,e){return arguments.length>1?this.each((null==r?bc:"function"==typeof r?Cc:Tc)(i,r,e??"")):Mr(this.node(),i)},property:function Dc(i,r){return arguments.length>1?this.each((null==r?Ac:"function"==typeof r?Ec:Sc)(i,r)):this.node()[i]},classed:function Oc(i,r){var e=Us(i+"");if(arguments.length<2){for(var n=Ha(this.node()),a=-1,o=e.length;++a<o;)if(!n.contains(e[a]))return!1;return!0}return this.each(("function"==typeof r?Ic:r?Lc:kc)(e,r))},text:function Fc(i){return arguments.length?this.each(null==i?Mc:("function"==typeof i?Pc:Nc)(i)):this.node().textContent},html:function Vc(i){return arguments.length?this.each(null==i?Rc:("function"==typeof i?Zc:Bc)(i)):this.node().innerHTML},raise:function Uc(){return this.each(Gc)},lower:function Hc(){return this.each(zc)},append:function Xc(i){var r="function"==typeof i?i:Ws(i);return this.select(function(){return this.appendChild(r.apply(this,arguments))})},insert:function Qc(i,r){var e="function"==typeof i?i:Ws(i),n=null==r?$c:"function"==typeof r?r:Ki(r);return this.select(function(){return this.insertBefore(e.apply(this,arguments),n.apply(this,arguments)||null)})},remove:function Jc(){return this.each(jc)},clone:function tu(i){return this.select(i?qc:Kc)},datum:function eu(i){return arguments.length?this.property("__data__",i):this.node().__data__},on:function ou(i,r,e){var a,v,n=ru(i+""),o=n.length;if(!(arguments.length<2)){for(T=r?su:au,null==e&&(e=!1),a=0;a<o;++a)this.each(T(n[a],r,e));return this}var T=this.node().__on;if(T)for(var tt,N=0,G=T.length;N<G;++N)for(a=0,tt=T[N];a<o;++a)if((v=n[a]).type===tt.type&&v.name===tt.name)return tt.value},dispatch:function uu(i,r){return this.each(("function"==typeof r?cu:lu)(i,r))}};const ea=Js;function Ks(i){return"string"==typeof i?new Zn([[document.querySelector(i)]],[document.documentElement]):new Zn([[i]],js)}function qs(i,r,e){i._context.bezierCurveTo((2*i._x0+i._x1)/3,(2*i._y0+i._y1)/3,(i._x0+2*i._x1)/3,(i._y0+2*i._y1)/3,(i._x0+4*i._x1+r)/6,(i._y0+4*i._y1+e)/6)}function va(i){this._context=i}function to(i,r){this._basis=new va(i),this._beta=r}va.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:qs(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(i,r){switch(i=+i,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(i,r):this._context.moveTo(i,r);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:qs(this,i,r)}this._x0=this._x1,this._x1=i,this._y0=this._y1,this._y1=r}},to.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var i=this._x,r=this._y,e=i.length-1;if(e>0)for(var N,n=i[0],a=r[0],o=i[e]-n,v=r[e]-a,T=-1;++T<=e;)this._basis.point(this._beta*i[T]+(1-this._beta)*(n+(N=T/e)*o),this._beta*r[T]+(1-this._beta)*(a+N*v));this._x=this._y=null,this._basis.lineEnd()},point:function(i,r){this._x.push(+i),this._y.push(+r)}};const hu=function i(r){function e(n){return 1===r?new va(n):new to(n,r)}return e.beta=function(n){return i(+n)},e}(.85);var Ya=Math.PI,Wa=2*Ya,Sr=1e-6,du=Wa-Sr;function Xa(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function eo(){return new Xa}Xa.prototype=eo.prototype={constructor:Xa,moveTo:function(i,r){this._+="M"+(this._x0=this._x1=+i)+","+(this._y0=this._y1=+r)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(i,r){this._+="L"+(this._x1=+i)+","+(this._y1=+r)},quadraticCurveTo:function(i,r,e,n){this._+="Q"+ +i+","+ +r+","+(this._x1=+e)+","+(this._y1=+n)},bezierCurveTo:function(i,r,e,n,a,o){this._+="C"+ +i+","+ +r+","+ +e+","+ +n+","+(this._x1=+a)+","+(this._y1=+o)},arcTo:function(i,r,e,n,a){var o=this._x1,v=this._y1,T=(e=+e)-(i=+i),N=(n=+n)-(r=+r),G=o-i,tt=v-r,lt=G*G+tt*tt;if((a=+a)<0)throw new Error("negative radius: "+a);if(null===this._x1)this._+="M"+(this._x1=i)+","+(this._y1=r);else if(lt>Sr)if(Math.abs(tt*T-N*G)>Sr&&a){var ot=e-o,wt=n-v,kt=T*T+N*N,Ft=ot*ot+wt*wt,xt=Math.sqrt(kt),Vt=Math.sqrt(lt),Jt=a*Math.tan((Ya-Math.acos((kt+lt-Ft)/(2*xt*Vt)))/2),Wt=Jt/Vt,_e=Jt/xt;Math.abs(Wt-1)>Sr&&(this._+="L"+(i+Wt*G)+","+(r+Wt*tt)),this._+="A"+a+","+a+",0,0,"+ +(tt*ot>G*wt)+","+(this._x1=i+_e*T)+","+(this._y1=r+_e*N)}else this._+="L"+(this._x1=i)+","+(this._y1=r)},arc:function(i,r,e,n,a,o){i=+i,r=+r,o=!!o;var v=(e=+e)*Math.cos(n),T=e*Math.sin(n),N=i+v,G=r+T,tt=1^o,lt=o?n-a:a-n;if(e<0)throw new Error("negative radius: "+e);null===this._x1?this._+="M"+N+","+G:(Math.abs(this._x1-N)>Sr||Math.abs(this._y1-G)>Sr)&&(this._+="L"+N+","+G),e&&(lt<0&&(lt=lt%Wa+Wa),lt>du?this._+="A"+e+","+e+",0,1,"+tt+","+(i-v)+","+(r-T)+"A"+e+","+e+",0,1,"+tt+","+(this._x1=N)+","+(this._y1=G):lt>Sr&&(this._+="A"+e+","+e+",0,"+ +(lt>=Ya)+","+tt+","+(this._x1=i+e*Math.cos(a))+","+(this._y1=r+e*Math.sin(a))))},rect:function(i,r,e,n){this._+="M"+(this._x0=this._x1=+i)+","+(this._y0=this._y1=+r)+"h"+ +e+"v"+ +n+"h"+-e+"Z"},toString:function(){return this._}};const pu=eo;function xa(i){return function(){return i}}function io(i){this._context=i}function fu(i){return new io(i)}function mu(i){return i[0]}function gu(i){return i[1]}io.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(i,r){switch(i=+i,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(i,r):this._context.moveTo(i,r);break;case 1:this._point=2;default:this._context.lineTo(i,r)}}};var no=Math.PI;function ao(i){return(1-Math.cos(no*i))/2}var ya=s(25922),lr=s(49194),$a=s(73339),vu=(0,ya.Z)("start","end","cancel","interrupt"),xu=[];function Ca(i,r,e,n,a,o){var v=i.__transition;if(v){if(e in v)return}else i.__transition={};!function yu(i,r,e){var a,n=i.__transition;function v(G){var tt,lt,ot,wt;if(1!==e.state)return N();for(tt in n)if((wt=n[tt]).name===e.name){if(3===wt.state)return(0,$a.Z)(v);4===wt.state?(wt.state=6,wt.timer.stop(),wt.on.call("interrupt",i,i.__data__,wt.index,wt.group),delete n[tt]):+tt<r&&(wt.state=6,wt.timer.stop(),wt.on.call("cancel",i,i.__data__,wt.index,wt.group),delete n[tt])}if((0,$a.Z)(function(){3===e.state&&(e.state=4,e.timer.restart(T,e.delay,e.time),T(G))}),e.state=2,e.on.call("start",i,i.__data__,e.index,e.group),2===e.state){for(e.state=3,a=new Array(ot=e.tween.length),tt=0,lt=-1;tt<ot;++tt)(wt=e.tween[tt].value.call(i,i.__data__,e.index,e.group))&&(a[++lt]=wt);a.length=lt+1}}function T(G){for(var tt=G<e.duration?e.ease.call(null,G/e.duration):(e.timer.restart(N),e.state=5,1),lt=-1,ot=a.length;++lt<ot;)a[lt].call(i,tt);5===e.state&&(e.on.call("end",i,i.__data__,e.index,e.group),N())}function N(){for(var G in e.state=6,e.timer.stop(),delete n[r],n)return;delete i.__transition}n[r]=e,e.timer=(0,lr.HT)(function o(G){e.state=1,e.timer.restart(v,e.delay,e.time),e.delay<=G&&v(G-e.delay)},0,e.time)}(i,e,{name:r,index:n,group:a,on:vu,tween:xu,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function Ja(i,r){var e=qn(i,r);if(e.state>0)throw new Error("too late; already scheduled");return e}function cr(i,r){var e=qn(i,r);if(e.state>3)throw new Error("too late; already running");return e}function qn(i,r){var e=i.__transition;if(!e||!(e=e[r]))throw new Error("transition not found");return e}function _r(i,r){return i=+i,r=+r,function(e){return i*(1-e)+r*e}}var ia,qa,ho,wa,co=180/Math.PI,Ka={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function uo(i,r,e,n,a,o){var v,T,N;return(v=Math.sqrt(i*i+r*r))&&(i/=v,r/=v),(N=i*e+r*n)&&(e-=i*N,n-=r*N),(T=Math.sqrt(e*e+n*n))&&(e/=T,n/=T,N/=T),i*n<r*e&&(i=-i,r=-r,N=-N,v=-v),{translateX:a,translateY:o,rotate:Math.atan2(r,i)*co,skewX:Math.atan(N)*co,scaleX:v,scaleY:T}}function po(i,r,e,n){function a(G){return G.length?G.pop()+" ":""}return function(G,tt){var lt=[],ot=[];return G=i(G),tt=i(tt),function o(G,tt,lt,ot,wt,kt){if(G!==lt||tt!==ot){var Ft=wt.push("translate(",null,r,null,e);kt.push({i:Ft-4,x:_r(G,lt)},{i:Ft-2,x:_r(tt,ot)})}else(lt||ot)&&wt.push("translate("+lt+r+ot+e)}(G.translateX,G.translateY,tt.translateX,tt.translateY,lt,ot),function v(G,tt,lt,ot){G!==tt?(G-tt>180?tt+=360:tt-G>180&&(G+=360),ot.push({i:lt.push(a(lt)+"rotate(",null,n)-2,x:_r(G,tt)})):tt&&lt.push(a(lt)+"rotate("+tt+n)}(G.rotate,tt.rotate,lt,ot),function T(G,tt,lt,ot){G!==tt?ot.push({i:lt.push(a(lt)+"skewX(",null,n)-2,x:_r(G,tt)}):tt&&lt.push(a(lt)+"skewX("+tt+n)}(G.skewX,tt.skewX,lt,ot),function N(G,tt,lt,ot,wt,kt){if(G!==lt||tt!==ot){var Ft=wt.push(a(wt)+"scale(",null,",",null,")");kt.push({i:Ft-4,x:_r(G,lt)},{i:Ft-2,x:_r(tt,ot)})}else(1!==lt||1!==ot)&&wt.push(a(wt)+"scale("+lt+","+ot+")")}(G.scaleX,G.scaleY,tt.scaleX,tt.scaleY,lt,ot),G=tt=null,function(wt){for(var xt,kt=-1,Ft=ot.length;++kt<Ft;)lt[(xt=ot[kt]).i]=xt.x(wt);return lt.join("")}}}var Au=po(function Cu(i){return"none"===i?Ka:(ia||(ia=document.createElement("DIV"),qa=document.documentElement,ho=document.defaultView),ia.style.transform=i,i=ho.getComputedStyle(qa.appendChild(ia),null).getPropertyValue("transform"),qa.removeChild(ia),uo(+(i=i.slice(7,-1).split(","))[0],+i[1],+i[2],+i[3],+i[4],+i[5]))},"px, ","px)","deg)"),Su=po(function wu(i){return null!=i&&(wa||(wa=document.createElementNS("http://www.w3.org/2000/svg","g")),wa.setAttribute("transform",i),i=wa.transform.baseVal.consolidate())?uo((i=i.matrix).a,i.b,i.c,i.d,i.e,i.f):Ka},", ",")",")");function Eu(i,r){var e,n;return function(){var a=cr(this,i),o=a.tween;if(o!==e)for(var v=0,T=(n=e=o).length;v<T;++v)if(n[v].name===r){(n=n.slice()).splice(v,1);break}a.tween=n}}function Du(i,r,e){var n,a;if("function"!=typeof e)throw new Error;return function(){var o=cr(this,i),v=o.tween;if(v!==n){a=(n=v).slice();for(var T={name:r,value:e},N=0,G=a.length;N<G;++N)if(a[N].name===r){a[N]=T;break}N===G&&a.push(T)}o.tween=a}}function ts(i,r,e){var n=i._id;return i.each(function(){var a=cr(this,n);(a.value||(a.value={}))[r]=e.apply(this,arguments)}),function(a){return qn(a,n).value[r]}}function es(i,r,e){i.prototype=r.prototype=e,e.constructor=i}function fo(i,r){var e=Object.create(i.prototype);for(var n in r)e[n]=r[n];return e}function na(){}var Aa=1/.7,Nr="\\s*([+-]?\\d+)\\s*",aa="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",nr="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ku=/^#([0-9a-f]{3,8})$/,Iu=new RegExp("^rgb\\("+[Nr,Nr,Nr]+"\\)$"),Ou=new RegExp("^rgb\\("+[nr,nr,nr]+"\\)$"),Mu=new RegExp("^rgba\\("+[Nr,Nr,Nr,aa]+"\\)$"),Nu=new RegExp("^rgba\\("+[nr,nr,nr,aa]+"\\)$"),Pu=new RegExp("^hsl\\("+[aa,nr,nr]+"\\)$"),Fu=new RegExp("^hsla\\("+[aa,nr,nr,aa]+"\\)$"),mo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function go(){return this.rgb().formatHex()}function _o(){return this.rgb().formatRgb()}function sa(i){var r,e;return i=(i+"").trim().toLowerCase(),(r=ku.exec(i))?(e=r[1].length,r=parseInt(r[1],16),6===e?vo(r):3===e?new Vn(r>>8&15|r>>4&240,r>>4&15|240&r,(15&r)<<4|15&r,1):8===e?Sa(r>>24&255,r>>16&255,r>>8&255,(255&r)/255):4===e?Sa(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|240&r,((15&r)<<4|15&r)/255):null):(r=Iu.exec(i))?new Vn(r[1],r[2],r[3],1):(r=Ou.exec(i))?new Vn(255*r[1]/100,255*r[2]/100,255*r[3]/100,1):(r=Mu.exec(i))?Sa(r[1],r[2],r[3],r[4]):(r=Nu.exec(i))?Sa(255*r[1]/100,255*r[2]/100,255*r[3]/100,r[4]):(r=Pu.exec(i))?bo(r[1],r[2]/100,r[3]/100,1):(r=Fu.exec(i))?bo(r[1],r[2]/100,r[3]/100,r[4]):mo.hasOwnProperty(i)?vo(mo[i]):"transparent"===i?new Vn(NaN,NaN,NaN,0):null}function vo(i){return new Vn(i>>16&255,i>>8&255,255&i,1)}function Sa(i,r,e,n){return n<=0&&(i=r=e=NaN),new Vn(i,r,e,n)}function Bu(i){return i instanceof na||(i=sa(i)),i?new Vn((i=i.rgb()).r,i.g,i.b,i.opacity):new Vn}function Ea(i,r,e,n){return 1===arguments.length?Bu(i):new Vn(i,r,e,n??1)}function Vn(i,r,e,n){this.r=+i,this.g=+r,this.b=+e,this.opacity=+n}function xo(){return"#"+is(this.r)+is(this.g)+is(this.b)}function yo(){var i=this.opacity;return(1===(i=isNaN(i)?1:Math.max(0,Math.min(1,i)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===i?")":", "+i+")")}function is(i){return((i=Math.max(0,Math.min(255,Math.round(i)||0)))<16?"0":"")+i.toString(16)}function bo(i,r,e,n){return n<=0?i=r=e=NaN:e<=0||e>=1?i=r=NaN:r<=0&&(i=NaN),new rr(i,r,e,n)}function To(i){if(i instanceof rr)return new rr(i.h,i.s,i.l,i.opacity);if(i instanceof na||(i=sa(i)),!i)return new rr;if(i instanceof rr)return i;var r=(i=i.rgb()).r/255,e=i.g/255,n=i.b/255,a=Math.min(r,e,n),o=Math.max(r,e,n),v=NaN,T=o-a,N=(o+a)/2;return T?(v=r===o?(e-n)/T+6*(e<n):e===o?(n-r)/T+2:(r-e)/T+4,T/=N<.5?o+a:2-o-a,v*=60):T=N>0&&N<1?0:v,new rr(v,T,N,i.opacity)}function rr(i,r,e,n){this.h=+i,this.s=+r,this.l=+e,this.opacity=+n}function ns(i,r,e){return 255*(i<60?r+(e-r)*i/60:i<180?e:i<240?r+(e-r)*(240-i)/60:r)}function Co(i,r,e,n,a){var o=i*i,v=o*i;return((1-3*i+3*o-v)*r+(4-6*o+3*v)*e+(1+3*i+3*o-3*v)*n+v*a)/6}function wo(i){return function(){return i}}function So(i,r){var e=r-i;return e?function Ao(i,r){return function(e){return i+e*r}}(i,e):wo(isNaN(i)?r:i)}es(na,sa,{copy:function(i){return Object.assign(new this.constructor,this,i)},displayable:function(){return this.rgb().displayable()},hex:go,formatHex:go,formatHsl:function Ru(){return To(this).formatHsl()},formatRgb:_o,toString:_o}),es(Vn,Ea,fo(na,{brighter:function(i){return i=null==i?Aa:Math.pow(Aa,i),new Vn(this.r*i,this.g*i,this.b*i,this.opacity)},darker:function(i){return i=null==i?.7:Math.pow(.7,i),new Vn(this.r*i,this.g*i,this.b*i,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:xo,formatHex:xo,formatRgb:yo,toString:yo})),es(rr,function Zu(i,r,e,n){return 1===arguments.length?To(i):new rr(i,r,e,n??1)},fo(na,{brighter:function(i){return i=null==i?Aa:Math.pow(Aa,i),new rr(this.h,this.s,this.l*i,this.opacity)},darker:function(i){return i=null==i?.7:Math.pow(.7,i),new rr(this.h,this.s,this.l*i,this.opacity)},rgb:function(){var i=this.h%360+360*(this.h<0),r=isNaN(i)||isNaN(this.s)?0:this.s,e=this.l,n=e+(e<.5?e:1-e)*r,a=2*e-n;return new Vn(ns(i>=240?i-240:i+120,a,n),ns(i,a,n),ns(i<120?i+240:i-120,a,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var i=this.opacity;return(1===(i=isNaN(i)?1:Math.max(0,Math.min(1,i)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===i?")":", "+i+")")}}));const Eo=function i(r){var e=function zu(i){return 1==(i=+i)?So:function(r,e){return e-r?function Uu(i,r,e){return i=Math.pow(i,e),r=Math.pow(r,e)-i,e=1/e,function(n){return Math.pow(i+n*r,e)}}(r,e,i):wo(isNaN(r)?e:r)}}(r);function n(a,o){var v=e((a=Ea(a)).r,(o=Ea(o)).r),T=e(a.g,o.g),N=e(a.b,o.b),G=So(a.opacity,o.opacity);return function(tt){return a.r=v(tt),a.g=T(tt),a.b=N(tt),a.opacity=G(tt),a+""}}return n.gamma=i,n}(1);function Do(i){return function(r){var v,T,e=r.length,n=new Array(e),a=new Array(e),o=new Array(e);for(v=0;v<e;++v)T=Ea(r[v]),n[v]=T.r||0,a[v]=T.g||0,o[v]=T.b||0;return n=i(n),a=i(a),o=i(o),T.opacity=1,function(N){return T.r=n(N),T.g=a(N),T.b=o(N),T+""}}}Do(function Vu(i){var r=i.length-1;return function(e){var n=e<=0?e=0:e>=1?(e=1,r-1):Math.floor(e*r),a=i[n],o=i[n+1];return Co((e-n/r)*r,n>0?i[n-1]:2*a-o,a,o,n<r-1?i[n+2]:2*o-a)}}),Do(function Gu(i){var r=i.length;return function(e){var n=Math.floor(((e%=1)<0?++e:e)*r);return Co((e-n/r)*r,i[(n+r-1)%r],i[n%r],i[(n+1)%r],i[(n+2)%r])}});var rs=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,as=new RegExp(rs.source,"g");function Wu(i,r){var n,a,o,e=rs.lastIndex=as.lastIndex=0,v=-1,T=[],N=[];for(i+="",r+="";(n=rs.exec(i))&&(a=as.exec(r));)(o=a.index)>e&&(o=r.slice(e,o),T[v]?T[v]+=o:T[++v]=o),(n=n[0])===(a=a[0])?T[v]?T[v]+=a:T[++v]=a:(T[++v]=null,N.push({i:v,x:_r(n,a)})),e=as.lastIndex;return e<r.length&&(o=r.slice(e),T[v]?T[v]+=o:T[++v]=o),T.length<2?N[0]?function Yu(i){return function(r){return i(r)+""}}(N[0].x):function Hu(i){return function(){return i}}(r):(r=N.length,function(G){for(var lt,tt=0;tt<r;++tt)T[(lt=N[tt]).i]=lt.x(G);return T.join("")})}function Lo(i,r){var e;return("number"==typeof r?_r:r instanceof sa?Eo:(e=sa(r))?(r=e,Eo):Wu)(i,r)}function Xu(i){return function(){this.removeAttribute(i)}}function $u(i){return function(){this.removeAttributeNS(i.space,i.local)}}function Qu(i,r,e){var n,o,a=e+"";return function(){var v=this.getAttribute(i);return v===a?null:v===n?o:o=r(n=v,e)}}function ju(i,r,e){var n,o,a=e+"";return function(){var v=this.getAttributeNS(i.space,i.local);return v===a?null:v===n?o:o=r(n=v,e)}}function Ju(i,r,e){var n,a,o;return function(){var v,N,T=e(this);return null==T?void this.removeAttribute(i):(v=this.getAttribute(i))===(N=T+"")?null:v===n&&N===a?o:(a=N,o=r(n=v,T))}}function Ku(i,r,e){var n,a,o;return function(){var v,N,T=e(this);return null==T?void this.removeAttributeNS(i.space,i.local):(v=this.getAttributeNS(i.space,i.local))===(N=T+"")?null:v===n&&N===a?o:(a=N,o=r(n=v,T))}}function th(i,r){return function(e){this.setAttribute(i,r.call(this,e))}}function eh(i,r){return function(e){this.setAttributeNS(i.space,i.local,r.call(this,e))}}function ih(i,r){var e,n;function a(){var o=r.apply(this,arguments);return o!==n&&(e=(n=o)&&eh(i,o)),e}return a._value=r,a}function nh(i,r){var e,n;function a(){var o=r.apply(this,arguments);return o!==n&&(e=(n=o)&&th(i,o)),e}return a._value=r,a}function ah(i,r){return function(){Ja(this,i).delay=+r.apply(this,arguments)}}function sh(i,r){return r=+r,function(){Ja(this,i).delay=r}}function lh(i,r){return function(){cr(this,i).duration=+r.apply(this,arguments)}}function ch(i,r){return r=+r,function(){cr(this,i).duration=r}}function hh(i,r){if("function"!=typeof r)throw new Error;return function(){cr(this,i).ease=r}}function gh(i,r,e){var n,a,o=function mh(i){return(i+"").trim().split(/^|\s+/).every(function(r){var e=r.indexOf(".");return e>=0&&(r=r.slice(0,e)),!r||"start"===r})}(r)?Ja:cr;return function(){var v=o(this,i),T=v.on;T!==n&&(a=(n=T).copy()).on(r,e),v.on=a}}var Th=ea.prototype.constructor;function ko(i){return function(){this.style.removeProperty(i)}}function Lh(i,r,e){return function(n){this.style.setProperty(i,r.call(this,n),e)}}function kh(i,r,e){var n,a;function o(){var v=r.apply(this,arguments);return v!==a&&(n=(a=v)&&Lh(i,v,e)),n}return o._value=r,o}function Ph(i){return function(r){this.textContent=i.call(this,r)}}function Fh(i){var r,e;function n(){var a=i.apply(this,arguments);return a!==e&&(r=(e=a)&&Ph(a)),r}return n._value=i,n}var Vh=0;function ur(i,r,e,n){this._groups=i,this._parents=r,this._name=e,this._id=n}function Io(){return++Vh}var Pr=ea.prototype;ur.prototype=function Gh(i){return ea().transition(i)}.prototype={constructor:ur,select:function yh(i){var r=this._name,e=this._id;"function"!=typeof i&&(i=Ki(i));for(var n=this._groups,a=n.length,o=new Array(a),v=0;v<a;++v)for(var tt,lt,T=n[v],N=T.length,G=o[v]=new Array(N),ot=0;ot<N;++ot)(tt=T[ot])&&(lt=i.call(tt,tt.__data__,ot,T))&&("__data__"in tt&&(lt.__data__=tt.__data__),G[ot]=lt,Ca(G[ot],r,e,ot,G,qn(tt,e)));return new ur(o,this._parents,r,e)},selectAll:function bh(i){var r=this._name,e=this._id;"function"!=typeof i&&(i=xn(i));for(var n=this._groups,a=n.length,o=[],v=[],T=0;T<a;++T)for(var tt,N=n[T],G=N.length,lt=0;lt<G;++lt)if(tt=N[lt]){for(var wt,ot=i.call(tt,tt.__data__,lt,N),kt=qn(tt,e),Ft=0,xt=ot.length;Ft<xt;++Ft)(wt=ot[Ft])&&Ca(wt,r,e,Ft,ot,kt);o.push(ot),v.push(tt)}return new ur(o,v,r,e)},filter:function ph(i){"function"!=typeof i&&(i=Ri(i));for(var r=this._groups,e=r.length,n=new Array(e),a=0;a<e;++a)for(var N,o=r[a],v=o.length,T=n[a]=[],G=0;G<v;++G)(N=o[G])&&i.call(N,N.__data__,G,o)&&T.push(N);return new ur(n,this._parents,this._name,this._id)},merge:function fh(i){if(i._id!==this._id)throw new Error;for(var r=this._groups,e=i._groups,n=r.length,o=Math.min(n,e.length),v=new Array(n),T=0;T<o;++T)for(var ot,N=r[T],G=e[T],tt=N.length,lt=v[T]=new Array(tt),wt=0;wt<tt;++wt)(ot=N[wt]||G[wt])&&(lt[wt]=ot);for(;T<n;++T)v[T]=r[T];return new ur(v,this._parents,this._name,this._id)},selection:function Ch(){return new Th(this._groups,this._parents)},transition:function Bh(){for(var i=this._name,r=this._id,e=Io(),n=this._groups,a=n.length,o=0;o<a;++o)for(var N,v=n[o],T=v.length,G=0;G<T;++G)if(N=v[G]){var tt=qn(N,r);Ca(N,i,e,G,v,{time:tt.time+tt.delay+tt.duration,delay:0,duration:tt.duration,ease:tt.ease})}return new ur(n,this._parents,i,e)},call:Pr.call,nodes:Pr.nodes,node:Pr.node,size:Pr.size,empty:Pr.empty,each:Pr.each,on:function _h(i,r){var e=this._id;return arguments.length<2?qn(this.node(),e).on.on(i):this.each(gh(e,i,r))},attr:function qu(i,r){var e=Kn(i),n="transform"===e?Su:Lo;return this.attrTween(i,"function"==typeof r?(e.local?Ku:Ju)(e,n,ts(this,"attr."+i,r)):null==r?(e.local?$u:Xu)(e):(e.local?ju:Qu)(e,n,r))},attrTween:function rh(i,r){var e="attr."+i;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(null==r)return this.tween(e,null);if("function"!=typeof r)throw new Error;var n=Kn(i);return this.tween(e,(n.local?ih:nh)(n,r))},style:function Dh(i,r,e){var n="transform"==(i+="")?Au:Lo;return null==r?this.styleTween(i,function wh(i,r){var e,n,a;return function(){var o=Mr(this,i),v=(this.style.removeProperty(i),Mr(this,i));return o===v?null:o===e&&v===n?a:a=r(e=o,n=v)}}(i,n)).on("end.style."+i,ko(i)):"function"==typeof r?this.styleTween(i,function Sh(i,r,e){var n,a,o;return function(){var v=Mr(this,i),T=e(this),N=T+"";return null==T&&(this.style.removeProperty(i),N=T=Mr(this,i)),v===N?null:v===n&&N===a?o:(a=N,o=r(n=v,T))}}(i,n,ts(this,"style."+i,r))).each(function Eh(i,r){var e,n,a,T,o="style."+r,v="end."+o;return function(){var N=cr(this,i),G=N.on,tt=null==N.value[o]?T||(T=ko(r)):void 0;(G!==e||a!==tt)&&(n=(e=G).copy()).on(v,a=tt),N.on=n}}(this._id,i)):this.styleTween(i,function Ah(i,r,e){var n,o,a=e+"";return function(){var v=Mr(this,i);return v===a?null:v===n?o:o=r(n=v,e)}}(i,n,r),e).on("end.style."+i,null)},styleTween:function Ih(i,r,e){var n="style."+(i+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==r)return this.tween(n,null);if("function"!=typeof r)throw new Error;return this.tween(n,kh(i,r,e??""))},text:function Nh(i){return this.tween("text","function"==typeof i?function Mh(i){return function(){var r=i(this);this.textContent=r??""}}(ts(this,"text",i)):function Oh(i){return function(){this.textContent=i}}(null==i?"":i+""))},textTween:function Rh(i){var r="text";if(arguments.length<1)return(r=this.tween(r))&&r._value;if(null==i)return this.tween(r,null);if("function"!=typeof i)throw new Error;return this.tween(r,Fh(i))},remove:function xh(){return this.on("end.remove",function vh(i){return function(){var r=this.parentNode;for(var e in this.__transition)if(+e!==i)return;r&&r.removeChild(this)}}(this._id))},tween:function Lu(i,r){var e=this._id;if(i+="",arguments.length<2){for(var v,n=qn(this.node(),e).tween,a=0,o=n.length;a<o;++a)if((v=n[a]).name===i)return v.value;return null}return this.each((null==r?Eu:Du)(e,i,r))},delay:function oh(i){var r=this._id;return arguments.length?this.each(("function"==typeof i?ah:sh)(r,i)):qn(this.node(),r).delay},duration:function uh(i){var r=this._id;return arguments.length?this.each(("function"==typeof i?lh:ch)(r,i)):qn(this.node(),r).duration},ease:function dh(i){var r=this._id;return arguments.length?this.each(hh(r,i)):qn(this.node(),r).ease},end:function Zh(){var i,r,e=this,n=e._id,a=e.size();return new Promise(function(o,v){var T={value:v},N={value:function(){0==--a&&o()}};e.each(function(){var G=cr(this,n),tt=G.on;tt!==i&&((r=(i=tt).copy())._.cancel.push(T),r._.interrupt.push(T),r._.end.push(N)),G.on=r})})}};var ss={time:null,delay:0,duration:250,ease:s(27065).tw};function zh(i,r){for(var e;!(e=i.__transition)||!(e=e[r]);)if(!(i=i.parentNode))return ss.time=(0,lr.zO)(),ss;return e}ea.prototype.interrupt=function Tu(i){return this.each(function(){!function bu(i,r){var n,a,v,e=i.__transition,o=!0;if(e){for(v in r=null==r?null:r+"",e)(n=e[v]).name===r?(a=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(a?"interrupt":"cancel",i,i.__data__,n.index,n.group),delete e[v]):o=!1;o&&delete i.__transition}}(this,i)})},ea.prototype.transition=function Hh(i){var r,e;i instanceof ur?(r=i._id,i=i._name):(r=Io(),(e=ss).time=(0,lr.zO)(),i=null==i?null:i+"");for(var n=this._groups,a=n.length,o=0;o<a;++o)for(var N,v=n[o],T=v.length,G=0;G<T;++G)(N=v[G])&&Ca(N,i,r,G,v,e||zh(N,r));return new ur(n,this._parents,i,r)};var Oo=s(50727),Mo=s(54968),Wh=s(50590);function td(i){return typeof i>"u"}function rd(i){if(Array.isArray(i)){for(var r=0,e=Array(i.length);r<i.length;r++)e[r]=i[r];return e}return Array.from(i)}function ad(i){return Array.isArray(i)?i:Array.from(i)}function oa(){for(var i=arguments.length,r=Array(i),e=0;e<i;e++)r[e]=arguments[e];var n=function(lt,ot){return{a:lt.a*ot.a+lt.c*ot.b,c:lt.a*ot.c+lt.c*ot.d,e:lt.a*ot.e+lt.c*ot.f+lt.e,b:lt.b*ot.a+lt.d*ot.b,d:lt.b*ot.c+lt.d*ot.d,f:lt.b*ot.e+lt.d*ot.f+lt.f}};switch((r=Array.isArray(r[0])?r[0]:r).length){case 0:throw new Error("no matrices provided");case 1:return r[0];case 2:return n(r[0],r[1]);default:var a=r,o=ad(a),v=o[0],T=o[1],N=o.slice(2),G=n(v,T);return oa.apply(void 0,[G].concat(rd(N)))}}function Fo(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{a:1,c:0,e:i,b:0,d:1,f:r}}function Da(i,r){switch(arguments.length){case 0:break;case 1:this.range(i);break;default:this.range(r).domain(i)}return this}"function"==typeof Symbol&&Symbol,Math,Math,Math,Math;const Ro=Symbol("implicit");function os(){var i=new Map,r=[],e=[],n=Ro;function a(o){var v=o+"",T=i.get(v);if(!T){if(n!==Ro)return n;i.set(v,T=r.push(o))}return e[(T-1)%e.length]}return a.domain=function(o){if(!arguments.length)return r.slice();r=[],i=new Map;for(const v of o){const T=v+"";i.has(T)||i.set(T,r.push(v))}return a},a.range=function(o){return arguments.length?(e=Array.from(o),a):e.slice()},a.unknown=function(o){return arguments.length?(n=o,a):n},a.copy=function(){return os(r,e).unknown(n)},Da.apply(a,arguments),a}var Rr=s(59695);function od(i,r){var e;function n(){var a,v,o=e.length,T=0,N=0;for(a=0;a<o;++a)T+=(v=e[a]).x,N+=v.y;for(T=T/o-i,N=N/o-r,a=0;a<o;++a)(v=e[a]).x-=T,v.y-=N}return null==i&&(i=0),null==r&&(r=0),n.initialize=function(a){e=a},n.x=function(a){return arguments.length?(i=+a,n):i},n.y=function(a){return arguments.length?(r=+a,n):r},n}function tn(i){return function(){return i}}function vr(){return 1e-6*(Math.random()-.5)}function Bo(i,r,e,n){if(isNaN(r)||isNaN(e))return i;var a,lt,ot,wt,kt,Ft,xt,Vt,Jt,o=i._root,v={data:n},T=i._x0,N=i._y0,G=i._x1,tt=i._y1;if(!o)return i._root=v,i;for(;o.length;)if((Ft=r>=(lt=(T+G)/2))?T=lt:G=lt,(xt=e>=(ot=(N+tt)/2))?N=ot:tt=ot,a=o,!(o=o[Vt=xt<<1|Ft]))return a[Vt]=v,i;if(wt=+i._x.call(null,o.data),kt=+i._y.call(null,o.data),r===wt&&e===kt)return v.next=o,a?a[Vt]=v:i._root=v,i;do{a=a?a[Vt]=new Array(4):i._root=new Array(4),(Ft=r>=(lt=(T+G)/2))?T=lt:G=lt,(xt=e>=(ot=(N+tt)/2))?N=ot:tt=ot}while((Vt=xt<<1|Ft)==(Jt=(kt>=ot)<<1|wt>=lt));return a[Jt]=o,a[Vt]=v,i}function Ln(i,r,e,n,a){this.node=i,this.x0=r,this.y0=e,this.x1=n,this.y1=a}function yd(i){return i[0]}function Td(i){return i[1]}function ls(i,r,e){var n=new cs(r??yd,e??Td,NaN,NaN,NaN,NaN);return null==i?n:n.addAll(i)}function cs(i,r,e,n,a,o){this._x=i,this._y=r,this._x0=e,this._y0=n,this._x1=a,this._y1=o,this._root=void 0}function Zo(i){for(var r={data:i.data},e=r;i=i.next;)e=e.next={data:i.data};return r}var kn=ls.prototype=cs.prototype;function wd(i){return i.x+i.vx}function Ad(i){return i.y+i.vy}function Vo(i){var r,e,n=1,a=1;function o(){for(var N,tt,lt,ot,wt,kt,Ft,G=r.length,xt=0;xt<a;++xt)for(tt=ls(r,wd,Ad).visitAfter(v),N=0;N<G;++N)Ft=(kt=e[(lt=r[N]).index])*kt,ot=lt.x+lt.vx,wt=lt.y+lt.vy,tt.visit(Vt);function Vt(Jt,Wt,_e,Se,pe){var qe=Jt.data,ai=Jt.r,bi=kt+ai;if(!qe)return Wt>ot+bi||Se<ot-bi||_e>wt+bi||pe<wt-bi;if(qe.index>lt.index){var Di=ot-qe.x-qe.vx,Li=wt-qe.y-qe.vy,Qi=Di*Di+Li*Li;Qi<bi*bi&&(0===Di&&(Qi+=(Di=vr())*Di),0===Li&&(Qi+=(Li=vr())*Li),Qi=(bi-(Qi=Math.sqrt(Qi)))/Qi*n,lt.vx+=(Di*=Qi)*(bi=(ai*=ai)/(Ft+ai)),lt.vy+=(Li*=Qi)*bi,qe.vx-=Di*(bi=1-bi),qe.vy-=Li*bi)}}}function v(N){if(N.data)return N.r=e[N.data.index];for(var G=N.r=0;G<4;++G)N[G]&&N[G].r>N.r&&(N.r=N[G].r)}function T(){if(r){var N,tt,G=r.length;for(e=new Array(G),N=0;N<G;++N)e[(tt=r[N]).index]=+i(tt,N,r)}}return"function"!=typeof i&&(i=tn(null==i?1:+i)),o.initialize=function(N){r=N,T()},o.iterations=function(N){return arguments.length?(a=+N,o):a},o.strength=function(N){return arguments.length?(n=+N,o):n},o.radius=function(N){return arguments.length?(i="function"==typeof N?N:tn(+N),T(),o):i},o}kn.copy=function(){var e,n,i=new cs(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return i;if(!r.length)return i._root=Zo(r),i;for(e=[{source:r,target:i._root=new Array(4)}];r=e.pop();)for(var a=0;a<4;++a)(n=r.source[a])&&(n.length?e.push({source:n,target:r.target[a]=new Array(4)}):r.target[a]=Zo(n));return i},kn.add=function ld(i){var r=+this._x.call(null,i),e=+this._y.call(null,i);return Bo(this.cover(r,e),r,e,i)},kn.addAll=function cd(i){var r,e,a,o,n=i.length,v=new Array(n),T=new Array(n),N=1/0,G=1/0,tt=-1/0,lt=-1/0;for(e=0;e<n;++e)isNaN(a=+this._x.call(null,r=i[e]))||isNaN(o=+this._y.call(null,r))||(v[e]=a,T[e]=o,a<N&&(N=a),a>tt&&(tt=a),o<G&&(G=o),o>lt&&(lt=o));if(N>tt||G>lt)return this;for(this.cover(N,G).cover(tt,lt),e=0;e<n;++e)Bo(this,v[e],T[e],i[e]);return this},kn.cover=function ud(i,r){if(isNaN(i=+i)||isNaN(r=+r))return this;var e=this._x0,n=this._y0,a=this._x1,o=this._y1;if(isNaN(e))a=(e=Math.floor(i))+1,o=(n=Math.floor(r))+1;else{for(var N,G,v=a-e,T=this._root;e>i||i>=a||n>r||r>=o;)switch(G=(r<n)<<1|i<e,N=new Array(4),N[G]=T,T=N,v*=2,G){case 0:a=e+v,o=n+v;break;case 1:e=a-v,o=n+v;break;case 2:a=e+v,n=o-v;break;case 3:e=a-v,n=o-v}this._root&&this._root.length&&(this._root=T)}return this._x0=e,this._y0=n,this._x1=a,this._y1=o,this},kn.data=function hd(){var i=[];return this.visit(function(r){if(!r.length)do{i.push(r.data)}while(r=r.next)}),i},kn.extent=function dd(i){return arguments.length?this.cover(+i[0][0],+i[0][1]).cover(+i[1][0],+i[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},kn.find=function pd(i,r,e){var n,v,T,N,G,kt,Ft,a=this._x0,o=this._y0,tt=this._x1,lt=this._y1,ot=[],wt=this._root;for(wt&&ot.push(new Ln(wt,a,o,tt,lt)),null==e?e=1/0:(a=i-e,o=r-e,tt=i+e,lt=r+e,e*=e);kt=ot.pop();)if(!(!(wt=kt.node)||(v=kt.x0)>tt||(T=kt.y0)>lt||(N=kt.x1)<a||(G=kt.y1)<o))if(wt.length){var xt=(v+N)/2,Vt=(T+G)/2;ot.push(new Ln(wt[3],xt,Vt,N,G),new Ln(wt[2],v,Vt,xt,G),new Ln(wt[1],xt,T,N,Vt),new Ln(wt[0],v,T,xt,Vt)),(Ft=(r>=Vt)<<1|i>=xt)&&(kt=ot[ot.length-1],ot[ot.length-1]=ot[ot.length-1-Ft],ot[ot.length-1-Ft]=kt)}else{var Jt=i-+this._x.call(null,wt.data),Wt=r-+this._y.call(null,wt.data),_e=Jt*Jt+Wt*Wt;if(_e<e){var Se=Math.sqrt(e=_e);a=i-Se,o=r-Se,tt=i+Se,lt=r+Se,n=wt.data}}return n},kn.remove=function fd(i){if(isNaN(tt=+this._x.call(null,i))||isNaN(lt=+this._y.call(null,i)))return this;var r,n,a,o,tt,lt,ot,wt,kt,Ft,xt,Vt,e=this._root,v=this._x0,T=this._y0,N=this._x1,G=this._y1;if(!e)return this;if(e.length)for(;;){if((kt=tt>=(ot=(v+N)/2))?v=ot:N=ot,(Ft=lt>=(wt=(T+G)/2))?T=wt:G=wt,r=e,!(e=e[xt=Ft<<1|kt]))return this;if(!e.length)break;(r[xt+1&3]||r[xt+2&3]||r[xt+3&3])&&(n=r,Vt=xt)}for(;e.data!==i;)if(a=e,!(e=e.next))return this;return(o=e.next)&&delete e.next,a?(o?a.next=o:delete a.next,this):r?(o?r[xt]=o:delete r[xt],(e=r[0]||r[1]||r[2]||r[3])&&e===(r[3]||r[2]||r[1]||r[0])&&!e.length&&(n?n[Vt]=e:this._root=e),this):(this._root=o,this)},kn.removeAll=function md(i){for(var r=0,e=i.length;r<e;++r)this.remove(i[r]);return this},kn.root=function gd(){return this._root},kn.size=function _d(){var i=0;return this.visit(function(r){if(!r.length)do{++i}while(r=r.next)}),i},kn.visit=function vd(i){var e,a,o,v,T,N,r=[],n=this._root;for(n&&r.push(new Ln(n,this._x0,this._y0,this._x1,this._y1));e=r.pop();)if(!i(n=e.node,o=e.x0,v=e.y0,T=e.x1,N=e.y1)&&n.length){var G=(o+T)/2,tt=(v+N)/2;(a=n[3])&&r.push(new Ln(a,G,tt,T,N)),(a=n[2])&&r.push(new Ln(a,o,tt,G,N)),(a=n[1])&&r.push(new Ln(a,G,v,T,tt)),(a=n[0])&&r.push(new Ln(a,o,v,G,tt))}return this},kn.visitAfter=function xd(i){var n,r=[],e=[];for(this._root&&r.push(new Ln(this._root,this._x0,this._y0,this._x1,this._y1));n=r.pop();){var a=n.node;if(a.length){var o,v=n.x0,T=n.y0,N=n.x1,G=n.y1,tt=(v+N)/2,lt=(T+G)/2;(o=a[0])&&r.push(new Ln(o,v,T,tt,lt)),(o=a[1])&&r.push(new Ln(o,tt,T,N,lt)),(o=a[2])&&r.push(new Ln(o,v,lt,tt,G)),(o=a[3])&&r.push(new Ln(o,tt,lt,N,G))}e.push(n)}for(;n=e.pop();)i(n.node,n.x0,n.y0,n.x1,n.y1);return this},kn.x=function bd(i){return arguments.length?(this._x=i,this):this._x},kn.y=function Cd(i){return arguments.length?(this._y=i,this):this._y};var Wn="$";function La(){}function Go(i,r){var e=new La;if(i instanceof La)i.each(function(T,N){e.set(N,T)});else if(Array.isArray(i)){var o,n=-1,a=i.length;if(null==r)for(;++n<a;)e.set(n,i[n]);else for(;++n<a;)e.set(r(o=i[n],n,i),o)}else if(i)for(var v in i)e.set(v,i[v]);return e}La.prototype=Go.prototype={constructor:La,has:function(i){return Wn+i in this},get:function(i){return this[Wn+i]},set:function(i,r){return this[Wn+i]=r,this},remove:function(i){var r=Wn+i;return r in this&&delete this[r]},clear:function(){for(var i in this)i[0]===Wn&&delete this[i]},keys:function(){var i=[];for(var r in this)r[0]===Wn&&i.push(r.slice(1));return i},values:function(){var i=[];for(var r in this)r[0]===Wn&&i.push(this[r]);return i},entries:function(){var i=[];for(var r in this)r[0]===Wn&&i.push({key:r.slice(1),value:this[r]});return i},size:function(){var i=0;for(var r in this)r[0]===Wn&&++i;return i},empty:function(){for(var i in this)if(i[0]===Wn)return!1;return!0},each:function(i){for(var r in this)r[0]===Wn&&i(this[r],r.slice(1),this)}};const us=Go;function ka(){}var Er=us.prototype;function Ld(i){return i.index}function Ho(i,r){var e=i.get(r);if(!e)throw new Error("missing: "+r);return e}function Yo(i){var n,o,v,T,N,r=Ld,e=function tt(Ft){return 1/Math.min(T[Ft.source.index],T[Ft.target.index])},a=tn(30),G=1;function lt(Ft){for(var xt=0,Vt=i.length;xt<G;++xt)for(var Wt,_e,Se,pe,qe,ai,bi,Jt=0;Jt<Vt;++Jt)pe=(Se=(Wt=i[Jt]).target).x+Se.vx-(_e=Wt.source).x-_e.vx||vr(),qe=Se.y+Se.vy-_e.y-_e.vy||vr(),qe*=ai=((ai=Math.sqrt(pe*pe+qe*qe))-o[Jt])/ai*Ft*n[Jt],Se.vx-=(pe*=ai)*(bi=N[Jt]),Se.vy-=qe*bi,_e.vx+=pe*(bi=1-bi),_e.vy+=qe*bi}function ot(){if(v){var Ft,Wt,xt=v.length,Vt=i.length,Jt=us(v,r);for(Ft=0,T=new Array(xt);Ft<Vt;++Ft)(Wt=i[Ft]).index=Ft,"object"!=typeof Wt.source&&(Wt.source=Ho(Jt,Wt.source)),"object"!=typeof Wt.target&&(Wt.target=Ho(Jt,Wt.target)),T[Wt.source.index]=(T[Wt.source.index]||0)+1,T[Wt.target.index]=(T[Wt.target.index]||0)+1;for(Ft=0,N=new Array(Vt);Ft<Vt;++Ft)N[Ft]=T[(Wt=i[Ft]).source.index]/(T[Wt.source.index]+T[Wt.target.index]);n=new Array(Vt),wt(),o=new Array(Vt),kt()}}function wt(){if(v)for(var Ft=0,xt=i.length;Ft<xt;++Ft)n[Ft]=+e(i[Ft],Ft,i)}function kt(){if(v)for(var Ft=0,xt=i.length;Ft<xt;++Ft)o[Ft]=+a(i[Ft],Ft,i)}return null==i&&(i=[]),lt.initialize=function(Ft){v=Ft,ot()},lt.links=function(Ft){return arguments.length?(i=Ft,ot(),lt):i},lt.id=function(Ft){return arguments.length?(r=Ft,lt):r},lt.iterations=function(Ft){return arguments.length?(G=+Ft,lt):G},lt.strength=function(Ft){return arguments.length?(e="function"==typeof Ft?Ft:tn(+Ft),wt(),lt):e},lt.distance=function(Ft){return arguments.length?(a="function"==typeof Ft?Ft:tn(+Ft),kt(),lt):a},lt}function kd(i){return i.x}function Id(i){return i.y}ka.prototype=function Dd(i,r){var e=new ka;if(i instanceof ka)i.each(function(o){e.add(o)});else if(i){var n=-1,a=i.length;if(null==r)for(;++n<a;)e.add(i[n]);else for(;++n<a;)e.add(r(i[n],n,i))}return e}.prototype={constructor:ka,has:Er.has,add:function(i){return this[Wn+(i+="")]=i,this},remove:Er.remove,clear:Er.clear,values:Er.keys,size:Er.size,empty:Er.empty,each:Er.each};var Md=Math.PI*(3-Math.sqrt(5));function Wo(i){var r,e=1,n=.001,a=1-Math.pow(n,1/300),o=0,v=.6,T=us(),N=(0,lr.HT)(tt),G=(0,ya.Z)("tick","end");function tt(){lt(),G.call("tick",r),e<n&&(N.stop(),G.call("end",r))}function lt(kt){var Ft,Vt,xt=i.length;void 0===kt&&(kt=1);for(var Jt=0;Jt<kt;++Jt)for(e+=(o-e)*a,T.each(function(Wt){Wt(e)}),Ft=0;Ft<xt;++Ft)null==(Vt=i[Ft]).fx?Vt.x+=Vt.vx*=v:(Vt.x=Vt.fx,Vt.vx=0),null==Vt.fy?Vt.y+=Vt.vy*=v:(Vt.y=Vt.fy,Vt.vy=0);return r}function ot(){for(var xt,kt=0,Ft=i.length;kt<Ft;++kt){if((xt=i[kt]).index=kt,null!=xt.fx&&(xt.x=xt.fx),null!=xt.fy&&(xt.y=xt.fy),isNaN(xt.x)||isNaN(xt.y)){var Vt=10*Math.sqrt(kt),Jt=kt*Md;xt.x=Vt*Math.cos(Jt),xt.y=Vt*Math.sin(Jt)}(isNaN(xt.vx)||isNaN(xt.vy))&&(xt.vx=xt.vy=0)}}function wt(kt){return kt.initialize&&kt.initialize(i),kt}return null==i&&(i=[]),ot(),r={tick:lt,restart:function(){return N.restart(tt),r},stop:function(){return N.stop(),r},nodes:function(kt){return arguments.length?(i=kt,ot(),T.each(wt),r):i},alpha:function(kt){return arguments.length?(e=+kt,r):e},alphaMin:function(kt){return arguments.length?(n=+kt,r):n},alphaDecay:function(kt){return arguments.length?(a=+kt,r):+a},alphaTarget:function(kt){return arguments.length?(o=+kt,r):o},velocityDecay:function(kt){return arguments.length?(v=1-kt,r):1-v},force:function(kt,Ft){return arguments.length>1?(null==Ft?T.remove(kt):T.set(kt,wt(Ft)),r):T.get(kt)},find:function(kt,Ft,xt){var Wt,_e,Se,pe,qe,Vt=0,Jt=i.length;for(null==xt?xt=1/0:xt*=xt,Vt=0;Vt<Jt;++Vt)(Se=(Wt=kt-(pe=i[Vt]).x)*Wt+(_e=Ft-pe.y)*_e)<xt&&(qe=pe,xt=Se);return qe},on:function(kt,Ft){return arguments.length>1?(G.on(kt,Ft),r):G.on(kt)}}}function Xo(){var i,r,e,a,n=tn(-30),o=1,v=1/0,T=.81;function N(ot){var wt,kt=i.length,Ft=ls(i,kd,Id).visitAfter(tt);for(e=ot,wt=0;wt<kt;++wt)r=i[wt],Ft.visit(lt)}function G(){if(i){var ot,kt,wt=i.length;for(a=new Array(wt),ot=0;ot<wt;++ot)a[(kt=i[ot]).index]=+n(kt,ot,i)}}function tt(ot){var kt,Ft,Vt,Jt,Wt,wt=0,xt=0;if(ot.length){for(Vt=Jt=Wt=0;Wt<4;++Wt)(kt=ot[Wt])&&(Ft=Math.abs(kt.value))&&(wt+=kt.value,xt+=Ft,Vt+=Ft*kt.x,Jt+=Ft*kt.y);ot.x=Vt/xt,ot.y=Jt/xt}else{(kt=ot).x=kt.data.x,kt.y=kt.data.y;do{wt+=a[kt.data.index]}while(kt=kt.next)}ot.value=wt}function lt(ot,wt,kt,Ft){if(!ot.value)return!0;var xt=ot.x-r.x,Vt=ot.y-r.y,Jt=Ft-wt,Wt=xt*xt+Vt*Vt;if(Jt*Jt/T<Wt)return Wt<v&&(0===xt&&(Wt+=(xt=vr())*xt),0===Vt&&(Wt+=(Vt=vr())*Vt),Wt<o&&(Wt=Math.sqrt(o*Wt)),r.vx+=xt*ot.value*e/Wt,r.vy+=Vt*ot.value*e/Wt),!0;if(!(ot.length||Wt>=v)){(ot.data!==r||ot.next)&&(0===xt&&(Wt+=(xt=vr())*xt),0===Vt&&(Wt+=(Vt=vr())*Vt),Wt<o&&(Wt=Math.sqrt(o*Wt)));do{ot.data!==r&&(r.vx+=xt*(Jt=a[ot.data.index]*e/Wt),r.vy+=Vt*Jt)}while(ot=ot.next)}}return N.initialize=function(ot){i=ot,G()},N.strength=function(ot){return arguments.length?(n="function"==typeof ot?ot:tn(+ot),G(),N):n},N.distanceMin=function(ot){return arguments.length?(o=ot*ot,N):Math.sqrt(o)},N.distanceMax=function(ot){return arguments.length?(v=ot*ot,N):Math.sqrt(v)},N.theta=function(ot){return arguments.length?(T=ot*ot,N):Math.sqrt(T)},N}function Nd(i,r,e){var n,o,v,a=tn(.1);function T(G){for(var tt=0,lt=n.length;tt<lt;++tt){var ot=n[tt],wt=ot.x-r||1e-6,kt=ot.y-e||1e-6,Ft=Math.sqrt(wt*wt+kt*kt),xt=(v[tt]-Ft)*o[tt]*G/Ft;ot.vx+=wt*xt,ot.vy+=kt*xt}}function N(){if(n){var G,tt=n.length;for(o=new Array(tt),v=new Array(tt),G=0;G<tt;++G)v[G]=+i(n[G],G,n),o[G]=isNaN(v[G])?0:+a(n[G],G,n)}}return"function"!=typeof i&&(i=tn(+i)),null==r&&(r=0),null==e&&(e=0),T.initialize=function(G){n=G,N()},T.strength=function(G){return arguments.length?(a="function"==typeof G?G:tn(+G),N(),T):a},T.radius=function(G){return arguments.length?(i="function"==typeof G?G:tn(+G),N(),T):i},T.x=function(G){return arguments.length?(r=+G,T):r},T.y=function(G){return arguments.length?(e=+G,T):e},T}function Pd(i){var e,n,a,r=tn(.1);function o(T){for(var tt,N=0,G=e.length;N<G;++N)(tt=e[N]).vx+=(a[N]-tt.x)*n[N]*T}function v(){if(e){var T,N=e.length;for(n=new Array(N),a=new Array(N),T=0;T<N;++T)n[T]=isNaN(a[T]=+i(e[T],T,e))?0:+r(e[T],T,e)}}return"function"!=typeof i&&(i=tn(null==i?0:+i)),o.initialize=function(T){e=T,v()},o.strength=function(T){return arguments.length?(r="function"==typeof T?T:tn(+T),v(),o):r},o.x=function(T){return arguments.length?(i="function"==typeof T?T:tn(+T),v(),o):i},o}function Fd(i){var e,n,a,r=tn(.1);function o(T){for(var tt,N=0,G=e.length;N<G;++N)(tt=e[N]).vy+=(a[N]-tt.y)*n[N]*T}function v(){if(e){var T,N=e.length;for(n=new Array(N),a=new Array(N),T=0;T<N;++T)n[T]=isNaN(a[T]=+i(e[T],T,e))?0:+r(e[T],T,e)}}return"function"!=typeof i&&(i=tn(null==i?0:+i)),o.initialize=function(T){e=T,v()},o.strength=function(T){return arguments.length?(r="function"==typeof T?T:tn(+T),v(),o):r},o.y=function(T){return arguments.length?(i="function"==typeof T?T:tn(+T),v(),o):i},o}var Rd=s(67824);function Bd(i,r,e){var n=new lr.B7,a=r;return null==r?(n.restart(i,r,e),n):(r=+r,e=null==e?(0,lr.zO)():+e,n.restart(function o(v){v+=a,n.restart(o,a+=r,e),i(v)},r,e),n)}const Zd=["linkTemplate"],Vd=["nodeTemplate"],Gd=["clusterTemplate"],Ud=["defsTemplate"],zd=["miniMapNodeTemplate"],Hd=["nodeElement"],Yd=["linkElement"];function Wd(i,r){if(1&i&&(t.O4$(),t.GkF(0,14)),2&i){const e=t.oxw(2);t.Q6J("ngTemplateOutlet",e.defsTemplate)}}function Xd(i,r){if(1&i&&(t.O4$(),t._UZ(0,"path",15)),2&i){const e=r.$implicit;t.uIk("d",e.textPath)("id",e.id)}}const la=function(i){return{$implicit:i}};function $d(i,r){if(1&i&&(t.O4$(),t.GkF(0,20)),2&i){const e=t.oxw().$implicit,n=t.oxw(2);t.Q6J("ngTemplateOutlet",n.clusterTemplate)("ngTemplateOutletContext",t.VKq(2,la,e))}}function Qd(i,r){if(1&i&&(t.O4$(),t.TgZ(0,"g",21),t._UZ(1,"rect"),t.TgZ(2,"text",22),t._uU(3),t.qZA()()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.uIk("width",e.dimension.width)("height",e.dimension.height)("fill",null==e.data?null:e.data.color),t.xp6(1),t.uIk("x",10)("y",e.dimension.height/2),t.xp6(1),t.hij(" ",e.label," ")}}function jd(i,r){if(1&i){const e=t.EpF();t.O4$(),t.TgZ(0,"g",16,17),t.NdJ("click",function(){const o=t.CHM(e).$implicit,v=t.oxw(2);return t.KtG(v.onClick(o))}),t.YNc(2,$d,1,4,"ng-container",18),t.YNc(3,Qd,4,6,"g",19),t.qZA()}if(2&i){const e=r.$implicit,n=t.oxw(2);t.ekj("old-node",n.animate&&n.oldClusters.has(e.id)),t.Q6J("id",e.id),t.uIk("transform",e.transform),t.xp6(2),t.Q6J("ngIf",n.clusterTemplate),t.xp6(1),t.Q6J("ngIf",!n.clusterTemplate)}}function Jd(i,r){if(1&i&&(t.O4$(),t.GkF(0,20)),2&i){const e=t.oxw().$implicit,n=t.oxw(2);t.Q6J("ngTemplateOutlet",n.linkTemplate)("ngTemplateOutletContext",t.VKq(2,la,e))}}function Kd(i,r){if(1&i&&(t.O4$(),t._UZ(0,"path",26)),2&i){const e=t.oxw().$implicit;t.uIk("d",e.line)}}function qd(i,r){if(1&i&&(t.O4$(),t.TgZ(0,"g",23,24),t.YNc(2,Jd,1,4,"ng-container",18),t.YNc(3,Kd,1,1,"path",25),t.qZA()),2&i){const e=r.$implicit,n=t.oxw(2);t.Q6J("id",e.id),t.xp6(2),t.Q6J("ngIf",n.linkTemplate),t.xp6(1),t.Q6J("ngIf",!n.linkTemplate)}}function tp(i,r){if(1&i&&(t.O4$(),t.GkF(0,20)),2&i){const e=t.oxw().$implicit,n=t.oxw(2);t.Q6J("ngTemplateOutlet",n.nodeTemplate)("ngTemplateOutletContext",t.VKq(2,la,e))}}function ep(i,r){if(1&i&&(t.O4$(),t._UZ(0,"circle",30)),2&i){const e=t.oxw().$implicit;t.uIk("cx",e.dimension.width/2)("cy",e.dimension.height/2)("fill",null==e.data?null:e.data.color)}}function ip(i,r){if(1&i){const e=t.EpF();t.O4$(),t.TgZ(0,"g",27,28),t.NdJ("click",function(){const o=t.CHM(e).$implicit,v=t.oxw(2);return t.KtG(v.onClick(o))})("mousedown",function(a){const v=t.CHM(e).$implicit,T=t.oxw(2);return t.KtG(T.onNodeMouseDown(a,v))}),t.YNc(2,tp,1,4,"ng-container",18),t.YNc(3,ep,1,3,"circle",29),t.qZA()}if(2&i){const e=r.$implicit,n=t.oxw(2);t.ekj("old-node",n.animate&&n.oldNodes.has(e.id)),t.Q6J("id",e.id),t.uIk("transform",e.transform),t.xp6(2),t.Q6J("ngIf",n.nodeTemplate),t.xp6(1),t.Q6J("ngIf",!n.nodeTemplate)}}function np(i,r){if(1&i){const e=t.EpF();t.O4$(),t.TgZ(0,"g",4),t.NdJ("touchstart",function(a){t.CHM(e);const o=t.oxw();return t.KtG(o.onTouchStart(a))})("touchend",function(a){t.CHM(e);const o=t.oxw();return t.KtG(o.onTouchEnd(a))}),t.TgZ(1,"defs"),t.YNc(2,Wd,1,1,"ng-container",5),t.YNc(3,Xd,1,2,"path",6),t.qZA(),t.TgZ(4,"rect",7),t.NdJ("mousedown",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.isPanning=!0)}),t.qZA(),t.Hsn(5),t.TgZ(6,"g",8),t.YNc(7,jd,4,6,"g",9),t.qZA(),t.TgZ(8,"g",10),t.YNc(9,qd,4,3,"g",11),t.qZA(),t.TgZ(10,"g",12),t.YNc(11,ip,4,6,"g",13),t.qZA()()}if(2&i){const e=t.oxw();t.uIk("transform",e.transform),t.xp6(2),t.Q6J("ngIf",e.defsTemplate),t.xp6(1),t.Q6J("ngForOf",e.graph.edges),t.xp6(1),t.uIk("width",100*e.dims.width)("height",100*e.dims.height)("transform","translate("+50*(-e.dims.width||0)+","+50*(-e.dims.height||0)+")"),t.xp6(3),t.Q6J("ngForOf",e.graph.clusters)("ngForTrackBy",e.trackNodeBy),t.xp6(2),t.Q6J("ngForOf",e.graph.edges)("ngForTrackBy",e.trackLinkBy),t.xp6(2),t.Q6J("ngForOf",e.graph.nodes)("ngForTrackBy",e.trackNodeBy)}}function rp(i,r){if(1&i&&(t.O4$(),t.GkF(0,20)),2&i){const e=t.oxw().$implicit,n=t.oxw(2);t.Q6J("ngTemplateOutlet",n.miniMapNodeTemplate)("ngTemplateOutletContext",t.VKq(2,la,e))}}function ap(i,r){if(1&i&&(t.O4$(),t.GkF(0,20)),2&i){const e=t.oxw().$implicit,n=t.oxw(2);t.Q6J("ngTemplateOutlet",n.nodeTemplate)("ngTemplateOutletContext",t.VKq(2,la,e))}}function sp(i,r){if(1&i&&(t.O4$(),t._UZ(0,"circle",30)),2&i){const e=t.oxw().$implicit,n=t.oxw(2);t.uIk("cx",e.dimension.width/2/n.minimapScaleCoefficient)("cy",e.dimension.height/2/n.minimapScaleCoefficient)("fill",null==e.data?null:e.data.color)}}function op(i,r){if(1&i&&(t.O4$(),t.TgZ(0,"g",36,28),t.YNc(2,rp,1,4,"ng-container",18),t.YNc(3,ap,1,4,"ng-container",18),t.YNc(4,sp,1,3,"circle",29),t.qZA()),2&i){const e=r.$implicit,n=t.oxw(2);t.ekj("old-node",n.animate&&n.oldNodes.has(e.id)),t.Q6J("id",e.id),t.uIk("transform",e.transform),t.xp6(2),t.Q6J("ngIf",n.miniMapNodeTemplate),t.xp6(1),t.Q6J("ngIf",!n.miniMapNodeTemplate&&n.nodeTemplate),t.xp6(1),t.Q6J("ngIf",!n.nodeTemplate&&!n.miniMapNodeTemplate)}}function lp(i,r){if(1&i){const e=t.EpF();t.O4$(),t.TgZ(0,"g",31)(1,"rect",32),t.NdJ("mousedown",function(a){t.CHM(e);const o=t.oxw();return t.KtG(o.onMinimapPanTo(a))}),t.qZA(),t.TgZ(2,"g")(3,"g",33),t.YNc(4,op,5,7,"g",34),t.qZA(),t.TgZ(5,"rect",35),t.NdJ("mousedown",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onMinimapDragMouseDown())}),t.qZA()()()}if(2&i){const e=t.oxw();t.uIk("transform",e.minimapTransform)("clip-path","url(#"+e.minimapClipPathId+")"),t.xp6(1),t.uIk("width",e.graphDims.width/e.minimapScaleCoefficient)("height",e.graphDims.height/e.minimapScaleCoefficient),t.xp6(1),t.Udp("transform","translate("+-e.minimapOffsetX/e.minimapScaleCoefficient+"px,"+-e.minimapOffsetY/e.minimapScaleCoefficient+"px)"),t.xp6(1),t.Udp("transform","scale("+1/e.minimapScaleCoefficient+")"),t.xp6(1),t.Q6J("ngForOf",e.graph.nodes)("ngForTrackBy",e.trackNodeBy),t.xp6(1),t.ekj("panning",e.isMinimapPanning),t.uIk("transform","translate("+e.panOffsetX/e.zoomLevel/-e.minimapScaleCoefficient+","+e.panOffsetY/e.zoomLevel/-e.minimapScaleCoefficient+")")("width",e.width/e.minimapScaleCoefficient/e.zoomLevel)("height",e.height/e.minimapScaleCoefficient/e.zoomLevel)}}const cp=["*"],$o={};function hr(){let i=("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4);return i=`a${i}`,$o[i]?hr():($o[i]=!0,i)}var Br=(()=>{return(i=Br||(Br={})).Both="both",i.Horizontal="horizontal",i.Vertical="vertical",Br;var i})(),Zr=(()=>{return(i=Zr||(Zr={})).UpperLeft="UpperLeft",i.UpperRight="UpperRight",Zr;var i})();function up(i,r,e){e=e||{};let n,a,o,v=null,T=0;function N(){T=!1===e.leading?0:+new Date,v=null,o=i.apply(n,a)}return function(...G){const tt=+new Date;!T&&!1===e.leading&&(T=tt);const lt=r-(tt-T);return n=this,a=G,lt<=0?(clearTimeout(v),v=null,T=tt,o=i.apply(n,a)):!v&&!1!==e.trailing&&(v=setTimeout(N,lt)),o}}function hp(i,r){return function(n,a,o){return{configurable:!0,enumerable:o.enumerable,get:function(){return Object.defineProperty(this,a,{configurable:!0,enumerable:o.enumerable,value:up(o.value,i,r)}),this[a]}}}}const Qo=[{name:"vivid",selectable:!0,group:"Ordinal",domain:["#647c8a","#3f51b5","#2196f3","#00b862","#afdf0a","#a7b61a","#f3e562","#ff9800","#ff5722","#ff4514"]},{name:"natural",selectable:!0,group:"Ordinal",domain:["#bf9d76","#e99450","#d89f59","#f2dfa7","#a5d7c6","#7794b1","#afafaf","#707160","#ba9383","#d9d5c3"]},{name:"cool",selectable:!0,group:"Ordinal",domain:["#a8385d","#7aa3e5","#a27ea8","#aae3f5","#adcded","#a95963","#8796c0","#7ed3ed","#50abcc","#ad6886"]},{name:"fire",selectable:!0,group:"Ordinal",domain:["#ff3d00","#bf360c","#ff8f00","#ff6f00","#ff5722","#e65100","#ffca28","#ffab00"]},{name:"solar",selectable:!0,group:"Continuous",domain:["#fff8e1","#ffecb3","#ffe082","#ffd54f","#ffca28","#ffc107","#ffb300","#ffa000","#ff8f00","#ff6f00"]},{name:"air",selectable:!0,group:"Continuous",domain:["#e1f5fe","#b3e5fc","#81d4fa","#4fc3f7","#29b6f6","#03a9f4","#039be5","#0288d1","#0277bd","#01579b"]},{name:"aqua",selectable:!0,group:"Continuous",domain:["#e0f7fa","#b2ebf2","#80deea","#4dd0e1","#26c6da","#00bcd4","#00acc1","#0097a7","#00838f","#006064"]},{name:"flame",selectable:!1,group:"Ordinal",domain:["#A10A28","#D3342D","#EF6D49","#FAAD67","#FDDE90","#DBED91","#A9D770","#6CBA67","#2C9653","#146738"]},{name:"ocean",selectable:!1,group:"Ordinal",domain:["#1D68FB","#33C0FC","#4AFFFE","#AFFFFF","#FFFC63","#FDBD2D","#FC8A25","#FA4F1E","#FA141B","#BA38D1"]},{name:"forest",selectable:!1,group:"Ordinal",domain:["#55C22D","#C1F33D","#3CC099","#AFFFFF","#8CFC9D","#76CFFA","#BA60FB","#EE6490","#C42A1C","#FC9F32"]},{name:"horizon",selectable:!1,group:"Ordinal",domain:["#2597FB","#65EBFD","#99FDD0","#FCEE4B","#FEFCFA","#FDD6E3","#FCB1A8","#EF6F7B","#CB96E8","#EFDEE0"]},{name:"neons",selectable:!1,group:"Ordinal",domain:["#FF3333","#FF33FF","#CC33FF","#0000FF","#33CCFF","#33FFFF","#33FF66","#CCFF33","#FFCC00","#FF6600"]},{name:"picnic",selectable:!1,group:"Ordinal",domain:["#FAC51D","#66BD6D","#FAA026","#29BB9C","#E96B56","#55ACD2","#B7332F","#2C83C9","#9166B8","#92E7E8"]},{name:"night",selectable:!1,group:"Ordinal",domain:["#2B1B5A","#501356","#183356","#28203F","#391B3C","#1E2B3C","#120634","#2D0432","#051932","#453080","#75267D","#2C507D","#4B3880","#752F7D","#35547D"]},{name:"nightLights",selectable:!1,group:"Ordinal",domain:["#4e31a5","#9c25a7","#3065ab","#57468b","#904497","#46648b","#32118d","#a00fb3","#1052a2","#6e51bd","#b63cc3","#6c97cb","#8671c1","#b455be","#7496c3"]}];class dp{constructor(r,e,n){"string"==typeof r&&(r=Qo.find(a=>a.name===r)),this.colorDomain=r.domain,this.domain=e,this.customColors=n,this.scale=this.generateColorScheme(r,this.domain)}generateColorScheme(r,e){return"string"==typeof r&&(r=Qo.find(n=>n.name===r)),os().range(r.domain).domain(e)}getColor(r){if(null==r)throw new Error("Value can not be null");if("function"==typeof this.customColors)return this.customColors(r);const e=r.toString();let n;return this.customColors&&this.customColors.length>0&&(n=this.customColors.find(a=>a.name.toLowerCase()===e.toLowerCase())),n?n.value:this.scale(r)}}let fp=(()=>{class i{constructor(e,n){this.element=e,this.zone=n,this.visible=new t.vpe,this.isVisible=!1,this.runCheck()}destroy(){clearTimeout(this.timeout)}onVisibilityChange(){this.zone.run(()=>{this.isVisible=!0,this.visible.emit(!0)})}runCheck(){const e=()=>{if(!this.element)return;const{offsetHeight:n,offsetWidth:a}=this.element.nativeElement;n&&a?(clearTimeout(this.timeout),this.onVisibilityChange()):(clearTimeout(this.timeout),this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>e(),100)}))};this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>e())})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq),t.Y36(t.R0b))},i.\u0275dir=t.lG2({type:i,selectors:[["visibility-observer"]],outputs:{visible:"visible"}}),i})();var Vr=(()=>{return(i=Vr||(Vr={})).LEFT_TO_RIGHT="LR",i.RIGHT_TO_LEFT="RL",i.TOP_TO_BOTTOM="TB",i.BOTTOM_TO_TOM="BT",Vr;var i})();function Gr(i){return"string"==typeof i?{id:i,x:0,y:0}:i}function Jo(i,r){return"number"==typeof r?i[r]:r}const Ko={dagre:class mp{constructor(){this.defaultSettings={orientation:Vr.LEFT_TO_RIGHT,marginX:20,marginY:20,edgePadding:100,rankPadding:100,nodePadding:50,multigraph:!0,compound:!0},this.settings={}}run(r){this.createDagreGraph(r),Rr.layout(this.dagreGraph),r.edgeLabels=this.dagreGraph._edgeLabels;for(const e in this.dagreGraph._nodes){const n=this.dagreGraph._nodes[e],a=r.nodes.find(o=>o.id===n.id);a.position={x:n.x,y:n.y},a.dimension={width:n.width,height:n.height}}return r}updateEdge(r,e){const n=r.nodes.find(N=>N.id===e.source),a=r.nodes.find(N=>N.id===e.target),o=n.position.y<=a.position.y?-1:1;return e.points=[{x:n.position.x,y:n.position.y-o*(n.dimension.height/2)},{x:a.position.x,y:a.position.y+o*(a.dimension.height/2)}],r}createDagreGraph(r){const e=Object.assign({},this.defaultSettings,this.settings);this.dagreGraph=new Rr.graphlib.Graph({compound:e.compound,multigraph:e.multigraph}),this.dagreGraph.setGraph({rankdir:e.orientation,marginx:e.marginX,marginy:e.marginY,edgesep:e.edgePadding,ranksep:e.rankPadding,nodesep:e.nodePadding,align:e.align,acyclicer:e.acyclicer,ranker:e.ranker,multigraph:e.multigraph,compound:e.compound}),this.dagreGraph.setDefaultEdgeLabel(()=>({})),this.dagreNodes=r.nodes.map(n=>{const a=Object.assign({},n);return a.width=n.dimension.width,a.height=n.dimension.height,a.x=n.position.x,a.y=n.position.y,a}),this.dagreEdges=r.edges.map(n=>{const a=Object.assign({},n);return a.id||(a.id=hr()),a});for(const n of this.dagreNodes)n.width||(n.width=20),n.height||(n.height=30),this.dagreGraph.setNode(n.id,n);for(const n of this.dagreEdges)e.multigraph?this.dagreGraph.setEdge(n.source,n.target,n,n.id):this.dagreGraph.setEdge(n.source,n.target);return this.dagreGraph}},dagreCluster:class gp{constructor(){this.defaultSettings={orientation:Vr.LEFT_TO_RIGHT,marginX:20,marginY:20,edgePadding:100,rankPadding:100,nodePadding:50,multigraph:!0,compound:!0},this.settings={}}run(r){this.createDagreGraph(r),Rr.layout(this.dagreGraph),r.edgeLabels=this.dagreGraph._edgeLabels;const e=n=>{const a=this.dagreGraph._nodes[n.id];return{...n,position:{x:a.x,y:a.y},dimension:{width:a.width,height:a.height}}};return r.clusters=(r.clusters||[]).map(e),r.nodes=r.nodes.map(e),r}updateEdge(r,e){const n=r.nodes.find(N=>N.id===e.source),a=r.nodes.find(N=>N.id===e.target),o=n.position.y<=a.position.y?-1:1;return e.points=[{x:n.position.x,y:n.position.y-o*(n.dimension.height/2)},{x:a.position.x,y:a.position.y+o*(a.dimension.height/2)}],r}createDagreGraph(r){const e=Object.assign({},this.defaultSettings,this.settings);this.dagreGraph=new Rr.graphlib.Graph({compound:e.compound,multigraph:e.multigraph}),this.dagreGraph.setGraph({rankdir:e.orientation,marginx:e.marginX,marginy:e.marginY,edgesep:e.edgePadding,ranksep:e.rankPadding,nodesep:e.nodePadding,align:e.align,acyclicer:e.acyclicer,ranker:e.ranker,multigraph:e.multigraph,compound:e.compound}),this.dagreGraph.setDefaultEdgeLabel(()=>({})),this.dagreNodes=r.nodes.map(n=>{const a=Object.assign({},n);return a.width=n.dimension.width,a.height=n.dimension.height,a.x=n.position.x,a.y=n.position.y,a}),this.dagreClusters=r.clusters||[],this.dagreEdges=r.edges.map(n=>{const a=Object.assign({},n);return a.id||(a.id=hr()),a});for(const n of this.dagreNodes)this.dagreGraph.setNode(n.id,n);for(const n of this.dagreClusters)this.dagreGraph.setNode(n.id,n),n.childNodeIds.forEach(a=>{this.dagreGraph.setParent(a,n.id)});for(const n of this.dagreEdges)e.multigraph?this.dagreGraph.setEdge(n.source,n.target,n,n.id):this.dagreGraph.setEdge(n.source,n.target);return this.dagreGraph}},dagreNodesOnly:class vp{constructor(){this.defaultSettings={orientation:Vr.LEFT_TO_RIGHT,marginX:20,marginY:20,edgePadding:100,rankPadding:100,nodePadding:50,curveDistance:20,multigraph:!0,compound:!0},this.settings={}}run(r){this.createDagreGraph(r),Rr.layout(this.dagreGraph),r.edgeLabels=this.dagreGraph._edgeLabels;for(const e in this.dagreGraph._nodes){const n=this.dagreGraph._nodes[e],a=r.nodes.find(o=>o.id===n.id);a.position={x:n.x,y:n.y},a.dimension={width:n.width,height:n.height}}for(const e of r.edges)this.updateEdge(r,e);return r}updateEdge(r,e){const n=r.nodes.find(kt=>kt.id===e.source),a=r.nodes.find(kt=>kt.id===e.target),o="BT"===this.settings.orientation||"TB"===this.settings.orientation?"y":"x",v="y"===o?"x":"y",T="y"===o?"height":"width",N=n.position[o]<=a.position[o]?-1:1,G={[v]:n.position[v],[o]:n.position[o]-N*(n.dimension[T]/2)},tt={[v]:a.position[v],[o]:a.position[o]+N*(a.dimension[T]/2)},lt=this.settings.curveDistance||this.defaultSettings.curveDistance;e.points=[G,{[v]:G[v],[o]:G[o]-N*lt},{[v]:tt[v],[o]:tt[o]+N*lt},tt];const wt=r.edgeLabels[`${e.source}\x01${e.target}\x01\0`];return wt&&(wt.points=e.points),r}createDagreGraph(r){const e=Object.assign({},this.defaultSettings,this.settings);this.dagreGraph=new Rr.graphlib.Graph({compound:e.compound,multigraph:e.multigraph}),this.dagreGraph.setGraph({rankdir:e.orientation,marginx:e.marginX,marginy:e.marginY,edgesep:e.edgePadding,ranksep:e.rankPadding,nodesep:e.nodePadding,align:e.align,acyclicer:e.acyclicer,ranker:e.ranker,multigraph:e.multigraph,compound:e.compound}),this.dagreGraph.setDefaultEdgeLabel(()=>({})),this.dagreNodes=r.nodes.map(n=>{const a=Object.assign({},n);return a.width=n.dimension.width,a.height=n.dimension.height,a.x=n.position.x,a.y=n.position.y,a}),this.dagreEdges=r.edges.map(n=>{const a=Object.assign({},n);return a.id||(a.id=hr()),a});for(const n of this.dagreNodes)n.width||(n.width=20),n.height||(n.height=30),this.dagreGraph.setNode(n.id,n);for(const n of this.dagreEdges)e.multigraph?this.dagreGraph.setEdge(n.source,n.target,n,n.id):this.dagreGraph.setEdge(n.source,n.target);return this.dagreGraph}},d3ForceDirected:class xp{constructor(){this.defaultSettings={force:Wo().force("charge",Xo().strength(-150)).force("collide",Vo(5)),forceLink:Yo().id(r=>r.id).distance(()=>100)},this.settings={},this.outputGraph$=new Le.x}run(r){return this.inputGraph=r,this.d3Graph={nodes:[...this.inputGraph.nodes.map(e=>({...e}))],edges:[...this.inputGraph.edges.map(e=>({...e}))]},this.outputGraph={nodes:[],edges:[],edgeLabels:[]},this.outputGraph$.next(this.outputGraph),this.settings=Object.assign({},this.defaultSettings,this.settings),this.settings.force&&this.settings.force.nodes(this.d3Graph.nodes).force("link",this.settings.forceLink.links(this.d3Graph.edges)).alpha(.5).restart().on("tick",()=>{this.outputGraph$.next(this.d3GraphToOutputGraph(this.d3Graph))}),this.outputGraph$.asObservable()}updateEdge(r,e){const n=Object.assign({},this.defaultSettings,this.settings);return n.force&&n.force.nodes(this.d3Graph.nodes).force("link",n.forceLink.links(this.d3Graph.edges)).alpha(.5).restart().on("tick",()=>{this.outputGraph$.next(this.d3GraphToOutputGraph(this.d3Graph))}),this.outputGraph$.asObservable()}d3GraphToOutputGraph(r){return this.outputGraph.nodes=this.d3Graph.nodes.map(e=>({...e,id:e.id||hr(),position:{x:e.x,y:e.y},dimension:{width:e.dimension&&e.dimension.width||20,height:e.dimension&&e.dimension.height||20},transform:`translate(${e.x-(e.dimension&&e.dimension.width||20)/2||0}, ${e.y-(e.dimension&&e.dimension.height||20)/2||0})`})),this.outputGraph.edges=this.d3Graph.edges.map(e=>({...e,source:Gr(e.source).id,target:Gr(e.target).id,points:[{x:Gr(e.source).x,y:Gr(e.source).y},{x:Gr(e.target).x,y:Gr(e.target).y}]})),this.outputGraph.edgeLabels=this.outputGraph.edges,this.outputGraph}onDragStart(r,e){this.settings.force.alphaTarget(.3).restart();const n=this.d3Graph.nodes.find(a=>a.id===r.id);!n||(this.draggingStart={x:e.x-n.x,y:e.y-n.y},n.fx=e.x-this.draggingStart.x,n.fy=e.y-this.draggingStart.y)}onDrag(r,e){if(!r)return;const n=this.d3Graph.nodes.find(a=>a.id===r.id);!n||(n.fx=e.x-this.draggingStart.x,n.fy=e.y-this.draggingStart.y)}onDragEnd(r,e){if(!r)return;const n=this.d3Graph.nodes.find(a=>a.id===r.id);!n||(this.settings.force.alphaTarget(0),n.fx=void 0,n.fy=void 0)}},colaForceDirected:class yp{constructor(){this.defaultSettings={force:(0,Rd.d3adaptor)({...x,...c,..._}).linkDistance(150).avoidOverlaps(!0),viewDimensions:{width:600,height:600}},this.settings={},this.outputGraph$=new Le.x}run(r){return this.inputGraph=r,this.inputGraph.clusters||(this.inputGraph.clusters=[]),this.internalGraph={nodes:[...this.inputGraph.nodes.map(e=>({...e,width:e.dimension?e.dimension.width:20,height:e.dimension?e.dimension.height:20}))],groups:[...this.inputGraph.clusters.map(e=>({padding:5,groups:e.childNodeIds.map(n=>this.inputGraph.clusters.findIndex(a=>a.id===n)).filter(n=>n>=0),leaves:e.childNodeIds.map(n=>this.inputGraph.nodes.findIndex(a=>a.id===n)).filter(n=>n>=0)}))],links:[...this.inputGraph.edges.map(e=>{const n=this.inputGraph.nodes.findIndex(o=>e.source===o.id),a=this.inputGraph.nodes.findIndex(o=>e.target===o.id);if(-1!==n&&-1!==a)return{...e,source:n,target:a}}).filter(e=>!!e)],groupLinks:[...this.inputGraph.edges.map(e=>{const n=this.inputGraph.nodes.findIndex(o=>e.source===o.id),a=this.inputGraph.nodes.findIndex(o=>e.target===o.id);if(!(n>=0&&a>=0))return e}).filter(e=>!!e)]},this.outputGraph={nodes:[],clusters:[],edges:[],edgeLabels:[]},this.outputGraph$.next(this.outputGraph),this.settings=Object.assign({},this.defaultSettings,this.settings),this.settings.force&&(this.settings.force=this.settings.force.nodes(this.internalGraph.nodes).groups(this.internalGraph.groups).links(this.internalGraph.links).alpha(.5).on("tick",()=>{this.settings.onTickListener&&this.settings.onTickListener(this.internalGraph),this.outputGraph$.next(this.internalGraphToOutputGraph(this.internalGraph))}),this.settings.viewDimensions&&(this.settings.force=this.settings.force.size([this.settings.viewDimensions.width,this.settings.viewDimensions.height])),this.settings.forceModifierFn&&(this.settings.force=this.settings.forceModifierFn(this.settings.force)),this.settings.force.start()),this.outputGraph$.asObservable()}updateEdge(r,e){const n=Object.assign({},this.defaultSettings,this.settings);return n.force&&n.force.start(),this.outputGraph$.asObservable()}internalGraphToOutputGraph(r){return this.outputGraph.nodes=r.nodes.map(e=>({...e,id:e.id||hr(),position:{x:e.x,y:e.y},dimension:{width:e.dimension&&e.dimension.width||20,height:e.dimension&&e.dimension.height||20},transform:`translate(${e.x-(e.dimension&&e.dimension.width||20)/2||0}, ${e.y-(e.dimension&&e.dimension.height||20)/2||0})`})),this.outputGraph.edges=r.links.map(e=>{const n=Jo(r.nodes,e.source),a=Jo(r.nodes,e.target);return{...e,source:n.id,target:a.id,points:[n.bounds.rayIntersection(a.bounds.cx(),a.bounds.cy()),a.bounds.rayIntersection(n.bounds.cx(),n.bounds.cy())]}}).concat(r.groupLinks.map(e=>{const n=r.nodes.find(T=>T.id===e.source),a=r.nodes.find(T=>T.id===e.target),o=n||r.groups.find(T=>T.id===e.source),v=a||r.groups.find(T=>T.id===e.target);return{...e,source:o.id,target:v.id,points:[o.bounds.rayIntersection(v.bounds.cx(),v.bounds.cy()),v.bounds.rayIntersection(o.bounds.cx(),o.bounds.cy())]}})),this.outputGraph.clusters=r.groups.map((e,n)=>({...this.inputGraph.clusters[n],dimension:{width:e.bounds?e.bounds.width():20,height:e.bounds?e.bounds.height():20},position:{x:e.bounds?e.bounds.x+e.bounds.width()/2:0,y:e.bounds?e.bounds.y+e.bounds.height()/2:0}})),this.outputGraph.edgeLabels=this.outputGraph.edges,this.outputGraph}onDragStart(r,e){const n=this.outputGraph.nodes.findIndex(o=>o.id===r.id),a=this.internalGraph.nodes[n];!a||(this.draggingStart={x:a.x-e.x,y:a.y-e.y},a.fixed=1,this.settings.force.start())}onDrag(r,e){if(!r)return;const n=this.outputGraph.nodes.findIndex(o=>o.id===r.id),a=this.internalGraph.nodes[n];!a||(a.x=this.draggingStart.x+e.x,a.y=this.draggingStart.y+e.y)}onDragEnd(r,e){if(!r)return;const n=this.outputGraph.nodes.findIndex(o=>o.id===r.id),a=this.internalGraph.nodes[n];!a||(a.fixed=0)}}};let qo=(()=>{class i{getLayout(e){if(Ko[e])return new Ko[e];throw new Error(`Unknown layout type '${e}'`)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})(),bp=(()=>{class i{constructor(){this.mouseWheelUp=new t.vpe,this.mouseWheelDown=new t.vpe}onMouseWheelChrome(e){this.mouseWheelFunc(e)}onMouseWheelFirefox(e){this.mouseWheelFunc(e)}onWheel(e){this.mouseWheelFunc(e)}onMouseWheelIE(e){this.mouseWheelFunc(e)}mouseWheelFunc(e){window.event&&(e=window.event);const n=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail||e.deltaY||e.deltaX)),o=e.wheelDelta?n<0:n>0;(e.wheelDelta?n>0:n<0)?this.mouseWheelUp.emit(e):o&&this.mouseWheelDown.emit(e),e.returnValue=!1,e.preventDefault&&e.preventDefault()}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=t.lG2({type:i,selectors:[["","mouseWheel",""]],hostBindings:function(e,n){1&e&&t.NdJ("mousewheel",function(o){return n.onMouseWheelChrome(o)})("DOMMouseScroll",function(o){return n.onMouseWheelFirefox(o)})("wheel",function(o){return n.onWheel(o)})("onmousewheel",function(o){return n.onMouseWheelIE(o)})},outputs:{mouseWheelUp:"mouseWheelUp",mouseWheelDown:"mouseWheelDown"}}),i})(),Tp=(()=>{class i{constructor(e,n,a,o){this.el=e,this.zone=n,this.cd=a,this.layoutService=o,this.nodes=[],this.clusters=[],this.links=[],this.activeEntries=[],this.draggingEnabled=!0,this.panningEnabled=!0,this.panningAxis=Br.Both,this.enableZoom=!0,this.zoomSpeed=.1,this.minZoomLevel=.1,this.maxZoomLevel=4,this.autoZoom=!1,this.panOnZoom=!0,this.animate=!1,this.autoCenter=!1,this.enableTrackpadSupport=!1,this.showMiniMap=!1,this.miniMapMaxWidth=100,this.miniMapPosition=Zr.UpperRight,this.scheme="cool",this.animations=!0,this.select=new t.vpe,this.activate=new t.vpe,this.deactivate=new t.vpe,this.zoomChange=new t.vpe,this.clickHandler=new t.vpe,this.isMouseMoveCalled=!1,this.graphSubscription=new Oo.w0,this.subscriptions=[],this.isPanning=!1,this.isDragging=!1,this.initialized=!1,this.graphDims={width:0,height:0},this._oldLinks=[],this.oldNodes=new Set,this.oldClusters=new Set,this.transformationMatrix={a:1,c:0,e:0,b:0,d:1,f:0},this._touchLastX=null,this._touchLastY=null,this.minimapScaleCoefficient=3,this.minimapOffsetX=0,this.minimapOffsetY=0,this.isMinimapPanning=!1,this.groupResultsBy=v=>v.label}get zoomLevel(){return this.transformationMatrix.a}set zoomLevel(e){this.zoomTo(Number(e))}get panOffsetX(){return this.transformationMatrix.e}set panOffsetX(e){this.panTo(Number(e),null)}get panOffsetY(){return this.transformationMatrix.f}set panOffsetY(e){this.panTo(null,Number(e))}ngOnInit(){this.update$&&this.subscriptions.push(this.update$.subscribe(()=>{this.update()})),this.center$&&this.subscriptions.push(this.center$.subscribe(()=>{this.center()})),this.zoomToFit$&&this.subscriptions.push(this.zoomToFit$.subscribe(()=>{this.zoomToFit()})),this.panToNode$&&this.subscriptions.push(this.panToNode$.subscribe(e=>{this.panToNodeId(e)})),this.minimapClipPathId=`minimapClip${hr()}`}ngOnChanges(e){this.basicUpdate();const{layoutSettings:a}=e;this.setLayout(this.layout),a&&this.setLayoutSettings(this.layoutSettings),this.update()}setLayout(e){this.initialized=!1,e||(e="dagre"),"string"==typeof e&&(this.layout=this.layoutService.getLayout(e),this.setLayoutSettings(this.layoutSettings))}setLayoutSettings(e){this.layout&&"string"!=typeof this.layout&&(this.layout.settings=e)}ngOnDestroy(){this.unbindEvents(),this.visibilityObserver&&(this.visibilityObserver.visible.unsubscribe(),this.visibilityObserver.destroy());for(const e of this.subscriptions)e.unsubscribe();this.subscriptions=null}ngAfterViewInit(){this.bindWindowResizeEvent(),this.visibilityObserver=new fp(this.el,this.zone),this.visibilityObserver.visible.subscribe(this.update.bind(this)),setTimeout(()=>this.update())}update(){this.basicUpdate(),this.curve||(this.curve=hu.beta(1)),this.zone.run(()=>{this.dims=function pp({width:i,height:r}){let e=i,n=r;return e=Math.max(0,e),n=Math.max(0,n),{width:Math.floor(e),height:Math.floor(n)}}({width:this.width,height:this.height}),this.seriesDomain=this.getSeriesDomain(),this.setColors(),this.createGraph(),this.updateTransform(),this.initialized=!0})}createGraph(){this.graphSubscription.unsubscribe(),this.graphSubscription=new Oo.w0;const e=n=>(n.meta||(n.meta={}),n.id||(n.id=hr()),n.dimension?n.meta.forceDimensions=void 0===n.meta.forceDimensions||n.meta.forceDimensions:(n.dimension={width:this.nodeWidth?this.nodeWidth:30,height:this.nodeHeight?this.nodeHeight:30},n.meta.forceDimensions=!1),n.position={x:0,y:0},n.data=n.data?n.data:{},n);this.graph={nodes:this.nodes.length>0?[...this.nodes].map(e):[],clusters:this.clusters&&this.clusters.length>0?[...this.clusters].map(e):[],edges:this.links.length>0?[...this.links].map(n=>(n.id||(n.id=hr()),n)):[]},requestAnimationFrame(()=>this.draw())}draw(){if(!this.layout||"string"==typeof this.layout)return;this.applyNodeDimensions();const e=this.layout.run(this.graph),n=e instanceof mt.y?e:(0,ft.of)(e);this.graphSubscription.add(n.subscribe(a=>{this.graph=a,this.tick()})),0!==this.graph.nodes.length&&n.pipe((0,Wh.P)()).subscribe(()=>this.applyNodeDimensions())}tick(){const e=new Set;this.graph.nodes.map(o=>{o.transform=`translate(${o.position.x-o.dimension.width/2||0}, ${o.position.y-o.dimension.height/2||0})`,o.data||(o.data={}),o.data.color=this.colors.getColor(this.groupResultsBy(o)),e.add(o.id)});const n=new Set;(this.graph.clusters||[]).map(o=>{o.transform=`translate(${o.position.x-o.dimension.width/2||0}, ${o.position.y-o.dimension.height/2||0})`,o.data||(o.data={}),o.data.color=this.colors.getColor(this.groupResultsBy(o)),n.add(o.id)}),setTimeout(()=>{this.oldNodes=e,this.oldClusters=n},500);const a=[];for(const o in this.graph.edgeLabels){const v=this.graph.edgeLabels[o],T=o.replace(/[^\w-]*/g,""),N=this.layout&&"string"!=typeof this.layout&&this.layout.settings&&this.layout.settings.multigraph;let G=this._oldLinks.find(N?Ft=>`${Ft.source}${Ft.target}${Ft.id}`===T:Ft=>`${Ft.source}${Ft.target}`===T);const tt=this.graph.edges.find(N?Ft=>`${Ft.source}${Ft.target}${Ft.id}`===T:Ft=>`${Ft.source}${Ft.target}`===T);G?G.data&&tt&&tt.data&&JSON.stringify(G.data)!==JSON.stringify(tt.data)&&(G.data=tt.data):G=tt||v,G.oldLine=G.line;const lt=v.points,ot=this.generateLine(lt),wt=Object.assign({},G);wt.line=ot,wt.points=lt,this.updateMidpointOnEdge(wt,lt);const kt=lt[Math.floor(lt.length/2)];kt&&(wt.textTransform=`translate(${kt.x||0},${kt.y||0})`),wt.textAngle=0,wt.oldLine||(wt.oldLine=wt.line),this.calcDominantBaseline(wt),a.push(wt)}this.graph.edges=a,this.graph.edges&&(this._oldLinks=this.graph.edges.map(o=>{const v=Object.assign({},o);return v.oldLine=o.line,v})),this.updateMinimap(),this.autoZoom&&this.zoomToFit(),this.autoCenter&&this.center(),requestAnimationFrame(()=>this.redrawLines()),this.cd.markForCheck()}getMinimapTransform(){switch(this.miniMapPosition){case Zr.UpperLeft:return"";case Zr.UpperRight:return"translate("+(this.dims.width-this.graphDims.width/this.minimapScaleCoefficient)+",0)";default:return""}}updateGraphDims(){let e=1/0,n=-1/0,a=1/0,o=-1/0;for(let v=0;v<this.graph.nodes.length;v++){const T=this.graph.nodes[v];e=T.position.x<e?T.position.x:e,a=T.position.y<a?T.position.y:a,n=T.position.x+T.dimension.width>n?T.position.x+T.dimension.width:n,o=T.position.y+T.dimension.height>o?T.position.y+T.dimension.height:o}e-=100,a-=100,n+=100,o+=100,this.graphDims.width=n-e,this.graphDims.height=o-a,this.minimapOffsetX=e,this.minimapOffsetY=a}updateMinimap(){this.graph.nodes&&this.graph.nodes.length&&(this.updateGraphDims(),this.miniMapMaxWidth&&(this.minimapScaleCoefficient=this.graphDims.width/this.miniMapMaxWidth),this.miniMapMaxHeight&&(this.minimapScaleCoefficient=Math.max(this.minimapScaleCoefficient,this.graphDims.height/this.miniMapMaxHeight)),this.minimapTransform=this.getMinimapTransform())}applyNodeDimensions(){this.nodeElements&&this.nodeElements.length&&this.nodeElements.map(e=>{const n=e.nativeElement,a=this.graph.nodes.find(v=>v.id===n.id);if(!a)return;let o;try{if(o=n.getBBox(),!o.width||!o.height)return}catch{return}if(a.dimension.height=this.nodeHeight?a.dimension.height&&a.meta.forceDimensions?a.dimension.height:this.nodeHeight:a.dimension.height&&a.meta.forceDimensions?a.dimension.height:o.height,this.nodeMaxHeight&&(a.dimension.height=Math.max(a.dimension.height,this.nodeMaxHeight)),this.nodeMinHeight&&(a.dimension.height=Math.min(a.dimension.height,this.nodeMinHeight)),this.nodeWidth)a.dimension.width=a.dimension.width&&a.meta.forceDimensions?a.dimension.width:this.nodeWidth;else if(n.getElementsByTagName("text").length){let v;try{for(const T of n.getElementsByTagName("text")){const N=T.getBBox();v?(N.width>v.width&&(v.width=N.width),N.height>v.height&&(v.height=N.height)):v=N}}catch{return}a.dimension.width=a.dimension.width&&a.meta.forceDimensions?a.dimension.width:v.width+20}else a.dimension.width=a.dimension.width&&a.meta.forceDimensions?a.dimension.width:o.width;this.nodeMaxWidth&&(a.dimension.width=Math.max(a.dimension.width,this.nodeMaxWidth)),this.nodeMinWidth&&(a.dimension.width=Math.min(a.dimension.width,this.nodeMinWidth))})}redrawLines(e=this.animate){this.linkElements.map(n=>{const a=this.graph.edges.find(o=>o.id===n.nativeElement.id);a&&(Ks(n.nativeElement).select(".line").attr("d",a.oldLine).transition().ease(ao).duration(e?500:0).attr("d",a.line),Ks(this.el.nativeElement).select(`#${a.id}`).attr("d",a.oldTextPath).transition().ease(ao).duration(e?500:0).attr("d",a.textPath),this.updateMidpointOnEdge(a,a.points))})}calcDominantBaseline(e){const n=e.points[0],a=e.points[e.points.length-1];e.oldTextPath=e.textPath,a.x<n.x?(e.dominantBaseline="text-before-edge",e.textPath=this.generateLine([...e.points].reverse())):(e.dominantBaseline="text-after-edge",e.textPath=e.line)}generateLine(e){return function _u(){var i=mu,r=gu,e=xa(!0),n=null,a=fu,o=null;function v(T){var N,tt,ot,G=T.length,lt=!1;for(null==n&&(o=a(ot=pu())),N=0;N<=G;++N)!(N<G&&e(tt=T[N],N,T))===lt&&((lt=!lt)?o.lineStart():o.lineEnd()),lt&&o.point(+i(tt,N,T),+r(tt,N,T));if(ot)return o=null,ot+""||null}return v.x=function(T){return arguments.length?(i="function"==typeof T?T:xa(+T),v):i},v.y=function(T){return arguments.length?(r="function"==typeof T?T:xa(+T),v):r},v.defined=function(T){return arguments.length?(e="function"==typeof T?T:xa(!!T),v):e},v.curve=function(T){return arguments.length?(a=T,null!=n&&(o=a(n)),v):a},v.context=function(T){return arguments.length?(null==T?n=o=null:o=a(n=T),v):n},v}().x(a=>a.x).y(a=>a.y).curve(this.curve)(e)}onZoom(e,n){if(this.enableTrackpadSupport&&!e.ctrlKey)return void this.pan(-1*e.deltaX,-1*e.deltaY);const a=1+("in"===n?this.zoomSpeed:-this.zoomSpeed),o=this.zoomLevel*a;if(!(o<=this.minZoomLevel||o>=this.maxZoomLevel)&&this.enableZoom)if(!0===this.panOnZoom&&e){const v=e.clientX,T=e.clientY,N=this.el.nativeElement.querySelector("svg"),G=N.querySelector("g.chart"),tt=N.createSVGPoint();tt.x=v,tt.y=T;const lt=tt.matrixTransform(G.getScreenCTM().inverse());this.pan(lt.x,lt.y,!0),this.zoom(a),this.pan(-lt.x,-lt.y,!0)}else this.zoom(a)}pan(e,n,a=!1){const o=a?1:this.zoomLevel;this.transformationMatrix=oa(this.transformationMatrix,Fo(e/o,n/o)),this.updateTransform()}panTo(e,n){null==e||isNaN(e)||null==n||isNaN(n)||(this.transformationMatrix=oa(this.transformationMatrix,Fo((-this.panOffsetX-e*this.zoomLevel+this.dims.width/2)/this.zoomLevel,(-this.panOffsetY-n*this.zoomLevel+this.dims.height/2)/this.zoomLevel)),this.updateTransform())}zoom(e){this.transformationMatrix=oa(this.transformationMatrix,function ed(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return td(r)&&(r=i),{a:i,c:0,e:0,b:0,d:r,f:0}}(e,e)),this.zoomChange.emit(this.zoomLevel),this.updateTransform()}zoomTo(e){this.transformationMatrix.a=isNaN(e)?this.transformationMatrix.a:Number(e),this.transformationMatrix.d=isNaN(e)?this.transformationMatrix.d:Number(e),this.zoomChange.emit(this.zoomLevel),this.updateTransform(),this.update()}onDrag(e){if(!this.draggingEnabled)return;const n=this.draggingNode;this.layout&&"string"!=typeof this.layout&&this.layout.onDrag&&this.layout.onDrag(n,e),n.position.x+=e.movementX/this.zoomLevel,n.position.y+=e.movementY/this.zoomLevel,n.transform=`translate(${n.position.x-n.dimension.width/2}, ${n.position.y-n.dimension.height/2})`;for(const v of this.graph.edges)if((v.target===n.id||v.source===n.id||v.target.id===n.id||v.source.id===n.id)&&this.layout&&"string"!=typeof this.layout){const T=this.layout.updateEdge(this.graph,v),N=T instanceof mt.y?T:(0,ft.of)(T);this.graphSubscription.add(N.subscribe(G=>{this.graph=G,this.redrawEdge(v)}))}this.redrawLines(!1),this.updateMinimap()}redrawEdge(e){const n=this.generateLine(e.points);this.calcDominantBaseline(e),e.oldLine=e.line,e.line=n}updateTransform(){this.transform=function nd(i){return function Po(i){return"matrix("+i.a+","+i.b+","+i.c+","+i.d+","+i.e+","+i.f+")"}(i)}(function sd(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e10;return{a:Math.round(i.a*r)/r,b:Math.round(i.b*r)/r,c:Math.round(i.c*r)/r,d:Math.round(i.d*r)/r,e:Math.round(i.e*r)/r,f:Math.round(i.f*r)/r}}(this.transformationMatrix,100))}onClick(e){this.select.emit(e)}onActivate(e){this.activeEntries.indexOf(e)>-1||(this.activeEntries=[e,...this.activeEntries],this.activate.emit({value:e,entries:this.activeEntries}))}onDeactivate(e){const n=this.activeEntries.indexOf(e);this.activeEntries.splice(n,1),this.activeEntries=[...this.activeEntries],this.deactivate.emit({value:e,entries:this.activeEntries})}getSeriesDomain(){return this.nodes.map(e=>this.groupResultsBy(e)).reduce((e,n)=>-1!==e.indexOf(n)?e:e.concat([n]),[]).sort()}trackLinkBy(e,n){return n.id}trackNodeBy(e,n){return n.id}setColors(){this.colors=new dp(this.scheme,this.seriesDomain,this.customColors)}onMouseMove(e){this.isMouseMoveCalled=!0,(this.isPanning||this.isMinimapPanning)&&this.panningEnabled?this.panWithConstraints(this.panningAxis,e):this.isDragging&&this.draggingEnabled&&this.onDrag(e)}onMouseDown(e){this.isMouseMoveCalled=!1}graphClick(e){this.isMouseMoveCalled||this.clickHandler.emit(e)}onTouchStart(e){this._touchLastX=e.changedTouches[0].clientX,this._touchLastY=e.changedTouches[0].clientY,this.isPanning=!0}onTouchMove(e){if(this.isPanning&&this.panningEnabled){const n=e.changedTouches[0].clientX,a=e.changedTouches[0].clientY,o=n-this._touchLastX,v=a-this._touchLastY;this._touchLastX=n,this._touchLastY=a,this.pan(o,v)}}onTouchEnd(e){this.isPanning=!1}onMouseUp(e){this.isDragging=!1,this.isPanning=!1,this.isMinimapPanning=!1,this.layout&&"string"!=typeof this.layout&&this.layout.onDragEnd&&this.layout.onDragEnd(this.draggingNode,e)}onNodeMouseDown(e,n){!this.draggingEnabled||(this.isDragging=!0,this.draggingNode=n,this.layout&&"string"!=typeof this.layout&&this.layout.onDragStart&&this.layout.onDragStart(n,e))}onMinimapDragMouseDown(){this.isMinimapPanning=!0}onMinimapPanTo(e){this.panTo((e.offsetX-(this.dims.width-(this.graphDims.width+this.minimapOffsetX)/this.minimapScaleCoefficient))*this.minimapScaleCoefficient,(e.offsetY+this.minimapOffsetY/this.minimapScaleCoefficient)*this.minimapScaleCoefficient),this.isMinimapPanning=!0}center(){this.panTo(this.graphDims.width/2,this.graphDims.height/2)}zoomToFit(){let a=Math.min(this.dims.height/this.graphDims.height,this.dims.width/this.graphDims.width,1);a<this.minZoomLevel&&(a=this.minZoomLevel),a>this.maxZoomLevel&&(a=this.maxZoomLevel),a!==this.zoomLevel&&(this.zoomLevel=a,this.updateTransform(),this.zoomChange.emit(this.zoomLevel))}panToNodeId(e){const n=this.graph.nodes.find(a=>a.id===e);!n||this.panTo(n.position.x,n.position.y)}panWithConstraints(e,n){let a=n.movementX,o=n.movementY;switch(this.isMinimapPanning&&(a=-this.minimapScaleCoefficient*a*this.zoomLevel,o=-this.minimapScaleCoefficient*o*this.zoomLevel),e){case Br.Horizontal:this.pan(a,0);break;case Br.Vertical:this.pan(0,o);break;default:this.pan(a,o)}}updateMidpointOnEdge(e,n){if(e&&n)if(n.length%2==1)e.midPoint=n[Math.floor(n.length/2)];else{const a=n[n.length/2],o=n[n.length/2-1];e.midPoint={x:(a.x+o.x)/2,y:(a.y+o.y)/2}}}basicUpdate(){if(this.view)this.width=this.view[0],this.height=this.view[1];else{const e=this.getContainerDims();e&&(this.width=e.width,this.height=e.height)}this.width||(this.width=600),this.height||(this.height=400),this.width=Math.floor(this.width),this.height=Math.floor(this.height),this.cd&&this.cd.markForCheck()}getContainerDims(){let e,n;const a=this.el.nativeElement;if(null!==a.parentNode){const o=a.parentNode.getBoundingClientRect();e=o.width,n=o.height}return e&&n?{width:e,height:n}:null}unbindEvents(){this.resizeSubscription&&this.resizeSubscription.unsubscribe()}bindWindowResizeEvent(){const n=(0,Mo.R)(window,"resize").pipe((0,q.b)(200)).subscribe(a=>{this.update(),this.cd&&this.cd.markForCheck()});this.resizeSubscription=n}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq),t.Y36(t.R0b),t.Y36(t.sBO),t.Y36(qo))},i.\u0275cmp=t.Xpm({type:i,selectors:[["ngx-graph"]],contentQueries:function(e,n,a){if(1&e&&(t.Suo(a,Zd,5),t.Suo(a,Vd,5),t.Suo(a,Gd,5),t.Suo(a,Ud,5),t.Suo(a,zd,5)),2&e){let o;t.iGM(o=t.CRH())&&(n.linkTemplate=o.first),t.iGM(o=t.CRH())&&(n.nodeTemplate=o.first),t.iGM(o=t.CRH())&&(n.clusterTemplate=o.first),t.iGM(o=t.CRH())&&(n.defsTemplate=o.first),t.iGM(o=t.CRH())&&(n.miniMapNodeTemplate=o.first)}},viewQuery:function(e,n){if(1&e&&(t.Gf(Hd,5),t.Gf(Yd,5)),2&e){let a;t.iGM(a=t.CRH())&&(n.nodeElements=a),t.iGM(a=t.CRH())&&(n.linkElements=a)}},hostBindings:function(e,n){1&e&&t.NdJ("mousemove",function(o){return n.onMouseMove(o)},!1,t.evT)("mousedown",function(o){return n.onMouseDown(o)},!1,t.evT)("click",function(o){return n.graphClick(o)},!1,t.evT)("touchmove",function(o){return n.onTouchMove(o)},!1,t.evT)("mouseup",function(o){return n.onMouseUp(o)},!1,t.evT)},inputs:{nodes:"nodes",clusters:"clusters",links:"links",activeEntries:"activeEntries",curve:"curve",draggingEnabled:"draggingEnabled",nodeHeight:"nodeHeight",nodeMaxHeight:"nodeMaxHeight",nodeMinHeight:"nodeMinHeight",nodeWidth:"nodeWidth",nodeMinWidth:"nodeMinWidth",nodeMaxWidth:"nodeMaxWidth",panningEnabled:"panningEnabled",panningAxis:"panningAxis",enableZoom:"enableZoom",zoomSpeed:"zoomSpeed",minZoomLevel:"minZoomLevel",maxZoomLevel:"maxZoomLevel",autoZoom:"autoZoom",panOnZoom:"panOnZoom",animate:"animate",autoCenter:"autoCenter",update$:"update$",center$:"center$",zoomToFit$:"zoomToFit$",panToNode$:"panToNode$",layout:"layout",layoutSettings:"layoutSettings",enableTrackpadSupport:"enableTrackpadSupport",showMiniMap:"showMiniMap",miniMapMaxWidth:"miniMapMaxWidth",miniMapMaxHeight:"miniMapMaxHeight",miniMapPosition:"miniMapPosition",view:"view",scheme:"scheme",customColors:"customColors",animations:"animations",groupResultsBy:"groupResultsBy",zoomLevel:"zoomLevel",panOffsetX:"panOffsetX",panOffsetY:"panOffsetY"},outputs:{select:"select",activate:"activate",deactivate:"deactivate",zoomChange:"zoomChange",clickHandler:"clickHandler"},features:[t.TTD],ngContentSelectors:cp,decls:6,vars:11,consts:[["mouseWheel","",1,"ngx-charts-outer",3,"mouseWheelUp","mouseWheelDown"],[1,"ngx-charts"],["class","graph chart",3,"touchstart","touchend",4,"ngIf"],["class","minimap",4,"ngIf"],[1,"graph","chart",3,"touchstart","touchend"],[3,"ngTemplateOutlet",4,"ngIf"],["class","text-path",4,"ngFor","ngForOf"],[1,"panning-rect",3,"mousedown"],[1,"clusters"],["class","node-group",3,"old-node","id","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"links"],["class","link-group",3,"id",4,"ngFor","ngForOf","ngForTrackBy"],[1,"nodes"],["class","node-group",3,"old-node","id","click","mousedown",4,"ngFor","ngForOf","ngForTrackBy"],[3,"ngTemplateOutlet"],[1,"text-path"],[1,"node-group",3,"id","click"],["clusterElement",""],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],["class","node cluster",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"node","cluster"],["alignment-baseline","central"],[1,"link-group",3,"id"],["linkElement",""],["class","edge",4,"ngIf"],[1,"edge"],[1,"node-group",3,"id","click","mousedown"],["nodeElement",""],["r","10",4,"ngIf"],["r","10"],[1,"minimap"],[1,"minimap-background",3,"mousedown"],[1,"minimap-nodes"],["class","node-group",3,"old-node","id",4,"ngFor","ngForOf","ngForTrackBy"],[1,"minimap-drag",3,"mousedown"],[1,"node-group",3,"id"]],template:function(e,n){1&e&&(t.F$t(),t.TgZ(0,"div",0),t.NdJ("mouseWheelUp",function(o){return n.onZoom(o,"in")})("mouseWheelDown",function(o){return n.onZoom(o,"out")}),t.O4$(),t.TgZ(1,"svg",1),t.YNc(2,np,12,12,"g",2),t.TgZ(3,"clipPath"),t._UZ(4,"rect"),t.qZA(),t.YNc(5,lp,6,15,"g",3),t.qZA()()),2&e&&(t.Udp("width",n.width,"px"),t.Q6J("@animationState","active")("@.disabled",!n.animations),t.xp6(1),t.uIk("width",n.width)("height",n.height),t.xp6(1),t.Q6J("ngIf",n.initialized&&n.graph),t.xp6(1),t.uIk("id",n.minimapClipPathId),t.xp6(1),t.uIk("width",n.graphDims.width/n.minimapScaleCoefficient)("height",n.graphDims.height/n.minimapScaleCoefficient),t.xp6(1),t.Q6J("ngIf",n.showMiniMap))},dependencies:[bp,m.O5,m.tP,m.sg],styles:[".minimap .minimap-background{fill:#0000001a}.minimap .minimap-drag{fill:#0003;stroke:#fff;stroke-width:1px;stroke-dasharray:2px;stroke-dashoffset:2px;cursor:pointer}.minimap .minimap-drag.panning{fill:#0000004d}.minimap .minimap-nodes{opacity:.5;pointer-events:none}.graph{-webkit-user-select:none;user-select:none}.graph .edge{stroke:#666;fill:none}.graph .edge .edge-label{stroke:none;font-size:12px;fill:#251e1e}.graph .panning-rect{fill:#0000;cursor:move}.graph .node-group.old-node{transition:transform .5s ease-in-out}.graph .node-group .node:focus{outline:none}.graph .cluster rect{opacity:.2}\n"],encapsulation:2,data:{animation:[(0,ri.X$)("animationState",[(0,ri.eR)(":enter",[(0,ri.oB)({opacity:0}),(0,ri.jt)("500ms 100ms",(0,ri.oB)({opacity:1}))])])]},changeDetection:0}),(0,mi.gn)([hp(500)],i.prototype,"updateMinimap",null),i})(),Cp=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[qo],imports:[[m.ez]]}),i})(),wp=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[m.ez],Cp]}),i})();var tl=s(84080);s(52016),s(56758),s(37656),s(29132),s(18429);Math;function ca(i){return{type:i}}function ul(i,r){return i<r?-1:i>r?1:i>=r?0:NaN}function _s(i){let r=i,e=i;function n(v,T,N,G){for(null==N&&(N=0),null==G&&(G=v.length);N<G;){const tt=N+G>>>1;e(v[tt],T)<0?N=tt+1:G=tt}return N}return 1===i.length&&(r=(v,T)=>i(v)-T,e=function Pp(i){return(r,e)=>ul(i(r),e)}(i)),{left:n,center:function o(v,T,N,G){null==N&&(N=0),null==G&&(G=v.length);const tt=n(v,T,N,G-1);return tt>N&&r(v[tt-1],T)>-r(v[tt],T)?tt-1:tt},right:function a(v,T,N,G){for(null==N&&(N=0),null==G&&(G=v.length);N<G;){const tt=N+G>>>1;e(v[tt],T)>0?G=tt:N=tt+1}return N}}}["w","e"].map(ca),["n","s"].map(ca),["n","w","e","s","nw","ne","sw","se"].map(ca);var vs=Math.sqrt(50),xs=Math.sqrt(10),ys=Math.sqrt(2);function bs(i,r,e){var n=Math.abs(r-i)/Math.max(0,e),a=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),o=n/a;return o>=vs?a*=10:o>=xs?a*=5:o>=ys&&(a*=2),r<i?-a:a}const fr=1e3,Xn=6e4,mr=60*Xn,Dr=24*mr,Ts=7*Dr,dl=30*Dr,Cs=365*Dr;var ws=new Date,As=new Date;function pn(i,r,e,n){function a(o){return i(o=0===arguments.length?new Date:new Date(+o)),o}return a.floor=function(o){return i(o=new Date(+o)),o},a.ceil=function(o){return i(o=new Date(o-1)),r(o,1),i(o),o},a.round=function(o){var v=a(o),T=a.ceil(o);return o-v<T-o?v:T},a.offset=function(o,v){return r(o=new Date(+o),null==v?1:Math.floor(v)),o},a.range=function(o,v,T){var G,N=[];if(o=a.ceil(o),T=null==T?1:Math.floor(T),!(o<v&&T>0))return N;do{N.push(G=new Date(+o)),r(o,T),i(o)}while(G<o&&o<v);return N},a.filter=function(o){return pn(function(v){if(v>=v)for(;i(v),!o(v);)v.setTime(v-1)},function(v,T){if(v>=v)if(T<0)for(;++T<=0;)for(;r(v,-1),!o(v););else for(;--T>=0;)for(;r(v,1),!o(v););})},e&&(a.count=function(o,v){return ws.setTime(+o),As.setTime(+v),i(ws),i(As),Math.floor(e(ws,As))},a.every=function(o){return o=Math.floor(o),isFinite(o)&&o>0?o>1?a.filter(n?function(v){return n(v)%o==0}:function(v){return a.count(0,v)%o==0}):a:null}),a}var Ma=pn(function(){},function(i,r){i.setTime(+i+r)},function(i,r){return r-i});Ma.every=function(i){return i=Math.floor(i),isFinite(i)&&i>0?i>1?pn(function(r){r.setTime(Math.floor(r/i)*i)},function(r,e){r.setTime(+r+e*i)},function(r,e){return(e-r)/i}):Ma:null};const Rp=Ma;const ua=pn(function(i){i.setTime(i-i.getMilliseconds())},function(i,r){i.setTime(+i+r*fr)},function(i,r){return(r-i)/fr},function(i){return i.getUTCSeconds()});const ml=pn(function(i){i.setTime(i-i.getMilliseconds()-i.getSeconds()*fr)},function(i,r){i.setTime(+i+r*Xn)},function(i,r){return(r-i)/Xn},function(i){return i.getMinutes()});const _l=pn(function(i){i.setTime(i-i.getMilliseconds()-i.getSeconds()*fr-i.getMinutes()*Xn)},function(i,r){i.setTime(+i+r*mr)},function(i,r){return(r-i)/mr},function(i){return i.getHours()});const Na=pn(i=>i.setHours(0,0,0,0),(i,r)=>i.setDate(i.getDate()+r),(i,r)=>(r-i-(r.getTimezoneOffset()-i.getTimezoneOffset())*Xn)/Dr,i=>i.getDate()-1);function Lr(i){return pn(function(r){r.setDate(r.getDate()-(r.getDay()+7-i)%7),r.setHours(0,0,0,0)},function(r,e){r.setDate(r.getDate()+7*e)},function(r,e){return(e-r-(e.getTimezoneOffset()-r.getTimezoneOffset())*Xn)/Ts})}var Pa=Lr(0),Fa=Lr(1),Hr=(Lr(2),Lr(3),Lr(4));const yl=(Lr(5),Lr(6),pn(function(i){i.setDate(1),i.setHours(0,0,0,0)},function(i,r){i.setMonth(i.getMonth()+r)},function(i,r){return r.getMonth()-i.getMonth()+12*(r.getFullYear()-i.getFullYear())},function(i){return i.getMonth()}));var Ss=pn(function(i){i.setMonth(0,1),i.setHours(0,0,0,0)},function(i,r){i.setFullYear(i.getFullYear()+r)},function(i,r){return r.getFullYear()-i.getFullYear()},function(i){return i.getFullYear()});Ss.every=function(i){return isFinite(i=Math.floor(i))&&i>0?pn(function(r){r.setFullYear(Math.floor(r.getFullYear()/i)*i),r.setMonth(0,1),r.setHours(0,0,0,0)},function(r,e){r.setFullYear(r.getFullYear()+e*i)}):null};const kr=Ss;const Up=pn(function(i){i.setUTCSeconds(0,0)},function(i,r){i.setTime(+i+r*Xn)},function(i,r){return(r-i)/Xn},function(i){return i.getUTCMinutes()});const zp=pn(function(i){i.setUTCMinutes(0,0,0)},function(i,r){i.setTime(+i+r*mr)},function(i,r){return(r-i)/mr},function(i){return i.getUTCHours()});const Es=pn(function(i){i.setUTCHours(0,0,0,0)},function(i,r){i.setUTCDate(i.getUTCDate()+r)},function(i,r){return(r-i)/Dr},function(i){return i.getUTCDate()-1});function Ir(i){return pn(function(r){r.setUTCDate(r.getUTCDate()-(r.getUTCDay()+7-i)%7),r.setUTCHours(0,0,0,0)},function(r,e){r.setUTCDate(r.getUTCDate()+7*e)},function(r,e){return(e-r)/Ts})}var Ds=Ir(0),Ra=Ir(1),Yr=(Ir(2),Ir(3),Ir(4));const $p=(Ir(5),Ir(6),pn(function(i){i.setUTCDate(1),i.setUTCHours(0,0,0,0)},function(i,r){i.setUTCMonth(i.getUTCMonth()+r)},function(i,r){return r.getUTCMonth()-i.getUTCMonth()+12*(r.getUTCFullYear()-i.getUTCFullYear())},function(i){return i.getUTCMonth()}));var Ls=pn(function(i){i.setUTCMonth(0,1),i.setUTCHours(0,0,0,0)},function(i,r){i.setUTCFullYear(i.getUTCFullYear()+r)},function(i,r){return r.getUTCFullYear()-i.getUTCFullYear()},function(i){return i.getUTCFullYear()});Ls.every=function(i){return isFinite(i=Math.floor(i))&&i>0?pn(function(r){r.setUTCFullYear(Math.floor(r.getUTCFullYear()/i)*i),r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},function(r,e){r.setUTCFullYear(r.getUTCFullYear()+e*i)}):null};const Wr=Ls;function Al(i,r,e,n,a,o){const v=[[ua,1,fr],[ua,5,5e3],[ua,15,15e3],[ua,30,3e4],[o,1,Xn],[o,5,5*Xn],[o,15,15*Xn],[o,30,30*Xn],[a,1,mr],[a,3,3*mr],[a,6,6*mr],[a,12,12*mr],[n,1,Dr],[n,2,2*Dr],[e,1,Ts],[r,1,dl],[r,3,3*dl],[i,1,Cs]];function N(G,tt,lt){const ot=Math.abs(tt-G)/lt,wt=_s(([,,xt])=>xt).right(v,ot);if(wt===v.length)return i.every(bs(G/Cs,tt/Cs,lt));if(0===wt)return Rp.every(Math.max(bs(G,tt,lt),1));const[kt,Ft]=v[ot/v[wt-1][2]<v[wt][2]/ot?wt-1:wt];return kt.every(Ft)}return[function T(G,tt,lt){const ot=tt<G;ot&&([G,tt]=[tt,G]);const wt=lt&&"function"==typeof lt.range?lt:N(G,tt,lt),kt=wt?wt.range(G,+tt+1):[];return ot?kt.reverse():kt},N]}const[_1,v1]=Al(Wr,$p,Ds,Es,zp,Up),[Qp,jp]=Al(kr,yl,Pa,Na,_l,ml);function ks(i){if(0<=i.y&&i.y<100){var r=new Date(-1,i.m,i.d,i.H,i.M,i.S,i.L);return r.setFullYear(i.y),r}return new Date(i.y,i.m,i.d,i.H,i.M,i.S,i.L)}function Is(i){if(0<=i.y&&i.y<100){var r=new Date(Date.UTC(-1,i.m,i.d,i.H,i.M,i.S,i.L));return r.setUTCFullYear(i.y),r}return new Date(Date.UTC(i.y,i.m,i.d,i.H,i.M,i.S,i.L))}function ha(i,r,e){return{y:i,m:r,d:e,H:0,M:0,S:0,L:0}}var Sl={"-":"",_:" ",0:"0"},fn=/^\s*\d+/,Kp=/^%/,qp=/[\\^$*+?|[\]().{}]/g;function yi(i,r,e){var n=i<0?"-":"",a=(n?-i:i)+"",o=a.length;return n+(o<e?new Array(e-o+1).join(r)+a:a)}function tf(i){return i.replace(qp,"\\$&")}function da(i){return new RegExp("^(?:"+i.map(tf).join("|")+")","i")}function pa(i){return new Map(i.map((r,e)=>[r.toLowerCase(),e]))}function ef(i,r,e){var n=fn.exec(r.slice(e,e+1));return n?(i.w=+n[0],e+n[0].length):-1}function nf(i,r,e){var n=fn.exec(r.slice(e,e+1));return n?(i.u=+n[0],e+n[0].length):-1}function rf(i,r,e){var n=fn.exec(r.slice(e,e+2));return n?(i.U=+n[0],e+n[0].length):-1}function af(i,r,e){var n=fn.exec(r.slice(e,e+2));return n?(i.V=+n[0],e+n[0].length):-1}function sf(i,r,e){var n=fn.exec(r.slice(e,e+2));return n?(i.W=+n[0],e+n[0].length):-1}function El(i,r,e){var n=fn.exec(r.slice(e,e+4));return n?(i.y=+n[0],e+n[0].length):-1}function Dl(i,r,e){var n=fn.exec(r.slice(e,e+2));return n?(i.y=+n[0]+(+n[0]>68?1900:2e3),e+n[0].length):-1}function of(i,r,e){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(r.slice(e,e+6));return n?(i.Z=n[1]?0:-(n[2]+(n[3]||"00")),e+n[0].length):-1}function lf(i,r,e){var n=fn.exec(r.slice(e,e+1));return n?(i.q=3*n[0]-3,e+n[0].length):-1}function cf(i,r,e){var n=fn.exec(r.slice(e,e+2));return n?(i.m=n[0]-1,e+n[0].length):-1}function Ll(i,r,e){var n=fn.exec(r.slice(e,e+2));return n?(i.d=+n[0],e+n[0].length):-1}function uf(i,r,e){var n=fn.exec(r.slice(e,e+3));return n?(i.m=0,i.d=+n[0],e+n[0].length):-1}function kl(i,r,e){var n=fn.exec(r.slice(e,e+2));return n?(i.H=+n[0],e+n[0].length):-1}function hf(i,r,e){var n=fn.exec(r.slice(e,e+2));return n?(i.M=+n[0],e+n[0].length):-1}function df(i,r,e){var n=fn.exec(r.slice(e,e+2));return n?(i.S=+n[0],e+n[0].length):-1}function pf(i,r,e){var n=fn.exec(r.slice(e,e+3));return n?(i.L=+n[0],e+n[0].length):-1}function ff(i,r,e){var n=fn.exec(r.slice(e,e+6));return n?(i.L=Math.floor(n[0]/1e3),e+n[0].length):-1}function mf(i,r,e){var n=Kp.exec(r.slice(e,e+1));return n?e+n[0].length:-1}function gf(i,r,e){var n=fn.exec(r.slice(e));return n?(i.Q=+n[0],e+n[0].length):-1}function _f(i,r,e){var n=fn.exec(r.slice(e));return n?(i.s=+n[0],e+n[0].length):-1}function Il(i,r){return yi(i.getDate(),r,2)}function vf(i,r){return yi(i.getHours(),r,2)}function xf(i,r){return yi(i.getHours()%12||12,r,2)}function yf(i,r){return yi(1+Na.count(kr(i),i),r,3)}function Ol(i,r){return yi(i.getMilliseconds(),r,3)}function bf(i,r){return Ol(i,r)+"000"}function Tf(i,r){return yi(i.getMonth()+1,r,2)}function Cf(i,r){return yi(i.getMinutes(),r,2)}function wf(i,r){return yi(i.getSeconds(),r,2)}function Af(i){var r=i.getDay();return 0===r?7:r}function Sf(i,r){return yi(Pa.count(kr(i)-1,i),r,2)}function Ml(i){var r=i.getDay();return r>=4||0===r?Hr(i):Hr.ceil(i)}function Ef(i,r){return i=Ml(i),yi(Hr.count(kr(i),i)+(4===kr(i).getDay()),r,2)}function Df(i){return i.getDay()}function Lf(i,r){return yi(Fa.count(kr(i)-1,i),r,2)}function kf(i,r){return yi(i.getFullYear()%100,r,2)}function If(i,r){return yi((i=Ml(i)).getFullYear()%100,r,2)}function Of(i,r){return yi(i.getFullYear()%1e4,r,4)}function Mf(i,r){var e=i.getDay();return yi((i=e>=4||0===e?Hr(i):Hr.ceil(i)).getFullYear()%1e4,r,4)}function Nf(i){var r=i.getTimezoneOffset();return(r>0?"-":(r*=-1,"+"))+yi(r/60|0,"0",2)+yi(r%60,"0",2)}function Nl(i,r){return yi(i.getUTCDate(),r,2)}function Pf(i,r){return yi(i.getUTCHours(),r,2)}function Ff(i,r){return yi(i.getUTCHours()%12||12,r,2)}function Rf(i,r){return yi(1+Es.count(Wr(i),i),r,3)}function Pl(i,r){return yi(i.getUTCMilliseconds(),r,3)}function Bf(i,r){return Pl(i,r)+"000"}function Zf(i,r){return yi(i.getUTCMonth()+1,r,2)}function Vf(i,r){return yi(i.getUTCMinutes(),r,2)}function Gf(i,r){return yi(i.getUTCSeconds(),r,2)}function Uf(i){var r=i.getUTCDay();return 0===r?7:r}function zf(i,r){return yi(Ds.count(Wr(i)-1,i),r,2)}function Fl(i){var r=i.getUTCDay();return r>=4||0===r?Yr(i):Yr.ceil(i)}function Hf(i,r){return i=Fl(i),yi(Yr.count(Wr(i),i)+(4===Wr(i).getUTCDay()),r,2)}function Yf(i){return i.getUTCDay()}function Wf(i,r){return yi(Ra.count(Wr(i)-1,i),r,2)}function Xf(i,r){return yi(i.getUTCFullYear()%100,r,2)}function $f(i,r){return yi((i=Fl(i)).getUTCFullYear()%100,r,2)}function Qf(i,r){return yi(i.getUTCFullYear()%1e4,r,4)}function jf(i,r){var e=i.getUTCDay();return yi((i=e>=4||0===e?Yr(i):Yr.ceil(i)).getUTCFullYear()%1e4,r,4)}function Jf(){return"+0000"}function Rl(){return"%"}function Bl(i){return+i}function Zl(i){return Math.floor(+i/1e3)}!function em(i){(function Jp(i){var r=i.dateTime,e=i.date,n=i.time,a=i.periods,o=i.days,v=i.shortDays,T=i.months,N=i.shortMonths,G=da(a),tt=pa(a),lt=da(o),ot=pa(o),wt=da(v),kt=pa(v),Ft=da(T),xt=pa(T),Vt=da(N),Jt=pa(N),Wt={a:function an(me){return v[me.getDay()]},A:function or(me){return o[me.getDay()]},b:function sn(me){return N[me.getMonth()]},B:function on(me){return T[me.getMonth()]},c:null,d:Il,e:Il,f:bf,g:If,G:Mf,H:vf,I:xf,j:yf,L:Ol,m:Tf,M:Cf,p:function zi(me){return a[+(me.getHours()>=12)]},q:function Hi(me){return 1+~~(me.getMonth()/3)},Q:Bl,s:Zl,S:wf,u:Af,U:Sf,V:Ef,w:Df,W:Lf,x:null,X:null,y:kf,Y:Of,Z:Nf,"%":Rl},_e={a:function ma(me){return v[me.getUTCDay()]},A:function Kr(me){return o[me.getUTCDay()]},b:function qr(me){return N[me.getUTCMonth()]},B:function ta(me){return T[me.getUTCMonth()]},c:null,d:Nl,e:Nl,f:Bf,g:$f,G:jf,H:Pf,I:Ff,j:Rf,L:Pl,m:Zf,M:Vf,p:function Sn(me){return a[+(me.getUTCHours()>=12)]},q:function Ga(me){return 1+~~(me.getUTCMonth()/3)},Q:Bl,s:Zl,S:Gf,u:Uf,U:zf,V:Hf,w:Yf,W:Wf,x:null,X:null,y:Xf,Y:Qf,Z:Jf,"%":Rl},Se={a:function Di(me,Qe,ui){var ie=wt.exec(Qe.slice(ui));return ie?(me.w=kt.get(ie[0].toLowerCase()),ui+ie[0].length):-1},A:function Li(me,Qe,ui){var ie=lt.exec(Qe.slice(ui));return ie?(me.w=ot.get(ie[0].toLowerCase()),ui+ie[0].length):-1},b:function Qi(me,Qe,ui){var ie=Vt.exec(Qe.slice(ui));return ie?(me.m=Jt.get(ie[0].toLowerCase()),ui+ie[0].length):-1},B:function en(me,Qe,ui){var ie=Ft.exec(Qe.slice(ui));return ie?(me.m=xt.get(ie[0].toLowerCase()),ui+ie[0].length):-1},c:function nn(me,Qe,ui){return ai(me,r,Qe,ui)},d:Ll,e:Ll,f:ff,g:Dl,G:El,H:kl,I:kl,j:uf,L:pf,m:cf,M:hf,p:function bi(me,Qe,ui){var ie=G.exec(Qe.slice(ui));return ie?(me.p=tt.get(ie[0].toLowerCase()),ui+ie[0].length):-1},q:lf,Q:gf,s:_f,S:df,u:nf,U:rf,V:af,w:ef,W:sf,x:function sr(me,Qe,ui){return ai(me,e,Qe,ui)},X:function rn(me,Qe,ui){return ai(me,n,Qe,ui)},y:Dl,Y:El,Z:of,"%":mf};function pe(me,Qe){return function(ui){var On,He,Zi,ie=[],Bi=-1,Ai=0,In=me.length;for(ui instanceof Date||(ui=new Date(+ui));++Bi<In;)37===me.charCodeAt(Bi)&&(ie.push(me.slice(Ai,Bi)),null!=(He=Sl[On=me.charAt(++Bi)])?On=me.charAt(++Bi):He="e"===On?" ":"0",(Zi=Qe[On])&&(On=Zi(ui,He)),ie.push(On),Ai=Bi+1);return ie.push(me.slice(Ai,Bi)),ie.join("")}}function qe(me,Qe){return function(ui){var Ai,In,ie=ha(1900,void 0,1);if(ai(ie,me,ui+="",0)!=ui.length)return null;if("Q"in ie)return new Date(ie.Q);if("s"in ie)return new Date(1e3*ie.s+("L"in ie?ie.L:0));if(Qe&&!("Z"in ie)&&(ie.Z=0),"p"in ie&&(ie.H=ie.H%12+12*ie.p),void 0===ie.m&&(ie.m="q"in ie?ie.q:0),"V"in ie){if(ie.V<1||ie.V>53)return null;"w"in ie||(ie.w=1),"Z"in ie?(In=(Ai=Is(ha(ie.y,0,1))).getUTCDay(),Ai=In>4||0===In?Ra.ceil(Ai):Ra(Ai),Ai=Es.offset(Ai,7*(ie.V-1)),ie.y=Ai.getUTCFullYear(),ie.m=Ai.getUTCMonth(),ie.d=Ai.getUTCDate()+(ie.w+6)%7):(In=(Ai=ks(ha(ie.y,0,1))).getDay(),Ai=In>4||0===In?Fa.ceil(Ai):Fa(Ai),Ai=Na.offset(Ai,7*(ie.V-1)),ie.y=Ai.getFullYear(),ie.m=Ai.getMonth(),ie.d=Ai.getDate()+(ie.w+6)%7)}else("W"in ie||"U"in ie)&&("w"in ie||(ie.w="u"in ie?ie.u%7:"W"in ie?1:0),In="Z"in ie?Is(ha(ie.y,0,1)).getUTCDay():ks(ha(ie.y,0,1)).getDay(),ie.m=0,ie.d="W"in ie?(ie.w+6)%7+7*ie.W-(In+5)%7:ie.w+7*ie.U-(In+6)%7);return"Z"in ie?(ie.H+=ie.Z/100|0,ie.M+=ie.Z%100,Is(ie)):ks(ie)}}function ai(me,Qe,ui,ie){for(var On,He,Bi=0,Ai=Qe.length,In=ui.length;Bi<Ai;){if(ie>=In)return-1;if(37===(On=Qe.charCodeAt(Bi++))){if(On=Qe.charAt(Bi++),!(He=Se[On in Sl?Qe.charAt(Bi++):On])||(ie=He(me,ui,ie))<0)return-1}else if(On!=ui.charCodeAt(ie++))return-1}return ie}return Wt.x=pe(e,Wt),Wt.X=pe(n,Wt),Wt.c=pe(r,Wt),_e.x=pe(e,_e),_e.X=pe(n,_e),_e.c=pe(r,_e),{format:function(me){var Qe=pe(me+="",Wt);return Qe.toString=function(){return me},Qe},parse:function(me){var Qe=qe(me+="",!1);return Qe.toString=function(){return me},Qe},utcFormat:function(me){var Qe=pe(me+="",_e);return Qe.toString=function(){return me},Qe},utcParse:function(me){var Qe=qe(me+="",!0);return Qe.toString=function(){return me},Qe}}})(i)}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),_s(ul),_s(function im(i){return null===i?NaN:+i}),s(6738),s(84067),s(32517),s(38914),s(22910),s(65142),s(78986),s(16087);const Am=["caretElm"];function Sm(i,r){}const Em=function(i){return{model:i}};function Dm(i,r){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,Sm,0,0,"ng-template",5),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngTemplateOutlet",e.template)("ngTemplateOutletContext",t.VKq(2,Em,e.context))}}function Lm(i,r){if(1&i&&t._UZ(0,"span",6),2&i){const e=t.oxw();t.Q6J("innerHTML",e.title,t.oJD)}}function n_(i,r,e){e=e||{};let n,a,o,v=null,T=0;function N(){T=!1===e.leading?0:+new Date,v=null,o=i.apply(n,a)}return function(){const G=+new Date;!T&&!1===e.leading&&(T=G);const tt=r-(G-T);return n=this,a=arguments,tt<=0?(clearTimeout(v),v=null,T=G,o=i.apply(n,a)):!v&&!1!==e.trailing&&(v=setTimeout(N,tt)),o}}function r_(i,r){return function(n,a,o){return{configurable:!0,enumerable:o.enumerable,get:function(){return Object.defineProperty(this,a,{configurable:!0,enumerable:o.enumerable,value:n_(o.value,i,r)}),this[a]}}}}var ti=(()=>{return(i=ti||(ti={})).Top="top",i.Bottom="bottom",i.Left="left",i.Right="right",i.Center="center",ti;var i})();function Jl(i,r,e){return e===ti.Top?i.top-7:e===ti.Bottom?i.top+i.height-r.height+7:e===ti.Center?i.top+i.height/2-r.height/2:void 0}function Kl(i,r,e){return e===ti.Left?i.left-7:e===ti.Right?i.left+i.width-r.width+7:e===ti.Center?i.left+i.width/2-r.width/2:void 0}class Gn{static calculateVerticalAlignment(r,e,n){let a=Jl(r,e,n);return a+e.height>window.innerHeight&&(a=window.innerHeight-e.height),a}static calculateVerticalCaret(r,e,n,a){let o;a===ti.Top&&(o=r.height/2-n.height/2+7),a===ti.Bottom&&(o=e.height-r.height/2-n.height/2-7),a===ti.Center&&(o=e.height/2-n.height/2);const v=Jl(r,e,a);return v+e.height>window.innerHeight&&(o+=v+e.height-window.innerHeight),o}static calculateHorizontalAlignment(r,e,n){let a=Kl(r,e,n);return a+e.width>window.innerWidth&&(a=window.innerWidth-e.width),a}static calculateHorizontalCaret(r,e,n,a){let o;a===ti.Left&&(o=r.width/2-n.width/2+7),a===ti.Right&&(o=e.width-r.width/2-n.width/2-7),a===ti.Center&&(o=e.width/2-n.width/2);const v=Kl(r,e,a);return v+e.width>window.innerWidth&&(o+=v+e.width-window.innerWidth),o}static shouldFlip(r,e,n,a){let o=!1;return n===ti.Right&&r.left+r.width+e.width+a>window.innerWidth&&(o=!0),n===ti.Left&&r.left-e.width-a<0&&(o=!0),n===ti.Top&&r.top-e.height-a<0&&(o=!0),n===ti.Bottom&&r.top+r.height+e.height+a>window.innerHeight&&(o=!0),o}static positionCaret(r,e,n,a,o){let v=0,T=0;return r===ti.Right?(T=-7,v=Gn.calculateVerticalCaret(n,e,a,o)):r===ti.Left?(T=e.width,v=Gn.calculateVerticalCaret(n,e,a,o)):r===ti.Top?(v=e.height,T=Gn.calculateHorizontalCaret(n,e,a,o)):r===ti.Bottom&&(v=-7,T=Gn.calculateHorizontalCaret(n,e,a,o)),{top:v,left:T}}static positionContent(r,e,n,a,o){let v=0,T=0;return r===ti.Right?(T=n.left+n.width+a,v=Gn.calculateVerticalAlignment(n,e,o)):r===ti.Left?(T=n.left-e.width-a,v=Gn.calculateVerticalAlignment(n,e,o)):r===ti.Top?(v=n.top-e.height-a,T=Gn.calculateHorizontalAlignment(n,e,o)):r===ti.Bottom&&(v=n.top+n.height+a,T=Gn.calculateHorizontalAlignment(n,e,o)),{top:v,left:T}}static determinePlacement(r,e,n,a){if(Gn.shouldFlip(n,e,r,a)){if(r===ti.Right)return ti.Left;if(r===ti.Left)return ti.Right;if(r===ti.Top)return ti.Bottom;if(r===ti.Bottom)return ti.Top}return r}}let a_=(()=>{class i{constructor(e,n,a){this.element=e,this.renderer=n,this.platformId=a}get cssClasses(){let e="ngx-charts-tooltip-content";return e+=` position-${this.placement}`,e+=` type-${this.type}`,e+=` ${this.cssClass}`,e}ngAfterViewInit(){setTimeout(this.position.bind(this))}position(){if(!(0,m.NF)(this.platformId))return;const e=this.element.nativeElement,n=this.host.nativeElement.getBoundingClientRect();if(!n.height&&!n.width)return;const a=e.getBoundingClientRect();this.checkFlip(n,a),this.positionContent(e,n,a),this.showCaret&&this.positionCaret(n,a),setTimeout(()=>this.renderer.addClass(e,"animate"),1)}positionContent(e,n,a){const{top:o,left:v}=Gn.positionContent(this.placement,a,n,this.spacing,this.alignment);this.renderer.setStyle(e,"top",`${o}px`),this.renderer.setStyle(e,"left",`${v}px`)}positionCaret(e,n){const a=this.caretElm.nativeElement,o=a.getBoundingClientRect(),{top:v,left:T}=Gn.positionCaret(this.placement,n,e,o,this.alignment);this.renderer.setStyle(a,"top",`${v}px`),this.renderer.setStyle(a,"left",`${T}px`)}checkFlip(e,n){this.placement=Gn.determinePlacement(this.placement,n,e,this.spacing)}onWindowResize(){this.position()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq),t.Y36(t.Qsj),t.Y36(t.Lbi))},i.\u0275cmp=t.Xpm({type:i,selectors:[["ngx-tooltip-content"]],viewQuery:function(e,n){if(1&e&&t.Gf(Am,5),2&e){let a;t.iGM(a=t.CRH())&&(n.caretElm=a.first)}},hostVars:2,hostBindings:function(e,n){1&e&&t.NdJ("resize",function(){return n.onWindowResize()},!1,t.Jf7),2&e&&t.Tol(n.cssClasses)},inputs:{host:"host",showCaret:"showCaret",type:"type",placement:"placement",alignment:"alignment",spacing:"spacing",cssClass:"cssClass",title:"title",template:"template",context:"context"},decls:6,vars:6,consts:[[3,"hidden"],["caretElm",""],[1,"tooltip-content"],[4,"ngIf"],[3,"innerHTML",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"innerHTML"]],template:function(e,n){1&e&&(t.TgZ(0,"div"),t._UZ(1,"span",0,1),t.TgZ(3,"div",2),t.YNc(4,Dm,2,4,"span",3),t.YNc(5,Lm,1,1,"span",4),t.qZA()()),2&e&&(t.xp6(1),t.Gre("tooltip-caret position-",n.placement,""),t.Q6J("hidden",!n.showCaret),t.xp6(3),t.Q6J("ngIf",!n.title),t.xp6(1),t.Q6J("ngIf",n.title))},dependencies:[m.O5,m.tP],styles:[".ngx-charts-tooltip-content{position:fixed;border-radius:3px;z-index:5000;display:block;font-weight:400;opacity:0;pointer-events:none!important}.ngx-charts-tooltip-content.type-popover{background:#fff;color:#060709;border:1px solid #72809b;box-shadow:0 1px 3px #0003,0 1px 1px #00000024,0 2px 1px -1px #0000001f;font-size:13px;padding:4px}.ngx-charts-tooltip-content.type-popover .tooltip-caret{position:absolute;z-index:5001;width:0;height:0}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-left{border-top:7px solid transparent;border-bottom:7px solid transparent;border-left:7px solid #fff}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-top{border-left:7px solid transparent;border-right:7px solid transparent;border-top:7px solid #fff}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-right{border-top:7px solid transparent;border-bottom:7px solid transparent;border-right:7px solid #fff}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-bottom{border-left:7px solid transparent;border-right:7px solid transparent;border-bottom:7px solid #fff}.ngx-charts-tooltip-content.type-tooltip{color:#fff;background:rgba(0,0,0,.75);font-size:12px;padding:0 10px;text-align:center;pointer-events:auto}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-left{border-top:7px solid transparent;border-bottom:7px solid transparent;border-left:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-top{border-left:7px solid transparent;border-right:7px solid transparent;border-top:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-right{border-top:7px solid transparent;border-bottom:7px solid transparent;border-right:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-bottom{border-left:7px solid transparent;border-right:7px solid transparent;border-bottom:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content .tooltip-label{display:block;line-height:1em;padding:8px 5px 5px;font-size:1em}.ngx-charts-tooltip-content .tooltip-val{display:block;font-size:1.3em;line-height:1em;padding:0 5px 8px}.ngx-charts-tooltip-content .tooltip-caret{position:absolute;z-index:5001;width:0;height:0}.ngx-charts-tooltip-content.position-right{transform:translate(10px)}.ngx-charts-tooltip-content.position-left{transform:translate(-10px)}.ngx-charts-tooltip-content.position-top{transform:translateY(-10px)}.ngx-charts-tooltip-content.position-bottom{transform:translateY(10px)}.ngx-charts-tooltip-content.animate{opacity:1;transition:opacity .3s,transform .3s;transform:translate(0);pointer-events:auto}.area-tooltip-container{padding:5px 0;pointer-events:none}.tooltip-item{text-align:left;line-height:1.2em;padding:5px 0}.tooltip-item .tooltip-item-color{display:inline-block;height:12px;width:12px;margin-right:5px;color:#5b646b;border-radius:3px}\n"],encapsulation:2}),(0,mi.gn)([r_(100)],i.prototype,"onWindowResize",null),i})(),ql=(()=>{class i{constructor(e,n,a){this.applicationRef=e,this.componentFactoryResolver=n,this.injector=a}static setGlobalRootViewContainer(e){i.globalRootViewContainer=e}getRootViewContainer(){if(this._container)return this._container;if(i.globalRootViewContainer)return i.globalRootViewContainer;if(this.applicationRef.components.length)return this.applicationRef.components[0];throw new Error("View Container not found! ngUpgrade needs to manually set this via setRootViewContainer or setGlobalRootViewContainer.")}setRootViewContainer(e){this._container=e}getComponentRootNode(e){return function o_(i){return i.element}(e)?e.element.nativeElement:e.hostView&&e.hostView.rootNodes.length>0?e.hostView.rootNodes[0]:e.location.nativeElement}getRootViewContainerNode(e){return this.getComponentRootNode(e)}projectComponentBindings(e,n){if(n){if(void 0!==n.inputs){const a=Object.getOwnPropertyNames(n.inputs);for(const o of a)e.instance[o]=n.inputs[o]}if(void 0!==n.outputs){const a=Object.getOwnPropertyNames(n.outputs);for(const o of a)e.instance[o]=n.outputs[o]}}return e}appendComponent(e,n={},a){a||(a=this.getRootViewContainer());const o=this.getComponentRootNode(a),v=new tl.u0(o,this.componentFactoryResolver,this.applicationRef,this.injector),T=new tl.C5(e),N=v.attach(T);return this.projectComponentBindings(N,n),N}}return i.globalRootViewContainer=null,i.\u0275fac=function(e){return new(e||i)(t.LFG(t.z2F),t.LFG(t._Vd),t.LFG(t.zs3))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})(),Ms=(()=>{class i extends class s_{constructor(r){this.injectionService=r,this.defaults={},this.components=new Map}getByType(r=this.type){return this.components.get(r)}create(r){return this.createByType(this.type,r)}createByType(r,e){e=this.assignDefaults(e);const n=this.injectComponent(r,e);return this.register(r,n),n}destroy(r){const e=this.components.get(r.componentType);if(e&&e.length){const n=e.indexOf(r);n>-1&&(e[n].destroy(),e.splice(n,1))}}destroyAll(){this.destroyByType(this.type)}destroyByType(r){const e=this.components.get(r);if(e&&e.length){let n=e.length-1;for(;n>=0;)this.destroy(e[n--])}}injectComponent(r,e){return this.injectionService.appendComponent(r,e)}assignDefaults(r){const e={...this.defaults.inputs},n={...this.defaults.outputs};return!r.inputs&&!r.outputs&&(r={inputs:r}),e&&(r.inputs={...e,...r.inputs}),n&&(r.outputs={...n,...r.outputs}),r}register(r,e){this.components.has(r)||this.components.set(r,[]),this.components.get(r).push(e)}}{constructor(e){super(e),this.type=a_}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(ql))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})(),ac=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[m.ez]]}),i})();var Qr=(()=>{return(i=Qr||(Qr={})).popover="popover",i.tooltip="tooltip",Qr;var i})(),br=(()=>{return(i=br||(br={}))[i.all="all"]="all",i[i.focus="focus"]="focus",i[i.mouseover="mouseover"]="mouseover",br;var i})();let Rs,Ps=(()=>{class i{constructor(e,n,a){this.tooltipService=e,this.viewContainerRef=n,this.renderer=a,this.tooltipCssClass="",this.tooltipAppendToBody=!0,this.tooltipSpacing=10,this.tooltipDisabled=!1,this.tooltipShowCaret=!0,this.tooltipPlacement=ti.Top,this.tooltipAlignment=ti.Center,this.tooltipType=Qr.popover,this.tooltipCloseOnClickOutside=!0,this.tooltipCloseOnMouseLeave=!0,this.tooltipHideTimeout=300,this.tooltipShowTimeout=100,this.tooltipShowEvent=br.all,this.tooltipImmediateExit=!1,this.show=new t.vpe,this.hide=new t.vpe}get listensForFocus(){return this.tooltipShowEvent===br.all||this.tooltipShowEvent===br.focus}get listensForHover(){return this.tooltipShowEvent===br.all||this.tooltipShowEvent===br.mouseover}ngOnDestroy(){this.hideTooltip(!0)}onFocus(){this.listensForFocus&&this.showTooltip()}onBlur(){this.listensForFocus&&this.hideTooltip(!0)}onMouseEnter(){this.listensForHover&&this.showTooltip()}onMouseLeave(e){if(this.listensForHover&&this.tooltipCloseOnMouseLeave){if(clearTimeout(this.timeout),this.component&&this.component.instance.element.nativeElement.contains(e))return;this.hideTooltip(this.tooltipImmediateExit)}}onMouseClick(){this.listensForHover&&this.hideTooltip(!0)}showTooltip(e){if(this.component||this.tooltipDisabled)return;const n=e?0:this.tooltipShowTimeout+(navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?300:0);clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.tooltipService.destroyAll();const a=this.createBoundOptions();this.component=this.tooltipService.create(a),setTimeout(()=>{this.component&&this.addHideListeners(this.component.instance.element.nativeElement)},10),this.show.emit(!0)},n)}addHideListeners(e){this.mouseEnterContentEvent=this.renderer.listen(e,"mouseenter",()=>{clearTimeout(this.timeout)}),this.tooltipCloseOnMouseLeave&&(this.mouseLeaveContentEvent=this.renderer.listen(e,"mouseleave",()=>{this.hideTooltip(this.tooltipImmediateExit)})),this.tooltipCloseOnClickOutside&&(this.documentClickEvent=this.renderer.listen("window","click",n=>{e.contains(n.target)||this.hideTooltip()}))}hideTooltip(e=!1){if(!this.component)return;const n=()=>{this.mouseLeaveContentEvent&&this.mouseLeaveContentEvent(),this.mouseEnterContentEvent&&this.mouseEnterContentEvent(),this.documentClickEvent&&this.documentClickEvent(),this.hide.emit(!0),this.tooltipService.destroy(this.component),this.component=void 0};clearTimeout(this.timeout),e?n():this.timeout=setTimeout(n,this.tooltipHideTimeout)}createBoundOptions(){return{title:this.tooltipTitle,template:this.tooltipTemplate,host:this.viewContainerRef.element,placement:this.tooltipPlacement,alignment:this.tooltipAlignment,type:this.tooltipType,showCaret:this.tooltipShowCaret,cssClass:this.tooltipCssClass,spacing:this.tooltipSpacing,context:this.tooltipContext}}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Ms),t.Y36(t.s_b),t.Y36(t.Qsj))},i.\u0275dir=t.lG2({type:i,selectors:[["","ngx-tooltip",""]],hostBindings:function(e,n){1&e&&t.NdJ("focusin",function(){return n.onFocus()})("blur",function(){return n.onBlur()})("mouseenter",function(){return n.onMouseEnter()})("mouseleave",function(o){return n.onMouseLeave(o.target)})("click",function(){return n.onMouseClick()})},inputs:{tooltipCssClass:"tooltipCssClass",tooltipTitle:"tooltipTitle",tooltipAppendToBody:"tooltipAppendToBody",tooltipSpacing:"tooltipSpacing",tooltipDisabled:"tooltipDisabled",tooltipShowCaret:"tooltipShowCaret",tooltipPlacement:"tooltipPlacement",tooltipAlignment:"tooltipAlignment",tooltipType:"tooltipType",tooltipCloseOnClickOutside:"tooltipCloseOnClickOutside",tooltipCloseOnMouseLeave:"tooltipCloseOnMouseLeave",tooltipHideTimeout:"tooltipHideTimeout",tooltipShowTimeout:"tooltipShowTimeout",tooltipTemplate:"tooltipTemplate",tooltipShowEvent:"tooltipShowEvent",tooltipContext:"tooltipContext",tooltipImmediateExit:"tooltipImmediateExit"},outputs:{show:"show",hide:"hide"}}),i})(),sc=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[ql,Ms],imports:[[m.ez]]}),i})();typeof window<"u"?Rs=window:typeof global<"u"&&(Rs=global);let $n=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[m.ez,ac,sc],m.ez,ac,sc]}),i})(),x_=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[$n]]}),i})(),fc=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[$n]]}),i})(),y_=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[$n]]}),i})(),b_=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[$n]]}),i})(),T_=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[$n]]}),i})(),mc=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[$n]]}),i})();Math;let Zs=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[$n]]}),i})(),A_=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[$n,Zs,mc]]}),i})(),E_=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[$n]]}),i})(),D_=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[$n]]}),i})(),L_=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[$n,Zs,fc]]}),i})(),I_=(()=>{class i{constructor(){!function k_(){typeof SVGElement<"u"&&typeof SVGElement.prototype.contains>"u"&&(SVGElement.prototype.contains=HTMLDivElement.prototype.contains)}()}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[$n,x_,fc,y_,b_,T_,mc,A_,E_,Zs,D_,L_]}),i})();function O_(i,r){1&i&&(t.TgZ(0,"div"),t._UZ(1,"mat-spinner",3),t.qZA())}function M_(i,r){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.TgZ(3,"strong"),t._uU(4),t.qZA()()),2&i){const e=t.oxw(3);t.xp6(1),t.hij(" ",t.lcZ(2,2,"ADMIN.VISUALIZER.USER_DESTINATION.FOUND_3")," "),t.xp6(3),t.Oqu(e.service)}}function N_(i,r){1&i&&(t.O4$(),t.TgZ(0,"marker",10),t._UZ(1,"path",11),t.qZA())}function P_(i,r){if(1&i&&(t.O4$(),t.TgZ(0,"g",12),t._UZ(1,"rect"),t.TgZ(2,"text",13),t._uU(3),t.qZA()()),2&i){const e=r.$implicit;t.Q6J("tooltipTitle",e.tooltip)("tooltipPlacement","top")("tooltipType","tooltip"),t.xp6(1),t.uIk("fill",e.color)("height",e.dimension.height)("width",e.dimension.width),t.xp6(1),t.uIk("y",e.dimension.height/2)("x",10),t.xp6(1),t.hij(" ",e.label," ")}}function F_(i,r){if(1&i&&(t.O4$(),t.TgZ(0,"g",14),t._UZ(1,"path",15),t.TgZ(2,"text",16)(3,"textPath",17),t._uU(4),t.qZA()()()),2&i){const e=r.$implicit;t.xp6(3),t.uIk("href","#"+e.id),t.xp6(1),t.hij(" ",e.label," ")}}const R_=function(i,r){return[i,r]};function B_(i,r){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.TgZ(3,"strong"),t._uU(4),t.qZA(),t._uU(5),t.ALo(6,"translate"),t.TgZ(7,"strong"),t._uU(8),t.qZA(),t.YNc(9,M_,5,4,"span",4),t.TgZ(10,"div",5)(11,"ngx-graph",6),t.YNc(12,N_,2,0,"ng-template",null,7,t.W1O),t.YNc(14,P_,4,9,"ng-template",null,8,t.W1O),t.YNc(16,F_,5,2,"ng-template",null,9,t.W1O),t.qZA()()()),2&i){const e=t.oxw(2);t.xp6(1),t.hij(" ",t.lcZ(2,12,"ADMIN.VISUALIZER.USER_DESTINATION.FOUND_1")," "),t.xp6(3),t.AsE("",e.user.firstName," ",e.user.lastName,""),t.xp6(1),t.hij(" ",t.lcZ(6,14,"ADMIN.VISUALIZER.USER_DESTINATION.FOUND_2")," "),t.xp6(3),t.Oqu(e.destination),t.xp6(1),t.Q6J("ngIf","noService"!==e.service),t.xp6(2),t.Q6J("links",e.hierarchialGraph.links)("nodes",e.hierarchialGraph.nodes)("view",t.WLB(16,R_,e.innerWidth,e.innerHeight))("curve",e.curve)("draggingEnabled",!1)("zoomToFit$",e.zoomToFit$)}}function Z_(i,r){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.TgZ(3,"strong"),t._uU(4),t.qZA()()),2&i){const e=t.oxw(3);t.xp6(1),t.hij(" ",t.lcZ(2,2,"ADMIN.VISUALIZER.USER_DESTINATION.NOT_FOUND_3")," "),t.xp6(3),t.Oqu(e.service)}}function V_(i,r){if(1&i&&(t._uU(0),t.ALo(1,"translate"),t.TgZ(2,"strong"),t._uU(3),t.qZA(),t._uU(4),t.ALo(5,"translate"),t.TgZ(6,"strong"),t._uU(7),t.qZA(),t.YNc(8,Z_,5,4,"span",4),t._uU(9),t.ALo(10,"translate")),2&i){const e=t.oxw(2);t.hij(" ",t.lcZ(1,7,"ADMIN.VISUALIZER.USER_DESTINATION.NOT_FOUND_1")," "),t.xp6(3),t.AsE("",e.user.firstName," ",e.user.lastName,""),t.xp6(1),t.hij(" ",t.lcZ(5,9,"ADMIN.VISUALIZER.USER_DESTINATION.NOT_FOUND_2")," "),t.xp6(3),t.Oqu(e.destination),t.xp6(1),t.Q6J("ngIf","noService"!==e.service),t.xp6(1),t.hij(" ",t.lcZ(10,11,"ADMIN.VISUALIZER.USER_DESTINATION.NOT_FOUND_4")," ")}}function G_(i,r){if(1&i&&(t.YNc(0,B_,18,19,"div",1),t.YNc(1,V_,11,13,"ng-template",null,2,t.W1O)),2&i){const e=t.MAs(2),n=t.oxw();t.Q6J("ngIf",n.isConnected)("ngIfElse",e)}}let U_=(()=>{class i{constructor(e,n,a,o,v,T,N,G,tt){this.route=e,this.facilityManager=n,this.userService=a,this.membersService=o,this.serviceService=v,this.resourceManager=T,this.groupService=N,this.voService=G,this.translate=tt,this.isConnected=!1,this.loading=!0,this.hierarchialGraph={nodes:[],links:[]},this.curve=De,this.zoomToFit$=new Le.x,this.idCounter=0}static findConnectedGroups(e,n){const a=[];for(const o of e)for(const v of n)o.id===v.id&&a.push(o);return a}static findConnectedResources(e,n){const a=[];for(const o of e)for(const v of n)o.id===v.id&&a.push(o);return a}onResize(){this.innerWidth=window.innerWidth<600?window.innerWidth:window.innerWidth-420,this.innerHeight=window.innerHeight}ngOnInit(){this.innerWidth=window.innerWidth<600?window.innerWidth:window.innerWidth-420,this.innerHeight=window.innerHeight,this.getLocalizedNames(),this.route.queryParams.subscribe(e=>{this.destination=String(e.destination),this.service=String(e.service),this.userService.getUserById(Number(e.user)).subscribe(n=>{this.user=n,this.facilityManager.getFacilitiesByDestination(this.destination).subscribe(a=>{this.facilities=a,this.membersService.getMembersByUser(this.user.id).subscribe(o=>{if(this.membership=o,0===this.membership.length||0===this.facilities.length)return this.loading=!1,void(this.isConnected=!1);this.showGraph()})})})})}showGraph(){const e=""+this.id().toString(),n=this.user.firstName??" "+this.user.lastName??"",a=this.localUser,o="user: "+this.user.id.toString();this.hierarchialGraph.nodes.push({id:e,label:n,tooltip:a,color:"#FFFFCC",tip:o});const T=""+this.id().toString(),N="destination no id";this.hierarchialGraph.nodes.push("noService"===this.service?{id:T,label:this.destination,tooltip:this.localDestination+": "+this.destination,color:"#E0E0E0",tip:N}:{id:T,label:this.service+": "+this.destination,tooltip:this.localService+": "+this.service+", "+this.localDestination+": "+this.destination,color:"#E0E0E0",tip:N});for(const G of this.facilities)this.serviceService.getAllRichDestinationsForFacility(G.id).subscribe(tt=>{this.connectToService(G,tt),setTimeout(()=>{this.zoomToFit$.next(!0),this.loading=!1},2e3)})}connectToService(e,n){this.isConnectedToService(n)&&this.facilityManager.getAssignedResourcesForFacility(e.id).subscribe(a=>{for(const o of this.membership)this.connectToGroups(e,o,a)})}connectToGroups(e,n,a){this.facilityManager.getAllowedGroups(e.id,n.voId).subscribe(o=>{0!==o.length&&this.groupService.getMemberGroups(n.id).subscribe(v=>{const T=i.findConnectedGroups(o,v);if(0!==T.length)for(const N of T)this.connectToResource(e,N,a)})})}haveService(e){if("noService"===this.service)return!0;for(const n of e)if(this.service===n.name)return!0;return!1}connectToResource(e,n,a){this.resourceManager.getAssignedResourcesWithGroup(n.id).subscribe(o=>{const v=i.findConnectedResources(o,a);for(const T of v)this.resourceManager.getAssignedServicesToResource(T.id).subscribe(N=>{this.haveService(N)&&(this.isConnected=!0,this.addNodesToGraph(n.voId,n,T,e))})})}addNodesToGraph(e,n,a,o){if(-1===this.findEntityInGraph("Facility: "+o.id.toString())){const v=""+this.id().toString(),T=this.localFacility+": "+o.name,N=o.description,G="Facility: "+o.id.toString();this.hierarchialGraph.nodes.push({id:v,label:T,tooltip:N,color:"#FFCCFF",tip:G});const lt={source:v,target:this.hierarchialGraph.nodes[this.findEntityInGraph("destination no id")].id};this.hierarchialGraph.links.push(lt)}this.voService.getVoById(e).subscribe(v=>{if(-1===this.findEntityInGraph("Vo: "+v.id.toString())){const N=this.id().toString(),G=this.localVo+": "+v.shortName,tt=v.name,lt="Vo: "+v.id.toString();this.hierarchialGraph.nodes.push({id:N,label:G,tooltip:tt,color:"#E5FFCC",tip:lt});const wt={source:this.hierarchialGraph.nodes[this.findEntityInGraph("user: "+this.user.id.toString())].id,target:N};this.hierarchialGraph.links.push(wt)}if(-1===this.findEntityInGraph("Group: "+n.id.toString())){const N=this.id().toString(),G=this.localGroup+": "+n.name,tt=n.description,lt="Group: "+n.id.toString();this.hierarchialGraph.nodes.push({id:N,label:G,tooltip:tt,color:"#CCE5FF",tip:lt});const wt={source:this.hierarchialGraph.nodes[this.findEntityInGraph("Vo: "+v.id.toString())].id,target:N};this.hierarchialGraph.links.push(wt)}const T=this.findEntityInGraph("Resource: "+a.id.toString());if(-1!==T){const N={source:this.hierarchialGraph.nodes[this.findEntityInGraph("Group: "+n.id.toString())].id,target:this.hierarchialGraph.nodes[T].id};this.hierarchialGraph.links.push(N)}else{const N=this.id().toString(),G=this.localResource+": "+a.name,tt=a.description,lt="Resource: "+a.id.toString();this.hierarchialGraph.nodes.push({id:N,label:G,tooltip:tt,color:"#FFCCCC",tip:lt});const wt={source:this.hierarchialGraph.nodes[this.findEntityInGraph("Group: "+n.id.toString())].id,target:N};this.hierarchialGraph.links.push(wt);const kt={source:N,target:this.hierarchialGraph.nodes[this.findEntityInGraph("Facility: "+o.id.toString())].id};this.hierarchialGraph.links.push(kt)}})}findEntityInGraph(e){for(let n=0;n<this.hierarchialGraph.nodes.length;n++)if(this.hierarchialGraph.nodes[n].tip===e)return n;return-1}isConnectedToService(e){for(const n of e)if(n.destination===this.destination&&(n.service.name===this.service||"noService"===this.service))return!0;return!1}id(){return this.idCounter++,this.idCounter}getLocalizedNames(){this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.USER").subscribe(e=>{this.localUser=e}),this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.VO").subscribe(e=>{this.localVo=e}),this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.GROUP").subscribe(e=>{this.localGroup=e}),this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.RESOURCE").subscribe(e=>{this.localResource=e}),this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.FACILITY").subscribe(e=>{this.localFacility=e}),this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.SERVICE").subscribe(e=>{this.localService=e}),this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.DESTINATION").subscribe(e=>{this.localDestination=e})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(p.gz),t.Y36(Y.IQ),t.Y36(Y.Fv),t.Y36(Y.uq),t.Y36(Y.KK),t.Y36(Y.xk),t.Y36(Y.ff),t.Y36(Y.YF),t.Y36(u.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-user-destination-graph"]],hostVars:2,hostBindings:function(e,n){1&e&&t.NdJ("resize",function(o){return n.onResize(o)},!1,t.Jf7),2&e&&t.ekj("router-component",n.true)},decls:6,vars:5,consts:[[1,"page-subtitle"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"ml-auto","mr-auto"],[4,"ngIf"],[1,"card","w-100","h-100"],[1,"chart-container",3,"links","nodes","view","curve","draggingEnabled","zoomToFit$"],["defsTemplate",""],["nodeTemplate",""],["linkTemplate",""],["id","arrow","markerHeight","4","refX","8","refY","0","markerWidth","4","orient","auto","viewBox","0 -5 10 10"],["d","M0,-5L10,0L0,5",1,"arrow-head"],["ngx-tooltip","",1,"node",3,"tooltipTitle","tooltipPlacement","tooltipType"],["alignment-baseline","central"],[1,"edge"],["marker-end","url(#arrow)","stroke-width","2",1,"line"],["text-anchor","end",1,"edge-label"],["startOffset","60%",2,"fill","#000"]],template:function(e,n){if(1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.YNc(3,O_,2,0,"div",1),t.YNc(4,G_,3,2,"ng-template",null,2,t.W1O)),2&e){const a=t.MAs(5);t.xp6(1),t.hij(" ",t.lcZ(2,3,"ADMIN.VISUALIZER.USER_DESTINATION.TITLE"),"\n"),t.xp6(2),t.Q6J("ngIf",n.loading)("ngIfElse",a)}},dependencies:[Tp,m.O5,Ps,nt.Ou,u.X$]}),i})();var z_=s(25828),gc=s(69024),H_=s(29862),fa=s(74281),Y_=s(31359);function W_(i,r){1&i&&t._UZ(0,"mat-spinner",3)}function X_(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"span")(1,"button",12),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.editUser())}),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()(),t.TgZ(4,"button",13),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.anonymizeUser())}),t.TgZ(5,"mat-icon"),t._uU(6,"no_accounts"),t.qZA()()()}}const $_=function(){return{color:"black"}},Q_=function(i){return["/admin/users",i]};function j_(i,r){if(1&i&&(t.TgZ(0,"div",4),t._UZ(1,"mat-icon",5),t.ALo(2,"translate"),t.TgZ(3,"div",6)(4,"div",7)(5,"a",8),t._uU(6),t.ALo(7,"userFullName"),t.qZA(),t.TgZ(8,"span",9),t._uU(9),t.qZA(),t.YNc(10,X_,7,0,"span",10),t.qZA(),t.TgZ(11,"div"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"span",11),t._uU(15),t.ALo(16,"translate"),t.ALo(17,"translate"),t.qZA()()()),2&i){const e=t.oxw();t.xp6(1),t.s9C("matTooltip",t.lcZ(2,12,"ADMIN_USER.ENTITY")),t.Q6J("ngStyle",t.DdM(22,$_))("svgIcon",e.svgIcon),t.xp6(4),t.Q6J("routerLink",t.VKq(23,Q_,e.user.id)),t.xp6(1),t.hij(" ",t.lcZ(7,14,e.user)," "),t.xp6(3),t.hij(" \xa0#",e.user.id," "),t.xp6(1),t.Q6J("ngIf",e.authResolver.isPerunAdmin()),t.xp6(2),t.AsE("",t.lcZ(13,16,"ADMIN_USER.UUID"),": ",e.user.uuid,""),t.xp6(3),t.lnq(" ",t.lcZ(16,18,"ADMIN_USER.ENTITY"),", ",t.lcZ(17,20,"ADMIN_USER.USER_TYPE"),": ",e.getUserType()," ")}}let J_=(()=>{class i{constructor(e,n,a,o,v,T,N,G){this.route=e,this.usersService=n,this.sideMenuService=a,this.sideMenuItemService=o,this.dialog=v,this.authResolver=T,this.entityStorageService=N,this.router=G,this.loading=!1,this.svgIcon="perun-user-dark"}ngOnInit(){this.loading=!0,this.route.params.subscribe(e=>{const n=Number(e.userId);this.entityStorageService.setEntity({id:Number(n),beanName:"User"}),this.path=`/admin/users/${n}`,this.regex="/admin/users/\\d+",this.usersService.getUserById(n).subscribe(a=>{this.user=a,this.user.serviceUser&&(this.svgIcon="perun-service-identity");const o=this.sideMenuItemService.parseUser(a,this.path,this.regex);this.sideMenuService.setAdminItems([o]),this.loading=!1},()=>this.loading=!1)})}editUser(){const e=(0,he.kZ)();e.width="450px",e.data={theme:"admin-theme",user:this.user},this.dialog.open(H_.x,e).afterClosed().subscribe(a=>{a&&this.usersService.getUserById(this.user.id).subscribe(o=>{this.user=o})})}getUserType(){return this.user.serviceUser?"Service":"Person"}anonymizeUser(){const e=(0,he.kZ)();e.width="550px",e.data={theme:"admin-theme",user:this.user},this.dialog.open(fa.GI,e).afterClosed().subscribe(a=>{a&&this.router.navigate(["/admin","users"],{queryParamsHandling:"merge"})})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(p.gz),t.Y36(Y.Fv),t.Y36(d.D),t.Y36(gc.V),t.Y36(M.uw),t.Y36(B.x4),t.Y36(B.fb),t.Y36(p.F0))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-admin-user-detail-page"]],decls:5,vars:2,consts:[[1,"container-fluid","pl-xl-5","pr-xl-5","user-theme"],["class","mr-auto ml-auto",4,"ngIf"],["class","d-flex page-title-headtitle",4,"ngIf"],[1,"mr-auto","ml-auto"],[1,"d-flex","page-title-headtitle"],[1,"perun-icon","perun-icon-detail",3,"ngStyle","svgIcon","matTooltip"],[1,"page-title-block"],[1,"page-title-headline","d-flex","align-items-center"],["queryParamsHandling","merge","data-cy","user-name-link",1,"user-link",3,"routerLink"],[1,"text-muted"],[4,"ngIf"],[1,"mt-1","entity-info"],["mat-icon-button","","data-cy","edit-user-button",3,"click"],["mat-icon-button","",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"perun-web-apps-back-button"),t.YNc(2,W_,1,0,"mat-spinner",1),t.YNc(3,j_,18,25,"div",2),t._UZ(4,"app-animated-router-outlet"),t.qZA()),2&e&&(t.xp6(2),t.Q6J("ngIf",n.loading),t.xp6(1),t.Q6J("ngIf",!n.loading&&void 0!==n.user))},dependencies:[m.O5,m.PC,p.yS,l.Hw,V.lW,nt.Ou,oi.gM,h.A,f.W,u.X$,Y_.d]}),i})();var K_=s(17755),q_=s(74837),tv=s(85985),ev=s(98973),iv=s(15935);function nv(i,r){1&i&&t._UZ(0,"mat-spinner",5)}const rv=function(){return["id","name","type"]};function av(i,r){if(1&i&&t._UZ(0,"app-ext-sources-list",6),2&i){const e=t.oxw();t.Q6J("extSources",e.extSources)("filterValue",e.filterValue)("displayedColumns",t.DdM(4,rv))("tableId",e.tableId)}}let sv=(()=>{class i{constructor(e,n,a,o){this.extSourceService=e,this.notificator=n,this.translate=a,this.authResolver=o,this.extSources=[],this.filterValue="",this.loading=!1,this.tableId=Si.qy,this.translate.get("ADMIN.EXT_SOURCES.LOAD_SUCCESS").subscribe(v=>this.loadSuccess=v)}ngOnInit(){this.refreshTable()}applyFilter(e){this.filterValue=e}onLoad(){this.extSourceService.loadExtSourcesDefinitions().subscribe(()=>{this.notificator.showSuccess(this.loadSuccess),this.refreshTable()})}refreshTable(){this.loading=!0,this.extSourceService.getExtSources().subscribe(e=>{this.extSources=e,this.loading=!1})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Y.KG),t.Y36(B.V6),t.Y36(u.sK),t.Y36(B.x4))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-admin-ext-sources"]],decls:8,vars:6,consts:[[1,"page-subtitle"],[3,"click"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"extSources","filterValue","displayedColumns","tableId",4,"ngIf"],[1,"ml-auto","mr-auto"],[3,"extSources","filterValue","displayedColumns","tableId"]],template:function(e,n){1&e&&(t.TgZ(0,"div")(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"perun-web-apps-refresh-button",1),t.NdJ("click",function(){return n.onLoad()}),t.qZA(),t.TgZ(5,"perun-web-apps-immediate-filter",2),t.NdJ("filter",function(o){return n.applyFilter(o)}),t.qZA(),t.YNc(6,nv,1,0,"mat-spinner",3),t.YNc(7,av,1,5,"app-ext-sources-list",4),t.qZA()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,4,"ADMIN.EXT_SOURCES.TITLE")),t.xp6(3),t.Q6J("placeholder","ADMIN.EXT_SOURCES.SEARCH"),t.xp6(1),t.Q6J("ngIf",n.loading),t.xp6(1),t.Q6J("ngIf",!n.loading))},dependencies:[m.O5,nt.Ou,iv.D,Mi.t,Ei.L,u.X$]}),i})();var ov=s(6097),lv=s(97453),Va=s(54004);function cv(i,r){1&i&&t._UZ(0,"mat-spinner",7)}function uv(i,r){if(1&i&&(t.TgZ(0,"mat-option",14),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e.name," ")}}function hv(i,r){if(1&i&&(t.TgZ(0,"div")(1,"mat-form-field",8),t._UZ(2,"input",9),t.ALo(3,"translate"),t.TgZ(4,"mat-error"),t._uU(5),t.ALo(6,"translate"),t.qZA()(),t.TgZ(7,"mat-form-field",8),t._UZ(8,"input",10),t.ALo(9,"translate"),t.TgZ(10,"mat-error"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"mat-autocomplete",11,12),t.YNc(15,uv,2,2,"mat-option",13),t.ALo(16,"async"),t.qZA()()()),2&i){const e=t.MAs(14),n=t.oxw();t.xp6(2),t.s9C("placeholder",t.lcZ(3,9,"DIALOGS.ADD_USER_EXT_SOURCE.LOGIN")),t.Q6J("formControl",n.loginControl),t.xp6(3),t.hij(" ",t.lcZ(6,11,"DIALOGS.ADD_USER_EXT_SOURCE.EMPTY_LOGIN")," "),t.xp6(3),t.s9C("placeholder",t.lcZ(9,13,"DIALOGS.ADD_USER_EXT_SOURCE.EXT_SOURCE")),t.Q6J("formControl",n.extSourcesControl)("matAutocomplete",e),t.xp6(3),t.hij(" ",t.lcZ(12,15,"DIALOGS.ADD_USER_EXT_SOURCE.EMPTY_EXT_SOURCE")," "),t.xp6(2),t.Q6J("displayWith",n.displayFn),t.xp6(2),t.Q6J("ngForOf",t.lcZ(16,17,n.filteredExtSources))}}let dv=(()=>{class i{constructor(e,n,a,o,v,T){this.dialogRef=e,this.data=n,this.extSourcesManagerService=a,this.usersManagerService=o,this.translate=v,this.notificator=T,this.extSources=[],v.get("DIALOGS.ADD_USER_EXT_SOURCE.SUCCESS").subscribe(N=>this.successMessage=N)}ngOnInit(){this.loading=!0,this.loginControl=new it.p4("",[it.kI.required,it.kI.pattern(".*[\\S]+.*")]),this.extSourcesControl=new it.p4("",[it.kI.required]),this.loginControl.markAllAsTouched(),this.extSourcesControl.markAllAsTouched(),this.filteredExtSources=this.extSourcesControl.valueChanges.pipe((0,cn.O)(""),(0,Va.U)(e=>this._filter(e))),this.extSourcesManagerService.getExtSources().subscribe(e=>{this.extSources=e,this.filteredExtSources=this.extSourcesControl.valueChanges.pipe((0,cn.O)(""),(0,Va.U)(n=>this._filter(n))),this.loading=!1},()=>this.loading=!1)}displayFn(e){return e?e.name:null}onCancel(){this.dialogRef.close(!1)}onAdd(){this.loading=!0,this.usersManagerService.addUserExtSource({user:this.data.userId,userExtSource:{beanName:"",extSource:this.extSourcesControl.value,id:0,login:this.loginControl.value,userId:this.data.userId}}).subscribe(()=>{this.loading=!1,this.notificator.showSuccess(this.successMessage),this.dialogRef.close(!0)},()=>this.loading=!1)}_filter(e){const n="string"==typeof e?e.toLowerCase():e.name.toLowerCase();return this.extSources.filter(a=>a.name.toLowerCase().includes(n))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(M.so),t.Y36(M.WI),t.Y36(Y.KG),t.Y36(Y.Fv),t.Y36(u.sK),t.Y36(B.V6))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-add-user-ext-source-dialog"]],decls:13,vars:12,consts:[["mat-dialog-title",""],["mat-dialog-content","",1,"dialog-container","user-theme"],["class","ml-auto mr-auto",4,"ngIf"],[4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["color","accent","mat-flat-button","",1,"ml-2",3,"disabled","click"],[1,"ml-auto","mr-auto"],[1,"center-self","w-100"],["matInput","","required","",3,"formControl","placeholder"],["matInput","","required","","type","text",3,"formControl","matAutocomplete","placeholder"],[3,"displayWith"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,n){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"div",1),t.YNc(4,cv,1,0,"mat-spinner",2),t.YNc(5,hv,17,19,"div",3),t.qZA(),t.TgZ(6,"div",4)(7,"button",5),t.NdJ("click",function(){return n.onCancel()}),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"button",6),t.NdJ("click",function(){return n.onAdd()}),t._uU(11),t.ALo(12,"translate"),t.qZA()()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,6,"DIALOGS.ADD_USER_EXT_SOURCE.TITLE")),t.xp6(3),t.Q6J("ngIf",n.loading),t.xp6(1),t.Q6J("ngIf",!n.loading),t.xp6(3),t.hij(" ",t.lcZ(9,8,"DIALOGS.ADD_USER_EXT_SOURCE.CANCEL")," "),t.xp6(2),t.Q6J("disabled",n.loginControl.invalid||n.extSourcesControl.invalid||n.loading),t.xp6(1),t.hij(" ",t.lcZ(12,10,"DIALOGS.ADD_USER_EXT_SOURCE.ADD")," "))},dependencies:[m.sg,m.O5,Ji.XC,Ji.ZL,Nt.ey,Kt.TO,Kt.KE,ce.Nt,it.Fj,it.JJ,it.Q7,it.oH,V.lW,M.uh,M.xY,M.H8,nt.Ou,m.Ov,u.X$],styles:[".column-size[_ngcontent-%COMP%]{width:10rem!important;font-weight:700}.center-self[_ngcontent-%COMP%]{margin-top:auto;margin-bottom:auto}.auto-width[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:auto!important}.auto-width[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]{max-width:100%;width:auto}.pre-wrap[_ngcontent-%COMP%]{white-space:pre-wrap}"]}),i})();var pv=s(80275);function fv(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.addIdentity())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"USER_DETAIL.IDENTITIES.ADD"),"\n"))}function mv(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.removeIdentity())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("disabled",0===e.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(2,2,"USER_DETAIL.IDENTITIES.REMOVE"),"\n")}}function gv(i,r){1&i&&t._UZ(0,"mat-spinner",10)}function _v(i,r){if(1&i&&(t.TgZ(0,"div"),t._UZ(1,"perun-web-apps-user-ext-sources-list",11),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("displayedColumns",e.displayedColumns)("filterValue",e.filterValue)("selection",e.selection)("tableId",e.tableId)("userExtSources",e.userExtSources)}}let vv=(()=>{class i{constructor(e,n,a,o,v,T){this.usersManagerService=e,this.storage=n,this.registrarManagerService=a,this.dialog=o,this.route=v,this.authResolver=T,this.userExtSources=[],this.selection=new R.Ov(!1,[]),this.displayedColumns=["select","id","extSourceName","login","lastAccess"],this.tableId=Si.gG,this.filterValue=""}ngOnInit(){this.route.parent.params.subscribe(e=>{this.userId=Number(e.userId)}),this.refreshTable()}refreshTable(){this.loading=!0,this.selection.clear(),this.usersManagerService.getRichUserExtSources(this.userId).subscribe(e=>{this.userExtSources=e,this.loading=!1},()=>this.loading=!1)}addIdentity(){const e=(0,he.kZ)();e.width="1000px",e.data={userId:this.userId},this.dialog.open(dv,e).afterClosed().subscribe(a=>{a&&this.refreshTable()})}removeIdentity(){const e=(0,he.kZ)();e.width="450px",e.data={showSuccess:!0,theme:"user-theme",userId:this.userId,extSources:this.selection.selected},this.dialog.open(fa.Lc,e).afterClosed().subscribe(a=>{a&&this.refreshTable()})}applyFilter(e){this.filterValue=e}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Y.Fv),t.Y36(B.d6),t.Y36(Y.tk),t.Y36(M.uw),t.Y36(p.gz),t.Y36(B.x4))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-user-identities"]],decls:10,vars:8,consts:[[1,"page-subtitle"],[3,"refresh"],["class","mr-2 action-button","color","accent","mat-flat-button","",3,"click",4,"ngIf"],["class","mr-2","color","warn","mat-flat-button","",3,"disabled","click",4,"ngIf"],[3,"placeholder","filter"],[1,"admin-theme"],["class","ml-auto mr-auto",4,"ngIf"],[4,"ngIf"],["color","accent","mat-flat-button","",1,"mr-2","action-button",3,"click"],["color","warn","mat-flat-button","",1,"mr-2",3,"disabled","click"],[1,"ml-auto","mr-auto"],[3,"displayedColumns","filterValue","selection","tableId","userExtSources"]],template:function(e,n){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"perun-web-apps-refresh-button",1),t.NdJ("refresh",function(){return n.refreshTable()}),t.qZA(),t.YNc(4,fv,3,3,"button",2),t.YNc(5,mv,3,4,"button",3),t.TgZ(6,"perun-web-apps-immediate-filter",4),t.NdJ("filter",function(o){return n.applyFilter(o)}),t.qZA(),t.TgZ(7,"div",5),t.YNc(8,gv,1,0,"mat-spinner",6),t.qZA(),t.YNc(9,_v,2,5,"div",7)),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,6,"USER_DETAIL.IDENTITIES.TITLE")),t.xp6(3),t.Q6J("ngIf",n.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("ngIf",n.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("placeholder","USER_DETAIL.IDENTITIES.FILTER_PLACEHOLDER"),t.xp6(2),t.Q6J("ngIf",n.loading),t.xp6(1),t.Q6J("ngIf",!n.loading))},dependencies:[m.O5,V.lW,nt.Ou,Mi.t,Ei.L,pv.j,u.X$]}),i})();var xv=s(80774),yv=s(62109);function bv(i,r){1&i&&t._UZ(0,"mat-spinner",5)}const Tv=function(){return["id","name","vo","facility","description"]};function Cv(i,r){if(1&i&&t._UZ(0,"perun-web-apps-resources-list",6),2&i){const e=t.oxw();t.Q6J("displayedColumns",t.DdM(4,Tv))("resources",e.resources)("filterValue",e.filterValue)("tableId",e.tableId)}}let wv=(()=>{class i{constructor(e,n){this.userManager=e,this.route=n,this.resources=[],this.tableId=Si.kO,this.filterValue=""}ngOnInit(){this.refreshTable()}refreshTable(){this.loading=!0,this.route.parent.params.subscribe(e=>{const n=Number(e.userId);this.userManager.getAssignedRichResourcesForUser(n).subscribe(a=>{this.resources=a,this.loading=!1})})}resourceFilter(e){this.filterValue=e}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Y.Fv),t.Y36(p.gz))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-perun-web-apps-user-resources"]],decls:8,vars:6,consts:[[1,"page-subtitle"],[3,"refresh"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"displayedColumns","resources","filterValue","tableId",4,"ngIf"],[1,"ml-auto","mr-auto"],[3,"displayedColumns","resources","filterValue","tableId"]],template:function(e,n){1&e&&(t.TgZ(0,"div")(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"perun-web-apps-refresh-button",1),t.NdJ("refresh",function(){return n.refreshTable()}),t.qZA(),t.TgZ(5,"perun-web-apps-immediate-filter",2),t.NdJ("filter",function(o){return n.resourceFilter(o)}),t.qZA(),t.YNc(6,bv,1,0,"mat-spinner",3),t.YNc(7,Cv,1,5,"perun-web-apps-resources-list",4),t.qZA()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,4,"USER_DETAIL.RESOURCES.TITLE")),t.xp6(3),t.Q6J("placeholder","SHARED_LIB.PERUN.COMPONENTS.RESOURCES_LIST.TABLE_SEARCH"),t.xp6(1),t.Q6J("ngIf",n.loading),t.xp6(1),t.Q6J("ngIf",!n.loading))},dependencies:[m.O5,nt.Ou,Mi.t,Ei.L,yv.C,u.X$]}),i})();var Av=s(61365),Sv=s(71103),Ev=s(53984);const Dv=["list"];function Lv(i,r){1&i&&t._UZ(0,"mat-spinner",8)}function kv(i,r){if(1&i&&t._UZ(0,"perun-web-apps-attributes-list",9,10),2&i){const e=t.oxw();t.Q6J("selection",e.selection)("attributes",e.attributes)("tableId",e.tableId)}}let Iv=(()=>{class i{constructor(e,n,a,o){this.dialog=e,this.attributesManager=n,this.userService=a,this.route=o,this.loading=!1,this.selection=new R.Ov(!0,[]),this.tableId=Si.rF,this.attributes=[]}ngOnInit(){this.route.params.subscribe(e=>{const n=Number(e.identityId);this.userService.getUserExtSourceById(n).subscribe(a=>{this.userExtSource=a,this.refreshTable()})})}refreshTable(){this.loading=!0,this.attributesManager.getUserExtSourceAttributes(this.userExtSource.id).subscribe(e=>{this.attributes=(0,he.MX)(e),this.selection.clear(),this.loading=!1})}onAdd(){const e=(0,he.kZ)();e.width="1050px",e.data={entityId:this.userExtSource.id,entity:"ues",notEmptyAttributes:this.attributes,style:"user-theme"},this.dialog.open(Sv.n,e).afterClosed().subscribe(a=>{"saved"===a&&this.refreshTable()})}onSave(){this.list.updateMapAttributes();const e=(0,he.kZ)();e.width="450px",e.data={entityId:this.userExtSource.id,entity:"ues",attributes:this.selection.selected},this.dialog.open(fa.wA,e).afterClosed().subscribe(a=>{a&&this.refreshTable()})}onRemove(){const e=(0,he.kZ)();e.width="450px",e.data={entityId:this.userExtSource.id,entity:"ues",attributes:this.selection.selected},this.dialog.open(Av.k,e).afterClosed().subscribe(a=>{a&&this.refreshTable()})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(M.uw),t.Y36(Y.H8),t.Y36(Y.Fv),t.Y36(p.gz))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-identity-detail"]],viewQuery:function(e,n){if(1&e&&t.Gf(Dv,5),2&e){let a;t.iGM(a=t.CRH())&&(n.list=a.first)}},decls:26,vars:32,consts:[[1,"page-subtitle"],[1,"mb-2"],[3,"refresh"],["color","accent","mat-flat-button","",1,"mr-2",3,"disabled","click"],["color","accent","mat-flat-button","",1,"mr-2",3,"click"],["color","warn","mat-flat-button","",1,"mr-2",3,"disabled","click"],["class","ml-auto mr-auto",4,"ngIf"],[3,"selection","attributes","tableId",4,"ngIf"],[1,"ml-auto","mr-auto"],[3,"selection","attributes","tableId"],["list",""]],template:function(e,n){1&e&&(t.TgZ(0,"div")(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"div"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"div",1),t._uU(11),t.ALo(12,"translate"),t.ALo(13,"date"),t.qZA(),t.TgZ(14,"perun-web-apps-refresh-button",2),t.NdJ("refresh",function(){return n.refreshTable()}),t.qZA(),t.TgZ(15,"button",3),t.NdJ("click",function(){return n.onSave()}),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"button",4),t.NdJ("click",function(){return n.onAdd()}),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"button",5),t.NdJ("click",function(){return n.onRemove()}),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.YNc(24,Lv,1,0,"mat-spinner",6),t.YNc(25,kv,2,3,"perun-web-apps-attributes-list",7),t.qZA()),2&e&&(t.xp6(2),t.AsE(" ",t.lcZ(3,15,"SHARED.IDENTITY_DETAIL.TITLE")," - ",n.userExtSource?n.userExtSource.extSource.name:""," "),t.xp6(3),t.AsE(" ",t.lcZ(6,17,"SHARED.IDENTITY_DETAIL.TYPE"),": ",n.userExtSource?n.userExtSource.extSource.type:""," "),t.xp6(3),t.AsE(" ",t.lcZ(9,19,"SHARED.IDENTITY_DETAIL.LOGIN"),": ",n.userExtSource?n.userExtSource.login:""," "),t.xp6(3),t.AsE(" ",t.lcZ(12,21,"SHARED.IDENTITY_DETAIL.LAST_ACCESS"),": ",n.userExtSource?t.xi3(13,23,n.userExtSource.lastAccess,"d.M.y H:mm:ss"):""," "),t.xp6(4),t.Q6J("disabled",0===n.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(17,26,"SHARED.IDENTITY_DETAIL.SAVE")," "),t.xp6(3),t.hij(" ",t.lcZ(20,28,"SHARED.IDENTITY_DETAIL.ADD")," "),t.xp6(2),t.Q6J("disabled",0===n.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(23,30,"SHARED.IDENTITY_DETAIL.REMOVE")," "),t.xp6(2),t.Q6J("ngIf",n.loading),t.xp6(1),t.Q6J("ngIf",!n.loading))},dependencies:[m.O5,V.lW,nt.Ou,Mi.t,Ev.p,m.uU,u.X$]}),i})();var Ov=s(40009),Mv=s(90719);function Nv(i,r){1&i&&t._UZ(0,"mat-spinner",3)}function Pv(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.editService())}),t.TgZ(1,"mat-icon"),t._uU(2,"edit"),t.qZA()()}}function Fv(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.removeService())}),t.TgZ(1,"mat-icon"),t._uU(2,"delete_forever"),t.qZA()()}}function Rv(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.evaluateConsents())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SERVICE_DETAIL.EVALUATE_CONSENTS")," "))}const Bv=function(){return{color:"black"}},Zv=function(i){return["/admin/services",i]};function Vv(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",4),t._UZ(1,"mat-icon",5),t.ALo(2,"translate"),t.TgZ(3,"div",6)(4,"div",7)(5,"div",8)(6,"div",9)(7,"a",10),t._uU(8),t.qZA(),t.TgZ(9,"span",11),t._uU(10),t.qZA(),t.YNc(11,Pv,3,0,"button",12),t.YNc(12,Fv,3,0,"button",13),t.qZA(),t.TgZ(13,"span",14),t._uU(14),t.ALo(15,"translate"),t.qZA()()(),t.TgZ(16,"div",15)(17,"mat-slide-toggle",16),t.NdJ("toggleChange",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.changeServiceStatus())}),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"mat-slide-toggle",16),t.NdJ("toggleChange",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.propagationChange())}),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.YNc(23,Rv,3,3,"button",17),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(1),t.s9C("matTooltip",t.lcZ(2,14,"SERVICE_DETAIL.ENTITY")),t.Q6J("ngStyle",t.DdM(22,Bv)),t.xp6(6),t.Q6J("routerLink",t.VKq(23,Zv,e.service.id)),t.xp6(1),t.hij(" ",e.service.name," "),t.xp6(2),t.hij(" \xa0 #",e.service.id," "),t.xp6(1),t.Q6J("ngIf",e.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("ngIf",e.authResolver.isPerunAdmin()),t.xp6(2),t.AsE(" ",t.lcZ(15,16,"SERVICE_DETAIL.DESCRIPTION"),": ",e.service.description," "),t.xp6(3),t.Q6J("checked",e.service.enabled),t.xp6(1),t.hij(" ",t.lcZ(19,18,"SERVICE_DETAIL.ENABLE")," "),t.xp6(2),t.Q6J("checked",e.service.useExpiredMembers),t.xp6(1),t.hij(" ",t.lcZ(22,20,"SERVICE_DETAIL.PROPAGATE")," "),t.xp6(2),t.Q6J("ngIf",e.authResolver.isPerunAdmin())}}let Gv=(()=>{class i{constructor(e,n,a,o,v,T,N,G,tt,lt,ot){this.route=e,this.router=n,this.consentsManager=a,this.serviceManager=o,this.sideMenuService=v,this.sideMenuItemService=T,this.dialog=N,this.authResolver=G,this.translate=tt,this.notificator=lt,this.entityStorageService=ot,this.loading=!1}ngOnInit(){this.loading=!0,this.route.params.subscribe(e=>{this.serviceId=Number(e.serviceId),this.entityStorageService.setEntity({id:this.serviceId,beanName:"Service"}),this.refresh()})}editService(){const e=(0,he.kZ)();e.width="600px",e.data={theme:"service-theme",service:this.service},this.dialog.open(Ov.R,e).afterClosed().subscribe(a=>{a&&this.refresh()})}removeService(){const e=(0,he.kZ)();e.width="600px",e.data={theme:"service-theme",services:[this.service]},this.dialog.open(Mv.m,e).afterClosed().subscribe(a=>{a&&this.router.navigate(["/admin/services"])})}changeServiceStatus(){this.service.enabled=!this.service.enabled,this.serviceManager.updateService({service:this.service}).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("SERVICE_DETAIL.STATUS_CHANGE_SUCCESS"))},()=>this.service.enabled=!this.service.enabled)}propagationChange(){this.service.useExpiredMembers=!this.service.useExpiredMembers,this.serviceManager.updateService({service:this.service}).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("SERVICE_DETAIL.PROPAGATION_CHANGE_SUCCESS"))},()=>this.service.useExpiredMembers=!this.service.useExpiredMembers)}evaluateConsents(){const e=(0,he.kZ)();e.width="500px",e.data={title:this.translate.instant("SERVICE_DETAIL.CONFIRM_DIALOG_TITLE"),theme:"service-theme",description:this.translate.instant("SERVICE_DETAIL.CONFIRM_DIALOG_DESCRIPTION"),items:[this.service.name],type:"confirmation",showAsk:!1},this.dialog.open(fa.Ts,e).afterClosed().subscribe(a=>{a&&this.consentsManager.evaluateConsentsForService(this.service.id).subscribe(()=>this.notificator.showSuccess(this.translate.instant("SERVICE_DETAIL.EVALUATION_FINISH")))})}refresh(){this.serviceManager.getServiceById(this.serviceId).subscribe(e=>{this.service=e;const n=this.sideMenuItemService.parseService(this.service);this.sideMenuService.setAdminItems([n]),this.loading=!1},()=>this.loading=!1)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(p.gz),t.Y36(p.F0),t.Y36(Y.WY),t.Y36(Y.KK),t.Y36(d.D),t.Y36(gc.V),t.Y36(M.uw),t.Y36(B.x4),t.Y36(u.sK),t.Y36(B.V6),t.Y36(B.fb))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-service-detail-page"]],decls:5,vars:2,consts:[[1,"container-fluid","pl-xl-5","pr-xl-5","service-theme"],["class","ml-auto mr-auto",4,"ngIf"],["class","page-title-headtitle detail-layout",4,"ngIf"],[1,"ml-auto","mr-auto"],[1,"page-title-headtitle","detail-layout"],["svgIcon","perun-service",1,"perun-icon","perun-icon-detail",3,"matTooltip","ngStyle"],[1,"wrap-container"],[1,"detail-info"],[1,"flex-column"],[1,"page-title-headline","d-flex","align-items-center"],["data-cy","service-name-link","queryParamsHandling","merge",1,"service-link",3,"routerLink"],[1,"text-muted"],["aria-label","Edit service","data-cy","service-edit-button","mat-icon-button","",3,"click",4,"ngIf"],["aria-label","Remove service","mat-icon-button","",3,"click",4,"ngIf"],[1,"mt-1","entity-info"],[1,"detail-actions"],["labelPosition","before",3,"checked","toggleChange"],["class","action-button evaluate-button","mat-stroked-button","",3,"click",4,"ngIf"],["aria-label","Edit service","data-cy","service-edit-button","mat-icon-button","",3,"click"],["aria-label","Remove service","mat-icon-button","",3,"click"],["mat-stroked-button","",1,"action-button","evaluate-button",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"perun-web-apps-back-button"),t.YNc(2,Nv,1,0,"mat-spinner",1),t.YNc(3,Vv,24,25,"div",2),t._UZ(4,"app-animated-router-outlet"),t.qZA()),2&e&&(t.xp6(2),t.Q6J("ngIf",n.loading),t.xp6(1),t.Q6J("ngIf",!n.loading))},dependencies:[m.O5,m.PC,p.yS,l.Hw,V.lW,nt.Ou,oi.gM,Ct.Rr,h.A,f.W,u.X$],styles:[".detail-layout[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:1.2em}.detail-info[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-right:1.2em}.wrap-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;gap:.3em}.detail-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-left:1px solid rgba(0,0,0,.2);padding-left:.5em}.evaluate-button[_ngcontent-%COMP%]{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}"],data:{animation:[Yi.Ji]}}),i})(),Uv=(()=>{class i{constructor(){this.navItems=[]}ngOnInit(){this.initNavItems()}initNavItems(){this.navItems=[{cssIcon:"perun-attributes",url:"required-attributes",label:"MENU_ITEMS.SERVICE.REQUIRED_ATTRIBUTES",style:"service-btn"},{cssIcon:"perun-service_destination",url:"destinations",label:"MENU_ITEMS.SERVICE.DESTINATIONS",style:"service-btn"}]}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-service-overview"]],decls:1,vars:2,consts:[[3,"items","size"]],template:function(e,n){1&e&&t._UZ(0,"perun-web-apps-menu-buttons-field",0),2&e&&t.Q6J("items",n.navItems)("size","small")},dependencies:[L.L]}),i})();var zv=s(32076),Hv=s(24351),_c=s(54482),Yv=s(25032),Xv=s(86099),$v=s(57359);function jv(i,r){1&i&&t._UZ(0,"mat-spinner",4)}function Jv(i,r){1&i&&(t.TgZ(0,"perun-web-apps-alert",9),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.Q6J("alert_type","warn"),t.xp6(1),t.Oqu(t.lcZ(2,2,"DIALOGS.ADD_REQUIRED_ATTRIBUTES.ACTIVE_WARN")))}function Kv(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",5),t.YNc(1,Jv,3,4,"perun-web-apps-alert",6),t.ALo(2,"async"),t.TgZ(3,"perun-web-apps-immediate-filter",7),t.NdJ("filter",function(a){t.CHM(e);const o=t.oxw();return t.KtG(o.applyFilter(a))}),t.qZA(),t._UZ(4,"app-attr-def-list",8),t.ALo(5,"async"),t.ALo(6,"async"),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,8,e.serviceEnabled$)),t.xp6(2),t.Q6J("placeholder","DIALOGS.ADD_REQUIRED_ATTRIBUTES.FILTER"),t.xp6(1),t.Q6J("selection",e.selection)("definitions",e.attrDefinitions)("disableRouting",!0)("filterValue",e.filterValue)("serviceEnabled",t.lcZ(5,10,e.serviceEnabled$))("consentRequired",t.lcZ(6,12,e.consentRequired$))}}function qv(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",10)(1,"button",11),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onCancel())}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"button",12),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onAdd())}),t._uU(5),t.ALo(6,"translate"),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,3,"DIALOGS.ADD_REQUIRED_ATTRIBUTES.CANCEL")," "),t.xp6(2),t.Q6J("disabled",0===e.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(6,5,"DIALOGS.ADD_REQUIRED_ATTRIBUTES.ADD")," ")}}let t0=(()=>{class i{constructor(e,n,a,o,v,T,N,G){this.dialogRef=e,this.data=n,this.serviceManager=a,this.attributesManager=o,this.facilitiesService=v,this.consentHubService=T,this.notificator=N,this.translate=G,this.consentRequired$=this.facilitiesService.getAssignedFacilitiesByService(this.data.serviceId).pipe((0,Hv.b)(zv.D),(0,Va.U)(tt=>tt.id),function Wv(i,r){return(0,_c.e)((e,n)=>{const a=new Set;e.subscribe((0,$t.x)(n,o=>{const v=i?i(o):o;a.has(v)||(a.add(v),n.next(o))})),r?.subscribe((0,$t.x)(n,()=>a.clear(),Yv.Z))})}(),(0,Xv.z)(tt=>this.consentHubService.getConsentHubByFacility(tt)),function Qv(i,r){return(0,_c.e)((0,$v.U)(i,r,arguments.length>=2,!1,!0))}((tt,lt)=>tt||lt.enforceConsents,!1),(0,cn.O)(!0)),this.serviceEnabled$=this.serviceManager.getServiceById(this.data.serviceId).pipe((0,Va.U)(tt=>tt.enabled),(0,cn.O)(!0)),this.attrDefinitions=[],this.selection=new R.Ov(!0,[]),this.filterValue="",this.loading=!1}ngOnInit(){this.loading=!0,this.theme=this.data.theme,this.serviceId=this.data.serviceId,this.attributesManager.getAllAttributeDefinitions().subscribe(e=>{this.attrDefinitions=e,this.loading=!1})}onAdd(){this.loading=!0;const e=this.selection.selected.map(n=>n.id);this.serviceManager.addRequiredAttributes(this.serviceId,e).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("DIALOGS.ADD_REQUIRED_ATTRIBUTES.SUCCESS")),this.dialogRef.close(!0),this.loading=!1},()=>this.loading=!1)}onCancel(){this.dialogRef.close(!1)}applyFilter(e){this.filterValue=e}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(M.so),t.Y36(M.WI),t.Y36(Y.KK),t.Y36(Y.H8),t.Y36(Y.IQ),t.Y36(Y.WY),t.Y36(B.V6),t.Y36(u.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-add-required-attributes"]],decls:7,vars:9,consts:[["mat-dialog-title",""],["class","mr-auto ml-auto",4,"ngIf"],["mat-dialog-content","","class","dialog-container",4,"ngIf"],["mat-dialog-actions","",4,"ngIf"],[1,"mr-auto","ml-auto"],["mat-dialog-content","",1,"dialog-container"],[3,"alert_type",4,"ngIf"],[3,"placeholder","filter"],[3,"selection","definitions","disableRouting","filterValue","serviceEnabled","consentRequired"],[3,"alert_type"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["color","accent","mat-flat-button","",1,"ml-2",3,"disabled","click"]],template:function(e,n){1&e&&(t.TgZ(0,"div")(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,jv,1,0,"mat-spinner",1),t.YNc(5,Kv,7,14,"div",2),t.YNc(6,qv,7,7,"div",3),t.qZA()),2&e&&(t.Tol(n.theme),t.xp6(2),t.Oqu(t.lcZ(3,7,"DIALOGS.ADD_REQUIRED_ATTRIBUTES.TITLE")),t.xp6(2),t.Q6J("ngIf",n.loading),t.xp6(1),t.Q6J("ngIf",!n.loading),t.xp6(1),t.Q6J("ngIf",!n.loading))},dependencies:[m.O5,V.lW,M.uh,M.xY,M.H8,nt.Ou,et.w,Ei.L,Ui,m.Ov,u.X$]}),i})();function e0(i,r){1&i&&t._UZ(0,"mat-spinner",6)}function n0(i,r){1&i&&t._UZ(0,"th",15)}function r0(i,r){if(1&i&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.Oqu(e.friendlyName)}}function a0(i,r){1&i&&t._UZ(0,"tr",17)}function s0(i,r){1&i&&t._UZ(0,"tr",18)}function o0(i,r){if(1&i&&(t.TgZ(0,"div",7)(1,"p"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",8),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"table",9),t.ynx(8,10),t.YNc(9,n0,1,0,"th",11),t.YNc(10,r0,2,1,"td",12),t.BQk(),t.YNc(11,a0,1,0,"tr",13),t.YNc(12,s0,1,0,"tr",14),t.qZA()()),2&i){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,5,"DIALOGS.REMOVE_REQUIRED_ATTRIBUTES.DESCRIPTION")),t.xp6(3),t.hij(" ",t.lcZ(6,7,"DIALOGS.REMOVE_REQUIRED_ATTRIBUTES.ASK")," "),t.xp6(2),t.Q6J("dataSource",e.dataSource),t.xp6(4),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns)}}let l0=(()=>{class i{constructor(e,n,a,o,v){this.dialogRef=e,this.data=n,this.serviceManager=a,this.notificator=o,this.translate=v,this.displayedColumns=["name"],this.loading=!1}ngOnInit(){this.theme=this.data.theme,this.serviceId=this.data.serviceId,this.dataSource=new F.by(this.data.attrDefinitions)}onConfirm(){this.loading=!0;const e=this.dataSource.data.map(n=>n.id);this.serviceManager.removeRequiredAttributes(this.serviceId,e).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("DIALOGS.REMOVE_REQUIRED_ATTRIBUTES.SUCCESS")),this.dialogRef.close(!0),this.loading=!1},()=>this.loading=!1)}onCancel(){this.dialogRef.close(!1)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(M.so),t.Y36(M.WI),t.Y36(Y.KK),t.Y36(B.V6),t.Y36(u.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-remove-required-attributes"]],decls:13,vars:15,consts:[["mat-dialog-title",""],["class","mr-auto ml-auto",4,"ngIf"],["mat-dialog-content","",4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["color","warn","mat-flat-button","",1,"ml-2",3,"disabled","click"],[1,"mr-auto","ml-auto"],["mat-dialog-content",""],[1,"font-weight-bold"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["class","font-weight-bolder","mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row","",1,"font-weight-bolder"],["mat-row",""]],template:function(e,n){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"div"),t.YNc(4,e0,1,0,"mat-spinner",1),t.YNc(5,o0,13,9,"div",2),t.TgZ(6,"div",3)(7,"button",4),t.NdJ("click",function(){return n.onCancel()}),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"button",5),t.NdJ("click",function(){return n.onConfirm()}),t._uU(11),t.ALo(12,"translate"),t.qZA()()()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,9,"DIALOGS.REMOVE_REQUIRED_ATTRIBUTES.TITLE")),t.xp6(2),t.Tol(n.theme),t.xp6(1),t.Q6J("ngIf",n.loading),t.xp6(1),t.Q6J("ngIf",!n.loading),t.xp6(3),t.hij(" ",t.lcZ(9,11,"DIALOGS.REMOVE_REQUIRED_ATTRIBUTES.CANCEL")," "),t.xp6(2),t.Q6J("disabled",n.loading),t.xp6(1),t.hij(" ",t.lcZ(12,13,"DIALOGS.REMOVE_REQUIRED_ATTRIBUTES.REMOVE")," "))},dependencies:[m.O5,V.lW,F.BZ,F.fO,F.as,F.w1,F.Dz,F.nj,F.ge,F.ev,F.XQ,F.Gk,M.uh,M.xY,M.H8,nt.Ou,u.X$]}),i})();function c0(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onAdd())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SERVICE_DETAIL.REQUIRED_ATTRIBUTES.ADD")," "))}function u0(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onRemove())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("disabled",0===e.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(2,2,"SERVICE_DETAIL.REQUIRED_ATTRIBUTES.REMOVE")," ")}}function h0(i,r){1&i&&t._UZ(0,"mat-spinner",9)}function d0(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"app-attr-def-list",10),t.NdJ("refreshEvent",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.refreshTable())}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("definitions",e.attrDefinitions)("filterValue",e.filterValue)("selection",e.selection)("disableRouting",!e.authResolver.isPerunAdmin())("tableId",e.tableId)}}let p0=(()=>{class i{constructor(e,n,a,o){this.attributeManager=e,this.dialog=n,this.authResolver=a,this.entityStorageService=o,this.loading=!1,this.filterValue="",this.selection=new R.Ov(!0,[]),this.attrDefinitions=[],this.tableId=Si.JO}ngOnInit(){this.loading=!0,this.service=this.entityStorageService.getEntity(),this.refreshTable()}refreshTable(){this.loading=!0,this.attributeManager.getRequiredAttributesDefinition(this.service.id).subscribe(e=>{this.selection.clear(),this.attrDefinitions=e,this.loading=!1})}onAdd(){const e=(0,he.kZ)();e.width="950px",e.data={serviceId:this.service.id,theme:"service-theme"},this.dialog.open(t0,e).afterClosed().subscribe(a=>{a&&this.refreshTable()})}onRemove(){const e=(0,he.kZ)();e.width="650px",e.data={serviceId:this.service.id,attrDefinitions:this.selection.selected,theme:"service-theme"},this.dialog.open(l0,e).afterClosed().subscribe(a=>{a&&this.refreshTable()})}applyFilter(e){this.filterValue=e}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Y.H8),t.Y36(M.uw),t.Y36(B.x4),t.Y36(B.fb))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-service-required-attributes"]],decls:10,vars:8,consts:[[1,"page-subtitle"],[3,"refresh"],["color","accent","class","mr-2 action-button","mat-flat-button","",3,"click",4,"ngIf"],["class","mr-2","color","warn","mat-flat-button","",3,"disabled","click",4,"ngIf"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"definitions","filterValue","selection","disableRouting","tableId","refreshEvent",4,"ngIf"],["color","accent","mat-flat-button","",1,"mr-2","action-button",3,"click"],["color","warn","mat-flat-button","",1,"mr-2",3,"disabled","click"],[1,"ml-auto","mr-auto"],[3,"definitions","filterValue","selection","disableRouting","tableId","refreshEvent"]],template:function(e,n){1&e&&(t.TgZ(0,"div")(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"perun-web-apps-refresh-button",1),t.NdJ("refresh",function(){return n.refreshTable()}),t.qZA(),t.YNc(5,c0,3,3,"button",2),t.YNc(6,u0,3,4,"button",3),t.TgZ(7,"perun-web-apps-immediate-filter",4),t.NdJ("filter",function(o){return n.applyFilter(o)}),t.qZA(),t.YNc(8,h0,1,0,"mat-spinner",5),t.YNc(9,d0,1,5,"app-attr-def-list",6),t.qZA()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,6,"SERVICE_DETAIL.REQUIRED_ATTRIBUTES.TITLE")),t.xp6(3),t.Q6J("ngIf",n.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("ngIf",n.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("placeholder","SERVICE_DETAIL.REQUIRED_ATTRIBUTES.FILTER"),t.xp6(1),t.Q6J("ngIf",n.loading),t.xp6(1),t.Q6J("ngIf",!n.loading))},dependencies:[m.O5,V.lW,nt.Ou,Ui,Mi.t,Ei.L,u.X$]}),i})();var f0=s(46597),m0=s(89466),g0=s(70242);function _0(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onRemove())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("disabled",0===e.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(2,2,"SERVICE_DETAIL.DESTINATIONS.REMOVE")," ")}}function v0(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onAllow())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("disabled",0===e.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(2,2,"SERVICE_DETAIL.DESTINATIONS.ALLOW")," ")}}function x0(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onBlock())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("disabled",0===e.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(2,2,"SERVICE_DETAIL.DESTINATIONS.BLOCK")," ")}}function y0(i,r){1&i&&t._UZ(0,"mat-spinner",10)}const b0=function(){return["select","destinationId","facility","destination","type","status","propagationType"]};function T0(i,r){if(1&i&&t._UZ(0,"app-perun-web-apps-destination-list",11),2&i){const e=t.oxw();t.Q6J("destinations",e.destinations)("filterValue",e.filterValue)("selection",e.selection)("displayedColumns",t.DdM(5,b0))("tableId",e.tableId)}}let C0=(()=>{class i{constructor(e,n,a,o,v,T){this.serviceManager=e,this.notificator=n,this.translate=a,this.dialog=o,this.authResolver=v,this.entityStorageService=T,this.loading=!1,this.filterValue="",this.destinations=[],this.selection=new R.Ov(!0,[]),this.tableId=Si.Cf}ngOnInit(){this.loading=!0,this.service=this.entityStorageService.getEntity(),this.refreshTable()}refreshTable(){this.loading=!0,this.serviceManager.getAllRichDestinationsForService(this.service.id).subscribe(e=>{this.selection.clear(),this.filterValue="",this.destinations=e,this.loading=!1})}onBlock(){this.loading=!0,this.blockServiceOnDestinations(this.selection.selected)}onAllow(){this.loading=!0,this.allowServiceOnDestinations(this.selection.selected)}onRemove(){const e=(0,he.kZ)();e.width="500px",e.data={destinations:this.selection.selected,theme:"admin-theme"},this.dialog.open(m0.u,e).afterClosed().subscribe(a=>{a&&this.refreshTable()})}applyFilter(e){this.filterValue=e}blockServiceOnDestinations(e){if(0===e.length)return this.notificator.showSuccess(this.translate.instant("SERVICE_DETAIL.DESTINATIONS.BLOCK_SUCCESS")),void this.refreshTable();const n=e.pop();this.serviceManager.blockServiceOnDestination(this.service.id,n.id).subscribe(()=>{this.blockServiceOnDestinations(e)},()=>this.loading=!1)}allowServiceOnDestinations(e){if(0===e.length)return this.notificator.showSuccess(this.translate.instant("SERVICE_DETAIL.DESTINATIONS.ALLOW_SUCCESS")),void this.refreshTable();const n=e.pop();this.serviceManager.unblockServiceOnDestinationById(this.service.id,n.id).subscribe(()=>{this.allowServiceOnDestinations(e)},()=>this.loading=!1)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Y.KK),t.Y36(B.V6),t.Y36(u.sK),t.Y36(M.uw),t.Y36(B.x4),t.Y36(B.fb))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-service-destinations"]],decls:11,vars:9,consts:[[1,"page-subtitle"],[3,"refresh"],["color","warn","class","mr-2","mat-flat-button","",3,"disabled","click",4,"ngIf"],["class","mr-2","color","accent","mat-flat-button","",3,"disabled","click",4,"ngIf"],["class","mr-2","color","warn","mat-flat-button","",3,"disabled","click",4,"ngIf"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"destinations","filterValue","selection","displayedColumns","tableId",4,"ngIf"],["color","warn","mat-flat-button","",1,"mr-2",3,"disabled","click"],["color","accent","mat-flat-button","",1,"mr-2",3,"disabled","click"],[1,"ml-auto","mr-auto"],[3,"destinations","filterValue","selection","displayedColumns","tableId"]],template:function(e,n){1&e&&(t.TgZ(0,"div")(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"perun-web-apps-refresh-button",1),t.NdJ("refresh",function(){return n.refreshTable()}),t.qZA(),t.YNc(5,_0,3,4,"button",2),t.YNc(6,v0,3,4,"button",3),t.YNc(7,x0,3,4,"button",4),t.TgZ(8,"perun-web-apps-immediate-filter",5),t.NdJ("filter",function(o){return n.applyFilter(o)}),t.qZA(),t.YNc(9,y0,1,0,"mat-spinner",6),t.YNc(10,T0,1,6,"app-perun-web-apps-destination-list",7),t.qZA()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,7,"SERVICE_DETAIL.DESTINATIONS.TITLE")),t.xp6(3),t.Q6J("ngIf",n.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("ngIf",n.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("ngIf",n.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("placeholder","SERVICE_DETAIL.DESTINATIONS.FILTER"),t.xp6(1),t.Q6J("ngIf",n.loading),t.xp6(1),t.Q6J("ngIf",!n.loading))},dependencies:[m.O5,V.lW,nt.Ou,g0.q,Mi.t,Ei.L,u.X$]}),i})();function w0(i,r){1&i&&t._UZ(0,"mat-spinner",4)}function A0(i,r){1&i&&t._UZ(0,"th",13)}function S0(i,r){if(1&i&&(t.TgZ(0,"td",14),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.Oqu(e.name)}}function E0(i,r){1&i&&t._UZ(0,"tr",15)}function D0(i,r){1&i&&t._UZ(0,"tr",16)}function L0(i,r){if(1&i&&(t.TgZ(0,"div",5)(1,"p"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",6),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"table",7),t.ynx(8,8),t.YNc(9,A0,1,0,"th",9),t.YNc(10,S0,2,1,"td",10),t.BQk(),t.YNc(11,E0,1,0,"tr",11),t.YNc(12,D0,1,0,"tr",12),t.qZA()()),2&i){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,5,"DIALOGS.DELETE_OWNER.DESCRIPTION")," "),t.xp6(3),t.hij(" ",t.lcZ(6,7,"DIALOGS.DELETE_OWNER.ASK")," "),t.xp6(2),t.Q6J("dataSource",e.dataSource),t.xp6(4),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns)}}function k0(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",17)(1,"button",18),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onCancel())}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"button",19),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onSubmit())}),t._uU(5),t.ALo(6,"translate"),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,3,"DIALOGS.DELETE_OWNER.CANCEL")," "),t.xp6(2),t.Q6J("disabled",e.loading),t.xp6(1),t.hij(" ",t.lcZ(6,5,"DIALOGS.DELETE_OWNER.DELETE")," ")}}let I0=(()=>{class i{constructor(e,n,a,o,v){this.dialogRef=e,this.data=n,this.notificator=a,this.translate=o,this.ownersManagerService=v,this.displayedColumns=["name"],this.owners=[]}ngOnInit(){this.dataSource=new F.by(this.data),this.owners=this.data}onCancel(){this.dialogRef.close(!1)}onSubmit(){this.loading=!0,this.owners.length?this.ownersManagerService.deleteOwner(this.owners.pop().id).subscribe(()=>{this.onSubmit()},()=>this.loading=!1):this.translate.get("DIALOGS.DELETE_OWNER.SUCCESS").subscribe(e=>{this.loading=!1,this.notificator.showSuccess(e),this.dialogRef.close(!0)})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(M.so),t.Y36(M.WI),t.Y36(B.V6),t.Y36(u.sK),t.Y36(Y.aC))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-delete-owner-dialog"]],decls:6,vars:6,consts:[["mat-dialog-title",""],["class","ml-auto mr-auto",4,"ngIf"],["mat-dialog-content","",4,"ngIf"],["mat-dialog-actions","",4,"ngIf"],[1,"ml-auto","mr-auto"],["mat-dialog-content",""],[1,"font-weight-bold"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["class","font-weight-bolder","mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row","",1,"font-weight-bolder"],["mat-row",""],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["color","warn","mat-flat-button","",1,"ml-2",3,"disabled","click"]],template:function(e,n){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.YNc(3,w0,1,0,"mat-spinner",1),t.YNc(4,L0,13,9,"div",2),t.YNc(5,k0,7,7,"div",3)),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,4,"DIALOGS.DELETE_OWNER.TITLE")),t.xp6(2),t.Q6J("ngIf",n.loading),t.xp6(1),t.Q6J("ngIf",!n.loading),t.xp6(1),t.Q6J("ngIf",!n.loading))},dependencies:[m.O5,V.lW,F.BZ,F.fO,F.as,F.w1,F.Dz,F.nj,F.ge,F.ev,F.XQ,F.Gk,M.uh,M.xY,M.H8,nt.Ou,u.X$]}),i})();function O0(i,r){1&i&&t._UZ(0,"mat-spinner",4)}function M0(i,r){1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.ADD_OWNER.FILL_CONTACT")," "))}function N0(i,r){1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.ADD_OWNER.CONTACT_FORMAT")," "))}function P0(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"div",5)(2,"mat-form-field"),t._UZ(3,"input",6),t.ALo(4,"translate"),t.TgZ(5,"mat-error"),t._uU(6),t.ALo(7,"translate"),t.qZA()(),t.TgZ(8,"mat-form-field"),t._UZ(9,"input",6),t.ALo(10,"translate"),t.YNc(11,M0,3,3,"mat-error",3),t.YNc(12,N0,3,3,"mat-error",3),t.qZA(),t.TgZ(13,"mat-form-field")(14,"mat-select",7),t.NdJ("valueChange",function(a){t.CHM(e);const o=t.oxw();return t.KtG(o.type=a)}),t.TgZ(15,"mat-option",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"mat-option",9),t._uU(19),t.ALo(20,"translate"),t.qZA()()()(),t.TgZ(21,"div",10)(22,"button",11),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onCancel())}),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"div",12),t.ALo(26,"translate"),t.TgZ(27,"button",13),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onSubmit())}),t._uU(28),t.ALo(29,"translate"),t.qZA()()()()}if(2&i){const e=t.oxw();t.xp6(3),t.s9C("placeholder",t.lcZ(4,15,"DIALOGS.ADD_OWNER.NAME")),t.Q6J("formControl",e.nameCtrl),t.xp6(3),t.hij(" ",t.lcZ(7,17,"DIALOGS.ADD_OWNER.FILL_NAME")," "),t.xp6(3),t.s9C("placeholder",t.lcZ(10,19,"DIALOGS.ADD_OWNER.CONTACT")),t.Q6J("formControl",e.contactCtrl),t.xp6(2),t.Q6J("ngIf",e.contactCtrl.hasError("required")),t.xp6(1),t.Q6J("ngIf",e.contactCtrl.invalid&&!e.contactCtrl.hasError("required")),t.xp6(2),t.Q6J("value",e.type),t.xp6(2),t.Oqu(t.lcZ(17,21,"DIALOGS.ADD_OWNER.TYPE1")),t.xp6(3),t.Oqu(t.lcZ(20,23,"DIALOGS.ADD_OWNER.TYPE2")),t.xp6(4),t.hij(" ",t.lcZ(24,25,"DIALOGS.ADD_OWNER.CANCEL")," "),t.xp6(2),t.s9C("matTooltip",t.lcZ(26,27,"DIALOGS.ADD_OWNER.TOOLTIP")),t.Q6J("matTooltipDisabled",e.nameCtrl.valid&&e.contactCtrl.valid),t.xp6(2),t.Q6J("disabled",e.nameCtrl.invalid||e.contactCtrl.invalid),t.xp6(1),t.hij(" ",t.lcZ(29,29,"DIALOGS.ADD_OWNER.CREATE")," ")}}let F0=(()=>{class i{constructor(e,n,a,o){this.dialogRef=e,this.notificator=n,this.ownersManagerService=a,this.translate=o,this.type="1",o.get("DIALOGS.ADD_OWNER.SUCCESS").subscribe(v=>this.successMessage=v)}ngOnInit(){this.nameCtrl=new it.p4(null,[it.kI.required,it.kI.pattern("^[\\w.-]+( [\\w.-]+)*$")]),this.contactCtrl=new it.p4(null,[it.kI.required,it.kI.pattern(he.B2)])}onCancel(){this.dialogRef.close(!1)}onSubmit(){this.loading=!0,this.ownersManagerService.createOwner({name:this.nameCtrl.value,contact:this.contactCtrl.value,ownerType:Number(this.type)}).subscribe(()=>{this.notificator.showSuccess(this.successMessage),this.loading=!1,this.dialogRef.close(!0)},()=>this.loading=!1)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(M.so),t.Y36(B.V6),t.Y36(Y.aC),t.Y36(u.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-add-owner-dialog"]],decls:6,vars:5,consts:[[1,"admin-theme"],["mat-dialog-title",""],["class","ml-auto mr-auto",4,"ngIf"],[4,"ngIf"],[1,"ml-auto","mr-auto"],["mat-dialog-content","",1,"dialog-container"],["matInput","","required","",3,"formControl","placeholder"],[3,"value","valueChange"],["value","1"],["value","0"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["matTooltipPosition","above",3,"matTooltip","matTooltipDisabled"],["color","accent","mat-flat-button","",1,"ml-2",3,"disabled","click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,O0,1,0,"mat-spinner",2),t.YNc(5,P0,30,31,"div",3),t.qZA()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,3,"DIALOGS.ADD_OWNER.TITLE")),t.xp6(2),t.Q6J("ngIf",n.loading),t.xp6(1),t.Q6J("ngIf",!n.loading))},dependencies:[m.O5,Nt.ey,Kt.TO,Kt.KE,ce.Nt,it.Fj,it.JJ,it.Q7,it.oH,V.lW,M.uh,M.xY,M.H8,xe.gD,nt.Ou,oi.gM,u.X$]}),i})();var R0=s(23256);function B0(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.addOwner())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.OWNERS.ADD")," "))}function Z0(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.removeOwner())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("disabled",!e.selected.selected.length),t.xp6(1),t.hij(" ",t.lcZ(2,2,"ADMIN.OWNERS.DELETE")," ")}}function V0(i,r){1&i&&t._UZ(0,"mat-spinner",9)}function G0(i,r){if(1&i&&t._UZ(0,"perun-web-apps-owners-list",10),2&i){const e=t.oxw();t.Q6J("selection",e.selected)("filterValue",e.filterValue)("owners",e.owners)("tableId",e.tableId)}}let U0=(()=>{class i{constructor(e,n,a){this.ownersManagerService=e,this.dialog=n,this.guiAuthResolver=a,this.owners=[],this.selected=new R.Ov(!0,[]),this.filterValue="",this.tableId=Si.v1}ngOnInit(){this.setAuth(),this.refreshTable()}setAuth(){this.removeAuth=this.guiAuthResolver.isAuthorized("deleteOwner_Owner_policy",[]),this.addAuth=this.guiAuthResolver.isAuthorized("createOwner_Owner_policy",[])}refreshTable(){this.loading=!0,this.ownersManagerService.getAllOwners().subscribe(e=>{this.owners=e,this.selected.clear(),this.loading=!1})}applyFilter(e){this.filterValue=e}addOwner(){const e=(0,he.kZ)();e.width="400px",e.data={},this.dialog.open(F0,e).afterClosed().subscribe(a=>{a&&this.refreshTable()})}removeOwner(){const e=(0,he.kZ)();e.width="400px",e.data=this.selected.selected,this.dialog.open(I0,e).afterClosed().subscribe(a=>{a&&(this.selected.clear(),this.refreshTable())})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Y.aC),t.Y36(M.uw),t.Y36(B.x4))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-admin-owners"]],decls:10,vars:8,consts:[[1,"page-subtitle"],[3,"refresh"],["color","accent","class","mr-2 action-button","mat-flat-button","",3,"click",4,"ngIf"],["class","mr-2","color","warn","mat-flat-button","",3,"disabled","click",4,"ngIf"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"selection","filterValue","owners","tableId",4,"ngIf"],["color","accent","mat-flat-button","",1,"mr-2","action-button",3,"click"],["color","warn","mat-flat-button","",1,"mr-2",3,"disabled","click"],[1,"ml-auto","mr-auto"],[3,"selection","filterValue","owners","tableId"]],template:function(e,n){1&e&&(t.TgZ(0,"div")(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"perun-web-apps-refresh-button",1),t.NdJ("refresh",function(){return n.refreshTable()}),t.qZA(),t.YNc(5,B0,3,3,"button",2),t.YNc(6,Z0,3,4,"button",3),t.TgZ(7,"perun-web-apps-immediate-filter",4),t.NdJ("filter",function(o){return n.applyFilter(o)}),t.qZA(),t.YNc(8,V0,1,0,"mat-spinner",5),t.YNc(9,G0,1,4,"perun-web-apps-owners-list",6),t.qZA()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,6,"ADMIN.OWNERS.TITLE")),t.xp6(3),t.Q6J("ngIf",n.addAuth),t.xp6(1),t.Q6J("ngIf",n.removeAuth),t.xp6(1),t.Q6J("placeholder","ADMIN.OWNERS.FILTER"),t.xp6(1),t.Q6J("ngIf",n.loading),t.xp6(1),t.Q6J("ngIf",!n.loading))},dependencies:[m.O5,V.lW,nt.Ou,Mi.t,Ei.L,R0.Q,u.X$]}),i})();var z0=s(74010);function H0(i,r){1&i&&t._UZ(0,"mat-spinner",5)}function Y0(i,r){if(1&i&&t._UZ(0,"perun-web-apps-facilities-list",6),2&i){const e=t.oxw();t.Q6J("displayedColumns",e.displayedColumns)("filterValue",e.filterValue)("facilities",e.facilities)("tableId",e.tableId)}}let W0=(()=>{class i{constructor(e,n){this.facilityManager=e,this.route=n,this.facilities=[],this.filterValue="",this.tableId=Si.zW,this.displayedColumns=["id","name","description"]}ngOnInit(){this.loading=!0,this.route.parent.params.subscribe(e=>{this.userId=Number(e.userId),this.refreshTable()})}refreshTable(){this.loading=!0,this.facilityManager.getAssignedFacilitiesByUser(this.userId).subscribe(e=>{this.facilities=e.map(n=>({facility:n})),this.loading=!1})}applyFilter(e){this.filterValue=e}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Y.IQ),t.Y36(p.gz))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-user-facilities"]],decls:8,vars:6,consts:[[1,"page-subtitle"],[3,"refresh"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"displayedColumns","filterValue","facilities","tableId",4,"ngIf"],[1,"ml-auto","mr-auto"],[3,"displayedColumns","filterValue","facilities","tableId"]],template:function(e,n){1&e&&(t.TgZ(0,"div")(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"perun-web-apps-refresh-button",1),t.NdJ("refresh",function(){return n.refreshTable()}),t.qZA(),t.TgZ(5,"perun-web-apps-immediate-filter",2),t.NdJ("filter",function(o){return n.applyFilter(o)}),t.qZA(),t.YNc(6,H0,1,0,"mat-spinner",3),t.YNc(7,Y0,1,4,"perun-web-apps-facilities-list",4),t.qZA()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,4,"USER_DETAIL.FACILITIES.TITLE")),t.xp6(3),t.Q6J("placeholder","USER_DETAIL.FACILITIES.FILTER_PLACEHOLDER"),t.xp6(1),t.Q6J("ngIf",n.loading),t.xp6(1),t.Q6J("ngIf",!n.loading))},dependencies:[m.O5,nt.Ou,Mi.t,Ei.L,z0.X,u.X$]}),i})();var vc=s(64080),X0=s(24179),$0=s(62707),Q0=s(19191),j0=s(12651),J0=s(60526);function K0(i,r){1&i&&t._UZ(0,"mat-spinner",6)}function q0(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"perun-web-apps-vo-search-select",7),t.NdJ("voSelected",function(a){t.CHM(e);const o=t.oxw();return t.KtG(o.loadMember(a))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("vos",e.vos)}}function tx(i,r){1&i&&(t._uU(0),t.ALo(1,"translate")),2&i&&t.hij(" ",t.lcZ(1,1,"USER_DETAIL.ACCOUNTS.STATUS")," ")}function ex(i,r){1&i&&t._UZ(0,"mat-spinner",6)}const ix=function(){return["id","recent","name","description","expiration","groupStatus"]};function nx(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"perun-web-apps-groups-list",16),t.NdJ("refreshTable",function(){t.CHM(e);const a=t.oxw(4);return t.KtG(a.loadMember(a.selectedVo))}),t.qZA()}if(2&i){const e=t.oxw(4);t.Q6J("groups",e.groups)("memberId",e.member.id)("memberGroupStatus",e.member.groupStatus)("displayedColumns",t.DdM(4,ix))}}const rx=function(i,r){return["/organizations",i,"members",r]};function ax(i,r){if(1&i&&(t.TgZ(0,"div")(1,"div",10)(2,"span",11),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"a",12),t._uU(6),t.qZA()(),t._UZ(7,"app-member-overview-membership",13),t.TgZ(8,"p",14),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.YNc(11,nx,1,5,"perun-web-apps-groups-list",15),t.qZA()),2&i){const e=t.oxw(3);t.xp6(3),t.hij("",t.lcZ(4,7,"USER_DETAIL.ACCOUNTS.MEMBER"),":"),t.xp6(2),t.Q6J("routerLink",t.WLB(11,rx,e.selectedVo.id,e.member.id)),t.xp6(1),t.hij("",e.member.id," "),t.xp6(1),t.Q6J("member",e.member)("vo",e.selectedVo),t.xp6(2),t.Oqu(t.lcZ(10,9,"USER_DETAIL.ACCOUNTS.GROUPS")),t.xp6(2),t.Q6J("ngIf",!e.loading)}}function sx(i,r){if(1&i&&(t.YNc(0,ex,1,0,"mat-spinner",1),t.YNc(1,ax,12,14,"div",4)),2&i){const e=t.oxw(2);t.Q6J("ngIf",e.loading),t.xp6(1),t.Q6J("ngIf",!e.loading)}}function ox(i,r){1&i&&(t._uU(0),t.ALo(1,"translate")),2&i&&t.hij(" ",t.lcZ(1,1,"USER_DETAIL.ACCOUNTS.MEMBER_ATT")," ")}function lx(i,r){1&i&&t._UZ(0,"mat-spinner")}function cx(i,r){if(1&i&&t._UZ(0,"app-one-entity-attribute-page",18),2&i){const e=t.oxw(3);t.Q6J("entity","member")("entityId",e.member.id)}}function ux(i,r){if(1&i&&(t.YNc(0,lx,1,0,"mat-spinner",4),t.YNc(1,cx,1,2,"app-one-entity-attribute-page",17)),2&i){const e=t.oxw(2);t.Q6J("ngIf",e.loading),t.xp6(1),t.Q6J("ngIf",!e.loading)}}function hx(i,r){1&i&&(t._uU(0),t.ALo(1,"translate")),2&i&&t.hij(" ",t.lcZ(1,1,"USER_DETAIL.ACCOUNTS.MEMBER_GROUP_ATT")," ")}function dx(i,r){1&i&&t._UZ(0,"mat-spinner")}function px(i,r){if(1&i&&t._UZ(0,"app-two-entity-attribute-page",20),2&i){const e=t.oxw(3);t.Q6J("firstEntity","member")("firstEntityId",e.member.id)("secondEntity","group")}}function fx(i,r){if(1&i&&(t.YNc(0,dx,1,0,"mat-spinner",4),t.YNc(1,px,1,3,"app-two-entity-attribute-page",19)),2&i){const e=t.oxw(2);t.Q6J("ngIf",e.loading),t.xp6(1),t.Q6J("ngIf",!e.loading)}}function mx(i,r){1&i&&(t._uU(0),t.ALo(1,"translate")),2&i&&t.hij(" ",t.lcZ(1,1,"USER_DETAIL.ACCOUNTS.MEMBER_RESOURCE_ATT")," ")}function gx(i,r){1&i&&t._UZ(0,"mat-spinner")}function _x(i,r){if(1&i&&t._UZ(0,"app-two-entity-attribute-page",20),2&i){const e=t.oxw(3);t.Q6J("firstEntity","member")("firstEntityId",e.member.id)("secondEntity","resource")}}function vx(i,r){if(1&i&&(t.YNc(0,gx,1,0,"mat-spinner",4),t.YNc(1,_x,1,3,"app-two-entity-attribute-page",19)),2&i){const e=t.oxw(2);t.Q6J("ngIf",e.loading),t.xp6(1),t.Q6J("ngIf",!e.loading)}}function xx(i,r){1&i&&(t.TgZ(0,"mat-tab-group")(1,"mat-tab"),t.YNc(2,tx,2,3,"ng-template",8),t.YNc(3,sx,2,2,"ng-template",9),t.qZA(),t.TgZ(4,"mat-tab"),t.YNc(5,ox,2,3,"ng-template",8),t.YNc(6,ux,2,2,"ng-template",9),t.qZA(),t.TgZ(7,"mat-tab"),t.YNc(8,hx,2,3,"ng-template",8),t.YNc(9,fx,2,2,"ng-template",9),t.qZA(),t.TgZ(10,"mat-tab"),t.YNc(11,mx,2,3,"ng-template",8),t.YNc(12,vx,2,2,"ng-template",9),t.qZA()())}function yx(i,r){1&i&&(t.TgZ(0,"perun-web-apps-alert",21),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"USER_DETAIL.ACCOUNTS.NO_VOS")))}let bx=(()=>{class i{constructor(e,n,a,o){this.route=e,this.usersService=n,this.membersService=a,this.groupService=o,this.initLoading=!1,this.loading=!1,this.vos=[],this.selectedVo=null,this.member=null,this.groups=[]}ngOnInit(){this.initLoading=!0,this.route.parent.params.subscribe(e=>{this.userId=Number(e.userId),this.usersService.getVosWhereUserIsMember(this.userId).subscribe(n=>{this.vos=n,this.initLoading=!1},()=>this.initLoading=!1)})}loadMember(e){this.loading=!0,this.selectedVo=e,this.membersService.getMemberByUser(this.selectedVo.id,this.userId).subscribe(n=>{this.membersService.getRichMemberWithAttributes(n.id).subscribe(a=>{this.member=a,this.groupService.getMemberRichGroupsWithAttributesByNames(this.member.id,[vc.r.MEMBER_DEF_GROUP_EXPIRATION,vc.r.MEMBER_GROUP_STATUS]).subscribe(o=>{this.groups=o,this.loading=!1},()=>this.loading=!1)},()=>this.loading=!1)},()=>this.loading=!1)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(p.gz),t.Y36(Y.Fv),t.Y36(Y.uq),t.Y36(Y.ff))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-perun-web-apps-user-accounts"]],decls:8,vars:7,consts:[[1,"page-title"],["class","ml-auto mr-auto",4,"ngIf"],[1,"d-flex"],["class","w-50",3,"vos","voSelected",4,"ngIf"],[4,"ngIf"],["alert_type","warn",4,"ngIf"],[1,"ml-auto","mr-auto"],[1,"w-50",3,"vos","voSelected"],["matTabLabel",""],["matTabContent",""],[1,"mt-4","mb-4"],[1,"subtitle","mr-2"],["queryParamsHandling","merge",1,"member-link",3,"routerLink"],[3,"member","vo"],[1,"mt-4","subtitle"],[3,"groups","memberId","memberGroupStatus","displayedColumns","refreshTable",4,"ngIf"],[3,"groups","memberId","memberGroupStatus","displayedColumns","refreshTable"],[3,"entity","entityId",4,"ngIf"],[3,"entity","entityId"],[3,"firstEntity","firstEntityId","secondEntity",4,"ngIf"],[3,"firstEntity","firstEntityId","secondEntity"],["alert_type","warn"]],template:function(e,n){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.YNc(3,K0,1,0,"mat-spinner",1),t.TgZ(4,"div",2),t.YNc(5,q0,1,1,"perun-web-apps-vo-search-select",3),t.qZA(),t.YNc(6,xx,13,0,"mat-tab-group",4),t.YNc(7,yx,3,3,"perun-web-apps-alert",5)),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,5,"USER_DETAIL.ACCOUNTS.TITLE")),t.xp6(2),t.Q6J("ngIf",n.initLoading),t.xp6(2),t.Q6J("ngIf",!(n.initLoading||0===n.vos.length)),t.xp6(1),t.Q6J("ngIf",!(n.initLoading||0===n.vos.length)),t.xp6(1),t.Q6J("ngIf",!n.initLoading&&0===n.vos.length))},dependencies:[m.O5,p.yS,Ge.SP,Ge.uD,Ge.uX,Ge.Vc,nt.Ou,et.w,X0.W,$0.M,Q0.Y,j0.t,J0.b,u.X$],styles:[".subtitle[_ngcontent-%COMP%]{font-size:1.2rem}"]}),i})(),xc=(()=>{class i{transform(e){if(e)return e.split(".").pop()}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275pipe=t.Yjl({name:"parseEventName",type:i,pure:!0}),i})();function Tx(i,r){1&i&&(t._uU(0),t.ALo(1,"translate")),2&i&&t.hij(" ",t.lcZ(1,1,"DIALOGS.AUDIT_MESSAGE_DETAIL.OBJECTS")," ")}function Cx(i,r){if(1&i&&t._UZ(0,"pre",9),2&i){const e=t.oxw();t.Q6J("innerHTML",e.syntaxHighlight(e.eventData),t.oJD)}}function wx(i,r){1&i&&(t._uU(0),t.ALo(1,"translate")),2&i&&t.hij(" ",t.lcZ(1,1,"DIALOGS.AUDIT_MESSAGE_DETAIL.MESSAGE")," ")}function Ax(i,r){if(1&i&&(t.TgZ(0,"div",10),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Oqu(e.message)}}let Sx=(()=>{class i{constructor(e,n,a){this.dialogRef=e,this.data=n,this.clipboard=a,this.tabIndex=0,this.eventData={}}ngOnInit(){const e=this.data.message.event;this.actor=this.data.message.actor,this.createdAt=this.data.message.createdAt,e.message&&(this.message=e.message,delete e.message),e.name&&(this.title=e.name,delete e.name),this.eventData=e}tabChanged(e){this.tabIndex=e.index}copyObjects(){this.clipboard.copy(JSON.stringify(this.eventData,null,2))}copyMessage(){this.clipboard.copy(this.message)}syntaxHighlight(e){return"string"!=typeof e&&(e=JSON.stringify(e,void 0,2)),(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+-]?\d+)?)/g,function(n){let a="number";return n.startsWith('"')?a=n.endsWith(":")?"key":"string":/true|false/.test(n)?a="boolean":n.includes("null")&&(a="null"),'<span class="'+a+'">'+n+"</span>"})}onClose(){this.dialogRef.close()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(M.so),t.Y36(M.WI),t.Y36(Ii.TU))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-audit-message-detail-dialog"]],decls:26,vars:19,consts:[[1,"admin-theme"],["mat-dialog-title",""],["mat-dialog-content",""],[3,"selectedTabChange"],["matTabLabel",""],["matTabContent",""],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["mat-button","",3,"click"],[3,"innerHTML"],["data-cy","audit-message-text"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2),t.ALo(3,"translate"),t.ALo(4,"parseEventName"),t.qZA(),t.TgZ(5,"div",2)(6,"div"),t._uU(7),t.ALo(8,"translate"),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"mat-tab-group",3),t.NdJ("selectedTabChange",function(o){return n.tabChanged(o)}),t.TgZ(11,"mat-tab"),t.YNc(12,Tx,2,3,"ng-template",4),t.YNc(13,Cx,1,1,"ng-template",5),t.qZA(),t.TgZ(14,"mat-tab"),t.YNc(15,wx,2,3,"ng-template",4),t.YNc(16,Ax,2,1,"ng-template",5),t.qZA()()(),t.TgZ(17,"div",6)(18,"button",7),t.NdJ("click",function(){return n.onClose()}),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"button",8),t.NdJ("click",function(){return 0===n.tabIndex?n.copyObjects():n.copyMessage()}),t._uU(22),t.ALo(23,"translate"),t.TgZ(24,"mat-icon"),t._uU(25,"content_copy"),t.qZA()()()()),2&e){let a;t.xp6(2),t.hij(" ",t.lcZ(3,7,null!==(a=t.lcZ(4,9,n.title))&&void 0!==a?a:"DIALOGS.AUDIT_MESSAGE_DETAIL.TITLE")," "),t.xp6(5),t.HOy(" ",t.lcZ(8,11,"DIALOGS.AUDIT_MESSAGE_DETAIL.ACTOR"),": ",n.actor,", ",t.lcZ(9,13,"DIALOGS.AUDIT_MESSAGE_DETAIL.CREATED_AT"),": ",n.createdAt," "),t.xp6(12),t.hij(" ",t.lcZ(20,15,"DIALOGS.AUDIT_MESSAGE_DETAIL.CLOSE")," "),t.xp6(3),t.hij(" ",t.lcZ(23,17,"DIALOGS.AUDIT_MESSAGE_DETAIL.COPY")," ")}},dependencies:[l.Hw,V.lW,Ge.SP,Ge.uD,Ge.uX,Ge.Vc,M.uh,M.xY,M.H8,u.X$,xc],styles:[".key{color:brown}.string{color:green}.number{color:#ff8c00}.boolean{color:#00f}.null{color:#f0f}\n"],encapsulation:2}),i})();var Ex=s(98739),Dx=s(56451),Lx=s(62383);function kx(i,r){1&i&&(t.TgZ(0,"div",16),t._UZ(1,"mat-spinner",17),t.qZA())}function Ix(i,r){1&i&&(t.TgZ(0,"th",18),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"AUDIT_MESSAGES_LIST.ID")," "))}function Ox(i,r){if(1&i&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.hij(" ",e.id," ")}}function Mx(i,r){1&i&&(t.TgZ(0,"th",18),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"AUDIT_MESSAGES_LIST.TIMESTAMP")," "))}function Nx(i,r){if(1&i&&(t.TgZ(0,"td",19),t._uU(1),t.ALo(2,"parseDate"),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.createdAt,!0)," ")}}function Px(i,r){1&i&&(t.TgZ(0,"th",20),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"AUDIT_MESSAGES_LIST.EVENT_NAME")))}function Fx(i,r){if(1&i&&(t.TgZ(0,"td",19),t._uU(1),t.ALo(2,"parseEventName"),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.event.name)," ")}}function Rx(i,r){1&i&&(t.TgZ(0,"th",20),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"AUDIT_MESSAGES_LIST.ACTOR")))}function Bx(i,r){if(1&i&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.hij(" ",e.actor," ")}}function Zx(i,r){1&i&&(t.TgZ(0,"th",20),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"AUDIT_MESSAGES_LIST.MESSAGE")))}function Vx(i,r){if(1&i&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.hij(" ",e.event.message," ")}}function Gx(i,r){1&i&&t._UZ(0,"th",20)}function Ux(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"td",19)(1,"button",21),t.NdJ("click",function(){const o=t.CHM(e).$implicit,v=t.oxw();return t.KtG(v.viewDetails(o))}),t._uU(2),t.ALo(3,"translate"),t.qZA()()}2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"AUDIT_MESSAGES_LIST.VIEW_DETAIL")," "))}function zx(i,r){1&i&&t._UZ(0,"tr",22)}function Hx(i,r){1&i&&t._UZ(0,"tr",23)}function Yx(i,r){1&i&&(t.TgZ(0,"perun-web-apps-alert",24),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED_LIB.UI.ALERTS.NO_AUDIT_MESSAGES"),"\n"))}let Wx=(()=>{class i{constructor(e,n,a){this.dialog=e,this.dynamicPaginatingService=n,this.tableConfigService=a,this.displayedColumns=["id","timestamp","name","actor","event.message","detail"],this.pageSizeOptions=he.f7}static getExportDataForColumn(e,n){switch(n){case"id":return e.id.toString();case"timestamp":return(0,m.p6)(e.createdAt,"d.M.y H.mm.ss","en");case"name":return e.event.name.split(".").pop();case"actor":return e.actor;case"event.message":return e.event.message;default:return""}}ngAfterViewInit(){this.sort.sortChange.subscribe(()=>this.child.paginator.pageIndex=0),(0,Dx.T)(this.sort.sortChange,this.child.paginator.page).pipe((0,Je.b)(()=>this.loadAuditMessagesPage())).subscribe()}ngOnInit(){this.dataSource=new B.Hy(this.dynamicPaginatingService,null),this.dataSource.loadAuditMessages(this.tableConfigService.getTablePageSize(this.tableId),0,"DESCENDING")}ngOnChanges(){this.dataSource&&(this.child.paginator.pageIndex=0,this.loadAuditMessagesPage())}loadAuditMessagesPage(){this.dataSource.loadAuditMessages(this.child.paginator.pageSize,this.child.paginator.pageIndex,"asc"===this.sort.direction?"ASCENDING":"DESCENDING")}viewDetails(e){const n=(0,he.kZ)(),a=JSON.parse(JSON.stringify(e));n.minWidth="700px",n.maxWidth="1000px",n.data={message:a},this.dialog.open(Sx,n)}exportDisplayedData(e){(0,he.O6)((0,he.Xn)(this.dataSource.getData(),this.displayedColumns.filter(n=>"detail"!==n),i.getExportDataForColumn),e)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(M.uw),t.Y36(B.ly),t.Y36(Si.dB))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-audit-messages-list"]],viewQuery:function(e,n){if(1&e&&(t.Gf(he.l9,7),t.Gf(ii.YE,5)),2&e){let a;t.iGM(a=t.CRH())&&(n.child=a.first),t.iGM(a=t.CRH())&&(n.sort=a.first)}},inputs:{tableId:"tableId",refresh:"refresh",displayedColumns:"displayedColumns",searchString:"searchString"},features:[t._Bn([{provide:Ex.ye,useClass:B.Be}]),t.TTD],decls:28,vars:16,consts:[[1,"card","mt-2",3,"hidden"],[3,"dataLength","pageSizeOptions","tableId","allowExportAll","exportDisplayedData"],["class","spinner-container",4,"ngIf"],["mat-table","","matSort","","matSortActive","id","matSortDirection","desc","matSortDisableClear","",1,"w-100",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","static-column-size","mat-cell","",4,"matCellDef"],["matColumnDef","timestamp"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","actor"],["matColumnDef","event.message"],["matColumnDef","detail"],["mat-header-row","",4,"matHeaderRowDef"],["class","dark-hover-list-item","mat-row","",4,"matRowDef","matRowDefColumns"],["alert_type","warn",4,"ngIf"],[1,"spinner-container"],[1,"ml-auto","mr-auto"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"static-column-size"],["mat-header-cell",""],["data-cy","audit-message-detail-button","color","accent","mat-flat-button","",3,"click"],["mat-header-row",""],["mat-row","",1,"dark-hover-list-item"],["alert_type","warn"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.ALo(1,"async"),t.TgZ(2,"perun-web-apps-table-wrapper",1),t.NdJ("exportDisplayedData",function(o){return n.exportDisplayedData(o)}),t.YNc(3,kx,2,0,"div",2),t.ALo(4,"async"),t.TgZ(5,"table",3),t.ynx(6,4),t.YNc(7,Ix,3,3,"th",5),t.YNc(8,Ox,2,1,"td",6),t.BQk(),t.ynx(9,7),t.YNc(10,Mx,3,3,"th",5),t.YNc(11,Nx,3,4,"td",6),t.BQk(),t.ynx(12,8),t.YNc(13,Px,3,3,"th",9),t.YNc(14,Fx,3,3,"td",6),t.BQk(),t.ynx(15,10),t.YNc(16,Rx,3,3,"th",9),t.YNc(17,Bx,2,1,"td",6),t.BQk(),t.ynx(18,11),t.YNc(19,Zx,3,3,"th",9),t.YNc(20,Vx,2,1,"td",6),t.BQk(),t.ynx(21,12),t.YNc(22,Gx,1,0,"th",9),t.YNc(23,Ux,4,3,"td",6),t.BQk(),t.YNc(24,zx,1,0,"tr",13),t.YNc(25,Hx,1,0,"tr",14),t.qZA()()(),t.YNc(26,Yx,3,3,"perun-web-apps-alert",15),t.ALo(27,"async")),2&e&&(t.Q6J("hidden",0===n.dataSource.allObjectCount&&!1===t.lcZ(1,10,n.dataSource.loading$)),t.xp6(2),t.Q6J("dataLength",n.dataSource.allObjectCount)("pageSizeOptions",n.pageSizeOptions)("tableId",n.tableId)("allowExportAll",!1),t.xp6(1),t.Q6J("ngIf",t.lcZ(4,12,n.dataSource.loading$)),t.xp6(2),t.Q6J("dataSource",n.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(1),t.Q6J("ngIf",0===n.dataSource.allObjectCount&&!1===t.lcZ(27,14,n.dataSource.loading$)))},dependencies:[m.O5,V.lW,ii.YE,ii.nU,F.BZ,F.fO,F.as,F.w1,F.Dz,F.nj,F.ge,F.ev,F.XQ,F.Gk,nt.Ou,et.w,z.l,m.Ov,u.X$,Lx.M,xc]}),i})(),Xx=(()=>{class i{constructor(){this.tableId=Si.yW,this.refresh=!1}refreshTable(){this.refresh=!this.refresh}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-admin-audit-log"]],decls:5,vars:5,consts:[[1,"page-subtitle"],[3,"refresh"],[3,"refresh","tableId"]],template:function(e,n){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"perun-web-apps-refresh-button",1),t.NdJ("refresh",function(){return n.refreshTable()}),t.qZA(),t._UZ(4,"app-audit-messages-list",2)),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,3,"ADMIN.AUDIT_LOG.TITLE")),t.xp6(3),t.Q6J("refresh",n.refresh)("tableId",n.tableId))},dependencies:[Wx,Mi.t,u.X$]}),i})();var $x=s(44850);let Qx=(()=>{class i{constructor(e,n){this.dialogRef=e,this.data=n}onCancel(){this.dialogRef.close(!1)}onSubmit(){this.dialogRef.close(!0)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(M.so),t.Y36(M.WI))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-perun-web-apps-edit-enforce-consents-dialog"]],decls:26,vars:27,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"mt-2","mb-2"],["alert_type","warn"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["mat-flat-button","","color","accent",1,"ml-2",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div")(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",1)(6,"p"),t._uU(7),t.ALo(8,"translate"),t.ALo(9,"translate"),t.qZA(),t._UZ(10,"mat-divider"),t.TgZ(11,"p",2),t._uU(12),t.qZA(),t._UZ(13,"mat-divider"),t.TgZ(14,"perun-web-apps-alert",3),t._uU(15),t.ALo(16,"translate"),t.ALo(17,"translate"),t.qZA()(),t.TgZ(18,"div",4)(19,"button",5),t.NdJ("click",function(){return n.onCancel()}),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"button",6),t.NdJ("click",function(){return n.onSubmit()}),t._uU(23),t.ALo(24,"translate"),t.ALo(25,"translate"),t.qZA()()()),2&e&&(t.Tol(n.data.theme),t.xp6(2),t.hij(" ",n.data.enforceConsents?t.lcZ(3,9,"DIALOGS.EDIT_ENFORCE_CONSENTS_FLAG.DISABLE_TITLE"):t.lcZ(4,11,"DIALOGS.EDIT_ENFORCE_CONSENTS_FLAG.ENFORCE_TITLE")," "),t.xp6(5),t.hij(" ",n.data.enforceConsents?t.lcZ(8,13,"DIALOGS.EDIT_ENFORCE_CONSENTS_FLAG.DISABLE_DESCRIPTION"):t.lcZ(9,15,"DIALOGS.EDIT_ENFORCE_CONSENTS_FLAG.ENFORCE_DESCRIPTION")," "),t.xp6(5),t.Oqu(n.data.consentHubName),t.xp6(3),t.hij(" ",n.data.enforceConsents?t.lcZ(16,17,"DIALOGS.EDIT_ENFORCE_CONSENTS_FLAG.DISABLE_BOLD_DESCRIPTION"):t.lcZ(17,19,"DIALOGS.EDIT_ENFORCE_CONSENTS_FLAG.ENFORCE_BOLD_DESCRIPTION")," "),t.xp6(5),t.hij(" ",t.lcZ(21,21,"DIALOGS.EDIT_ENFORCE_CONSENTS_FLAG.CANCEL_BUTTON")," "),t.xp6(3),t.hij(" ",n.data.enforceConsents?t.lcZ(24,23,"DIALOGS.EDIT_ENFORCE_CONSENTS_FLAG.DISABLE_BUTTON"):t.lcZ(25,25,"DIALOGS.EDIT_ENFORCE_CONSENTS_FLAG.ENFORCE_BUTTON")," "))},dependencies:[V.lW,M.uh,M.xY,M.H8,$x.d,et.w,u.X$]}),i})();function jx(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"th",16)(1,"mat-checkbox",17),t.NdJ("change",function(a){t.CHM(e);const o=t.oxw();return t.KtG(a?o.masterToggle():null)}),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("aria-label",e.checkboxLabel())("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected())}}function Jx(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"td",18)(1,"mat-checkbox",19),t.NdJ("change",function(a){const v=t.CHM(e).$implicit,T=t.oxw();return t.KtG(a?T.selection.toggle(v):null)})("click",function(a){return a.stopPropagation()}),t.qZA()()}if(2&i){const e=r.$implicit,n=t.oxw();t.xp6(1),t.Q6J("aria-label",n.checkboxLabel(e))("checked",n.selection.isSelected(e))}}function Kx(i,r){1&i&&(t.TgZ(0,"th",20),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.CONSENT_HUBS_LIST.ID")," "))}function qx(i,r){if(1&i&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.Oqu(e.id)}}function ty(i,r){1&i&&(t.TgZ(0,"th",20),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.CONSENT_HUBS_LIST.NAME")," "))}function ey(i,r){if(1&i&&(t.TgZ(0,"td",22),t.ALo(1,"multiWordDataCy"),t._uU(2),t.qZA()),2&i){const e=r.$implicit;t.Q2q("data-cy","",t.lcZ(1,2,e.name),"-name-td"),t.xp6(2),t.hij(" ",e.name," ")}}function iy(i,r){1&i&&(t.TgZ(0,"th",20),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.CONSENT_HUBS_LIST.ENFORCE_CONSENTS")," "))}function ny(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"td",22)(1,"mat-slide-toggle",23),t.NdJ("change",function(a){const v=t.CHM(e).$implicit,T=t.oxw();return t.KtG(T.changeEnforceFlag(v,a))}),t.qZA()()}if(2&i){const e=r.$implicit;t.xp6(1),t.Q6J("checked",e.enforceConsents)}}function ry(i,r){1&i&&(t.TgZ(0,"th",20),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.CONSENT_HUBS_LIST.FACILITIES")," "))}function ay(i,r){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.TgZ(2,"span",25),t._uU(3),t.qZA(),t._UZ(4,"br"),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.hij(" ",e.name," "),t.xp6(2),t.hij(" #",e.id,"")}}function sy(i,r){if(1&i&&(t.TgZ(0,"td",22),t.YNc(1,ay,5,2,"span",24),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.Q6J("ngForOf",e.facilities)}}function oy(i,r){1&i&&t._UZ(0,"tr",26)}function ly(i,r){1&i&&t._UZ(0,"tr",27)}function cy(i,r){1&i&&(t.TgZ(0,"perun-web-apps-alert",28),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.CONSENT_HUBS_LIST.NO_CONSENT_HUBS"),"\n"))}function uy(i,r){1&i&&(t.TgZ(0,"perun-web-apps-alert",28),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.CONSENT_HUBS_LIST.NO_FILTER_RESULTS"),"\n"))}let hy=(()=>{class i{constructor(e,n,a,o,v){this.tableCheckbox=e,this.dialog=n,this.notificator=a,this.translate=o,this.consentsManager=v,this.filterValue="",this.displayedColumns=["select","id","name","enforceConsents","facilities"],this.selection=new R.Ov(!0,[]),this.exporting=!1,this.pageSizeOptions=he.f7}set matSort(e){this.sort=e,this.setDataSource()}static getDataForColumn(e,n){switch(n){case"id":return e.id.toString();case"name":return e.name;case"enforceConsents":return e.enforceConsents?"true":"false";case"facilities":{let a="";return e.facilities.forEach(o=>a+=o.name+" #"+String(o.id)+";"),a.slice(0,-1)}default:return""}}ngOnChanges(){this.dataSource=new F.by(this.consentHubs),this.setDataSource()}exportAllData(e){(0,he.O6)((0,he.Xn)(this.dataSource.filteredData,this.displayedColumns,i.getDataForColumn),e)}exportDisplayedData(e){const n=this.dataSource.paginator.pageIndex*this.dataSource.paginator.pageSize,a=n+this.dataSource.paginator.pageSize;(0,he.O6)((0,he.Xn)(this.dataSource.sortData(this.dataSource.filteredData,this.dataSource.sort).slice(n,a),this.displayedColumns,i.getDataForColumn),e)}isAllSelected(){return this.tableCheckbox.isAllSelected(this.selection.selected.length,this.filterValue,this.child.paginator.pageSize,this.child.paginator.hasNextPage(),this.dataSource)}masterToggle(){this.tableCheckbox.masterToggle(this.isAllSelected(),this.selection,this.filterValue,this.dataSource,this.sort,this.child.paginator.pageSize,this.child.paginator.pageIndex,!1)}checkboxLabel(e){return e?`${this.selection.isSelected(e)?"deselect":"select"} row ${e.id+1}`:(this.isAllSelected()?"select":"deselect")+" all"}setDataSource(){this.dataSource&&(this.dataSource.filterPredicate=(e,n)=>(0,he.Sd)(e,n,this.displayedColumns,i.getDataForColumn),this.dataSource.sortData=(e,n)=>(0,he.pR)(e,n,i.getDataForColumn),this.dataSource.sort=this.sort,this.dataSource.paginator=this.child.paginator,this.dataSource.filter=this.filterValue)}changeEnforceFlag(e,n){n.source.checked=e.enforceConsents;const a=(0,he.kZ)();a.width="550px",a.data={theme:"admin-theme",enforceConsents:e.enforceConsents,consentHubName:e.name},this.dialog.open(Qx,a).afterClosed().subscribe(v=>{v&&(e.enforceConsents=!e.enforceConsents,this.consentsManager.updateConsentHub({consentHub:e}).subscribe(T=>{n.source.checked=T.enforceConsents,e.enforceConsents=T.enforceConsents,this.translate.get("SHARED.COMPONENTS.CONSENT_HUBS_LIST.CHANGE_ENFORCE_CONSENTS_SUCCESS").subscribe(N=>{this.notificator.showSuccess(N)})},()=>e.enforceConsents=!e.enforceConsents))})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(B.UA),t.Y36(M.uw),t.Y36(B.V6),t.Y36(u.sK),t.Y36(Y.WY))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-perun-web-apps-consent-hubs-list"]],viewQuery:function(e,n){if(1&e&&(t.Gf(he.l9,7),t.Gf(ii.YE,7)),2&e){let a;t.iGM(a=t.CRH())&&(n.child=a.first),t.iGM(a=t.CRH())&&(n.matSort=a.first)}},inputs:{consentHubs:"consentHubs",filterValue:"filterValue",displayedColumns:"displayedColumns",tableId:"tableId",selection:"selection"},features:[t.TTD],decls:22,vars:9,consts:[[1,"card","mt-2",3,"hidden"],[3,"tableId","dataLength","pageSizeOptions","exportDisplayedData","exportAllData"],["mat-table","","matSort","","matSortActive","id","matSortDirection","asc","matSortDisableClear","",1,"w-100",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","","class","align-checkbox",4,"matHeaderCellDef"],["class","static-column-size align-checkbox","mat-cell","",4,"matCellDef"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","static-column-size","mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-cell","",4,"matCellDef"],["matColumnDef","enforceConsents"],["matColumnDef","facilities"],["mat-header-row","",4,"matHeaderRowDef"],["class","dark-hover-list-item","mat-row","",4,"matRowDef","matRowDefColumns"],["alert_type","warn",4,"ngIf"],["mat-header-cell","",1,"align-checkbox"],["color","primary",3,"aria-label","checked","indeterminate","change"],["mat-cell","",1,"static-column-size","align-checkbox"],["color","primary",3,"aria-label","checked","change","click"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"static-column-size"],["mat-cell",""],[3,"checked","change"],[4,"ngFor","ngForOf"],[1,"text-muted"],["mat-header-row",""],["mat-row","",1,"dark-hover-list-item"],["alert_type","warn"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"perun-web-apps-table-wrapper",1),t.NdJ("exportDisplayedData",function(o){return n.exportDisplayedData(o)})("exportAllData",function(o){return n.exportAllData(o)}),t.TgZ(2,"table",2),t.ynx(3,3),t.YNc(4,jx,2,3,"th",4),t.YNc(5,Jx,2,2,"td",5),t.BQk(),t.ynx(6,6),t.YNc(7,Kx,3,3,"th",7),t.YNc(8,qx,2,1,"td",8),t.BQk(),t.ynx(9,9),t.YNc(10,ty,3,3,"th",7),t.YNc(11,ey,3,4,"td",10),t.BQk(),t.ynx(12,11),t.YNc(13,iy,3,3,"th",7),t.YNc(14,ny,2,1,"td",10),t.BQk(),t.ynx(15,12),t.YNc(16,ry,3,3,"th",7),t.YNc(17,sy,2,1,"td",10),t.BQk(),t.YNc(18,oy,1,0,"tr",13),t.YNc(19,ly,1,0,"tr",14),t.qZA()()(),t.YNc(20,cy,3,3,"perun-web-apps-alert",15),t.YNc(21,uy,3,3,"perun-web-apps-alert",15)),2&e&&(t.Q6J("hidden",0===n.consentHubs.length||0===n.dataSource.filteredData.length),t.xp6(1),t.Q6J("tableId",n.tableId)("dataLength",n.dataSource.filteredData.length)("pageSizeOptions",n.pageSizeOptions),t.xp6(1),t.Q6J("dataSource",n.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(1),t.Q6J("ngIf",0===n.consentHubs.length),t.xp6(1),t.Q6J("ngIf",0===n.dataSource.filteredData.length&&0!==n.consentHubs.length))},dependencies:[m.sg,m.O5,ii.YE,ii.nU,F.BZ,F.fO,F.as,F.w1,F.Dz,F.nj,F.ge,F.ev,F.XQ,F.Gk,Pi.oG,Ct.Rr,et.w,z.l,u.X$,Pe.R]}),i})();function dy(i,r){1&i&&(t.TgZ(0,"perun-web-apps-alert",8),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.CONSENT_HUBS.GLOBAL_DISABLED")," "))}function py(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.evaluateConsents())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("disabled",!e.globalForceConsents||0===e.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(2,2,"ADMIN.CONSENT_HUBS.EVALUATE_CONSENTS")," ")}}function fy(i,r){1&i&&t._UZ(0,"mat-spinner",10)}function my(i,r){if(1&i&&t._UZ(0,"app-perun-web-apps-consent-hubs-list",11),2&i){const e=t.oxw();t.Q6J("consentHubs",e.consentHubs)("selection",e.selection)("filterValue",e.filterValue)("tableId",e.tableId)}}let gy=(()=>{class i{constructor(e,n,a,o,v,T){this.consentsManager=e,this.authResolver=n,this.notificator=a,this.translate=o,this.store=v,this.dialog=T,this.loading=!1,this.tableId=Si.HE,this.selection=new R.Ov(!0,[]),this.filterValue="",this.consentHubs=[]}ngOnInit(){this.globalForceConsents=this.store.getProperty("enforce_consents"),this.refreshTable()}applyFilter(e){this.filterValue=e}refreshTable(){this.loading=!0,this.consentsManager.getAllConsentHubs().subscribe(e=>{this.consentHubs=e,this.loading=!1})}evaluateConsents(){const e=(0,he.kZ)();e.width="500px",e.data={title:this.translate.instant("ADMIN.CONSENT_HUBS.CONFIRM_DIALOG_TITLE"),theme:"admin-theme",description:this.translate.instant("ADMIN.CONSENT_HUBS.CONFIRM_DIALOG_DESCRIPTION"),items:this.selection.selected.map(a=>a.name),type:"confirmation",showAsk:!1},this.dialog.open(fa.Ts,e).afterClosed().subscribe(a=>{a&&this.evaluateConsentsForConsentHub(0)})}evaluateConsentsForConsentHub(e){if(e===this.selection.selected.length)return this.notificator.showSuccess(this.translate.instant("ADMIN.CONSENT_HUBS.EVALUATION_FINISH")),void this.selection.clear();this.consentsManager.evaluateConsentsForConsentHub(this.selection.selected[e].id).subscribe(()=>{this.evaluateConsentsForConsentHub(++e)})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Y.WY),t.Y36(B.x4),t.Y36(B.V6),t.Y36(u.sK),t.Y36(B.d6),t.Y36(M.uw))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-perun-web-apps-admin-consent-hubs"]],decls:12,vars:12,consts:[[1,"page-subtitle"],["alert_type","warn",4,"ngIf"],[3,"refresh"],[3,"matTooltipDisabled","matTooltip"],["color","accent","class","action-button mr-2","mat-flat-button","",3,"disabled","click",4,"ngIf"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"consentHubs","selection","filterValue","tableId",4,"ngIf"],["alert_type","warn"],["color","accent","mat-flat-button","",1,"action-button","mr-2",3,"disabled","click"],[1,"ml-auto","mr-auto"],[3,"consentHubs","selection","filterValue","tableId"]],template:function(e,n){1&e&&(t.TgZ(0,"div")(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,dy,3,3,"perun-web-apps-alert",1),t.TgZ(5,"perun-web-apps-refresh-button",2),t.NdJ("refresh",function(){return n.refreshTable()}),t.qZA(),t.TgZ(6,"span",3),t.ALo(7,"translate"),t.YNc(8,py,3,4,"button",4),t.qZA(),t.TgZ(9,"perun-web-apps-immediate-filter",5),t.NdJ("filter",function(o){return n.applyFilter(o)}),t.qZA(),t.YNc(10,fy,1,0,"mat-spinner",6),t.YNc(11,my,1,4,"app-perun-web-apps-consent-hubs-list",7),t.qZA()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,8,"ADMIN.CONSENT_HUBS.TITLE")),t.xp6(2),t.Q6J("ngIf",!n.globalForceConsents),t.xp6(2),t.s9C("matTooltip",t.lcZ(7,10,"ADMIN.CONSENT_HUBS.TOOLTIP")),t.Q6J("matTooltipDisabled",n.globalForceConsents),t.xp6(2),t.Q6J("ngIf",n.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("placeholder","ADMIN.CONSENT_HUBS.SEARCH"),t.xp6(1),t.Q6J("ngIf",n.loading),t.xp6(1),t.Q6J("ngIf",!n.loading))},dependencies:[m.O5,V.lW,nt.Ou,oi.gM,hy,et.w,Mi.t,Ei.L,u.X$]}),i})();var _y=s(57788),Vs=s(71992);const vy=[{path:"",component:C,canActivateChild:[Vs.a],children:[{path:"",component:I,data:{animation:"AdminOverviewPage"}},{path:"attributes",component:dn,data:{animation:"AdminAttributesPage"}},{path:"users",component:z_.t,data:{animation:"AdminUsersPage"}},{path:"owners",component:U0,data:{animation:"AdminOwnersPage"}},{path:"services",component:xv.F,data:{animation:"AdminServicesPage"}},{path:"audit_log",component:Xx,data:{animation:"AdminAuditLogPage"}},{path:"visualizer",component:Un,children:[{path:"",component:si,data:{animation:"VisualizerOverviewPage"}},{path:"attrDependencies",component:Tn,data:{animation:"VisualizerAttrModulesPage"}},{path:"userDestinationRelationship",component:Bt,data:{animation:"UserDestinationRelationshipPage"}},{path:"userDestinationRelationship/graph",component:U_,data:{animation:"UserDestinationGraphPage"}}]},{path:"ext_sources",component:sv,data:{animation:"AdminExtSourcesPage"}},{path:"consent_hubs",component:gy,data:{animation:"AdminConsentHubsPage"}},{path:"searcher",component:_y.g,data:{animation:"AdminSearcherPage"}}]},{path:"users/:userId",component:J_,canActivateChild:[Vs.a],children:[{path:"",component:K_.Z,data:{animation:"UserOverviewPage"}},{path:"accounts",component:bx,data:{animation:"UserAccountsPage"}},{path:"attributes",component:ev.u,data:{animation:"UserAttributesPage"}},{path:"organizations",component:q_.j,data:{animation:"UserOrganizationsPage",showPrincipal:!1}},{path:"groups",component:tv.u,data:{animation:"UserGroupsPage",showPrincipal:!1}},{path:"identities",component:vv,data:{animation:"UserIdentitiesPage"}},{path:"facilities",component:W0,data:{animation:"UserFacilitiesPage"}},{path:"resources",component:wv,data:{animation:"UserRoles"}},{path:"identities/:identityId",component:Iv,data:{animation:"UserIdentityDetailPage"}},{path:"roles",component:ov.t,data:{animation:"UserRolesPage"}},{path:"service-identities",component:lv.R,data:{animation:"UserServiceIdentities"}},{path:"associated-users",component:f0.d,data:{animation:"AssociatedUsersPage"}}]},{path:"services/:serviceId",component:Gv,canActivateChild:[Vs.a],children:[{path:"",component:Uv,data:{animation:"ServiceOverviewPage"}},{path:"required-attributes",component:p0,data:{animation:"ServiceRequiredAttributesPage"}},{path:"destinations",component:C0,data:{animation:"ServiceDestinationsPage"}}]}];let xy=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[p.Bz.forChild(vy),p.Bz]}),i})();var yy=s(14264),by=s(63189),Ty=s(46374);let Cy=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[wp,I_,m.ez,xy,yy.m,by.r,Bn.ez,gt.d4,Ty.UsersModule]}),i})()},70242:(w,E,s)=>{"use strict";s.d(E,{q:()=>ue});var c=s(96308),x=s(95017),_=s(30671),m=s(9244),p=s(35382),t=s(94650),d=s(36895),l=s(97392),h=s(56709),f=s(10266),u=s(98380),g=s(18750),C=s(89383),L=s(64597);function I(ut,ft){if(1&ut){const gt=t.EpF();t.TgZ(0,"th",21)(1,"mat-checkbox",22),t.NdJ("change",function(ee){t.CHM(gt);const Kt=t.oxw();return t.KtG(ee?Kt.masterToggle():null)}),t.qZA()()}if(2&ut){const gt=t.oxw();t.xp6(1),t.Q6J("aria-label",gt.checkboxLabel())("checked",gt.selection.hasValue()&&gt.isAllSelected())("indeterminate",gt.selection.hasValue()&&!gt.isAllSelected())}}function R(ut,ft){if(1&ut){const gt=t.EpF();t.TgZ(0,"td",23)(1,"mat-checkbox",24),t.NdJ("change",function(ee){const ce=t.CHM(gt).$implicit,xe=t.oxw();return t.KtG(ee?xe.selection.toggle(ce):null)})("click",function(ee){return ee.stopPropagation()}),t.qZA()()}if(2&ut){const gt=ft.$implicit,Nt=t.oxw();t.xp6(1),t.Q6J("aria-label",Nt.checkboxLabel(gt))("checked",Nt.selection.isSelected(gt))}}function M(ut,ft){1&ut&&(t.TgZ(0,"th",25),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&ut&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.DESTINATIONS_LIST.DESTINATION_ID")," "))}function F(ut,ft){if(1&ut&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&ut){const gt=ft.$implicit;t.xp6(1),t.hij(" ",gt.id," ")}}function B(ut,ft){1&ut&&(t.TgZ(0,"th",25),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&ut&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.DESTINATIONS_LIST.SERVICE")," "))}function Y(ut,ft){if(1&ut&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&ut){const gt=ft.$implicit;t.xp6(1),t.Oqu(gt.service.name)}}function V(ut,ft){1&ut&&t._UZ(0,"th",28)}function nt(ut,ft){1&ut&&(t.TgZ(0,"mat-icon",30),t.ALo(1,"translate"),t._uU(2," warning "),t.qZA()),2&ut&&t.s9C("matTooltip",t.lcZ(1,1,"SHARED.COMPONENTS.DESTINATIONS_LIST.WARN"))}function et(ut,ft){if(1&ut&&(t.TgZ(0,"td",27),t.YNc(1,nt,3,3,"mat-icon",29),t.qZA()),2&ut){const gt=ft.$implicit,Nt=t.oxw();t.xp6(1),t.Q6J("ngIf",!Nt.services.has(gt.service.id))}}function st(ut,ft){1&ut&&(t.TgZ(0,"th",25),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&ut&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.DESTINATIONS_LIST.FACILITY")," "))}function K(ut,ft){if(1&ut&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&ut){const gt=ft.$implicit;t.xp6(1),t.Oqu(gt.facility.name)}}function X(ut,ft){1&ut&&(t.TgZ(0,"th",25),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&ut&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.DESTINATIONS_LIST.DESTINATION")," "))}function W(ut,ft){if(1&ut&&(t.TgZ(0,"td",27),t.ALo(1,"multiWordDataCy"),t._uU(2),t.qZA()),2&ut){const gt=ft.$implicit;t.uIk("data-cy",t.lcZ(1,2,gt.destination)),t.xp6(2),t.hij(" ",gt.destination," ")}}function at(ut,ft){1&ut&&(t.TgZ(0,"th",25),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&ut&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.DESTINATIONS_LIST.TYPE")," "))}function H(ut,ft){if(1&ut&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&ut){const gt=ft.$implicit;t.xp6(1),t.Oqu(gt.type.toUpperCase())}}function Q(ut,ft){1&ut&&t._UZ(0,"th",28)}function it(ut,ft){1&ut&&(t.TgZ(0,"mat-icon",32),t.ALo(1,"translate"),t._uU(2," check_circle_outline "),t.qZA()),2&ut&&t.s9C("matTooltip",t.lcZ(1,1,"SHARED.COMPONENTS.DESTINATIONS_LIST.ALLOWED"))}function q(ut,ft){1&ut&&(t.TgZ(0,"mat-icon",32),t.ALo(1,"translate"),t._uU(2," block "),t.qZA()),2&ut&&t.s9C("matTooltip",t.lcZ(1,1,"SHARED.COMPONENTS.DESTINATIONS_LIST.BLOCKED"))}function U(ut,ft){if(1&ut&&(t.TgZ(0,"td",27),t.YNc(1,it,3,3,"mat-icon",31),t.YNc(2,q,3,3,"mat-icon",31),t.qZA()),2&ut){const gt=ft.$implicit;t.xp6(1),t.Q6J("ngIf",!gt.blocked),t.xp6(1),t.Q6J("ngIf",gt.blocked)}}function D(ut,ft){1&ut&&(t.TgZ(0,"th",25),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&ut&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.DESTINATIONS_LIST.PROPAGATION_TYPE")," "))}function mt(ut,ft){if(1&ut&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&ut){const gt=ft.$implicit;t.xp6(1),t.Oqu(gt.propagationType)}}function St(ut,ft){1&ut&&t._UZ(0,"tr",33)}function Mt(ut,ft){1&ut&&t._UZ(0,"tr",34)}function Et(ut,ft){1&ut&&(t.TgZ(0,"perun-web-apps-alert",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&ut&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED_LIB.UI.ALERTS.NO_FILTER_RESULTS_ALERT"),"\n"))}function $t(ut,ft){1&ut&&(t.TgZ(0,"perun-web-apps-alert",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&ut&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.DESTINATIONS_LIST.NO_DESTINATIONS"),"\n"))}let ue=(()=>{class ut{constructor(gt,Nt){this.authResolver=gt,this.tableCheckbox=Nt,this.destinations=[],this.selection=new x.Ov(!0,[]),this.filterValue="",this.pageSizeOptions=m.f7}set matSort(gt){this.sort=gt,this.setDataSource()}static getDataForColumn(gt,Nt){switch(Nt){case"destinationId":return gt.id.toString();case"service":return gt.service.name;case"facility":return gt.facility.name;case"destination":return gt.destination;case"type":return gt.type;case"status":return gt.blocked?"blocked":"allowed";case"propagationType":return gt.propagationType;default:return""}}ngOnChanges(){this.authResolver.isPerunAdminOrObserver()||(this.displayedColumns=this.displayedColumns.filter(gt=>"destinationId"!==gt)),this.dataSource=new _.by(this.destinations),this.setDataSource(),this.dataSource.filter=this.filterValue.toLowerCase()}exportAllData(gt){(0,m.O6)((0,m.Xn)(this.dataSource.filteredData,this.displayedColumns,ut.getDataForColumn),gt)}exportDisplayedData(gt){const Nt=this.dataSource.paginator.pageIndex*this.dataSource.paginator.pageSize,ee=Nt+this.dataSource.paginator.pageSize;(0,m.O6)((0,m.Xn)(this.dataSource.sortData(this.dataSource.filteredData,this.dataSource.sort).slice(Nt,ee),this.displayedColumns,ut.getDataForColumn),gt)}setDataSource(){this.dataSource&&(this.dataSource.sort=this.sort,this.dataSource.filterPredicate=(gt,Nt)=>(0,m.Sd)(gt,Nt,this.displayedColumns,ut.getDataForColumn),this.dataSource.sortData=(gt,Nt)=>(0,m.pR)(gt,Nt,ut.getDataForColumn),this.dataSource.paginator=this.child.paginator)}isAllSelected(){return this.tableCheckbox.isAllSelected(this.selection.selected.length,this.filterValue,this.child.paginator.pageSize,this.child.paginator.hasNextPage(),this.dataSource)}masterToggle(){this.tableCheckbox.masterToggle(this.isAllSelected(),this.selection,this.filterValue,this.dataSource,this.sort,this.child.paginator.pageSize,this.child.paginator.pageIndex,!1)}checkboxLabel(gt){return gt?`${this.selection.isSelected(gt)?"deselect":"select"} row ${gt.id+1}`:(this.isAllSelected()?"select":"deselect")+" all"}ngAfterViewInit(){this.dataSource.paginator=this.child.paginator}}return ut.\u0275fac=function(gt){return new(gt||ut)(t.Y36(p.x4),t.Y36(p.UA))},ut.\u0275cmp=t.Xpm({type:ut,selectors:[["app-perun-web-apps-destination-list"]],viewQuery:function(gt,Nt){if(1&gt&&(t.Gf(m.l9,7),t.Gf(c.YE,7)),2&gt){let ee;t.iGM(ee=t.CRH())&&(Nt.child=ee.first),t.iGM(ee=t.CRH())&&(Nt.matSort=ee.first)}},inputs:{destinations:"destinations",selection:"selection",filterValue:"filterValue",tableId:"tableId",displayedColumns:"displayedColumns",services:"services"},features:[t.TTD],decls:34,vars:9,consts:[[1,"card","mt-3",3,"hidden"],[3,"pageSizeOptions","dataLength","tableId","exportDisplayedData","exportAllData"],["mat-table","","matSort","","matSortActive","id","matSortDirection","asc","matSortDisableClear","",1,"w-100",3,"dataSource"],["matColumnDef","select"],["class","align-checkbox","mat-header-cell","",4,"matHeaderCellDef"],["class","static-column-size align-checkbox","mat-cell","",4,"matCellDef"],["matColumnDef","destinationId"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","static-column-size","mat-cell","",4,"matCellDef"],["matColumnDef","service"],["mat-cell","",4,"matCellDef"],["matColumnDef","warn"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","facility"],["matColumnDef","destination"],["matColumnDef","type"],["matColumnDef","status"],["matColumnDef","propagationType"],["mat-header-row","",4,"matHeaderRowDef"],["class","dark-hover-list-item","mat-row","",4,"matRowDef","matRowDefColumns"],["alert_type","warn",4,"ngIf"],["mat-header-cell","",1,"align-checkbox"],["color","primary",3,"aria-label","checked","indeterminate","change"],["mat-cell","",1,"static-column-size","align-checkbox"],["color","primary",3,"aria-label","checked","change","click"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"static-column-size"],["mat-cell",""],["mat-header-cell",""],["class","warn","matTooltipPosition","above",3,"matTooltip",4,"ngIf"],["matTooltipPosition","above",1,"warn",3,"matTooltip"],["class","align-bottom",3,"matTooltip",4,"ngIf"],[1,"align-bottom",3,"matTooltip"],["mat-header-row",""],["mat-row","",1,"dark-hover-list-item"],["alert_type","warn"]],template:function(gt,Nt){1&gt&&(t.TgZ(0,"div",0)(1,"perun-web-apps-table-wrapper",1),t.NdJ("exportDisplayedData",function(Kt){return Nt.exportDisplayedData(Kt)})("exportAllData",function(Kt){return Nt.exportAllData(Kt)}),t.TgZ(2,"table",2),t.ynx(3,3),t.YNc(4,I,2,3,"th",4),t.YNc(5,R,2,2,"td",5),t.BQk(),t.ynx(6,6),t.YNc(7,M,3,3,"th",7),t.YNc(8,F,2,1,"td",8),t.BQk(),t.ynx(9,9),t.YNc(10,B,3,3,"th",7),t.YNc(11,Y,2,1,"td",10),t.BQk(),t.ynx(12,11),t.YNc(13,V,1,0,"th",12),t.YNc(14,et,2,1,"td",10),t.BQk(),t.ynx(15,13),t.YNc(16,st,3,3,"th",7),t.YNc(17,K,2,1,"td",10),t.BQk(),t.ynx(18,14),t.YNc(19,X,3,3,"th",7),t.YNc(20,W,3,4,"td",10),t.BQk(),t.ynx(21,15),t.YNc(22,at,3,3,"th",7),t.YNc(23,H,2,1,"td",10),t.BQk(),t.ynx(24,16),t.YNc(25,Q,1,0,"th",12),t.YNc(26,U,3,2,"td",10),t.BQk(),t.ynx(27,17),t.YNc(28,D,3,3,"th",7),t.YNc(29,mt,2,1,"td",10),t.BQk(),t.YNc(30,St,1,0,"tr",18),t.YNc(31,Mt,1,0,"tr",19),t.qZA()()(),t.YNc(32,Et,3,3,"perun-web-apps-alert",20),t.YNc(33,$t,3,3,"perun-web-apps-alert",20)),2&gt&&(t.Q6J("hidden",0===Nt.dataSource.filteredData.length||0===Nt.destinations.length),t.xp6(1),t.Q6J("pageSizeOptions",Nt.pageSizeOptions)("dataLength",Nt.dataSource.filteredData.length)("tableId",Nt.tableId),t.xp6(1),t.Q6J("dataSource",Nt.dataSource),t.xp6(28),t.Q6J("matHeaderRowDef",Nt.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",Nt.displayedColumns),t.xp6(1),t.Q6J("ngIf",0===Nt.dataSource.filteredData.length&&0!==Nt.destinations.length),t.xp6(1),t.Q6J("ngIf",0===Nt.destinations.length))},dependencies:[d.O5,l.Hw,c.YE,c.nU,_.BZ,_.fO,_.as,_.w1,_.Dz,_.nj,_.ge,_.ev,_.XQ,_.Gk,h.oG,f.gM,u.w,g.l,C.X$,L.R],styles:[".warn[_ngcontent-%COMP%]{color:#ebe134}"]}),ut})()},89466:(w,E,s)=>{"use strict";s.d(E,{u:()=>I});var c=s(32105),x=s(65412),_=s(30671),m=s(35382),p=s(94650),t=s(89383),d=s(36895),l=s(4859),h=s(51572),f=s(98380),u=s(70242);function g(R,M){1&R&&p._UZ(0,"mat-spinner",6)}function C(R,M){if(1&R&&p._UZ(0,"app-perun-web-apps-destination-list",11),2&R){const F=p.oxw(2);p.Q6J("destinations",F.destinations)("displayedColumns",F.displayedColumns)}}function L(R,M){if(1&R&&(p.TgZ(0,"div",7)(1,"perun-web-apps-alert",8),p._uU(2),p.ALo(3,"translate"),p.qZA(),p.TgZ(4,"p"),p._uU(5),p.ALo(6,"translate"),p.qZA(),p.TgZ(7,"div",9),p._uU(8),p.ALo(9,"translate"),p.qZA(),p.YNc(10,C,1,2,"app-perun-web-apps-destination-list",10),p.qZA()),2&R){const F=p.oxw();p.xp6(2),p.Oqu(p.lcZ(3,4,"DIALOGS.REMOVE_DESTINATIONS.WARNING")),p.xp6(3),p.Oqu(p.lcZ(6,6,"DIALOGS.REMOVE_DESTINATIONS.DESCRIPTION")),p.xp6(3),p.hij(" ",p.lcZ(9,8,"DIALOGS.REMOVE_DESTINATIONS.ASK")," "),p.xp6(2),p.Q6J("ngIf",!F.loading)}}let I=(()=>{class R{constructor(F,B,Y,V,nt){this.dialogRef=F,this.data=B,this.notificator=Y,this.translate=V,this.serviceManager=nt,this.displayedColumns=[],this.loading=!1}ngOnInit(){this.theme=this.data.theme,this.destinations=this.data.destinations,this.displayedColumns="admin-theme"===this.theme?["destinationId","facility","destination","type","propagationType"]:["destinationId","service","destination","type","propagationType"],this.dataSource=new _.by(this.data.destinations)}onCancel(){this.dialogRef.close(!1)}deleteDestinations(){if(0===this.destinations.length)return this.notificator.showSuccess(this.translate.instant("DIALOGS.REMOVE_DESTINATIONS.SUCCESS")),void this.dialogRef.close(!0);const F=this.destinations.pop();this.serviceManager.removeDestination(F.service.id,F.facility.id,F.destination,F.type).subscribe(()=>{this.deleteDestinations()},()=>this.loading=!1)}onConfirm(){this.loading=!0,this.deleteDestinations()}}return R.\u0275fac=function(F){return new(F||R)(p.Y36(x.so),p.Y36(x.WI),p.Y36(m.V6),p.Y36(t.sK),p.Y36(c.KK))},R.\u0275cmp=p.Xpm({type:R,selectors:[["app-perun-web-apps-remove-destination-dialog"]],decls:13,vars:15,consts:[["mat-dialog-title",""],["class","mr-auto ml-auto",4,"ngIf"],["mat-dialog-content","",4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["color","warn","mat-flat-button","",1,"ml-2",3,"disabled","click"],[1,"mr-auto","ml-auto"],["mat-dialog-content",""],["alert_type","warn"],[1,"font-weight-bold"],[3,"destinations","displayedColumns",4,"ngIf"],[3,"destinations","displayedColumns"]],template:function(F,B){1&F&&(p.TgZ(0,"h1",0),p._uU(1),p.ALo(2,"translate"),p.qZA(),p.TgZ(3,"div"),p.YNc(4,g,1,0,"mat-spinner",1),p.YNc(5,L,11,10,"div",2),p.TgZ(6,"div",3)(7,"button",4),p.NdJ("click",function(){return B.onCancel()}),p._uU(8),p.ALo(9,"translate"),p.qZA(),p.TgZ(10,"button",5),p.NdJ("click",function(){return B.onConfirm()}),p._uU(11),p.ALo(12,"translate"),p.qZA()()()),2&F&&(p.xp6(1),p.Oqu(p.lcZ(2,9,"DIALOGS.REMOVE_DESTINATIONS.TITLE")),p.xp6(2),p.Tol(B.theme),p.xp6(1),p.Q6J("ngIf",B.loading),p.xp6(1),p.Q6J("ngIf",!B.loading),p.xp6(3),p.hij(" ",p.lcZ(9,11,"DIALOGS.REMOVE_DESTINATIONS.CANCEL")," "),p.xp6(2),p.Q6J("disabled",B.loading),p.xp6(1),p.hij(" ",p.lcZ(12,13,"DIALOGS.REMOVE_DESTINATIONS.CONFIRM")," "))},dependencies:[d.O5,l.lW,x.uh,x.xY,x.H8,h.Ou,f.w,u.q,t.X$]}),R})()},23256:(w,E,s)=>{"use strict";s.d(E,{Q:()=>X});var c=s(96308),x=s(95017),_=s(30671),m=s(9244),p=s(35382),t=s(94650),d=s(36895),l=s(56709),h=s(98380),f=s(18750),u=s(89383);function g(W,at){if(1&W){const H=t.EpF();t.TgZ(0,"th",16)(1,"mat-checkbox",17),t.NdJ("change",function(it){t.CHM(H);const q=t.oxw();return t.KtG(it?q.masterToggle():null)}),t.qZA()()}if(2&W){const H=t.oxw();t.xp6(1),t.Q6J("aria-label",H.checkboxLabel())("checked",H.selection.hasValue()&&H.isAllSelected())("indeterminate",H.selection.hasValue()&&!H.isAllSelected())}}function C(W,at){if(1&W){const H=t.EpF();t.TgZ(0,"td",18)(1,"mat-checkbox",19),t.NdJ("change",function(it){const U=t.CHM(H).$implicit,D=t.oxw();return t.KtG(it?D.selection.toggle(U):null)})("click",function(it){return it.stopPropagation()}),t.qZA()()}if(2&W){const H=at.$implicit,Q=t.oxw();t.xp6(1),t.Q6J("aria-label",Q.checkboxLabel(H))("checked",Q.selection.isSelected(H))}}function L(W,at){1&W&&(t.TgZ(0,"th",20),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&W&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED_LIB.PERUN.COMPONENTS.OWNERS_LIST.ID")," "))}function I(W,at){if(1&W&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&W){const H=at.$implicit;t.xp6(1),t.hij(" ",H.id," ")}}function R(W,at){1&W&&(t.TgZ(0,"th",20),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&W&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED_LIB.PERUN.COMPONENTS.OWNERS_LIST.NAME")," "))}function M(W,at){if(1&W&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&W){const H=at.$implicit;t.uIk("data-cy",H.name),t.xp6(1),t.Oqu(H.name)}}function F(W,at){1&W&&(t.TgZ(0,"th",20),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&W&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED_LIB.PERUN.COMPONENTS.OWNERS_LIST.CONTACT")," "))}function B(W,at){if(1&W&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&W){const H=at.$implicit;t.xp6(1),t.Oqu(H.contact)}}function Y(W,at){1&W&&(t.TgZ(0,"th",20),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&W&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED_LIB.PERUN.COMPONENTS.OWNERS_LIST.TYPE")," "))}function V(W,at){if(1&W&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&W){const H=at.$implicit;t.xp6(1),t.Oqu(H.type)}}function nt(W,at){1&W&&t._UZ(0,"tr",23)}function et(W,at){1&W&&t._UZ(0,"tr",24)}function st(W,at){1&W&&(t.TgZ(0,"perun-web-apps-alert",25),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&W&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED_LIB.PERUN.COMPONENTS.OWNERS_LIST.NO_OWNERS"),"\n"))}function K(W,at){1&W&&(t.TgZ(0,"perun-web-apps-alert",25),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&W&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED_LIB.PERUN.COMPONENTS.OWNERS_LIST.NO_FILTER_OWNERS"),"\n"))}let X=(()=>{class W{constructor(H,Q){this.authResolver=H,this.tableCheckbox=Q,this.owners=[],this.selection=new x.Ov(!0,[]),this.filterValue="",this.displayedColumns=["select","id","name","contact","type"],this.pageSizeOptions=m.f7}set matSort(H){this.sort=H,this.setDataSource()}static getDataForColumn(H,Q){switch(Q){case"id":return H.id.toString();case"name":return H.name;case"contact":return H.contact;case"type":return H.type;default:return""}}ngAfterViewInit(){this.setDataSource()}exportAllData(H){(0,m.O6)((0,m.Xn)(this.dataSource.filteredData,this.displayedColumns,W.getDataForColumn),H)}exportDisplayedData(H){const Q=this.dataSource.paginator.pageIndex*this.dataSource.paginator.pageSize,it=Q+this.dataSource.paginator.pageSize;(0,m.O6)((0,m.Xn)(this.dataSource.sortData(this.dataSource.filteredData,this.dataSource.sort).slice(Q,it),this.displayedColumns,W.getDataForColumn),H)}setDataSource(){this.dataSource&&(this.dataSource.filterPredicate=(H,Q)=>(0,m.Sd)(H,Q,this.displayedColumns,W.getDataForColumn),this.dataSource.sortData=(H,Q)=>(0,m.pR)(H,Q,W.getDataForColumn),this.dataSource.sort=this.sort,this.dataSource.paginator=this.child.paginator,this.dataSource.filter=this.filterValue)}ngOnChanges(){this.authResolver.isPerunAdminOrObserver()||(this.displayedColumns=this.displayedColumns.filter(H=>"id"!==H)),this.dataSource=new _.by(this.owners),this.setDataSource()}isAllSelected(){return this.tableCheckbox.isAllSelected(this.selection.selected.length,this.filterValue,this.child.paginator.pageSize,this.child.paginator.hasNextPage(),this.dataSource)}masterToggle(){this.tableCheckbox.masterToggle(this.isAllSelected(),this.selection,this.filterValue,this.dataSource,this.sort,this.child.paginator.pageSize,this.child.paginator.pageIndex,!1)}checkboxLabel(H){return H?`${this.selection.isSelected(H)?"deselect":"select"} row ${H.id+1}`:(this.isAllSelected()?"select":"deselect")+" all"}}return W.\u0275fac=function(H){return new(H||W)(t.Y36(p.x4),t.Y36(p.UA))},W.\u0275cmp=t.Xpm({type:W,selectors:[["perun-web-apps-owners-list"]],viewQuery:function(H,Q){if(1&H&&(t.Gf(m.l9,7),t.Gf(c.YE,7)),2&H){let it;t.iGM(it=t.CRH())&&(Q.child=it.first),t.iGM(it=t.CRH())&&(Q.matSort=it.first)}},inputs:{owners:"owners",selection:"selection",tableId:"tableId",filterValue:"filterValue",displayedColumns:"displayedColumns"},features:[t.TTD],decls:22,vars:9,consts:[[1,"card","mt-2",3,"hidden"],[3,"tableId","dataLength","pageSizeOptions","exportDisplayedData","exportAllData"],["mat-table","","matSort","","matSortActive","id","matSortDirection","asc","matSortDisableClear","",1,"w-100",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","","class","align-checkbox",4,"matHeaderCellDef"],["class","static-column-size align-checkbox","mat-cell","",4,"matCellDef"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","static-column-size","mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-cell","",4,"matCellDef"],["matColumnDef","contact"],["matColumnDef","type"],["mat-header-row","",4,"matHeaderRowDef"],["class","dark-hover-list-item","mat-row","",4,"matRowDef","matRowDefColumns"],["alert_type","warn",4,"ngIf"],["mat-header-cell","",1,"align-checkbox"],["color","primary",3,"aria-label","checked","indeterminate","change"],["mat-cell","",1,"static-column-size","align-checkbox"],["color","primary",3,"aria-label","checked","change","click"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"static-column-size"],["mat-cell",""],["mat-header-row",""],["mat-row","",1,"dark-hover-list-item"],["alert_type","warn"]],template:function(H,Q){1&H&&(t.TgZ(0,"div",0)(1,"perun-web-apps-table-wrapper",1),t.NdJ("exportDisplayedData",function(q){return Q.exportDisplayedData(q)})("exportAllData",function(q){return Q.exportAllData(q)}),t.TgZ(2,"table",2),t.ynx(3,3),t.YNc(4,g,2,3,"th",4),t.YNc(5,C,2,2,"td",5),t.BQk(),t.ynx(6,6),t.YNc(7,L,3,3,"th",7),t.YNc(8,I,2,1,"td",8),t.BQk(),t.ynx(9,9),t.YNc(10,R,3,3,"th",7),t.YNc(11,M,2,2,"td",10),t.BQk(),t.ynx(12,11),t.YNc(13,F,3,3,"th",7),t.YNc(14,B,2,1,"td",10),t.BQk(),t.ynx(15,12),t.YNc(16,Y,3,3,"th",7),t.YNc(17,V,2,1,"td",10),t.BQk(),t.YNc(18,nt,1,0,"tr",13),t.YNc(19,et,1,0,"tr",14),t.qZA()()(),t.YNc(20,st,3,3,"perun-web-apps-alert",15),t.YNc(21,K,3,3,"perun-web-apps-alert",15)),2&H&&(t.Q6J("hidden",0===Q.owners.length||0===Q.dataSource.filteredData.length),t.xp6(1),t.Q6J("tableId",Q.tableId)("dataLength",Q.dataSource.filteredData.length)("pageSizeOptions",Q.pageSizeOptions),t.xp6(1),t.Q6J("dataSource",Q.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",Q.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",Q.displayedColumns),t.xp6(1),t.Q6J("ngIf",!Q.owners.length),t.xp6(1),t.Q6J("ngIf",!Q.dataSource.filteredData.length&&Q.owners.length))},dependencies:[d.O5,l.oG,_.BZ,_.fO,_.as,_.w1,_.Dz,_.nj,_.ge,_.ev,_.XQ,_.Gk,c.YE,c.nU,h.w,f.l,u.X$]}),W})()},16087:(w,E,s)=>{"use strict";const c=s(34315),x=s(52872),_=s(60929);w.exports=function m(d,l){switch(x(d)){case"object":return function p(d,l){if("function"==typeof l)return l(d);if(l||_(d)){const h=new d.constructor;for(let f in d)h[f]=m(d[f],l);return h}return d}(d,l);case"array":return function t(d,l){const h=new d.constructor(d.length);for(let f=0;f<d.length;f++)h[f]=m(d[f],l);return h}(d,l);default:return c(d)}}},60929:(w,E,s)=>{"use strict";var c=s(50623);function x(_){return!0===c(_)&&"[object Object]"===Object.prototype.toString.call(_)}w.exports=function(m){var p,t;return!(!1===x(m)||(p=m.constructor,"function"!=typeof p)||(t=p.prototype,!1===x(t))||!1===t.hasOwnProperty("isPrototypeOf"))}},52786:(w,E,s)=>{"use strict";s.d(E,{B8:()=>et,Il:()=>x,J5:()=>m,SU:()=>nt,Ss:()=>st,Ym:()=>Q,ZP:()=>B,xV:()=>_});var c=s(68884);function x(){}var _=.7,m=1/_,p="\\s*([+-]?\\d+)\\s*",t="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",d="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",l=/^#([0-9a-f]{3,8})$/,h=new RegExp("^rgb\\("+[p,p,p]+"\\)$"),f=new RegExp("^rgb\\("+[d,d,d]+"\\)$"),u=new RegExp("^rgba\\("+[p,p,p,t]+"\\)$"),g=new RegExp("^rgba\\("+[d,d,d,t]+"\\)$"),C=new RegExp("^hsl\\("+[t,d,d]+"\\)$"),L=new RegExp("^hsla\\("+[t,d,d,t]+"\\)$"),I={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function R(){return this.rgb().formatHex()}function F(){return this.rgb().formatRgb()}function B(U){var D,mt;return U=(U+"").trim().toLowerCase(),(D=l.exec(U))?(mt=D[1].length,D=parseInt(D[1],16),6===mt?Y(D):3===mt?new st(D>>8&15|D>>4&240,D>>4&15|240&D,(15&D)<<4|15&D,1):8===mt?V(D>>24&255,D>>16&255,D>>8&255,(255&D)/255):4===mt?V(D>>12&15|D>>8&240,D>>8&15|D>>4&240,D>>4&15|240&D,((15&D)<<4|15&D)/255):null):(D=h.exec(U))?new st(D[1],D[2],D[3],1):(D=f.exec(U))?new st(255*D[1]/100,255*D[2]/100,255*D[3]/100,1):(D=u.exec(U))?V(D[1],D[2],D[3],D[4]):(D=g.exec(U))?V(255*D[1]/100,255*D[2]/100,255*D[3]/100,D[4]):(D=C.exec(U))?at(D[1],D[2]/100,D[3]/100,1):(D=L.exec(U))?at(D[1],D[2]/100,D[3]/100,D[4]):I.hasOwnProperty(U)?Y(I[U]):"transparent"===U?new st(NaN,NaN,NaN,0):null}function Y(U){return new st(U>>16&255,U>>8&255,255&U,1)}function V(U,D,mt,St){return St<=0&&(U=D=mt=NaN),new st(U,D,mt,St)}function nt(U){return U instanceof x||(U=B(U)),U?new st((U=U.rgb()).r,U.g,U.b,U.opacity):new st}function et(U,D,mt,St){return 1===arguments.length?nt(U):new st(U,D,mt,St??1)}function st(U,D,mt,St){this.r=+U,this.g=+D,this.b=+mt,this.opacity=+St}function K(){return"#"+W(this.r)+W(this.g)+W(this.b)}function X(){var U=this.opacity;return(1===(U=isNaN(U)?1:Math.max(0,Math.min(1,U)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===U?")":", "+U+")")}function W(U){return((U=Math.max(0,Math.min(255,Math.round(U)||0)))<16?"0":"")+U.toString(16)}function at(U,D,mt,St){return St<=0?U=D=mt=NaN:mt<=0||mt>=1?U=D=NaN:D<=0&&(U=NaN),new it(U,D,mt,St)}function H(U){if(U instanceof it)return new it(U.h,U.s,U.l,U.opacity);if(U instanceof x||(U=B(U)),!U)return new it;if(U instanceof it)return U;var D=(U=U.rgb()).r/255,mt=U.g/255,St=U.b/255,Mt=Math.min(D,mt,St),Et=Math.max(D,mt,St),$t=NaN,ue=Et-Mt,ut=(Et+Mt)/2;return ue?($t=D===Et?(mt-St)/ue+6*(mt<St):mt===Et?(St-D)/ue+2:(D-mt)/ue+4,ue/=ut<.5?Et+Mt:2-Et-Mt,$t*=60):ue=ut>0&&ut<1?0:$t,new it($t,ue,ut,U.opacity)}function Q(U,D,mt,St){return 1===arguments.length?H(U):new it(U,D,mt,St??1)}function it(U,D,mt,St){this.h=+U,this.s=+D,this.l=+mt,this.opacity=+St}function q(U,D,mt){return 255*(U<60?D+(mt-D)*U/60:U<180?mt:U<240?D+(mt-D)*(240-U)/60:D)}(0,c.Z)(x,B,{copy:function(U){return Object.assign(new this.constructor,this,U)},displayable:function(){return this.rgb().displayable()},hex:R,formatHex:R,formatHsl:function M(){return H(this).formatHsl()},formatRgb:F,toString:F}),(0,c.Z)(st,et,(0,c.l)(x,{brighter:function(U){return U=null==U?m:Math.pow(m,U),new st(this.r*U,this.g*U,this.b*U,this.opacity)},darker:function(U){return U=null==U?_:Math.pow(_,U),new st(this.r*U,this.g*U,this.b*U,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:K,formatHex:K,formatRgb:X,toString:X})),(0,c.Z)(it,Q,(0,c.l)(x,{brighter:function(U){return U=null==U?m:Math.pow(m,U),new it(this.h,this.s,this.l*U,this.opacity)},darker:function(U){return U=null==U?_:Math.pow(_,U),new it(this.h,this.s,this.l*U,this.opacity)},rgb:function(){var U=this.h%360+360*(this.h<0),D=isNaN(U)||isNaN(this.s)?0:this.s,mt=this.l,St=mt+(mt<.5?mt:1-mt)*D,Mt=2*mt-St;return new st(q(U>=240?U-240:U+120,Mt,St),q(U,Mt,St),q(U<120?U+240:U-120,Mt,St),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var U=this.opacity;return(1===(U=isNaN(U)?1:Math.max(0,Math.min(1,U)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===U?")":", "+U+")")}}))},68884:(w,E,s)=>{"use strict";function c(_,m,p){_.prototype=m.prototype=p,p.constructor=_}function x(_,m){var p=Object.create(_.prototype);for(var t in m)p[t]=m[t];return p}s.d(E,{Z:()=>c,l:()=>x})},25922:(w,E,s)=>{"use strict";s.d(E,{Z:()=>d});var c={value:function(){}};function x(){for(var u,l=0,h=arguments.length,f={};l<h;++l){if(!(u=arguments[l]+"")||u in f||/[\s.]/.test(u))throw new Error("illegal type: "+u);f[u]=[]}return new _(f)}function _(l){this._=l}function m(l,h){return l.trim().split(/^|\s+/).map(function(f){var u="",g=f.indexOf(".");if(g>=0&&(u=f.slice(g+1),f=f.slice(0,g)),f&&!h.hasOwnProperty(f))throw new Error("unknown type: "+f);return{type:f,name:u}})}function p(l,h){for(var g,f=0,u=l.length;f<u;++f)if((g=l[f]).name===h)return g.value}function t(l,h,f){for(var u=0,g=l.length;u<g;++u)if(l[u].name===h){l[u]=c,l=l.slice(0,u).concat(l.slice(u+1));break}return null!=f&&l.push({name:h,value:f}),l}_.prototype=x.prototype={constructor:_,on:function(l,h){var g,f=this._,u=m(l+"",f),C=-1,L=u.length;if(!(arguments.length<2)){if(null!=h&&"function"!=typeof h)throw new Error("invalid callback: "+h);for(;++C<L;)if(g=(l=u[C]).type)f[g]=t(f[g],l.name,h);else if(null==h)for(g in f)f[g]=t(f[g],l.name,null);return this}for(;++C<L;)if((g=(l=u[C]).type)&&(g=p(f[g],l.name)))return g},copy:function(){var l={},h=this._;for(var f in h)l[f]=h[f].slice();return new _(l)},call:function(l,h){if((g=arguments.length-2)>0)for(var g,C,f=new Array(g),u=0;u<g;++u)f[u]=arguments[u+2];if(!this._.hasOwnProperty(l))throw new Error("unknown type: "+l);for(u=0,g=(C=this._[l]).length;u<g;++u)C[u].value.apply(h,f)},apply:function(l,h,f){if(!this._.hasOwnProperty(l))throw new Error("unknown type: "+l);for(var u=this._[l],g=0,C=u.length;g<C;++g)u[g].value.apply(h,f)}};const d=x},56758:(w,E,s)=>{"use strict";s.d(E,{Z:()=>m,D:()=>p});var c=s(52016);function _(t){t.preventDefault(),t.stopImmediatePropagation()}function m(t){var d=t.document.documentElement,l=(0,c.Z)(t).on("dragstart.drag",_,!0);"onselectstart"in d?l.on("selectstart.drag",_,!0):(d.__noselect=d.style.MozUserSelect,d.style.MozUserSelect="none")}function p(t,d){var l=t.document.documentElement,h=(0,c.Z)(t).on("dragstart.drag",null);d&&(h.on("click.drag",_,!0),setTimeout(function(){h.on("click.drag",null)},0)),"onselectstart"in l?h.on("selectstart.drag",null):(l.style.MozUserSelect=l.__noselect,delete l.__noselect)}},27065:(w,E,s)=>{"use strict";function _(m){return((m*=2)<=1?m*m*m:(m-=2)*m*m+2)/2}s.d(E,{tw:()=>_})},22910:(w,E,s)=>{"use strict";s.d(E,{WU:()=>_,ZP:()=>p,jH:()=>m});var x,_,m,c=s(4753);function p(t){return x=(0,c.Z)(t),_=x.format,m=x.formatPrefix,x}p({thousands:",",grouping:[3],currency:["$",""]})},68520:(w,E,s)=>{"use strict";s.d(E,{Z:()=>x});var c=s(5326);function x(_){return(_=(0,c.V)(Math.abs(_)))?_[1]:NaN}},5326:(w,E,s)=>{"use strict";function c(_){return Math.abs(_=Math.round(_))>=1e21?_.toLocaleString("en").replace(/,/g,""):_.toString(10)}function x(_,m){if((p=(_=m?_.toExponential(m-1):_.toExponential()).indexOf("e"))<0)return null;var p,t=_.slice(0,p);return[t.length>1?t[0]+t.slice(2):t,+_.slice(p+1)]}s.d(E,{V:()=>x,Z:()=>c})},32517:(w,E,s)=>{"use strict";s.d(E,{Z:()=>x,v:()=>_});var c=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function x(m){if(!(p=c.exec(m)))throw new Error("invalid format: "+m);var p;return new _({fill:p[1],align:p[2],sign:p[3],symbol:p[4],zero:p[5],width:p[6],comma:p[7],precision:p[8]&&p[8].slice(1),trim:p[9],type:p[10]})}function _(m){this.fill=void 0===m.fill?" ":m.fill+"",this.align=void 0===m.align?">":m.align+"",this.sign=void 0===m.sign?"-":m.sign+"",this.symbol=void 0===m.symbol?"":m.symbol+"",this.zero=!!m.zero,this.width=void 0===m.width?void 0:+m.width,this.comma=!!m.comma,this.precision=void 0===m.precision?void 0:+m.precision,this.trim=!!m.trim,this.type=void 0===m.type?"":m.type+""}x.prototype=_.prototype,_.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type}},41129:(w,E,s)=>{"use strict";s.r(E),s.d(E,{FormatSpecifier:()=>_.v,format:()=>c.WU,formatDefaultLocale:()=>c.ZP,formatLocale:()=>x.Z,formatPrefix:()=>c.jH,formatSpecifier:()=>_.Z,precisionFixed:()=>m.Z,precisionPrefix:()=>p.Z,precisionRound:()=>t.Z});var c=s(22910),x=s(4753),_=s(32517),m=s(78986),p=s(38914),t=s(65142)},4753:(w,E,s)=>{"use strict";s.d(E,{Z:()=>L});var d,c=s(68520),m=s(32517),t=s(5326);function h(I,R){var M=(0,t.V)(I,R);if(!M)return I+"";var F=M[0],B=M[1];return B<0?"0."+new Array(-B).join("0")+F:F.length>B+1?F.slice(0,B+1)+"."+F.slice(B+1):F+new Array(B-F.length+2).join("0")}const f={"%":(I,R)=>(100*I).toFixed(R),b:I=>Math.round(I).toString(2),c:I=>I+"",d:t.Z,e:(I,R)=>I.toExponential(R),f:(I,R)=>I.toFixed(R),g:(I,R)=>I.toPrecision(R),o:I=>Math.round(I).toString(8),p:(I,R)=>h(100*I,R),r:h,s:function l(I,R){var M=(0,t.V)(I,R);if(!M)return I+"";var F=M[0],B=M[1],Y=B-(d=3*Math.max(-8,Math.min(8,Math.floor(B/3))))+1,V=F.length;return Y===V?F:Y>V?F+new Array(Y-V+1).join("0"):Y>0?F.slice(0,Y)+"."+F.slice(Y):"0."+new Array(1-Y).join("0")+(0,t.V)(I,Math.max(0,R+Y-1))[0]},X:I=>Math.round(I).toString(16).toUpperCase(),x:I=>Math.round(I).toString(16)};function u(I){return I}var g=Array.prototype.map,C=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function L(I){var R=void 0===I.grouping||void 0===I.thousands?u:function x(I,R){return function(M,F){for(var B=M.length,Y=[],V=0,nt=I[0],et=0;B>0&&nt>0&&(et+nt+1>F&&(nt=Math.max(1,F-et)),Y.push(M.substring(B-=nt,B+nt)),!((et+=nt+1)>F));)nt=I[V=(V+1)%I.length];return Y.reverse().join(R)}}(g.call(I.grouping,Number),I.thousands+""),M=void 0===I.currency?"":I.currency[0]+"",F=void 0===I.currency?"":I.currency[1]+"",B=void 0===I.decimal?".":I.decimal+"",Y=void 0===I.numerals?u:function _(I){return function(R){return R.replace(/[0-9]/g,function(M){return I[+M]})}}(g.call(I.numerals,String)),V=void 0===I.percent?"%":I.percent+"",nt=void 0===I.minus?"\u2212":I.minus+"",et=void 0===I.nan?"NaN":I.nan+"";function st(X){var W=(X=(0,m.Z)(X)).fill,at=X.align,H=X.sign,Q=X.symbol,it=X.zero,q=X.width,U=X.comma,D=X.precision,mt=X.trim,St=X.type;"n"===St?(U=!0,St="g"):f[St]||(void 0===D&&(D=12),mt=!0,St="g"),(it||"0"===W&&"="===at)&&(it=!0,W="0",at="=");var Mt="$"===Q?M:"#"===Q&&/[boxX]/.test(St)?"0"+St.toLowerCase():"",Et="$"===Q?F:/[%p]/.test(St)?V:"",$t=f[St],ue=/[defgprs%]/.test(St);function ut(ft){var ee,Kt,ce,gt=Mt,Nt=Et;if("c"===St)Nt=$t(ft)+Nt,ft="";else{var xe=(ft=+ft)<0||1/ft<0;if(ft=isNaN(ft)?et:$t(Math.abs(ft),D),mt&&(ft=function p(I){t:for(var B,R=I.length,M=1,F=-1;M<R;++M)switch(I[M]){case".":F=B=M;break;case"0":0===F&&(F=M),B=M;break;default:if(!+I[M])break t;F>0&&(F=0)}return F>0?I.slice(0,F)+I.slice(B+1):I}(ft)),xe&&0==+ft&&"+"!==H&&(xe=!1),gt=(xe?"("===H?H:nt:"-"===H||"("===H?"":H)+gt,Nt=("s"===St?C[8+d/3]:"")+Nt+(xe&&"("===H?")":""),ue)for(ee=-1,Kt=ft.length;++ee<Kt;)if(48>(ce=ft.charCodeAt(ee))||ce>57){Nt=(46===ce?B+ft.slice(ee+1):ft.slice(ee))+Nt,ft=ft.slice(0,ee);break}}U&&!it&&(ft=R(ft,1/0));var Ge=gt.length+ft.length+Nt.length,Ne=Ge<q?new Array(q-Ge+1).join(W):"";switch(U&&it&&(ft=R(Ne+ft,Ne.length?q-Nt.length:1/0),Ne=""),at){case"<":ft=gt+ft+Nt+Ne;break;case"=":ft=gt+Ne+ft+Nt;break;case"^":ft=Ne.slice(0,Ge=Ne.length>>1)+gt+ft+Nt+Ne.slice(Ge);break;default:ft=Ne+gt+ft+Nt}return Y(ft)}return D=void 0===D?6:/[gprs]/.test(St)?Math.max(1,Math.min(21,D)):Math.max(0,Math.min(20,D)),ut.toString=function(){return X+""},ut}return{format:st,formatPrefix:function K(X,W){var at=st(((X=(0,m.Z)(X)).type="f",X)),H=3*Math.max(-8,Math.min(8,Math.floor((0,c.Z)(W)/3))),Q=Math.pow(10,-H),it=C[8+H/3];return function(q){return at(Q*q)+it}}}}},78986:(w,E,s)=>{"use strict";s.d(E,{Z:()=>x});var c=s(68520);function x(_){return Math.max(0,-(0,c.Z)(Math.abs(_)))}},38914:(w,E,s)=>{"use strict";s.d(E,{Z:()=>x});var c=s(68520);function x(_,m){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor((0,c.Z)(m)/3)))-(0,c.Z)(Math.abs(_)))}},65142:(w,E,s)=>{"use strict";s.d(E,{Z:()=>x});var c=s(68520);function x(_,m){return _=Math.abs(_),m=Math.abs(m)-_,Math.max(0,(0,c.Z)(m)-(0,c.Z)(_))+1}},9921:function(w,E,s){!function(c,x,_,m,p,t,d,l,h,f){"use strict";function u(J){if(J&&J.__esModule)return J;var pt=Object.create(null);return J&&Object.keys(J).forEach(function(_t){if("default"!==_t){var vt=Object.getOwnPropertyDescriptor(J,_t);Object.defineProperty(pt,_t,vt.get?vt:{enumerable:!0,get:function(){return J[_t]}})}}),pt.default=J,Object.freeze(pt)}var Dt,g=u(x);function C(J,pt,_t){return pt in J?Object.defineProperty(J,pt,{value:_t,enumerable:!0,configurable:!0,writable:!0}):J[pt]=_t,J}function L(J){return function I(J){if(Array.isArray(J))return F(J)}(J)||function R(J){if(typeof Symbol<"u"&&null!=J[Symbol.iterator]||null!=J["@@iterator"])return Array.from(J)}(J)||function M(J,pt){if(J){if("string"==typeof J)return F(J,pt);var _t=Object.prototype.toString.call(J).slice(8,-1);if("Object"===_t&&J.constructor&&(_t=J.constructor.name),"Map"===_t||"Set"===_t)return Array.from(J);if("Arguments"===_t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_t))return F(J,pt)}}(J)||function B(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(J,pt){(null==pt||pt>J.length)&&(pt=J.length);for(var _t=0,vt=new Array(pt);_t<pt;_t++)vt[_t]=J[_t];return vt}function Y(J){var pt={},_t=J.node().nodeName;pt.tag=_t,"#text"==_t?pt.text=J.text():"#comment"==_t&&(pt.comment=J.text()),pt.attributes={};var vt=J.node().attributes;if(vt)for(var Ut=0;Ut<vt.length;Ut++){var Yt=vt[Ut];pt.attributes[Yt.name]=Yt.value}var we,O=J.node().transform;if(O&&0!=O.baseVal.numberOfItems){var ne=O.baseVal.consolidate().matrix;pt.translation={x:ne.e,y:ne.f},pt.scale=ne.a}if("ellipse"==_t&&(pt.center={x:pt.attributes.cx,y:pt.attributes.cy}),"polygon"==_t){var be=(we=J.attr("points").split(" ")).map(function(pi){return pi.split(",")[0]}),je=we.map(function(pi){return pi.split(",")[1]}),Oe=Math.min.apply(null,be),Pe=Math.max.apply(null,be),oe=Math.min.apply(null,je),de=Math.max.apply(null,je);pt.bbox={x:Oe,y:oe,width:Pe-Oe,height:de-oe},pt.center={x:(Oe+Pe)/2,y:(oe+de)/2}}return"path"==_t&&((we=J.attr("d").split(/[A-Z ]/)).shift(),be=we.map(function(le){return+le.split(",")[0]}),je=we.map(function(le){return+le.split(",")[1]}),Oe=Math.min.apply(null,be),Pe=Math.max.apply(null,be),oe=Math.min.apply(null,je),de=Math.max.apply(null,je),pt.bbox={x:Oe,y:oe,width:Pe-Oe,height:de-oe},pt.center={x:(Oe+Pe)/2,y:(oe+de)/2},pt.totalLength=J.node().getTotalLength()),"text"==_t&&(pt.center={x:J.attr("x"),y:J.attr("y")}),"#text"==_t?pt.text=J.text():"#comment"==_t&&(pt.comment=J.text()),pt}function V(J){var pt=Y(J);return pt.children=[],g.selectAll(J.node().childNodes).each(function(){var vt=V(g.select(this));vt.parent=pt,pt.children.push(vt)}),pt}function nt(J){return"#text"==J.tag?document.createTextNode(""):"#comment"==J.tag?document.createComment(J.comment):document.createElementNS("http://www.w3.org/2000/svg",J.tag)}function et(J){for(var pt=nt(J),_t=g.select(pt),vt=J.attributes,Ut=0,Yt=Object.keys(vt);Ut<Yt.length;Ut++){var Lt=Yt[Ut];_t.attr(Lt,vt[Lt])}return pt}function st(J,pt){var _t=g.select(J.node().parentNode),vt=et(pt),Ut=_t.insert(function(){return vt},function(){return J.node()});return J.remove(),Ut}function X(J,pt){(function K(J,pt){J.datum(pt),J.data([pt],function(_t){return _t.key})})(J,pt),g.selectAll(J.node().childNodes).each(function(vt,Ut){X(g.select(this),pt.children[Ut])})}function W(J,pt){var _t=J.selectAll(function(){return J.node().childNodes}),vt=(_t=_t.data(function(Lt){return Lt.children},function(Lt){return Lt.tag+"-"+pt})).enter().append(function(Lt){return nt(Lt)}),Ut=_t.exit();Ut=Ut.remove(),_t=vt.merge(_t);var Yt={};_t.each(function(Lt){var ae=Lt.tag;null==Yt[ae]&&(Yt[ae]=0);var O=Yt[ae]++;at.call(this,Lt,O)})}function at(J){var pt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,_t=g.select(this),vt=J.attributes,Ut=_t.node().attributes;if(Ut)for(var Yt=0;Yt<Ut.length;Yt++){var Lt=Ut[Yt],ae=Lt.name;if("xmlns"!=ae.split(":")[0]&&Lt.namespaceURI){var O=Lt.namespaceURI.split("/");ae=O[O.length-1]+":"+ae}ae in vt||(vt[ae]=null)}for(var we=0,be=Object.keys(vt);we<be.length;we++){var je=be[we];_t.attr(je,vt[je])}J.text&&_t.text(J.text),W(_t,pt)}function H(J){return Object.assign({},J)}function Q(J){return Math.round(100*J)/100}function q(){var J=this;var vt=g.select(this._selection.node().querySelector("svg"));if(0==vt.size())return this;this._zoomSelection=vt;var Ut=d.zoom().scaleExtent(this._options.zoomScaleExtent).translateExtent(this._options.zoomTranslateExtent).interpolate(t.interpolate).on("zoom",function pt(Lt){g.select(vt.node().querySelector("g")).attr("transform",Lt.transform),J._dispatch.call("zoom",J)});this._zoomBehavior=Ut;var Yt=g.select(vt.node().querySelector("g"));return vt.call(Ut),this._active||D.call(this,Yt),this._originalTransform=d.zoomTransform(vt.node()),this}function U(J){var pt=this._translation,_t=this._scale,vt=J.datum().translation,Ut=J.datum().scale,Yt=d.zoomTransform(this._zoomSelection.node());return pt&&(Yt=(Yt=Yt.scale(1/_t)).translate(-pt.x,-pt.y)),(Yt=Yt.translate(vt.x,vt.y)).scale(Ut)}function D(J){this._zoomBehavior.transform(this._zoomSelection,U.call(this,J)),this._translation=J.datum().translation,this._scale=J.datum().scale,this._originalTransform=d.zoomIdentity.translate(J.datum().translation.x,J.datum().translation.y).scale(J.datum().scale)}function ue(J,pt){return function(){var _t=J.map(function(vt){return t.interpolate([vt[0][0],vt[0][1]],[vt[1][0],vt[1][1]])});return function(vt){return vt<1?"M"+_t.map(function(Ut){return Ut(vt)}).join("L"):pt}}}function gt(J){return"edge"==J.attributes.class||"a"==J.tag&&"g"==J.parent.tag&&"edge"==J.parent.parent.attributes.class}function Nt(J){return J.parent&&gt(J.parent)}function xe(J){var pt=this._transition,_t=this._options.fade&&null!=pt,vt=this._options.tweenPaths,Ut=this._options.tweenShapes,Yt=this._options.convertEqualSidedPolygons,Lt=this._options.growEnteringEdges&&null!=pt,ae=this._attributer,O=this;function we(oe){var de=g.select(this);if("svg"==oe.tag){var Fe=O._options;if(null!=Fe.width||null!=Fe.height){var di=Fe.width,pi=Fe.height;null==di?di=4*oe.attributes.width.replace("pt","")/3:(de.attr("width",di),oe.attributes.width=di),null==pi?pi=4*oe.attributes.height.replace("pt","")/3:(de.attr("height",pi),oe.attributes.height=pi),Fe.fit||(de.attr("viewBox","0 0 ".concat(3*di/4/Fe.scale," ").concat(3*pi/4/Fe.scale)),oe.attributes.viewBox="0 0 ".concat(3*di/4/Fe.scale," ").concat(3*pi/4/Fe.scale))}1!=Fe.scale&&(Fe.fit||null==Fe.width&&null==Fe.height)&&(di=oe.attributes.viewBox.split(" ")[2],pi=oe.attributes.viewBox.split(" ")[3],de.attr("viewBox","0 0 ".concat(di/Fe.scale," ").concat(pi/Fe.scale)),oe.attributes.viewBox="0 0 ".concat(di/Fe.scale," ").concat(pi/Fe.scale))}ae&&de.each(ae);var Xe=oe.tag,Ye=oe.attributes,wi=de.node().attributes;if(wi)for(var Vi=0;Vi<wi.length;Vi++){var Gi=wi[Vi],Wi=Gi.name;if("xmlns"!=Wi.split(":")[0]&&Gi.namespaceURI){var Pn=Gi.namespaceURI.split("/");Wi=Pn[Pn.length-1]+":"+Wi}Wi in Ye||(Ye[Wi]=null)}var We=!1,vi=!1;if(Ut&&pt){if(("polygon"==this.nodeName||"ellipse"==this.nodeName)&&oe.alternativeOld&&(vi=!0),("polygon"==Xe||"ellipse"==Xe)&&oe.alternativeNew&&(We=!0),"polygon"==this.nodeName&&"polygon"==Xe&&oe.alternativeOld){var Ci=Y(de);if(!Yt){var un=Ci.attributes.points.split(" ").length;(vn=oe.attributes.points).split(" ").length==un&&(We=!1,vi=!1)}}if(vi){var Ei=st(de,oe.alternativeOld);Ei.data([oe],function(){return oe.key}),de=Ei}We&&(Xe="path",Ye=oe.alternativeNew.attributes)}var fi=de;if(pt&&(fi=fi.transition(pt),_t&&fi.filter(function(ht){return"#"==ht.tag[0]?null:this}).style("opacity",1),fi.filter(function(ht){return"#"==ht.tag[0]?null:this}).on("end",function(ht){g.select(this).attr("style",ht&&ht.attributes&&ht.attributes.style||null)})),Lt&&"path"==Xe&&oe.offset){var hn=oe.totalLength;de.attr("stroke-dasharray",hn+" "+hn).attr("stroke-dashoffset",hn).attr("transform","translate("+oe.offset.x+","+oe.offset.y+")"),Ye["stroke-dashoffset"]=0,Ye.transform="translate(0,0)",fi.attr("stroke-dashoffset",Ye["stroke-dashoffset"]).attr("transform",Ye.transform).on("start",function(){g.select(this).style("opacity",null)}).on("end",function(){g.select(this).attr("stroke-dashoffset",null).attr("stroke-dasharray",null).attr("transform",null)})}if(Lt&&"polygon"==Xe&&Nt(oe)&&oe.offset&&"path"==oe.parent.children[3].tag){var dn=g.select(de.node().parentNode.querySelector("path")),Un=dn.node().getPointAtLength(0),Ni=dn.node().getPointAtLength(oe.totalLength),Tn=dn.node().getPointAtLength(oe.totalLength-1),si=180*Math.atan2(Ni.y-Tn.y,Ni.x-Tn.x)/Math.PI,zn=Un.x-Ni.x+oe.offset.x,Je=Un.y-Ni.y+oe.offset.y;de.attr("transform","translate("+zn+","+Je+")"),fi.attrTween("transform",function(){return function(ht){var bt=dn.node().getPointAtLength(oe.totalLength*ht),Ot=dn.node().getPointAtLength(oe.totalLength*ht+1),Bt=180*Math.atan2(Ot.y-bt.y,Ot.x-bt.x)/Math.PI-si;return"translate("+(zn=bt.x-Ni.x+oe.offset.x*(1-ht))+","+(Je=bt.y-Ni.y+oe.offset.y*(1-ht))+") rotate("+Bt+" "+Ni.x+" "+Ni.y+")"}}).on("start",function(){g.select(this).style("opacity",null)}).on("end",function(){g.select(this).attr("transform",null)})}for(var Ji=vt&&pt&&"path"==Xe&&null!=de.attr("d"),ki=0,b=Object.keys(Ye);ki<b.length;ki++){var k=b[ki],Z=Ye[k];if(Ji&&"d"==k){var vn;(vn=(oe.alternativeOld||oe).points)&&fi.attrTween("d",ue(vn,Z))}else{if("transform"==k&&oe.translation)if(pt){var rt=fi.on("end");fi.on("start",function(){O._zoomBehavior&&fi.tween("attr.transform",function(){var ht=this;return function(bt){ht.setAttribute("transform",t.interpolateTransformSvg(d.zoomTransform(O._zoomSelection.node()).toString(),U.call(O,de).toString())(bt))}})}).on("end",function(){rt.call(this),O._zoomBehavior&&D.call(O,de)})}else O._zoomBehavior&&(D.call(O,de),Z=U.call(O,de).toString());fi.attr(k,Z)}}We&&fi.on("end",function(ht,bt,Ot){st(Ei=g.select(this),ht).data([ht],function(){return ht.key})}),oe.text&&fi.text(oe.text),function ne(oe){var de=oe.selectAll(function(){return oe.node().childNodes}),Fe=(de=de.data(function(Xe){return Xe.children},function(Xe){return Xe.key})).enter().append(function(Xe){var Ye=nt(Xe);return"#text"==Xe.tag&&_t&&(Ye.nodeValue=Xe.text),Ye});(_t||Lt&&gt(oe.datum()))&&Fe.filter(function(Xe){return"#"==Xe.tag[0]?null:this}).each(function(Xe){for(var Ye=g.select(this),wi=0,Vi=Object.keys(Xe.attributes);wi<Vi.length;wi++){var Gi=Vi[wi];Ye.attr(Gi,Xe.attributes[Gi])}}).filter(function(Xe){return"svg"==Xe.tag||"g"==Xe.tag?null:this}).style("opacity",0);var pi=de.exit();ae&&pi.each(ae),pt&&(pi=pi.transition(pt),_t&&pi.filter(function(Xe){return"#"==Xe.tag[0]?null:this}).style("opacity",0)),pi=pi.remove(),(de=Fe.merge(de)).each(we)}(de)}var be=this._selection;if(null!=pt){var je=this._jobs;if(O._active)return je.push(null),this;be.transition(pt).transition().duration(0).on("end",function(){O._active=!1,0!=je.length&&(je.shift(),O.render())}),this._active=!0}null!=pt&&be.transition(pt).on("start",function(){O._dispatch.call("transitionStart",O)}).on("end",function(){O._dispatch.call("transitionEnd",O)}).transition().duration(0).on("start",function(){O._dispatch.call("restoreEnd",O),O._dispatch.call("end",O),J&&J.call(O)});var Oe=this._data,Pe=be.selectAll("svg").data([Oe],function(oe){return oe.key});return Pe=Pe.enter().append("svg").merge(Pe),we.call(Pe.node(),Oe),this._options.zoom&&!this._zoomBehavior&&q.call(this),O._dispatch.call("renderEnd",O),null==pt&&(this._dispatch.call("end",this),J&&J.call(this)),this}function Ne(J,pt){if("polygon"==J.tag){(_t=H(J)).tag="path";var Ut=H(vt=J.attributes),Yt=vt.points;if("polygon"==pt.tag){(Lt=J.bbox).cx=Lt.x+Lt.width/2,Lt.cy=Lt.y+Lt.height/2;for(var O=vt.points.split(" "),ne=O.map(function(Ci){var ji=Ci.split(",");return[ji[0]-Lt.cx,ji[1]-Lt.cy]}),we=ne[ne.length-1][0],be=ne[ne.length-1][1],je=0;je<ne.length;je++,we=Oe,be=Pe){var oe=(Oe=ne[je][0])-we;if(0!=(de=(Pe=ne[je][1])-be)&&0<=(Fe=we-be*oe/de)&&Fe<1/0&&(we<=Fe&&Fe<=Oe||Oe<=Fe&&Fe<=we))break}var di=[[Lt.cx+Fe,Lt.cy+0].join(",")];Yt=(di=(di=di.concat(O.slice(je))).concat(O.slice(0,je))).join(" ")}Ut.d="M"+Yt+"z",delete Ut.points,_t.attributes=Ut}else{var _t;(_t=H(J)).tag="path",Ut=H(vt=J.attributes);var vt,Oe,Pe,Fe,pi=vt.cx,Xe=vt.cy,Ye=vt.rx,wi=vt.ry;if("polygon"==pt.tag){var Lt;(Lt=pt.bbox).cx=Lt.x+Lt.width/2,Lt.cy=Lt.y+Lt.height/2;var Vi=pt.attributes.points.split(" ")[0].split(","),de=(oe=Vi[0]-Lt.cx,Vi[1]-Lt.cy),Pn=Math.sqrt(Math.pow(oe,2)+Math.pow(de,2)),le=oe/Pn,We=-de/Pn}else le=1,We=0;Ut.d="M "+pi+" "+Xe+" m "+(Oe=Ye*le)+","+(Pe=-wi*We)+" a "+Ye+","+wi+" 0 1,0 "+(oe=(Fe=Ye*-le)-Oe)+","+(de=-wi*-We-Pe)+" a "+Ye+","+wi+" 0 1,0 "+-oe+","+-de+"z",delete Ut.cx,delete Ut.cy,delete Ut.rx,delete Ut.ry,_t.attributes=Ut}return _t}function Zt(){var J=this;try{l.graphviz.layout("","svg","dot").then(function(){l.graphvizSync().then(function(vt){J.layoutSync=vt.layout.bind(vt),null==J._worker&&J._dispatch.call("initEnd",J),J._afterInit&&J._afterInit()})})}catch{}if(null!=this._worker){var pt=this._vizURL,_t=this;this._workerPort.onmessage=function(vt){_t._workerCallbacks.shift().call(_t,vt)},pt.match(/^https?:\/\/|^\/\//i)||(pt=new window.URL(pt,document.location.href).href),jt.call(this,{type:"layout",dot:"",engine:"dot",vizURL:pt},function(vt){}),jt.call(this,{type:"version"},function(vt){"version"===vt.data.type&&(_t._graphvizVersion=vt.data.version,_t._dispatch.call("initEnd",this))})}}function jt(J,pt){this._workerCallbacks.push(pt),this._workerPort.postMessage(J)}function Ee(J,pt){var _t=this._options.keyMode,vt=this._options.tweenPaths,Ut=this._options.tweenShapes;if("string"==typeof this._options.tweenPrecision&&this._options.tweenPrecision.includes("%"))var Yt=+this._options.tweenPrecision.split("%")[0]/100,Lt=this._options.tweenPrecision.includes("%");else Yt=this._options.tweenPrecision,Lt=!1;var ae=this._options.growEnteringEdges,O={},ne=this._dictionary||{},we={},be=this._nodeDictionary||{};function je(le,We){var vi=le.tag;if("index"==_t)le.key=We;else if("#"!=vi[0])if("id"==_t)le.key=le.attributes.id;else if("title"==_t){var Ci=le.children.find(function(ji){return"title"==ji.tag});Ci&&(le.key=Ci.children.length>0?Ci.children[0].text:"")}null==le.key&&(Ut&&("ellipse"==vi||"polygon"==vi)&&(vi="path"),le.key=vi+"-"+We)}function Oe(le,We){le.id=(We?We.id+".":"")+le.key}function Pe(le){O[le.id]=le}function oe(le,We){Ut&&le.id in ne&&("polygon"==We.tag||"ellipse"==We.tag||"path"==We.tag)&&(We.tag!=le.tag||"polygon"==le.tag)&&("path"!=We.tag&&(le.alternativeOld=Ne(We,le)),"path"!=le.tag&&(le.alternativeNew=Ne(le,We)))}function de(le,We){if(vt&&We&&("path"==We.tag||le.alternativeOld&&"path"==le.alternativeOld.tag)){var vi=(le.alternativeNew||le).attributes.d;if(le.alternativeOld)var Ci=et(le.alternativeOld);else Ci=et(We);(le.alternativeOld||(le.alternativeOld={})).points=function ut(J,pt,_t,vt){for(var Ut=J,Yt=Ut.cloneNode(),Lt=Ut.getTotalLength(),ae=(Yt.setAttribute("d",pt),Yt).getTotalLength(),O=[0],ne=0,we=vt?_t:_t/Math.max(Lt,ae);(ne+=we)<1;)O.push(ne);return O.push(1),O.map(function(je){var Oe=Ut.getPointAtLength(je*Lt),Pe=Yt.getPointAtLength(je*ae);return[[Oe.x,Oe.y],[Pe.x,Pe.y]]})}(Ci,vi,Yt,Lt)}}function Fe(le){var vi=arguments.length>2?arguments[2]:void 0;je(le,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),Oe(le,vi);var ji=ne[le.id];Pe(le),oe(le,ji),de(le,ji);var un={};le.children.forEach(function(vn){var Ui=vn.tag;("ellipse"==Ui||"polygon"==Ui)&&(Ui="path"),null==un[Ui]&&(un[Ui]=0),Fe(vn,un[Ui]++,le)})}function Xe(le){(function di(le){if(ae&&le.parent&&"node"==le.parent.attributes.class&&"title"==le.tag){if(le.children.length>0)var Ci=le.children[0].text;else Ci="";we[Ci]=le.parent}})(le),function pi(le){var vi=le.tag;if(ae&&!ne[le.id]&&le.parent&&Nt(le)&&("path"==vi||"polygon"==vi)){if("polygon"==vi){var ji=le.parent.children.find(function(Ni){return"path"==Ni.tag});ji&&(le.totalLength=ji.totalLength)}var vn=function Kt(J){return function ee(J){return"edge"==J.parent.attributes.class?J.parent:J.parent.parent.parent}(J).children.find(function(pt){return"title"==pt.tag})}(le).children[0],Ui=vn.text.split("->");2!=Ui.length&&(Ui=vn.text.split("--"));var Mi=Ui[0],Ei=we[Mi],bn=be[Mi];if(bn){if((li=Ei.children.findIndex(function(Ni,Tn){return"g"==Ni.tag}))>=0){var fi=Ei.children[li].children.findIndex(function(Ni,Tn){return"a"==Ni.tag});Ei=Ei.children[li].children[fi]}(li=bn.children.findIndex(function(Ni,Tn){return"g"==Ni.tag}))>=0&&(fi=bn.children[li].children.findIndex(function(Tn,si){return"a"==Tn.tag}),bn=bn.children[li].children[fi]);for(var hn=Ei.children,li=0;li<hn.length;li++)if("polygon"==hn[li].tag||"ellipse"==hn[li].tag||"path"==hn[li].tag||"text"==hn[li].tag){var Jn=hn[li];break}var dn=bn.children;for(li=0;li<dn.length;li++)if("polygon"==dn[li].tag||"ellipse"==dn[li].tag||"path"==dn[li].tag||"text"==dn[li].tag){var Un=dn[li];break}le.offset=Un&&Jn?{x:Un.center.x-Jn.center.x,y:Un.center.y-Jn.center.y}:{x:0,y:0}}}}(le),le.children.forEach(function(We){Xe(We)})}this._dispatch.call("layoutEnd",this);var Ye=g.select(document.createDocumentFragment()).append("div"),Vi=(new window.DOMParser).parseFromString(J,"image/svg+xml");Ye.append(function(){return Vi.documentElement});var Wi=V(Ye.select("svg"));this._dispatch.call("dataExtractEnd",this),Fe(Wi),this._dispatch.call("dataProcessPass1End",this),Xe(Wi),this._dispatch.call("dataProcessPass2End",this),this._data=Wi,this._dictionary=O,this._nodeDictionary=we,this._extractData=function(le,We,vi){var Ci=V(le);return Fe(Ci,We,vi),Xe(Ci),Ci},this._busy=!1,this._dispatch.call("dataProcessEnd",this),pt&&pt.call(this),this._queue.length>0&&this._queue.shift().call(this)}function Nn(J,pt,_t,vt){var Ut=[J*_t-(pt=-pt)*(vt=-vt),J*vt+pt*_t];return[J=Ut[0],pt=-(pt=Ut[1])]}function Rn(J,pt,_t,vt,Ut,Yt,Lt){var O=V(ii.call(this,Yt));J.data([O]),at.call(J.node(),O),he(J,pt,_t,vt,Ut,Yt,Lt)}function he(J,pt,_t,vt,Ut,Yt,Lt){var ae=Lt.shortening||0,be=[[0,-3.5],[10,0],[0,3.5],[0,-3.5]],je=vt-pt,Oe=Ut-_t,Pe=Math.sqrt(je*je+Oe*Oe);if(0==Pe)var oe=1,de=0;else oe=je/Pe,de=Oe/Pe;if(vt=pt+(Pe-ae-10-.1)*oe,Ut=_t+(Pe-ae-10-.1)*de,Yt.URL||Yt.tooltip)var Fe=J.selectWithoutDataPropagation("g").selectWithoutDataPropagation("a"),di=Fe.selectWithoutDataPropagation("path"),pi=Fe.selectWithoutDataPropagation("polygon");else di=J.selectWithoutDataPropagation("path"),pi=J.selectWithoutDataPropagation("polygon");var Xe=f.path();Xe.moveTo(pt,_t),Xe.lineTo(vt,Ut),di.attr("d",Xe),vt=pt+(Pe-ae-10)*oe,Ut=_t+(Pe-ae-10)*de;for(var Ye=0;Ye<be.length;Ye++)be[Ye]=Nn((wi=be[Ye])[0],wi[1],oe,de);for(Ye=0;Ye<be.length;Ye++)be[Ye]=[vt+(wi=be[Ye])[0],Ut+wi[1]];var Vi=[];for(Ye=0;Ye<be.length;Ye++){var wi;Vi.push((wi=be[Ye]).join(","))}var Gi=Vi.join(" ");return pi.attr("points",Gi),this}function jn(){return this._drawnEdge?(this._drawnEdge.g.remove(),this._drawnEdge=null,this):this}function gi(){return this._drawnEdge?this._drawnEdge.g:g.select(null)}function ii(J){for(var pt="",_t=0,vt=Object.keys(J);_t<vt.length;_t++){var Ut=vt[_t];null!=J[Ut]&&(pt+=' "'+Ut+'"="'+J[Ut]+'"')}var Lt=this.layoutSync("digraph {a -> b ["+pt+"]}","svg","dot"),O=(new window.DOMParser).parseFromString(Lt,"image/svg+xml");return g.select(document.createDocumentFragment()).append(function(){return O.documentElement}).select(".edge")}function Ii(J,pt,_t,vt,Ut,Yt){var ae=V($.call(this,vt,Ut));return J.data([ae]),at.call(J.node(),ae),Te(J,pt,_t,Ut),this}function Te(J,pt,_t,vt,Ut){if(vt.URL||vt.tooltip)var Yt=J.selectWithoutDataPropagation("g").selectWithoutDataPropagation("a");else Yt=J;var Lt=Yt.selectAll("ellipse,polygon,path,polyline"),ae=J.selectWithoutDataPropagation("text");if(0!=Lt.size()){var O=Lt.node().getBBox();O.cx=O.x+O.width/2,O.cy=O.y+O.height/2}else 0!=ae.size()&&(O={x:+ae.attr("x"),y:+ae.attr("y"),width:0,height:0,cx:+ae.attr("x"),cy:+ae.attr("y")});return Lt.each(function(ne,we){var be=g.select(this);if(be.attr("cx"))be.attr("cx",Q(pt)).attr("cy",Q(_t));else if(be.attr("points")){var je=be.attr("points").trim();be.attr("points",function It(Yt,pt,_t){var Ut,vt=(Ut=Yt.split(" ")).map(function(Lt){return Lt.split(",")});return vt=Ut.map(function(Lt){return[Q(+pt+ +Lt.split(",")[0]),Q(+_t+ +Lt.split(",")[1])]}),(Ut=vt.map(function(Lt){return Lt.join(",")})).join(" ")}(je,pt-O.cx,_t-O.cy))}else{var Oe=be.attr("d");be.attr("d",function Xt(J,pt,_t){(Yt=J.split(/[A-Z ]/)).shift();var vt=J.split(/[^[A-Z ]+/),Yt=(Yt.map(function(Lt){return Lt.split(",")}),Yt.map(function(Lt){return[Q(+pt+ +Lt.split(",")[0]),Q(+_t+ +Lt.split(",")[1])]}).map(function(Lt){return Lt.join(",")}));return vt.reduce(function(Lt,ae,O){return Lt.concat(ae,Yt[O])},[]).join("")}(Oe,pt-O.cx,_t-O.cy))}}),0!=ae.size()&&ae.attr("x",Q(+ae.attr("x")+pt-O.cx)).attr("y",Q(+ae.attr("y")+_t-O.cy)),this}function Pi(){if(!this._drawnNode)return this;var J=this._drawnNode.g;return J.empty()||J.remove(),this._drawnNode=null,this}function z(){return this._drawnNode?this._drawnNode.g:g.select(null)}function $(J,pt){for(var _t="",vt=0,Ut=Object.keys(pt);vt<Ut.length;vt++){var Yt=Ut[vt];null!=pt[Yt]&&(_t+=' "'+Yt+'"="'+pt[Yt]+'"')}var ae=this.layoutSync('graph {"'+J+'" ['+_t+"]}","svg","dot"),ne=(new window.DOMParser).parseFromString(ae,"image/svg+xml");return g.select(document.createDocumentFragment()).append(function(){return ne.documentElement}).select(".node")}function ct(J){self.document={},J.addEventListener("message",function(pt){var _t=self["@hpcc-js/wasm"];null==_t&&pt.data.vizURL&&(importScripts(pt.data.vizURL),(_t=self["@hpcc-js/wasm"]).wasmFolder(pt.data.vizURL.match(/.*\//)[0])),"version"!=pt.data.type?_t.graphviz.layout(pt.data.dot,"svg",pt.data.engine,pt.data.options).then(function(vt){J.postMessage(vt?{type:"done",svg:vt}:pt.data.vizURL?{type:"init"}:{type:"skip"})}).catch(function(vt){J.postMessage({type:"error",error:vt.message})}):_t.graphvizVersion().then(function(vt){J.postMessage({type:"version",version:vt})})})}function A(){ct(self)}function Tt(){self.onconnect=function(J){var pt=J.ports[0];ct(pt),pt.start()}}function Pt(J,pt){var _t=this;if(this._options={useWorker:!0,useSharedWorker:!1,engine:"dot",keyMode:"title",fade:!0,tweenPaths:!0,tweenShapes:!0,convertEqualSidedPolygons:!0,tweenPrecision:1,growEnteringEdges:!0,zoom:!0,zoomScaleExtent:[.1,10],zoomTranslateExtent:[[-1/0,-1/0],[1/0,1/0]],width:null,height:null,scale:1,fit:!1},pt instanceof Object)for(var vt=0,Ut=Object.keys(pt);vt<Ut.length;vt++){var Yt=Ut[vt];this._options[Yt]=pt[Yt]}else"boolean"==typeof pt&&(this._options.useWorker=pt);var Lt=this._options.useWorker,ae=this._options.useSharedWorker;if(typeof Worker>"u"&&(Lt=!1),typeof SharedWorker>"u"&&(ae=!1),Lt||ae){var ne=g.selectAll("script").filter(function(){return"javascript/worker"==g.select(this).attr("type")||g.select(this).attr("src")&&g.select(this).attr("src").match(/.*\/@hpcc-js\/wasm/)});0==ne.size()?(console.warn('No script tag of type "javascript/worker" was found and "useWorker" is true. Not using web worker.'),Lt=!1,ae=!1):(this._vizURL=ne.attr("src"),this._vizURL||(console.warn('No "src" attribute of was found on the "javascript/worker" script tag and "useWorker" is true. Not using web worker.'),Lt=!1,ae=!1))}if(ae){var we="data:application/javascript;base64,"+btoa(ct.toString()+"("+Tt.toString()+")()");this._worker=this._worker=new SharedWorker(we),this._workerPort=this._worker.port,this._workerPortClose=this._worker.port.close.bind(this._workerPort),this._worker.port.start(),this._workerCallbacks=[]}else if(Lt){var be=new Blob([ct.toString()+"("+A.toString()+")()"]),je=window.URL.createObjectURL(be);this._worker=new Worker(je),this._workerPort=this._worker,this._workerPortClose=this._worker.terminate.bind(this._worker),this._workerCallbacks=[]}else l.graphvizVersion().then(function(Oe){_t._graphvizVersion=Oe}.bind(this));this._selection=J,this._active=!1,this._busy=!1,this._jobs=[],this._queue=[],this._keyModes=new Set(["title","id","tag-index","index"]),this._images=[],this._translation=void 0,this._scale=void 0,this._eventTypes=["initEnd","start","layoutStart","layoutEnd","dataExtractEnd","dataProcessPass1End","dataProcessPass2End","dataProcessEnd","renderStart","renderEnd","transitionStart","transitionEnd","restoreEnd","end","zoom"],this._dispatch=_.dispatch.apply(void 0,L(this._eventTypes)),Zt.call(this),J.node().__graphviz__=this}function Gt(J,pt){return g.select(J).graphviz(pt)}Pt.prototype=Gt.prototype=(C(Dt={constructor:Pt,engine:function se(J){return this._options.engine=J,this},addImage:function fe(J,pt,_t){return this._images.push({path:J,width:pt,height:_t}),this},keyMode:function qt(J){if(!this._keyModes.has(J))throw Error("Illegal keyMode: "+J);if(J!=this._options.keyMode&&null!=this._data)throw Error("Too late to change keyMode");return this._options.keyMode=J,this},fade:function Be(J){return this._options.fade=J,this},tweenPaths:function ze(J){return this._options.tweenPaths=J,this},tweenShapes:function Ti(J){return this._options.tweenShapes=J,J&&(this._options.tweenPaths=!0),this},convertEqualSidedPolygons:function ln(J){return this._options.convertEqualSidedPolygons=J,this},tweenPrecision:function Mn(J){return this._options.tweenPrecision=J,this},growEnteringEdges:function mn(J){return this._options.growEnteringEdges=J,this},zoom:function it(J){return this._options.zoom=J,this._options.zoom&&!this._zoomBehavior?q.call(this):!this._options.zoom&&this._zoomBehavior&&(this._zoomSelection.on(".zoom",null),this._zoomBehavior=null),this},resetZoom:function mt(J){var pt=this._zoomSelection;return J&&(pt=pt.transition(J)),pt.call(this._zoomBehavior.transform,this._originalTransform),this},zoomBehavior:function Et(){return this._zoomBehavior||null},zoomSelection:function $t(){return this._zoomSelection||null},zoomScaleExtent:function St(J){return this._options.zoomScaleExtent=J,this},zoomTranslateExtent:function Mt(J){return this._options.zoomTranslateExtent=J,this},render:function ce(J){return this._busy?(this._queue.push(this.render.bind(this,J)),this):(this._dispatch.call("renderStart",this),this._transitionFactory?p.timeout(function(){this._transition=m.transition(this._transitionFactory()),xe.call(this,J)}.bind(this),0):xe.call(this,J),this)},layout:function ge(J,pt,_t,vt){if(this._worker)jt.call(this,{type:"layout",dot:J,engine:pt,options:_t},function(Yt){vt.call(this,Yt.data)});else try{var Ut=this.layoutSync(J,"svg",pt,_t);vt.call(this,{type:"done",svg:Ut})}catch(Yt){vt.call(this,{type:"error",error:Yt.message})}},dot:function ye(J,pt){var _t=this,vt=this._options.engine,Ut=this._images;return this._dispatch.call("start",this),this._busy=!0,this._dispatch.call("layoutStart",this),this._worker||null!=this.layoutSync?(this.layout(J,vt,{images:Ut},function(Lt){switch(Lt.type){case"error":if(!_t._onerror)throw Lt.error.message;_t._onerror(Lt.error);break;case"done":Ee.call(this,Lt.svg,pt)}}),this):(this._afterInit=this.dot.bind(this,J,pt),this)},data:function ft(){return this._data||null},renderDot:function Ie(J,pt){var _t=this;return this.dot(J,function vt(){_t.render(pt)}),this},transition:function Ae(J){return J instanceof Function?this._transitionFactory=J:this._transition=m.transition(J),this},active:function Ue(J){var _t=this._selection.selectWithoutDataPropagation("svg");return 0!=_t.size()?m.active(_t.node(),J):null},options:function Ze(J){if(typeof J>"u")return Object.assign({},this._options);for(var pt=0,_t=Object.keys(J);pt<_t.length;pt++){var vt=_t[pt];this._options[vt]=J[vt]}return this},width:function ei(J){return this._options.width=J,this},height:function ve(J){return this._options.height=J,this},scale:function oi(J){return this._options.scale=J,this},fit:function Ct(J){return this._options.fit=J,this},attributer:function Ht(J){return this._attributer=J,this},on:function gn(J,pt){return this._dispatch.on(J,pt),this},onerror:function En(J){return this._onerror=J,this},logEvents:function tr(J){for(var pt=this,_t=Date.now(),vt={},Ut=this._eventTypes,Yt=Math.max.apply(Math,L(Ut.map(function(be){return be.length}))),Lt=function(je){var Oe=Ut[je];vt[Oe]=[],O=pt,pt.on(Oe+".log",J?function(){var Pe=Date.now(),oe=vt[Oe].length;vt[Oe].push(Pe);var de="";if(de+="Event ",de+=h.format(" >2")(je)+" ",de+=Oe+" ".repeat(Yt-Oe.length),de+=h.format(" >5")(Pe-_t)+" ","initEnd"!=Oe&&(de+=h.format(" >5")(Pe-vt.start[oe])),"dataProcessEnd"==Oe&&(de+=" prepare                 "+h.format(" >5")(Pe-vt.layoutEnd[oe])),"renderEnd"==Oe&&O._transition&&(de+=" transition start margin "+h.format(" >5")(O._transition.delay()-(Pe-vt.renderStart[oe])),ne=O._transition.delay(),we=O._transition.duration()),"transitionStart"==Oe){var Fe=Pe-vt.renderStart[oe];de+=" transition delay        "+h.format(" >5")(Pe-vt.renderStart[oe]),de+=" expected "+h.format(" >5")(ne),de+=" diff "+h.format(" >5")(Fe-ne)}if("transitionEnd"==Oe){var di=Pe-vt.transitionStart[oe];de+=" transition duration     "+h.format(" >5")(di),de+=" expected "+h.format(" >5")(we),de+=" diff "+h.format(" >5")(di-we)}console.log(de),_t=Pe}:null)},ae=0;ae<Ut.length;ae++){var O,ne,we;Lt(ae)}return this},destroy:function Fn(){return delete this._selection.node().__graphviz__,this._worker&&this._workerPortClose(),this},drawEdge:function _n(J,pt,_t,vt,Ut){var Yt=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};if((Ut=Object.assign({},Ut)).style&&Ut.style.includes("invis"))var Lt=g.select(null);else{var ne=this._selection.selectWithoutDataPropagation("svg").selectWithoutDataPropagation("g"),be=V(ii.call(this,Ut));Lt=ne.append("g").data([be]),at.call(Lt.node(),be),Rn.call(this,Lt,J,pt,_t,vt,Ut,Yt)}return this._drawnEdge={g:Lt,x1:J,y1:pt,x2:_t,y2:vt,attributes:Ut},this},updateDrawnEdge:function Qn(J,pt,_t,vt){var Ut=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},Yt=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};if(!this._drawnEdge)throw Error("No edge has been drawn");var Lt=this._drawnEdge.g;return Ut=Object.assign(this._drawnEdge.attributes,Ut),this._drawnEdge.x1=J,this._drawnEdge.y1=pt,this._drawnEdge.x2=_t,this._drawnEdge.y2=vt,!Lt.empty()||Ut.style&&Ut.style.includes("invis")||(Lt=this._selection.selectWithoutDataPropagation("svg").selectWithoutDataPropagation("g").append("g"),this._drawnEdge.g=Lt),Lt.empty()||Rn.call(this,Lt,J,pt,_t,vt,Ut,Yt),this},moveDrawnEdgeEndPoint:function Si(J,pt){var _t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this._drawnEdge)throw Error("No edge has been drawn");var vt=this._drawnEdge.g,Ut=this._drawnEdge.x1,Yt=this._drawnEdge.y1,Lt=this._drawnEdge.attributes;return this._drawnEdge.x2=J,this._drawnEdge.y2=pt,he(vt,Ut,Yt,J,pt,Lt,_t),this},insertDrawnEdge:function Oi(J){if(!this._drawnEdge)throw Error("No edge has been drawn");var pt=this._drawnEdge.g;if(pt.empty())return this;pt.selectWithoutDataPropagation("title").text(J);var Yt=this._selection.selectWithoutDataPropagation("svg").selectWithoutDataPropagation("g"),Lt=Yt.datum(),ae=this._extractData(pt,Lt.children.length,Yt.datum());return Lt.children.push(ae),X(pt,ae),this._drawnEdge=null,this},removeDrawnEdge:jn},"removeDrawnEdge",jn),C(Dt,"drawnEdgeSelection",gi),C(Dt,"drawnEdgeSelection",gi),C(Dt,"drawNode",function Yi(J,pt,_t){var vt=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},Ut=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if((vt=Object.assign({},vt)).style&&vt.style.includes("invis"))var Yt=g.select(null);else{var O=this._selection.selectWithoutDataPropagation("svg").selectWithoutDataPropagation("g"),we=V($.call(this,_t,vt));Yt=O.append("g").data([we]),at.call(Yt.node(),we),Ii.call(this,Yt,J,pt,_t,vt,Ut)}return this._drawnNode={g:Yt,nodeId:_t,x:J,y:pt,attributes:vt},this}),C(Dt,"updateDrawnNode",function cn(J,pt,_t){var vt=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},Ut=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(!this._drawnNode)throw Error("No node has been drawn");var Yt=this._drawnNode.g;return null==_t&&(_t=this._drawnNode.nodeId),vt=Object.assign(this._drawnNode.attributes,vt),this._drawnNode.nodeId=_t,this._drawnNode.x=J,this._drawnNode.y=pt,!Yt.empty()||vt.style&&vt.style.includes("invis")||(Yt=this._selection.selectWithoutDataPropagation("svg").selectWithoutDataPropagation("g").append("g"),this._drawnNode.g=Yt),Yt.empty()||Ii.call(this,Yt,J,pt,_t,vt,Ut),this}),C(Dt,"moveDrawnNode",function Bn(J,pt){if(!this._drawnNode)throw Error("No node has been drawn");var _t=this._drawnNode.g,vt=this._drawnNode.attributes;return this._drawnNode.x=J,this._drawnNode.y=pt,_t.empty()||Te(_t,J,pt,vt),this}),C(Dt,"insertDrawnNode",function hi(J){if(!this._drawnNode)throw Error("No node has been drawn");null==J&&(J=this._drawnNode.nodeId);var pt=this._drawnNode.g;if(pt.empty())return this;var _t=this._drawnNode.attributes;if(pt.selectWithoutDataPropagation("title").text(J),_t.URL||_t.tooltip){var Yt=pt.selectWithoutDataPropagation("g").selectWithoutDataPropagation("a");Yt.selectWithoutDataPropagation("ellipse,polygon,path,polyline");var Lt=Yt.selectWithoutDataPropagation("text")}else pt.selectWithoutDataPropagation("ellipse,polygon,path,polyline"),Lt=pt.selectWithoutDataPropagation("text");Lt.text(_t.label||J);var ne=this._selection.selectWithoutDataPropagation("svg").selectWithoutDataPropagation("g"),we=ne.datum(),be=this._extractData(pt,we.children.length,ne.datum());return we.children.push(be),X(pt,be),this._drawnNode=null,this}),C(Dt,"removeDrawnNode",Pi),C(Dt,"removeDrawnNode",Pi),C(Dt,"drawnNodeSelection",z),C(Dt,"drawnNodeSelection",z),C(Dt,"graphvizVersion",function Ge(){return this._graphvizVersion}),Dt),x.selection.prototype.graphviz=function Qt(J){var pt=this.node().__graphviz__;return pt?(pt.options(J),p.timeout(function(){pt._dispatch.call("initEnd",this)}.bind(this),0)):pt=new Pt(this,J),pt},x.selection.prototype.selectWithoutDataPropagation=function zt(J){return g.select(this.size()>0?this.node().querySelector(J):null)},c.graphviz=Gt,Object.defineProperty(c,"__esModule",{value:!0})}(E,s(68557),s(75143),s(18429),s(65894),s(46176),s(46041),s(89397),s(41129),s(38184))},75143:(w,E,s)=>{"use strict";s.r(E),s.d(E,{dispatch:()=>d});var c={value:()=>{}};function x(){for(var u,l=0,h=arguments.length,f={};l<h;++l){if(!(u=arguments[l]+"")||u in f||/[\s.]/.test(u))throw new Error("illegal type: "+u);f[u]=[]}return new _(f)}function _(l){this._=l}function m(l,h){return l.trim().split(/^|\s+/).map(function(f){var u="",g=f.indexOf(".");if(g>=0&&(u=f.slice(g+1),f=f.slice(0,g)),f&&!h.hasOwnProperty(f))throw new Error("unknown type: "+f);return{type:f,name:u}})}function p(l,h){for(var g,f=0,u=l.length;f<u;++f)if((g=l[f]).name===h)return g.value}function t(l,h,f){for(var u=0,g=l.length;u<g;++u)if(l[u].name===h){l[u]=c,l=l.slice(0,u).concat(l.slice(u+1));break}return null!=f&&l.push({name:h,value:f}),l}_.prototype=x.prototype={constructor:_,on:function(l,h){var g,f=this._,u=m(l+"",f),C=-1,L=u.length;if(!(arguments.length<2)){if(null!=h&&"function"!=typeof h)throw new Error("invalid callback: "+h);for(;++C<L;)if(g=(l=u[C]).type)f[g]=t(f[g],l.name,h);else if(null==h)for(g in f)f[g]=t(f[g],l.name,null);return this}for(;++C<L;)if((g=(l=u[C]).type)&&(g=p(f[g],l.name)))return g},copy:function(){var l={},h=this._;for(var f in h)l[f]=h[f].slice();return new _(l)},call:function(l,h){if((g=arguments.length-2)>0)for(var g,C,f=new Array(g),u=0;u<g;++u)f[u]=arguments[u+2];if(!this._.hasOwnProperty(l))throw new Error("unknown type: "+l);for(u=0,g=(C=this._[l]).length;u<g;++u)C[u].value.apply(h,f)},apply:function(l,h,f){if(!this._.hasOwnProperty(l))throw new Error("unknown type: "+l);for(var u=this._[l],g=0,C=u.length;g<C;++g)u[g].value.apply(h,f)}};const d=x},65894:(w,E,s)=>{"use strict";s.r(E),s.d(E,{interval:()=>nt,now:()=>g,timeout:()=>V,timer:()=>I,timerFlush:()=>R});var p,t,c=0,x=0,_=0,d=0,l=0,h=0,f="object"==typeof performance&&performance.now?performance:Date,u="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(et){setTimeout(et,17)};function g(){return l||(u(C),l=f.now()+h)}function C(){l=0}function L(){this._call=this._time=this._next=null}function I(et,st,K){var X=new L;return X.restart(et,st,K),X}function R(){g(),++c;for(var st,et=p;et;)(st=l-et._time)>=0&&et._call.call(null,st),et=et._next;--c}function M(){l=(d=f.now())+h,c=x=0;try{R()}finally{c=0,function B(){for(var et,K,st=p,X=1/0;st;)st._call?(X>st._time&&(X=st._time),et=st,st=st._next):(K=st._next,st._next=null,st=et?et._next=K:p=K);t=et,Y(X)}(),l=0}}function F(){var et=f.now(),st=et-d;st>1e3&&(h-=st,d=et)}function Y(et){c||(x&&(x=clearTimeout(x)),et-l>24?(et<1/0&&(x=setTimeout(M,et-f.now()-h)),_&&(_=clearInterval(_))):(_||(d=f.now(),_=setInterval(F,1e3)),c=1,u(M)))}function V(et,st,K){var X=new L;return X.restart(W=>{X.stop(),et(W+st)},st=null==st?0:+st,K),X}function nt(et,st,K){var X=new L,W=st;return null==st?(X.restart(et,st,K),X):(X._restart=X.restart,X.restart=function(at,H,Q){H=+H,Q=null==Q?g():+Q,X._restart(function it(q){q+=W,X._restart(it,W+=H,Q),at(q)},H,Q)},X.restart(et,st,K),X)}L.prototype=I.prototype={constructor:L,restart:function(et,st,K){if("function"!=typeof et)throw new TypeError("callback is not a function");K=(null==K?g():+K)+(null==st?0:+st),!this._next&&t!==this&&(t?t._next=this:p=this,t=this),this._call=et,this._time=K,Y()},stop:function(){this._call&&(this._call=null,this._time=1/0,Y())}}},90268:(w,E,s)=>{"use strict";s.d(E,{M:()=>m,Z:()=>_});var c=s(37656),x=s(62681);function _(p,t){return((0,x.v)(t)?x.Z:m)(p,t)}function m(p,t){var u,d=t?t.length:0,l=p?Math.min(d,p.length):0,h=new Array(l),f=new Array(d);for(u=0;u<l;++u)h[u]=(0,c.Z)(p[u],t[u]);for(;u<d;++u)f[u]=t[u];return function(g){for(u=0;u<l;++u)f[u]=h[u](g);return f}}},16712:(w,E,s)=>{"use strict";function c(_,m,p,t,d){var l=_*_,h=l*_;return((1-3*_+3*l-h)*m+(4-6*l+3*h)*p+(1+3*_+3*l-3*h)*t+h*d)/6}function x(_){var m=_.length-1;return function(p){var t=p<=0?p=0:p>=1?(p=1,m-1):Math.floor(p*m),d=_[t],l=_[t+1];return c((p-t/m)*m,t>0?_[t-1]:2*d-l,d,l,t<m-1?_[t+2]:2*l-d)}}s.d(E,{Z:()=>x,t:()=>c})},68523:(w,E,s)=>{"use strict";s.d(E,{Z:()=>x});var c=s(16712);function x(_){var m=_.length;return function(p){var t=Math.floor(((p%=1)<0?++p:p)*m);return(0,c.t)((p-t/m)*m,_[(t+m-1)%m],_[t%m],_[(t+1)%m],_[(t+2)%m])}}},35147:(w,E,s)=>{"use strict";s.d(E,{ZP:()=>t,wx:()=>m,yi:()=>p});var c=s(47927);function x(d,l){return function(h){return d+h*l}}function m(d,l){var h=l-d;return h?x(d,h>180||h<-180?h-360*Math.round(h/360):h):(0,c.Z)(isNaN(d)?l:d)}function p(d){return 1==(d=+d)?t:function(l,h){return h-l?function _(d,l,h){return d=Math.pow(d,h),l=Math.pow(l,h)-d,h=1/h,function(f){return Math.pow(d+f*l,h)}}(l,h,d):(0,c.Z)(isNaN(l)?h:l)}}function t(d,l){var h=l-d;return h?x(d,h):(0,c.Z)(isNaN(d)?l:d)}},47927:(w,E,s)=>{"use strict";s.d(E,{Z:()=>c});const c=x=>()=>x},15629:(w,E,s)=>{"use strict";function c(x,_){var m=new Date;return x=+x,_=+_,function(p){return m.setTime(x*(1-p)+_*p),m}}s.d(E,{Z:()=>c})},46176:(w,E,s)=>{"use strict";s.r(E),s.d(E,{interpolate:()=>c.Z,interpolateArray:()=>x.Z,interpolateBasis:()=>_.Z,interpolateBasisClosed:()=>m.Z,interpolateCubehelix:()=>Ze,interpolateCubehelixLong:()=>ei,interpolateDate:()=>p.Z,interpolateDiscrete:()=>t,interpolateHcl:()=>ce,interpolateHclLong:()=>xe,interpolateHsl:()=>B,interpolateHslLong:()=>Y,interpolateHue:()=>l,interpolateLab:()=>ee,interpolateNumber:()=>h.Z,interpolateNumberArray:()=>f.Z,interpolateObject:()=>u.Z,interpolateRgb:()=>R.ZP,interpolateRgbBasis:()=>R.hD,interpolateRgbBasisClosed:()=>R.YD,interpolateRound:()=>g.Z,interpolateString:()=>C.Z,interpolateTransformCss:()=>L.Y,interpolateTransformSvg:()=>L.w,interpolateZoom:()=>I.Z,piecewise:()=>ve,quantize:()=>oi});var c=s(37656),x=s(90268),_=s(16712),m=s(68523),p=s(15629);function t(Ct){var Ht=Ct.length;return function(se){return Ct[Math.max(0,Math.min(Ht-1,Math.floor(se*Ht)))]}}var d=s(35147);function l(Ct,Ht){var se=(0,d.wx)(+Ct,+Ht);return function(fe){var qt=se(fe);return qt-360*Math.floor(qt/360)}}var h=s(6738),f=s(62681),u=s(84858),g=s(84067),C=s(23096),L=s(75349),I=s(76257),R=s(86811),M=s(52786);function F(Ct){return function(Ht,se){var fe=Ct((Ht=(0,M.Ym)(Ht)).h,(se=(0,M.Ym)(se)).h),qt=(0,d.ZP)(Ht.s,se.s),Be=(0,d.ZP)(Ht.l,se.l),ze=(0,d.ZP)(Ht.opacity,se.opacity);return function(Ti){return Ht.h=fe(Ti),Ht.s=qt(Ti),Ht.l=Be(Ti),Ht.opacity=ze(Ti),Ht+""}}}const B=F(d.wx);var Y=F(d.ZP),V=s(68884);const nt=Math.PI/180,et=180/Math.PI,K=.96422,W=.82521,at=4/29,H=6/29,Q=3*H*H;function q(Ct){if(Ct instanceof mt)return new mt(Ct.l,Ct.a,Ct.b,Ct.opacity);if(Ct instanceof gt)return Nt(Ct);Ct instanceof M.Ss||(Ct=(0,M.SU)(Ct));var Be,ze,Ht=$t(Ct.r),se=$t(Ct.g),fe=$t(Ct.b),qt=St((.2225045*Ht+.7168786*se+.0606169*fe)/1);return Ht===se&&se===fe?Be=ze=qt:(Be=St((.4360747*Ht+.3850649*se+.1430804*fe)/K),ze=St((.0139322*Ht+.0971045*se+.7141733*fe)/W)),new mt(116*qt-16,500*(Be-qt),200*(qt-ze),Ct.opacity)}function D(Ct,Ht,se,fe){return 1===arguments.length?q(Ct):new mt(Ct,Ht,se,fe??1)}function mt(Ct,Ht,se,fe){this.l=+Ct,this.a=+Ht,this.b=+se,this.opacity=+fe}function St(Ct){return Ct>.008856451679035631?Math.pow(Ct,1/3):Ct/Q+at}function Mt(Ct){return Ct>H?Ct*Ct*Ct:Q*(Ct-at)}function Et(Ct){return 255*(Ct<=.0031308?12.92*Ct:1.055*Math.pow(Ct,1/2.4)-.055)}function $t(Ct){return(Ct/=255)<=.04045?Ct/12.92:Math.pow((Ct+.055)/1.055,2.4)}function ue(Ct){if(Ct instanceof gt)return new gt(Ct.h,Ct.c,Ct.l,Ct.opacity);if(Ct instanceof mt||(Ct=q(Ct)),0===Ct.a&&0===Ct.b)return new gt(NaN,0<Ct.l&&Ct.l<100?0:NaN,Ct.l,Ct.opacity);var Ht=Math.atan2(Ct.b,Ct.a)*et;return new gt(Ht<0?Ht+360:Ht,Math.sqrt(Ct.a*Ct.a+Ct.b*Ct.b),Ct.l,Ct.opacity)}function ft(Ct,Ht,se,fe){return 1===arguments.length?ue(Ct):new gt(Ct,Ht,se,fe??1)}function gt(Ct,Ht,se,fe){this.h=+Ct,this.c=+Ht,this.l=+se,this.opacity=+fe}function Nt(Ct){if(isNaN(Ct.h))return new mt(Ct.l,0,0,Ct.opacity);var Ht=Ct.h*nt;return new mt(Ct.l,Math.cos(Ht)*Ct.c,Math.sin(Ht)*Ct.c,Ct.opacity)}function ee(Ct,Ht){var se=(0,d.ZP)((Ct=D(Ct)).l,(Ht=D(Ht)).l),fe=(0,d.ZP)(Ct.a,Ht.a),qt=(0,d.ZP)(Ct.b,Ht.b),Be=(0,d.ZP)(Ct.opacity,Ht.opacity);return function(ze){return Ct.l=se(ze),Ct.a=fe(ze),Ct.b=qt(ze),Ct.opacity=Be(ze),Ct+""}}function Kt(Ct){return function(Ht,se){var fe=Ct((Ht=ft(Ht)).h,(se=ft(se)).h),qt=(0,d.ZP)(Ht.c,se.c),Be=(0,d.ZP)(Ht.l,se.l),ze=(0,d.ZP)(Ht.opacity,se.opacity);return function(Ti){return Ht.h=fe(Ti),Ht.c=qt(Ti),Ht.l=Be(Ti),Ht.opacity=ze(Ti),Ht+""}}}(0,V.Z)(mt,D,(0,V.l)(M.Il,{brighter:function(Ct){return new mt(this.l+18*(Ct??1),this.a,this.b,this.opacity)},darker:function(Ct){return new mt(this.l-18*(Ct??1),this.a,this.b,this.opacity)},rgb:function(){var Ct=(this.l+16)/116,Ht=isNaN(this.a)?Ct:Ct+this.a/500,se=isNaN(this.b)?Ct:Ct-this.b/200;return Ht=K*Mt(Ht),Ct=1*Mt(Ct),se=W*Mt(se),new M.Ss(Et(3.1338561*Ht-1.6168667*Ct-.4906146*se),Et(-.9787684*Ht+1.9161415*Ct+.033454*se),Et(.0719453*Ht-.2289914*Ct+1.4052427*se),this.opacity)}})),(0,V.Z)(gt,ft,(0,V.l)(M.Il,{brighter:function(Ct){return new gt(this.h,this.c,this.l+18*(Ct??1),this.opacity)},darker:function(Ct){return new gt(this.h,this.c,this.l-18*(Ct??1),this.opacity)},rgb:function(){return Nt(this).rgb()}}));const ce=Kt(d.wx);var xe=Kt(d.ZP),Ne=1.78277,It=-.29227,Xt=-.90649,Zt=1.97294,jt=Zt*Xt,ge=Zt*Ne,ye=Ne*It- -.14861*Xt;function Ee(Ct){if(Ct instanceof Ae)return new Ae(Ct.h,Ct.s,Ct.l,Ct.opacity);Ct instanceof M.Ss||(Ct=(0,M.SU)(Ct));var se=Ct.g/255,fe=Ct.b/255,qt=(ye*fe+jt*(Ct.r/255)-ge*se)/(ye+jt-ge),Be=fe-qt,ze=(Zt*(se-qt)-It*Be)/Xt,Ti=Math.sqrt(ze*ze+Be*Be)/(Zt*qt*(1-qt)),ln=Ti?Math.atan2(ze,Be)*et-120:NaN;return new Ae(ln<0?ln+360:ln,Ti,qt,Ct.opacity)}function Ie(Ct,Ht,se,fe){return 1===arguments.length?Ee(Ct):new Ae(Ct,Ht,se,fe??1)}function Ae(Ct,Ht,se,fe){this.h=+Ct,this.s=+Ht,this.l=+se,this.opacity=+fe}function Ue(Ct){return function Ht(se){function fe(qt,Be){var ze=Ct((qt=Ie(qt)).h,(Be=Ie(Be)).h),Ti=(0,d.ZP)(qt.s,Be.s),ln=(0,d.ZP)(qt.l,Be.l),Mn=(0,d.ZP)(qt.opacity,Be.opacity);return function(mn){return qt.h=ze(mn),qt.s=Ti(mn),qt.l=ln(Math.pow(mn,se)),qt.opacity=Mn(mn),qt+""}}return se=+se,fe.gamma=Ht,fe}(1)}(0,V.Z)(Ae,Ie,(0,V.l)(M.Il,{brighter:function(Ct){return Ct=null==Ct?M.J5:Math.pow(M.J5,Ct),new Ae(this.h,this.s,this.l*Ct,this.opacity)},darker:function(Ct){return Ct=null==Ct?M.xV:Math.pow(M.xV,Ct),new Ae(this.h,this.s,this.l*Ct,this.opacity)},rgb:function(){var Ct=isNaN(this.h)?0:(this.h+120)*nt,Ht=+this.l,se=isNaN(this.s)?0:this.s*Ht*(1-Ht),fe=Math.cos(Ct),qt=Math.sin(Ct);return new M.Ss(255*(Ht+se*(-.14861*fe+Ne*qt)),255*(Ht+se*(It*fe+Xt*qt)),255*(Ht+se*(Zt*fe)),this.opacity)}}));const Ze=Ue(d.wx);var ei=Ue(d.ZP);function ve(Ct,Ht){void 0===Ht&&(Ht=Ct,Ct=c.Z);for(var se=0,fe=Ht.length-1,qt=Ht[0],Be=new Array(fe<0?0:fe);se<fe;)Be[se]=Ct(qt,qt=Ht[++se]);return function(ze){var Ti=Math.max(0,Math.min(fe-1,Math.floor(ze*=fe)));return Be[Ti](ze-Ti)}}function oi(Ct,Ht){for(var se=new Array(Ht),fe=0;fe<Ht;++fe)se[fe]=Ct(fe/(Ht-1));return se}},6738:(w,E,s)=>{"use strict";function c(x,_){return x=+x,_=+_,function(m){return x*(1-m)+_*m}}s.d(E,{Z:()=>c})},62681:(w,E,s)=>{"use strict";function c(_,m){m||(m=[]);var d,p=_?Math.min(m.length,_.length):0,t=m.slice();return function(l){for(d=0;d<p;++d)t[d]=_[d]*(1-l)+m[d]*l;return t}}function x(_){return ArrayBuffer.isView(_)&&!(_ instanceof DataView)}s.d(E,{Z:()=>c,v:()=>x})},84858:(w,E,s)=>{"use strict";s.d(E,{Z:()=>x});var c=s(37656);function x(_,m){var d,p={},t={};for(d in(null===_||"object"!=typeof _)&&(_={}),(null===m||"object"!=typeof m)&&(m={}),m)d in _?p[d]=(0,c.Z)(_[d],m[d]):t[d]=m[d];return function(l){for(d in p)t[d]=p[d](l);return t}}},86811:(w,E,s)=>{"use strict";s.d(E,{YD:()=>l,ZP:()=>p,hD:()=>d});var c=s(52786),x=s(16712),_=s(68523),m=s(35147);const p=function h(f){var u=(0,m.yi)(f);function g(C,L){var I=u((C=(0,c.B8)(C)).r,(L=(0,c.B8)(L)).r),R=u(C.g,L.g),M=u(C.b,L.b),F=(0,m.ZP)(C.opacity,L.opacity);return function(B){return C.r=I(B),C.g=R(B),C.b=M(B),C.opacity=F(B),C+""}}return g.gamma=h,g}(1);function t(h){return function(f){var I,R,u=f.length,g=new Array(u),C=new Array(u),L=new Array(u);for(I=0;I<u;++I)R=(0,c.B8)(f[I]),g[I]=R.r||0,C[I]=R.g||0,L[I]=R.b||0;return g=h(g),C=h(C),L=h(L),R.opacity=1,function(M){return R.r=g(M),R.g=C(M),R.b=L(M),R+""}}}var d=t(x.Z),l=t(_.Z)},84067:(w,E,s)=>{"use strict";function c(x,_){return x=+x,_=+_,function(m){return Math.round(x*(1-m)+_*m)}}s.d(E,{Z:()=>c})},23096:(w,E,s)=>{"use strict";s.d(E,{Z:()=>t});var c=s(6738),x=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_=new RegExp(x.source,"g");function t(d,l){var f,u,g,h=x.lastIndex=_.lastIndex=0,C=-1,L=[],I=[];for(d+="",l+="";(f=x.exec(d))&&(u=_.exec(l));)(g=u.index)>h&&(g=l.slice(h,g),L[C]?L[C]+=g:L[++C]=g),(f=f[0])===(u=u[0])?L[C]?L[C]+=u:L[++C]=u:(L[++C]=null,I.push({i:C,x:(0,c.Z)(f,u)})),h=_.lastIndex;return h<l.length&&(g=l.slice(h),L[C]?L[C]+=g:L[++C]=g),L.length<2?I[0]?function p(d){return function(l){return d(l)+""}}(I[0].x):function m(d){return function(){return d}}(l):(l=I.length,function(R){for(var F,M=0;M<l;++M)L[(F=I[M]).i]=F.x(R);return L.join("")})}},75349:(w,E,s)=>{"use strict";s.d(E,{Y:()=>h,w:()=>f});var p,c=s(6738),x=180/Math.PI,_={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function m(u,g,C,L,I,R){var M,F,B;return(M=Math.sqrt(u*u+g*g))&&(u/=M,g/=M),(B=u*C+g*L)&&(C-=u*B,L-=g*B),(F=Math.sqrt(C*C+L*L))&&(C/=F,L/=F,B/=F),u*L<g*C&&(u=-u,g=-g,B=-B,M=-M),{translateX:I,translateY:R,rotate:Math.atan2(g,u)*x,skewX:Math.atan(B)*x,scaleX:M,scaleY:F}}function l(u,g,C,L){function I(Y){return Y.length?Y.pop()+" ":""}return function(Y,V){var nt=[],et=[];return Y=u(Y),V=u(V),function R(Y,V,nt,et,st,K){if(Y!==nt||V!==et){var X=st.push("translate(",null,g,null,C);K.push({i:X-4,x:(0,c.Z)(Y,nt)},{i:X-2,x:(0,c.Z)(V,et)})}else(nt||et)&&st.push("translate("+nt+g+et+C)}(Y.translateX,Y.translateY,V.translateX,V.translateY,nt,et),function M(Y,V,nt,et){Y!==V?(Y-V>180?V+=360:V-Y>180&&(Y+=360),et.push({i:nt.push(I(nt)+"rotate(",null,L)-2,x:(0,c.Z)(Y,V)})):V&&nt.push(I(nt)+"rotate("+V+L)}(Y.rotate,V.rotate,nt,et),function F(Y,V,nt,et){Y!==V?et.push({i:nt.push(I(nt)+"skewX(",null,L)-2,x:(0,c.Z)(Y,V)}):V&&nt.push(I(nt)+"skewX("+V+L)}(Y.skewX,V.skewX,nt,et),function B(Y,V,nt,et,st,K){if(Y!==nt||V!==et){var X=st.push(I(st)+"scale(",null,",",null,")");K.push({i:X-4,x:(0,c.Z)(Y,nt)},{i:X-2,x:(0,c.Z)(V,et)})}else(1!==nt||1!==et)&&st.push(I(st)+"scale("+nt+","+et+")")}(Y.scaleX,Y.scaleY,V.scaleX,V.scaleY,nt,et),Y=V=null,function(st){for(var W,K=-1,X=et.length;++K<X;)nt[(W=et[K]).i]=W.x(st);return nt.join("")}}}var h=l(function t(u){const g=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(u+"");return g.isIdentity?_:m(g.a,g.b,g.c,g.d,g.e,g.f)},"px, ","px)","deg)"),f=l(function d(u){return null!=u&&(p||(p=document.createElementNS("http://www.w3.org/2000/svg","g")),p.setAttribute("transform",u),u=p.transform.baseVal.consolidate())?m((u=u.matrix).a,u.b,u.c,u.d,u.e,u.f):_},", ",")",")")},37656:(w,E,s)=>{"use strict";s.d(E,{Z:()=>f});var c=s(52786),x=s(86811),_=s(90268),m=s(15629),p=s(6738),t=s(84858),d=s(23096),l=s(47927),h=s(62681);function f(u,g){var L,C=typeof g;return null==g||"boolean"===C?(0,l.Z)(g):("number"===C?p.Z:"string"===C?(L=(0,c.ZP)(g))?(g=L,x.ZP):d.Z:g instanceof c.ZP?x.ZP:g instanceof Date?m.Z:(0,h.v)(g)?h.Z:Array.isArray(g)?_.M:"function"!=typeof g.valueOf&&"function"!=typeof g.toString||isNaN(g)?t.Z:p.Z)(u,g)}},76257:(w,E,s)=>{"use strict";function x(t){return((t=Math.exp(t))+1/t)/2}s.d(E,{Z:()=>p});const p=function t(d,l,h){function f(u,g){var nt,et,C=u[0],L=u[1],I=u[2],F=g[2],B=g[0]-C,Y=g[1]-L,V=B*B+Y*Y;if(V<1e-12)et=Math.log(F/I)/d,nt=function(H){return[C+H*B,L+H*Y,I*Math.exp(d*H*et)]};else{var st=Math.sqrt(V),K=(F*F-I*I+h*V)/(2*I*l*st),X=(F*F-I*I-h*V)/(2*F*l*st),W=Math.log(Math.sqrt(K*K+1)-K),at=Math.log(Math.sqrt(X*X+1)-X);et=(at-W)/d,nt=function(H){var Q=H*et,it=x(W),q=I/(l*st)*(it*function m(t){return((t=Math.exp(2*t))-1)/(t+1)}(d*Q+W)-function _(t){return((t=Math.exp(t))-1/t)/2}(W));return[C+q*B,L+q*Y,I*it/x(d*Q+W)]}}return nt.duration=1e3*et*d/Math.SQRT2,nt}return f.rho=function(u){var g=Math.max(.001,+u),C=g*g;return t(g,C,C*C)},f}(Math.SQRT2,2,4)},38184:(w,E,s)=>{"use strict";s.r(E),s.d(E,{path:()=>d});const c=Math.PI,x=2*c,_=1e-6,m=x-_;function p(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function t(){return new p}p.prototype=t.prototype={constructor:p,moveTo:function(l,h){this._+="M"+(this._x0=this._x1=+l)+","+(this._y0=this._y1=+h)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(l,h){this._+="L"+(this._x1=+l)+","+(this._y1=+h)},quadraticCurveTo:function(l,h,f,u){this._+="Q"+ +l+","+ +h+","+(this._x1=+f)+","+(this._y1=+u)},bezierCurveTo:function(l,h,f,u,g,C){this._+="C"+ +l+","+ +h+","+ +f+","+ +u+","+(this._x1=+g)+","+(this._y1=+C)},arcTo:function(l,h,f,u,g){var C=this._x1,L=this._y1,I=(f=+f)-(l=+l),R=(u=+u)-(h=+h),M=C-l,F=L-h,B=M*M+F*F;if((g=+g)<0)throw new Error("negative radius: "+g);if(null===this._x1)this._+="M"+(this._x1=l)+","+(this._y1=h);else if(B>_)if(Math.abs(F*I-R*M)>_&&g){var Y=f-C,V=u-L,nt=I*I+R*R,et=Y*Y+V*V,st=Math.sqrt(nt),K=Math.sqrt(B),X=g*Math.tan((c-Math.acos((nt+B-et)/(2*st*K)))/2),W=X/K,at=X/st;Math.abs(W-1)>_&&(this._+="L"+(l+W*M)+","+(h+W*F)),this._+="A"+g+","+g+",0,0,"+ +(F*Y>M*V)+","+(this._x1=l+at*I)+","+(this._y1=h+at*R)}else this._+="L"+(this._x1=l)+","+(this._y1=h)},arc:function(l,h,f,u,g,C){l=+l,h=+h,C=!!C;var L=(f=+f)*Math.cos(u),I=f*Math.sin(u),R=l+L,M=h+I,F=1^C,B=C?u-g:g-u;if(f<0)throw new Error("negative radius: "+f);null===this._x1?this._+="M"+R+","+M:(Math.abs(this._x1-R)>_||Math.abs(this._y1-M)>_)&&(this._+="L"+R+","+M),f&&(B<0&&(B=B%x+x),B>m?this._+="A"+f+","+f+",0,1,"+F+","+(l-L)+","+(h-I)+"A"+f+","+f+",0,1,"+F+","+(this._x1=R)+","+(this._y1=M):B>_&&(this._+="A"+f+","+f+",0,"+ +(B>=c)+","+F+","+(this._x1=l+f*Math.cos(g))+","+(this._y1=h+f*Math.sin(g))))},rect:function(l,h,f,u){this._+="M"+(this._x0=this._x1=+l)+","+(this._y0=this._y1=+h)+"h"+ +f+"v"+ +u+"h"+-f+"Z"},toString:function(){return this._}};const d=t},34638:(w,E,s)=>{"use strict";function c(x){return"object"==typeof x&&"length"in x?x:Array.from(x)}s.d(E,{Z:()=>c})},7500:(w,E,s)=>{"use strict";s.d(E,{Z:()=>p});var c=s(36175),x=s(53517);function _(t){return function(){var d=this.ownerDocument,l=this.namespaceURI;return l===x.P&&d.documentElement.namespaceURI===x.P?d.createElement(t):d.createElementNS(l,t)}}function m(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function p(t){var d=(0,c.Z)(t);return(d.local?m:_)(d)}},68557:(w,E,s)=>{"use strict";s.r(E),s.d(E,{create:()=>_,creator:()=>c.Z,local:()=>p,matcher:()=>d.Z,namespace:()=>l.Z,namespaces:()=>h.Z,pointer:()=>f.Z,pointers:()=>g,select:()=>x.Z,selectAll:()=>I,selection:()=>L.ZP,selector:()=>R.Z,selectorAll:()=>M.Z,style:()=>F.S,window:()=>B.Z});var c=s(7500),x=s(52016);function _(Y){return(0,x.Z)((0,c.Z)(Y).call(document.documentElement))}var m=0;function p(){return new t}function t(){this._="@"+(++m).toString(36)}t.prototype=p.prototype={constructor:t,get:function(Y){for(var V=this._;!(V in Y);)if(!(Y=Y.parentNode))return;return Y[V]},set:function(Y,V){return Y[this._]=V},remove:function(Y){return this._ in Y&&delete Y[this._]},toString:function(){return this._}};var d=s(97905),l=s(36175),h=s(53517),f=s(29132),u=s(75819);function g(Y,V){return Y.target&&(Y=(0,u.Z)(Y),void 0===V&&(V=Y.currentTarget),Y=Y.touches||[Y]),Array.from(Y,nt=>(0,f.Z)(nt,V))}var C=s(34638),L=s(37853);function I(Y){return"string"==typeof Y?new L.Y1([document.querySelectorAll(Y)],[document.documentElement]):new L.Y1([null==Y?[]:(0,C.Z)(Y)],L.Jz)}var R=s(29742),M=s(32037),F=s(24476),B=s(2442)},97905:(w,E,s)=>{"use strict";function c(_){return function(){return this.matches(_)}}function x(_){return function(m){return m.matches(_)}}s.d(E,{P:()=>x,Z:()=>c})},36175:(w,E,s)=>{"use strict";s.d(E,{Z:()=>x});var c=s(53517);function x(_){var m=_+="",p=m.indexOf(":");return p>=0&&"xmlns"!==(m=_.slice(0,p))&&(_=_.slice(p+1)),c.Z.hasOwnProperty(m)?{space:c.Z[m],local:_}:_}},53517:(w,E,s)=>{"use strict";s.d(E,{P:()=>c,Z:()=>x});var c="http://www.w3.org/1999/xhtml";const x={svg:"http://www.w3.org/2000/svg",xhtml:c,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}},29132:(w,E,s)=>{"use strict";s.d(E,{Z:()=>x});var c=s(75819);function x(_,m){if(_=(0,c.Z)(_),void 0===m&&(m=_.currentTarget),m){var p=m.ownerSVGElement||m;if(p.createSVGPoint){var t=p.createSVGPoint();return t.x=_.clientX,t.y=_.clientY,[(t=t.matrixTransform(m.getScreenCTM().inverse())).x,t.y]}if(m.getBoundingClientRect){var d=m.getBoundingClientRect();return[_.clientX-d.left-m.clientLeft,_.clientY-d.top-m.clientTop]}}return[_.pageX,_.pageY]}},52016:(w,E,s)=>{"use strict";s.d(E,{Z:()=>x});var c=s(37853);function x(_){return"string"==typeof _?new c.Y1([[document.querySelector(_)]],[document.documentElement]):new c.Y1([[_]],c.Jz)}},37853:(w,E,s)=>{"use strict";s.d(E,{Y1:()=>Te,ZP:()=>hi,Jz:()=>Ii});var c=s(29742),_=s(34638),m=s(32037),d=s(97905),l=Array.prototype.find;function f(){return this.firstElementChild}var g=Array.prototype.filter;function C(){return this.children}function M(z){return new Array(z.length)}function B(z,$){this.ownerDocument=z.ownerDocument,this.namespaceURI=z.namespaceURI,this._next=null,this._parent=z,this.__data__=$}function Y(z){return function(){return z}}function V(z,$,ct,A,Tt,Dt){for(var Gt,Pt=0,Qt=$.length,zt=Dt.length;Pt<zt;++Pt)(Gt=$[Pt])?(Gt.__data__=Dt[Pt],A[Pt]=Gt):ct[Pt]=new B(z,Dt[Pt]);for(;Pt<Qt;++Pt)(Gt=$[Pt])&&(Tt[Pt]=Gt)}function nt(z,$,ct,A,Tt,Dt,Pt){var Gt,Qt,vt,zt=new Map,J=$.length,pt=Dt.length,_t=new Array(J);for(Gt=0;Gt<J;++Gt)(Qt=$[Gt])&&(_t[Gt]=vt=Pt.call(Qt,Qt.__data__,Gt,$)+"",zt.has(vt)?Tt[Gt]=Qt:zt.set(vt,Qt));for(Gt=0;Gt<pt;++Gt)vt=Pt.call(z,Dt[Gt],Gt,Dt)+"",(Qt=zt.get(vt))?(A[Gt]=Qt,Qt.__data__=Dt[Gt],zt.delete(vt)):ct[Gt]=new B(z,Dt[Gt]);for(Gt=0;Gt<J;++Gt)(Qt=$[Gt])&&zt.get(_t[Gt])===Qt&&(Tt[Gt]=Qt)}function et(z){return z.__data__}function Q(z,$){return z<$?-1:z>$?1:z>=$?0:NaN}B.prototype={constructor:B,appendChild:function(z){return this._parent.insertBefore(z,this._next)},insertBefore:function(z,$){return this._parent.insertBefore(z,$)},querySelector:function(z){return this._parent.querySelector(z)},querySelectorAll:function(z){return this._parent.querySelectorAll(z)}};var Mt=s(36175);function Et(z){return function(){this.removeAttribute(z)}}function $t(z){return function(){this.removeAttributeNS(z.space,z.local)}}function ue(z,$){return function(){this.setAttribute(z,$)}}function ut(z,$){return function(){this.setAttributeNS(z.space,z.local,$)}}function ft(z,$){return function(){var ct=$.apply(this,arguments);null==ct?this.removeAttribute(z):this.setAttribute(z,ct)}}function gt(z,$){return function(){var ct=$.apply(this,arguments);null==ct?this.removeAttributeNS(z.space,z.local):this.setAttributeNS(z.space,z.local,ct)}}var ee=s(24476);function Kt(z){return function(){delete this[z]}}function ce(z,$){return function(){this[z]=$}}function xe(z,$){return function(){var ct=$.apply(this,arguments);null==ct?delete this[z]:this[z]=ct}}function Ne(z){return z.trim().split(/^|\s+/)}function It(z){return z.classList||new Xt(z)}function Xt(z){this._node=z,this._names=Ne(z.getAttribute("class")||"")}function Zt(z,$){for(var ct=It(z),A=-1,Tt=$.length;++A<Tt;)ct.add($[A])}function jt(z,$){for(var ct=It(z),A=-1,Tt=$.length;++A<Tt;)ct.remove($[A])}function ge(z){return function(){Zt(this,z)}}function ye(z){return function(){jt(this,z)}}function Ee(z,$){return function(){($.apply(this,arguments)?Zt:jt)(this,z)}}function Ae(){this.textContent=""}function Ue(z){return function(){this.textContent=z}}function Ze(z){return function(){var $=z.apply(this,arguments);this.textContent=$??""}}function ve(){this.innerHTML=""}function oi(z){return function(){this.innerHTML=z}}function Ct(z){return function(){var $=z.apply(this,arguments);this.innerHTML=$??""}}function se(){this.nextSibling&&this.parentNode.appendChild(this)}function qt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}Xt.prototype={add:function(z){this._names.indexOf(z)<0&&(this._names.push(z),this._node.setAttribute("class",this._names.join(" ")))},remove:function(z){var $=this._names.indexOf(z);$>=0&&(this._names.splice($,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(z){return this._names.indexOf(z)>=0}};var ze=s(7500);function ln(){return null}function mn(){var z=this.parentNode;z&&z.removeChild(this)}function En(){var z=this.cloneNode(!1),$=this.parentNode;return $?$.insertBefore(z,this.nextSibling):z}function tr(){var z=this.cloneNode(!0),$=this.parentNode;return $?$.insertBefore(z,this.nextSibling):z}function Qn(z){return z.trim().split(/^|\s+/).map(function($){var ct="",A=$.indexOf(".");return A>=0&&(ct=$.slice(A+1),$=$.slice(0,A)),{type:$,name:ct}})}function Rn(z){return function(){var $=this.__on;if($){for(var Dt,ct=0,A=-1,Tt=$.length;ct<Tt;++ct)Dt=$[ct],z.type&&Dt.type!==z.type||Dt.name!==z.name?$[++A]=Dt:this.removeEventListener(Dt.type,Dt.listener,Dt.options);++A?$.length=A:delete this.__on}}}function he(z,$,ct){return function(){var Tt,A=this.__on,Dt=function _n(z){return function($){z.call(this,$,this.__data__)}}($);if(A)for(var Pt=0,Gt=A.length;Pt<Gt;++Pt)if((Tt=A[Pt]).type===z.type&&Tt.name===z.name)return this.removeEventListener(Tt.type,Tt.listener,Tt.options),this.addEventListener(Tt.type,Tt.listener=Dt,Tt.options=ct),void(Tt.value=$);this.addEventListener(z.type,Dt,ct),Tt={type:z.type,name:z.name,value:$,listener:Dt,options:ct},A?A.push(Tt):this.__on=[Tt]}}var jn=s(2442);function Oi(z,$,ct){var A=(0,jn.Z)(z),Tt=A.CustomEvent;"function"==typeof Tt?Tt=new Tt($,ct):(Tt=A.document.createEvent("Event"),ct?(Tt.initEvent($,ct.bubbles,ct.cancelable),Tt.detail=ct.detail):Tt.initEvent($,!1,!1)),z.dispatchEvent(Tt)}function gi(z,$){return function(){return Oi(this,z,$)}}function ii(z,$){return function(){return Oi(this,z,$.apply(this,arguments))}}var Ii=[null];function Te(z,$){this._groups=z,this._parents=$}function Bn(){return new Te([[document.documentElement]],Ii)}Te.prototype=Bn.prototype={constructor:Te,select:function x(z){"function"!=typeof z&&(z=(0,c.Z)(z));for(var $=this._groups,ct=$.length,A=new Array(ct),Tt=0;Tt<ct;++Tt)for(var Qt,zt,Dt=$[Tt],Pt=Dt.length,Gt=A[Tt]=new Array(Pt),J=0;J<Pt;++J)(Qt=Dt[J])&&(zt=z.call(Qt,Qt.__data__,J,Dt))&&("__data__"in Qt&&(zt.__data__=Qt.__data__),Gt[J]=zt);return new Te(A,this._parents)},selectAll:function t(z){z="function"==typeof z?function p(z){return function(){var $=z.apply(this,arguments);return null==$?[]:(0,_.Z)($)}}(z):(0,m.Z)(z);for(var $=this._groups,ct=$.length,A=[],Tt=[],Dt=0;Dt<ct;++Dt)for(var Qt,Pt=$[Dt],Gt=Pt.length,zt=0;zt<Gt;++zt)(Qt=Pt[zt])&&(A.push(z.call(Qt,Qt.__data__,zt,Pt)),Tt.push(Qt));return new Te(A,Tt)},selectChild:function u(z){return this.select(null==z?f:function h(z){return function(){return l.call(this.children,z)}}("function"==typeof z?z:(0,d.P)(z)))},selectChildren:function I(z){return this.selectAll(null==z?C:function L(z){return function(){return g.call(this.children,z)}}("function"==typeof z?z:(0,d.P)(z)))},filter:function R(z){"function"!=typeof z&&(z=(0,d.Z)(z));for(var $=this._groups,ct=$.length,A=new Array(ct),Tt=0;Tt<ct;++Tt)for(var Qt,Dt=$[Tt],Pt=Dt.length,Gt=A[Tt]=[],zt=0;zt<Pt;++zt)(Qt=Dt[zt])&&z.call(Qt,Qt.__data__,zt,Dt)&&Gt.push(Qt);return new Te(A,this._parents)},data:function st(z,$){if(!arguments.length)return Array.from(this,et);var ct=$?nt:V,A=this._parents,Tt=this._groups;"function"!=typeof z&&(z=Y(z));for(var Dt=Tt.length,Pt=new Array(Dt),Gt=new Array(Dt),Qt=new Array(Dt),zt=0;zt<Dt;++zt){var J=A[zt],pt=Tt[zt],_t=pt.length,vt=(0,_.Z)(z.call(J,J&&J.__data__,zt,A)),Ut=vt.length,Yt=Gt[zt]=new Array(Ut),Lt=Pt[zt]=new Array(Ut),ae=Qt[zt]=new Array(_t);ct(J,pt,Yt,Lt,ae,vt,$);for(var we,be,O=0,ne=0;O<Ut;++O)if(we=Yt[O]){for(O>=ne&&(ne=O+1);!(be=Lt[ne])&&++ne<Ut;);we._next=be||null}}return(Pt=new Te(Pt,A))._enter=Gt,Pt._exit=Qt,Pt},enter:function F(){return new Te(this._enter||this._groups.map(M),this._parents)},exit:function K(){return new Te(this._exit||this._groups.map(M),this._parents)},join:function X(z,$,ct){var A=this.enter(),Tt=this,Dt=this.exit();return A="function"==typeof z?z(A):A.append(z+""),null!=$&&(Tt=$(Tt)),null==ct?Dt.remove():ct(Dt),A&&Tt?A.merge(Tt).order():Tt},merge:function W(z){if(!(z instanceof Te))throw new Error("invalid merge");for(var $=this._groups,ct=z._groups,A=$.length,Dt=Math.min(A,ct.length),Pt=new Array(A),Gt=0;Gt<Dt;++Gt)for(var _t,Qt=$[Gt],zt=ct[Gt],J=Qt.length,pt=Pt[Gt]=new Array(J),vt=0;vt<J;++vt)(_t=Qt[vt]||zt[vt])&&(pt[vt]=_t);for(;Gt<A;++Gt)Pt[Gt]=$[Gt];return new Te(Pt,this._parents)},selection:function Pi(){return this},order:function at(){for(var z=this._groups,$=-1,ct=z.length;++$<ct;)for(var Pt,A=z[$],Tt=A.length-1,Dt=A[Tt];--Tt>=0;)(Pt=A[Tt])&&(Dt&&4^Pt.compareDocumentPosition(Dt)&&Dt.parentNode.insertBefore(Pt,Dt),Dt=Pt);return this},sort:function H(z){function $(pt,_t){return pt&&_t?z(pt.__data__,_t.__data__):!pt-!_t}z||(z=Q);for(var ct=this._groups,A=ct.length,Tt=new Array(A),Dt=0;Dt<A;++Dt){for(var zt,Pt=ct[Dt],Gt=Pt.length,Qt=Tt[Dt]=new Array(Gt),J=0;J<Gt;++J)(zt=Pt[J])&&(Qt[J]=zt);Qt.sort($)}return new Te(Tt,this._parents).order()},call:function it(){var z=arguments[0];return arguments[0]=this,z.apply(null,arguments),this},nodes:function q(){return Array.from(this)},node:function U(){for(var z=this._groups,$=0,ct=z.length;$<ct;++$)for(var A=z[$],Tt=0,Dt=A.length;Tt<Dt;++Tt){var Pt=A[Tt];if(Pt)return Pt}return null},size:function D(){let z=0;for(const $ of this)++z;return z},empty:function mt(){return!this.node()},each:function St(z){for(var $=this._groups,ct=0,A=$.length;ct<A;++ct)for(var Gt,Tt=$[ct],Dt=0,Pt=Tt.length;Dt<Pt;++Dt)(Gt=Tt[Dt])&&z.call(Gt,Gt.__data__,Dt,Tt);return this},attr:function Nt(z,$){var ct=(0,Mt.Z)(z);if(arguments.length<2){var A=this.node();return ct.local?A.getAttributeNS(ct.space,ct.local):A.getAttribute(ct)}return this.each((null==$?ct.local?$t:Et:"function"==typeof $?ct.local?gt:ft:ct.local?ut:ue)(ct,$))},style:ee.Z,property:function Ge(z,$){return arguments.length>1?this.each((null==$?Kt:"function"==typeof $?xe:ce)(z,$)):this.node()[z]},classed:function Ie(z,$){var ct=Ne(z+"");if(arguments.length<2){for(var A=It(this.node()),Tt=-1,Dt=ct.length;++Tt<Dt;)if(!A.contains(ct[Tt]))return!1;return!0}return this.each(("function"==typeof $?Ee:$?ge:ye)(ct,$))},text:function ei(z){return arguments.length?this.each(null==z?Ae:("function"==typeof z?Ze:Ue)(z)):this.node().textContent},html:function Ht(z){return arguments.length?this.each(null==z?ve:("function"==typeof z?Ct:oi)(z)):this.node().innerHTML},raise:function fe(){return this.each(se)},lower:function Be(){return this.each(qt)},append:function Ti(z){var $="function"==typeof z?z:(0,ze.Z)(z);return this.select(function(){return this.appendChild($.apply(this,arguments))})},insert:function Mn(z,$){var ct="function"==typeof z?z:(0,ze.Z)(z),A=null==$?ln:"function"==typeof $?$:(0,c.Z)($);return this.select(function(){return this.insertBefore(ct.apply(this,arguments),A.apply(this,arguments)||null)})},remove:function gn(){return this.each(mn)},clone:function Fn(z){return this.select(z?tr:En)},datum:function Nn(z){return arguments.length?this.property("__data__",z):this.node().__data__},on:function Si(z,$,ct){var Tt,Pt,A=Qn(z+""),Dt=A.length;if(!(arguments.length<2)){for(Gt=$?he:Rn,Tt=0;Tt<Dt;++Tt)this.each(Gt(A[Tt],$,ct));return this}var Gt=this.node().__on;if(Gt)for(var J,Qt=0,zt=Gt.length;Qt<zt;++Qt)for(Tt=0,J=Gt[Qt];Tt<Dt;++Tt)if((Pt=A[Tt]).type===J.type&&Pt.name===J.name)return J.value},dispatch:function Yi(z,$){return this.each(("function"==typeof $?ii:gi)(z,$))},[Symbol.iterator]:function*cn(){for(var z=this._groups,$=0,ct=z.length;$<ct;++$)for(var Pt,A=z[$],Tt=0,Dt=A.length;Tt<Dt;++Tt)(Pt=A[Tt])&&(yield Pt)}};const hi=Bn},24476:(w,E,s)=>{"use strict";s.d(E,{S:()=>t,Z:()=>p});var c=s(2442);function x(d){return function(){this.style.removeProperty(d)}}function _(d,l,h){return function(){this.style.setProperty(d,l,h)}}function m(d,l,h){return function(){var f=l.apply(this,arguments);null==f?this.style.removeProperty(d):this.style.setProperty(d,f,h)}}function p(d,l,h){return arguments.length>1?this.each((null==l?x:"function"==typeof l?m:_)(d,l,h??"")):t(this.node(),d)}function t(d,l){return d.style.getPropertyValue(l)||(0,c.Z)(d).getComputedStyle(d,null).getPropertyValue(l)}},29742:(w,E,s)=>{"use strict";function c(){}function x(_){return null==_?c:function(){return this.querySelector(_)}}s.d(E,{Z:()=>x})},32037:(w,E,s)=>{"use strict";function c(){return[]}function x(_){return null==_?c:function(){return this.querySelectorAll(_)}}s.d(E,{Z:()=>x})},75819:(w,E,s)=>{"use strict";function c(x){let _;for(;_=x.sourceEvent;)x=_;return x}s.d(E,{Z:()=>c})},2442:(w,E,s)=>{"use strict";function c(x){return x.ownerDocument&&x.ownerDocument.defaultView||x.document&&x||x.defaultView}s.d(E,{Z:()=>c})},73339:(w,E,s)=>{"use strict";s.d(E,{Z:()=>x});var c=s(49194);function x(_,m,p){var t=new c.B7;return t.restart(function(d){t.stop(),_(d+m)},m=null==m?0:+m,p),t}},49194:(w,E,s)=>{"use strict";s.d(E,{B7:()=>L,HT:()=>I,R8:()=>R,zO:()=>g});var p,t,c=0,x=0,_=0,d=0,l=0,h=0,f="object"==typeof performance&&performance.now?performance:Date,u="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(V){setTimeout(V,17)};function g(){return l||(u(C),l=f.now()+h)}function C(){l=0}function L(){this._call=this._time=this._next=null}function I(V,nt,et){var st=new L;return st.restart(V,nt,et),st}function R(){g(),++c;for(var nt,V=p;V;)(nt=l-V._time)>=0&&V._call.call(null,nt),V=V._next;--c}function M(){l=(d=f.now())+h,c=x=0;try{R()}finally{c=0,function B(){for(var V,et,nt=p,st=1/0;nt;)nt._call?(st>nt._time&&(st=nt._time),V=nt,nt=nt._next):(et=nt._next,nt._next=null,nt=V?V._next=et:p=et);t=V,Y(st)}(),l=0}}function F(){var V=f.now(),nt=V-d;nt>1e3&&(h-=nt,d=V)}function Y(V){c||(x&&(x=clearTimeout(x)),V-l>24?(V<1/0&&(x=setTimeout(M,V-f.now()-h)),_&&(_=clearInterval(_))):(_||(d=f.now(),_=setInterval(F,1e3)),c=1,u(M)))}L.prototype=I.prototype={constructor:L,restart:function(V,nt,et){if("function"!=typeof V)throw new TypeError("callback is not a function");et=(null==et?g():+et)+(null==nt?0:+nt),!this._next&&t!==this&&(t?t._next=this:p=this,t=this),this._call=V,this._time=et,Y()},stop:function(){this._call&&(this._call=null,this._time=1/0,Y())}}},18429:(w,E,s)=>{"use strict";s.r(E),s.d(E,{active:()=>hi,interrupt:()=>B,transition:()=>gi});var c=s(37853),x=s(25922),_=s(49194),m=s(73339),p=(0,x.Z)("start","end","cancel","interrupt"),t=[];function L(z,$,ct,A,Tt,Dt){var Pt=z.__transition;if(Pt){if(ct in Pt)return}else z.__transition={};!function F(z,$,ct){var Tt,A=z.__transition;function Pt(zt){var J,pt,_t,vt;if(1!==ct.state)return Qt();for(J in A)if((vt=A[J]).name===ct.name){if(3===vt.state)return(0,m.Z)(Pt);4===vt.state?(vt.state=6,vt.timer.stop(),vt.on.call("interrupt",z,z.__data__,vt.index,vt.group),delete A[J]):+J<$&&(vt.state=6,vt.timer.stop(),vt.on.call("cancel",z,z.__data__,vt.index,vt.group),delete A[J])}if((0,m.Z)(function(){3===ct.state&&(ct.state=4,ct.timer.restart(Gt,ct.delay,ct.time),Gt(zt))}),ct.state=2,ct.on.call("start",z,z.__data__,ct.index,ct.group),2===ct.state){for(ct.state=3,Tt=new Array(_t=ct.tween.length),J=0,pt=-1;J<_t;++J)(vt=ct.tween[J].value.call(z,z.__data__,ct.index,ct.group))&&(Tt[++pt]=vt);Tt.length=pt+1}}function Gt(zt){for(var J=zt<ct.duration?ct.ease.call(null,zt/ct.duration):(ct.timer.restart(Qt),ct.state=5,1),pt=-1,_t=Tt.length;++pt<_t;)Tt[pt].call(z,J);5===ct.state&&(ct.on.call("end",z,z.__data__,ct.index,ct.group),Qt())}function Qt(){for(var zt in ct.state=6,ct.timer.stop(),delete A[$],A)return;delete z.__transition}A[$]=ct,ct.timer=(0,_.HT)(function Dt(zt){ct.state=1,ct.timer.restart(Pt,ct.delay,ct.time),ct.delay<=zt&&Pt(zt-ct.delay)},0,ct.time)}(z,ct,{name:$,index:A,group:Tt,on:p,tween:t,time:Dt.time,delay:Dt.delay,duration:Dt.duration,ease:Dt.ease,timer:null,state:0})}function I(z,$){var ct=M(z,$);if(ct.state>0)throw new Error("too late; already scheduled");return ct}function R(z,$){var ct=M(z,$);if(ct.state>3)throw new Error("too late; already running");return ct}function M(z,$){var ct=z.__transition;if(!ct||!(ct=ct[$]))throw new Error("transition not found");return ct}function B(z,$){var A,Tt,Pt,ct=z.__transition,Dt=!0;if(ct){for(Pt in $=null==$?null:$+"",ct)(A=ct[Pt]).name===$?(Tt=A.state>2&&A.state<5,A.state=6,A.timer.stop(),A.on.call(Tt?"interrupt":"cancel",z,z.__data__,A.index,A.group),delete ct[Pt]):Dt=!1;Dt&&delete z.__transition}}var V=s(75349),nt=s(36175);function et(z,$){var ct,A;return function(){var Tt=R(this,z),Dt=Tt.tween;if(Dt!==ct)for(var Pt=0,Gt=(A=ct=Dt).length;Pt<Gt;++Pt)if(A[Pt].name===$){(A=A.slice()).splice(Pt,1);break}Tt.tween=A}}function st(z,$,ct){var A,Tt;if("function"!=typeof ct)throw new Error;return function(){var Dt=R(this,z),Pt=Dt.tween;if(Pt!==A){Tt=(A=Pt).slice();for(var Gt={name:$,value:ct},Qt=0,zt=Tt.length;Qt<zt;++Qt)if(Tt[Qt].name===$){Tt[Qt]=Gt;break}Qt===zt&&Tt.push(Gt)}Dt.tween=Tt}}function X(z,$,ct){var A=z._id;return z.each(function(){var Tt=R(this,A);(Tt.value||(Tt.value={}))[$]=ct.apply(this,arguments)}),function(Tt){return M(Tt,A).value[$]}}var W=s(52786),at=s(6738),H=s(86811),Q=s(23096);function it(z,$){var ct;return("number"==typeof $?at.Z:$ instanceof W.ZP?H.ZP:(ct=(0,W.ZP)($))?($=ct,H.ZP):Q.Z)(z,$)}function q(z){return function(){this.removeAttribute(z)}}function U(z){return function(){this.removeAttributeNS(z.space,z.local)}}function D(z,$,ct){var A,Dt,Tt=ct+"";return function(){var Pt=this.getAttribute(z);return Pt===Tt?null:Pt===A?Dt:Dt=$(A=Pt,ct)}}function mt(z,$,ct){var A,Dt,Tt=ct+"";return function(){var Pt=this.getAttributeNS(z.space,z.local);return Pt===Tt?null:Pt===A?Dt:Dt=$(A=Pt,ct)}}function St(z,$,ct){var A,Tt,Dt;return function(){var Pt,Qt,Gt=ct(this);return null==Gt?void this.removeAttribute(z):(Pt=this.getAttribute(z))===(Qt=Gt+"")?null:Pt===A&&Qt===Tt?Dt:(Tt=Qt,Dt=$(A=Pt,Gt))}}function Mt(z,$,ct){var A,Tt,Dt;return function(){var Pt,Qt,Gt=ct(this);return null==Gt?void this.removeAttributeNS(z.space,z.local):(Pt=this.getAttributeNS(z.space,z.local))===(Qt=Gt+"")?null:Pt===A&&Qt===Tt?Dt:(Tt=Qt,Dt=$(A=Pt,Gt))}}function $t(z,$){return function(ct){this.setAttribute(z,$.call(this,ct))}}function ue(z,$){return function(ct){this.setAttributeNS(z.space,z.local,$.call(this,ct))}}function ut(z,$){var ct,A;function Tt(){var Dt=$.apply(this,arguments);return Dt!==A&&(ct=(A=Dt)&&ue(z,Dt)),ct}return Tt._value=$,Tt}function ft(z,$){var ct,A;function Tt(){var Dt=$.apply(this,arguments);return Dt!==A&&(ct=(A=Dt)&&$t(z,Dt)),ct}return Tt._value=$,Tt}function Nt(z,$){return function(){I(this,z).delay=+$.apply(this,arguments)}}function ee(z,$){return $=+$,function(){I(this,z).delay=$}}function ce(z,$){return function(){R(this,z).duration=+$.apply(this,arguments)}}function xe(z,$){return $=+$,function(){R(this,z).duration=$}}function Ne(z,$){if("function"!=typeof $)throw new Error;return function(){R(this,z).ease=$}}var jt=s(97905);function Ie(z,$,ct){var A,Tt,Dt=function Ee(z){return(z+"").trim().split(/^|\s+/).every(function($){var ct=$.indexOf(".");return ct>=0&&($=$.slice(0,ct)),!$||"start"===$})}($)?I:R;return function(){var Pt=Dt(this,z),Gt=Pt.on;Gt!==A&&(Tt=(A=Gt).copy()).on($,ct),Pt.on=Tt}}var ei=s(29742),oi=s(32037),Ht=c.ZP.prototype.constructor,fe=s(24476);function Be(z){return function(){this.style.removeProperty(z)}}function mn(z,$,ct){return function(A){this.style.setProperty(z,$.call(this,A),ct)}}function gn(z,$,ct){var A,Tt;function Dt(){var Pt=$.apply(this,arguments);return Pt!==Tt&&(A=(Tt=Pt)&&mn(z,Pt,ct)),A}return Dt._value=$,Dt}function _n(z){return function($){this.textContent=z.call(this,$)}}function Qn(z){var $,ct;function A(){var Tt=z.apply(this,arguments);return Tt!==ct&&($=(ct=Tt)&&_n(Tt)),$}return A._value=z,A}var jn=0;function Oi(z,$,ct,A){this._groups=z,this._parents=$,this._name=ct,this._id=A}function gi(z){return(0,c.ZP)().transition(z)}function ii(){return++jn}var Yi=c.ZP.prototype;Oi.prototype=gi.prototype={constructor:Oi,select:function ve(z){var $=this._name,ct=this._id;"function"!=typeof z&&(z=(0,ei.Z)(z));for(var A=this._groups,Tt=A.length,Dt=new Array(Tt),Pt=0;Pt<Tt;++Pt)for(var J,pt,Gt=A[Pt],Qt=Gt.length,zt=Dt[Pt]=new Array(Qt),_t=0;_t<Qt;++_t)(J=Gt[_t])&&(pt=z.call(J,J.__data__,_t,Gt))&&("__data__"in J&&(pt.__data__=J.__data__),zt[_t]=pt,L(zt[_t],$,ct,_t,zt,M(J,ct)));return new Oi(Dt,this._parents,$,ct)},selectAll:function Ct(z){var $=this._name,ct=this._id;"function"!=typeof z&&(z=(0,oi.Z)(z));for(var A=this._groups,Tt=A.length,Dt=[],Pt=[],Gt=0;Gt<Tt;++Gt)for(var J,Qt=A[Gt],zt=Qt.length,pt=0;pt<zt;++pt)if(J=Qt[pt]){for(var vt,_t=z.call(J,J.__data__,pt,Qt),Ut=M(J,ct),Yt=0,Lt=_t.length;Yt<Lt;++Yt)(vt=_t[Yt])&&L(vt,$,ct,Yt,_t,Ut);Dt.push(_t),Pt.push(J)}return new Oi(Dt,Pt,$,ct)},filter:function ge(z){"function"!=typeof z&&(z=(0,jt.Z)(z));for(var $=this._groups,ct=$.length,A=new Array(ct),Tt=0;Tt<ct;++Tt)for(var Qt,Dt=$[Tt],Pt=Dt.length,Gt=A[Tt]=[],zt=0;zt<Pt;++zt)(Qt=Dt[zt])&&z.call(Qt,Qt.__data__,zt,Dt)&&Gt.push(Qt);return new Oi(A,this._parents,this._name,this._id)},merge:function ye(z){if(z._id!==this._id)throw new Error;for(var $=this._groups,ct=z._groups,A=$.length,Dt=Math.min(A,ct.length),Pt=new Array(A),Gt=0;Gt<Dt;++Gt)for(var _t,Qt=$[Gt],zt=ct[Gt],J=Qt.length,pt=Pt[Gt]=new Array(J),vt=0;vt<J;++vt)(_t=Qt[vt]||zt[vt])&&(pt[vt]=_t);for(;Gt<A;++Gt)Pt[Gt]=$[Gt];return new Oi(Pt,this._parents,this._name,this._id)},selection:function se(){return new Ht(this._groups,this._parents)},transition:function he(){for(var z=this._name,$=this._id,ct=ii(),A=this._groups,Tt=A.length,Dt=0;Dt<Tt;++Dt)for(var Qt,Pt=A[Dt],Gt=Pt.length,zt=0;zt<Gt;++zt)if(Qt=Pt[zt]){var J=M(Qt,$);L(Qt,z,ct,zt,Pt,{time:J.time+J.delay+J.duration,delay:0,duration:J.duration,ease:J.ease})}return new Oi(A,this._parents,z,ct)},call:Yi.call,nodes:Yi.nodes,node:Yi.node,size:Yi.size,empty:Yi.empty,each:Yi.each,on:function Ae(z,$){var ct=this._id;return arguments.length<2?M(this.node(),ct).on.on(z):this.each(Ie(ct,z,$))},attr:function Et(z,$){var ct=(0,nt.Z)(z),A="transform"===ct?V.w:it;return this.attrTween(z,"function"==typeof $?(ct.local?Mt:St)(ct,A,X(this,"attr."+z,$)):null==$?(ct.local?U:q)(ct):(ct.local?mt:D)(ct,A,$))},attrTween:function gt(z,$){var ct="attr."+z;if(arguments.length<2)return(ct=this.tween(ct))&&ct._value;if(null==$)return this.tween(ct,null);if("function"!=typeof $)throw new Error;var A=(0,nt.Z)(z);return this.tween(ct,(A.local?ut:ft)(A,$))},style:function Mn(z,$,ct){var A="transform"==(z+="")?V.Y:it;return null==$?this.styleTween(z,function qt(z,$){var ct,A,Tt;return function(){var Dt=(0,fe.S)(this,z),Pt=(this.style.removeProperty(z),(0,fe.S)(this,z));return Dt===Pt?null:Dt===ct&&Pt===A?Tt:Tt=$(ct=Dt,A=Pt)}}(z,A)).on("end.style."+z,Be(z)):"function"==typeof $?this.styleTween(z,function Ti(z,$,ct){var A,Tt,Dt;return function(){var Pt=(0,fe.S)(this,z),Gt=ct(this),Qt=Gt+"";return null==Gt&&(this.style.removeProperty(z),Qt=Gt=(0,fe.S)(this,z)),Pt===Qt?null:Pt===A&&Qt===Tt?Dt:(Tt=Qt,Dt=$(A=Pt,Gt))}}(z,A,X(this,"style."+z,$))).each(function ln(z,$){var ct,A,Tt,Gt,Dt="style."+$,Pt="end."+Dt;return function(){var Qt=R(this,z),zt=Qt.on,J=null==Qt.value[Dt]?Gt||(Gt=Be($)):void 0;(zt!==ct||Tt!==J)&&(A=(ct=zt).copy()).on(Pt,Tt=J),Qt.on=A}}(this._id,z)):this.styleTween(z,function ze(z,$,ct){var A,Dt,Tt=ct+"";return function(){var Pt=(0,fe.S)(this,z);return Pt===Tt?null:Pt===A?Dt:Dt=$(A=Pt,ct)}}(z,A,$),ct).on("end.style."+z,null)},styleTween:function En(z,$,ct){var A="style."+(z+="");if(arguments.length<2)return(A=this.tween(A))&&A._value;if(null==$)return this.tween(A,null);if("function"!=typeof $)throw new Error;return this.tween(A,gn(z,$,ct??""))},text:function Nn(z){return this.tween("text","function"==typeof z?function Fn(z){return function(){var $=z(this);this.textContent=$??""}}(X(this,"text",z)):function tr(z){return function(){this.textContent=z}}(null==z?"":z+""))},textTween:function Rn(z){var $="text";if(arguments.length<1)return($=this.tween($))&&$._value;if(null==z)return this.tween($,null);if("function"!=typeof z)throw new Error;return this.tween($,Qn(z))},remove:function Ze(){return this.on("end.remove",function Ue(z){return function(){var $=this.parentNode;for(var ct in this.__transition)if(+ct!==z)return;$&&$.removeChild(this)}}(this._id))},tween:function K(z,$){var ct=this._id;if(z+="",arguments.length<2){for(var Pt,A=M(this.node(),ct).tween,Tt=0,Dt=A.length;Tt<Dt;++Tt)if((Pt=A[Tt]).name===z)return Pt.value;return null}return this.each((null==$?et:st)(ct,z,$))},delay:function Kt(z){var $=this._id;return arguments.length?this.each(("function"==typeof z?Nt:ee)($,z)):M(this.node(),$).delay},duration:function Ge(z){var $=this._id;return arguments.length?this.each(("function"==typeof z?ce:xe)($,z)):M(this.node(),$).duration},ease:function It(z){var $=this._id;return arguments.length?this.each(Ne($,z)):M(this.node(),$).ease},easeVarying:function Zt(z){if("function"!=typeof z)throw new Error;return this.each(function Xt(z,$){return function(){var ct=$.apply(this,arguments);if("function"!=typeof ct)throw new Error;R(this,z).ease=ct}}(this._id,z))},end:function Si(){var z,$,ct=this,A=ct._id,Tt=ct.size();return new Promise(function(Dt,Pt){var Gt={value:Pt},Qt={value:function(){0==--Tt&&Dt()}};ct.each(function(){var zt=R(this,A),J=zt.on;J!==z&&(($=(z=J).copy())._.cancel.push(Gt),$._.interrupt.push(Gt),$._.end.push(Qt)),zt.on=$}),0===Tt&&Dt()})},[Symbol.iterator]:Yi[Symbol.iterator]};var Ii={time:null,delay:0,duration:250,ease:s(27065).tw};function Te(z,$){for(var ct;!(ct=z.__transition)||!(ct=ct[$]);)if(!(z=z.parentNode))throw new Error(`transition ${$} not found`);return ct}c.ZP.prototype.interrupt=function Y(z){return this.each(function(){B(this,z)})},c.ZP.prototype.transition=function Bn(z){var $,ct;z instanceof Oi?($=z._id,z=z._name):($=ii(),(ct=Ii).time=(0,_.zO)(),z=null==z?null:z+"");for(var A=this._groups,Tt=A.length,Dt=0;Dt<Tt;++Dt)for(var Qt,Pt=A[Dt],Gt=Pt.length,zt=0;zt<Gt;++zt)(Qt=Pt[zt])&&L(Qt,z,$,zt,Pt,ct||Te(Qt,$));return new Oi(A,this._parents,z,$)};var Pi=[null];function hi(z,$){var A,Tt,ct=z.__transition;if(ct)for(Tt in $=null==$?null:$+"",ct)if((A=ct[Tt]).state>1&&A.name===$)return new Oi([[z]],Pi,$,+Tt);return null}},46041:(w,E,s)=>{"use strict";s.r(E),s.d(E,{zoom:()=>Y,zoomIdentity:()=>f,zoomTransform:()=>u});var c=s(25922),x=s(56758),_=s(76257),m=s(52016),p=s(29132),t=s(18429);const d=V=>()=>V;function l(V,{sourceEvent:nt,target:et,transform:st,dispatch:K}){Object.defineProperties(this,{type:{value:V,enumerable:!0,configurable:!0},sourceEvent:{value:nt,enumerable:!0,configurable:!0},target:{value:et,enumerable:!0,configurable:!0},transform:{value:st,enumerable:!0,configurable:!0},_:{value:K}})}function h(V,nt,et){this.k=V,this.x=nt,this.y=et}h.prototype={constructor:h,scale:function(V){return 1===V?this:new h(this.k*V,this.x,this.y)},translate:function(V,nt){return 0===V&0===nt?this:new h(this.k,this.x+this.k*V,this.y+this.k*nt)},apply:function(V){return[V[0]*this.k+this.x,V[1]*this.k+this.y]},applyX:function(V){return V*this.k+this.x},applyY:function(V){return V*this.k+this.y},invert:function(V){return[(V[0]-this.x)/this.k,(V[1]-this.y)/this.k]},invertX:function(V){return(V-this.x)/this.k},invertY:function(V){return(V-this.y)/this.k},rescaleX:function(V){return V.copy().domain(V.range().map(this.invertX,this).map(V.invert,V))},rescaleY:function(V){return V.copy().domain(V.range().map(this.invertY,this).map(V.invert,V))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var f=new h(1,0,0);function u(V){for(;!V.__zoom;)if(!(V=V.parentNode))return f;return V.__zoom}function g(V){V.stopImmediatePropagation()}function C(V){V.preventDefault(),V.stopImmediatePropagation()}function L(V){return!(V.ctrlKey&&"wheel"!==V.type||V.button)}function I(){var V=this;return V instanceof SVGElement?(V=V.ownerSVGElement||V).hasAttribute("viewBox")?[[(V=V.viewBox.baseVal).x,V.y],[V.x+V.width,V.y+V.height]]:[[0,0],[V.width.baseVal.value,V.height.baseVal.value]]:[[0,0],[V.clientWidth,V.clientHeight]]}function R(){return this.__zoom||f}function M(V){return-V.deltaY*(1===V.deltaMode?.05:V.deltaMode?1:.002)*(V.ctrlKey?10:1)}function F(){return navigator.maxTouchPoints||"ontouchstart"in this}function B(V,nt,et){var st=V.invertX(nt[0][0])-et[0][0],K=V.invertX(nt[1][0])-et[1][0],X=V.invertY(nt[0][1])-et[0][1],W=V.invertY(nt[1][1])-et[1][1];return V.translate(K>st?(st+K)/2:Math.min(0,st)||Math.max(0,K),W>X?(X+W)/2:Math.min(0,X)||Math.max(0,W))}function Y(){var it,q,U,V=L,nt=I,et=B,st=M,K=F,X=[0,1/0],W=[[-1/0,-1/0],[1/0,1/0]],at=250,H=_.Z,Q=(0,c.Z)("start","zoom","end"),D=500,St=0,Mt=10;function Et(It){It.property("__zoom",R).on("wheel.zoom",ee).on("mousedown.zoom",Kt).on("dblclick.zoom",ce).filter(K).on("touchstart.zoom",xe).on("touchmove.zoom",Ge).on("touchend.zoom touchcancel.zoom",Ne).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function $t(It,Xt){return(Xt=Math.max(X[0],Math.min(X[1],Xt)))===It.k?It:new h(Xt,It.x,It.y)}function ue(It,Xt,Zt){var jt=Xt[0]-Zt[0]*It.k,ge=Xt[1]-Zt[1]*It.k;return jt===It.x&&ge===It.y?It:new h(It.k,jt,ge)}function ut(It){return[(+It[0][0]+ +It[1][0])/2,(+It[0][1]+ +It[1][1])/2]}function ft(It,Xt,Zt,jt){It.on("start.zoom",function(){gt(this,arguments).event(jt).start()}).on("interrupt.zoom end.zoom",function(){gt(this,arguments).event(jt).end()}).tween("zoom",function(){var ge=this,ye=arguments,Ee=gt(ge,ye).event(jt),Ie=nt.apply(ge,ye),Ae=null==Zt?ut(Ie):"function"==typeof Zt?Zt.apply(ge,ye):Zt,Ue=Math.max(Ie[1][0]-Ie[0][0],Ie[1][1]-Ie[0][1]),Ze=ge.__zoom,ei="function"==typeof Xt?Xt.apply(ge,ye):Xt,ve=H(Ze.invert(Ae).concat(Ue/Ze.k),ei.invert(Ae).concat(Ue/ei.k));return function(oi){if(1===oi)oi=ei;else{var Ct=ve(oi),Ht=Ue/Ct[2];oi=new h(Ht,Ae[0]-Ct[0]*Ht,Ae[1]-Ct[1]*Ht)}Ee.zoom(null,oi)}})}function gt(It,Xt,Zt){return!Zt&&It.__zooming||new Nt(It,Xt)}function Nt(It,Xt){this.that=It,this.args=Xt,this.active=0,this.sourceEvent=null,this.extent=nt.apply(It,Xt),this.taps=0}function ee(It,...Xt){if(V.apply(this,arguments)){var Zt=gt(this,Xt).event(It),jt=this.__zoom,ge=Math.max(X[0],Math.min(X[1],jt.k*Math.pow(2,st.apply(this,arguments)))),ye=(0,p.Z)(It);if(Zt.wheel)(Zt.mouse[0][0]!==ye[0]||Zt.mouse[0][1]!==ye[1])&&(Zt.mouse[1]=jt.invert(Zt.mouse[0]=ye)),clearTimeout(Zt.wheel);else{if(jt.k===ge)return;Zt.mouse=[ye,jt.invert(ye)],(0,t.interrupt)(this),Zt.start()}C(It),Zt.wheel=setTimeout(Ee,150),Zt.zoom("mouse",et(ue($t(jt,ge),Zt.mouse[0],Zt.mouse[1]),Zt.extent,W))}function Ee(){Zt.wheel=null,Zt.end()}}function Kt(It,...Xt){if(!U&&V.apply(this,arguments)){var Zt=gt(this,Xt,!0).event(It),jt=(0,m.Z)(It.view).on("mousemove.zoom",Ae,!0).on("mouseup.zoom",Ue,!0),ge=(0,p.Z)(It,ye),ye=It.currentTarget,Ee=It.clientX,Ie=It.clientY;(0,x.Z)(It.view),g(It),Zt.mouse=[ge,this.__zoom.invert(ge)],(0,t.interrupt)(this),Zt.start()}function Ae(Ze){if(C(Ze),!Zt.moved){var ei=Ze.clientX-Ee,ve=Ze.clientY-Ie;Zt.moved=ei*ei+ve*ve>St}Zt.event(Ze).zoom("mouse",et(ue(Zt.that.__zoom,Zt.mouse[0]=(0,p.Z)(Ze,ye),Zt.mouse[1]),Zt.extent,W))}function Ue(Ze){jt.on("mousemove.zoom mouseup.zoom",null),(0,x.D)(Ze.view,Zt.moved),C(Ze),Zt.event(Ze).end()}}function ce(It,...Xt){if(V.apply(this,arguments)){var Zt=this.__zoom,jt=(0,p.Z)(It.changedTouches?It.changedTouches[0]:It,this),ge=Zt.invert(jt),ye=Zt.k*(It.shiftKey?.5:2),Ee=et(ue($t(Zt,ye),jt,ge),nt.apply(this,Xt),W);C(It),at>0?(0,m.Z)(this).transition().duration(at).call(ft,Ee,jt,It):(0,m.Z)(this).call(Et.transform,Ee,jt,It)}}function xe(It,...Xt){if(V.apply(this,arguments)){var ye,Ee,Ie,Ae,Zt=It.touches,jt=Zt.length,ge=gt(this,Xt,It.changedTouches.length===jt).event(It);for(g(It),Ee=0;Ee<jt;++Ee)Ae=[Ae=(0,p.Z)(Ie=Zt[Ee],this),this.__zoom.invert(Ae),Ie.identifier],ge.touch0?!ge.touch1&&ge.touch0[2]!==Ae[2]&&(ge.touch1=Ae,ge.taps=0):(ge.touch0=Ae,ye=!0,ge.taps=1+!!it);it&&(it=clearTimeout(it)),ye&&(ge.taps<2&&(q=Ae[0],it=setTimeout(function(){it=null},D)),(0,t.interrupt)(this),ge.start())}}function Ge(It,...Xt){if(this.__zooming){var ye,Ee,Ie,Ae,Zt=gt(this,Xt).event(It),jt=It.changedTouches,ge=jt.length;for(C(It),ye=0;ye<ge;++ye)Ie=(0,p.Z)(Ee=jt[ye],this),Zt.touch0&&Zt.touch0[2]===Ee.identifier?Zt.touch0[0]=Ie:Zt.touch1&&Zt.touch1[2]===Ee.identifier&&(Zt.touch1[0]=Ie);if(Ee=Zt.that.__zoom,Zt.touch1){var Ue=Zt.touch0[0],Ze=Zt.touch0[1],ei=Zt.touch1[0],ve=Zt.touch1[1],oi=(oi=ei[0]-Ue[0])*oi+(oi=ei[1]-Ue[1])*oi,Ct=(Ct=ve[0]-Ze[0])*Ct+(Ct=ve[1]-Ze[1])*Ct;Ee=$t(Ee,Math.sqrt(oi/Ct)),Ie=[(Ue[0]+ei[0])/2,(Ue[1]+ei[1])/2],Ae=[(Ze[0]+ve[0])/2,(Ze[1]+ve[1])/2]}else{if(!Zt.touch0)return;Ie=Zt.touch0[0],Ae=Zt.touch0[1]}Zt.zoom("touch",et(ue(Ee,Ie,Ae),Zt.extent,W))}}function Ne(It,...Xt){if(this.__zooming){var ye,Ee,Zt=gt(this,Xt).event(It),jt=It.changedTouches,ge=jt.length;for(g(It),U&&clearTimeout(U),U=setTimeout(function(){U=null},D),ye=0;ye<ge;++ye)Ee=jt[ye],Zt.touch0&&Zt.touch0[2]===Ee.identifier?delete Zt.touch0:Zt.touch1&&Zt.touch1[2]===Ee.identifier&&delete Zt.touch1;if(Zt.touch1&&!Zt.touch0&&(Zt.touch0=Zt.touch1,delete Zt.touch1),Zt.touch0)Zt.touch0[1]=this.__zoom.invert(Zt.touch0[0]);else if(Zt.end(),2===Zt.taps&&(Ee=(0,p.Z)(Ee,this),Math.hypot(q[0]-Ee[0],q[1]-Ee[1])<Mt)){var Ie=(0,m.Z)(this).on("dblclick.zoom");Ie&&Ie.apply(this,arguments)}}}return Et.transform=function(It,Xt,Zt,jt){var ge=It.selection?It.selection():It;ge.property("__zoom",R),It!==ge?ft(It,Xt,Zt,jt):ge.interrupt().each(function(){gt(this,arguments).event(jt).start().zoom(null,"function"==typeof Xt?Xt.apply(this,arguments):Xt).end()})},Et.scaleBy=function(It,Xt,Zt,jt){Et.scaleTo(It,function(){var ge=this.__zoom.k,ye="function"==typeof Xt?Xt.apply(this,arguments):Xt;return ge*ye},Zt,jt)},Et.scaleTo=function(It,Xt,Zt,jt){Et.transform(It,function(){var ge=nt.apply(this,arguments),ye=this.__zoom,Ee=null==Zt?ut(ge):"function"==typeof Zt?Zt.apply(this,arguments):Zt,Ie=ye.invert(Ee),Ae="function"==typeof Xt?Xt.apply(this,arguments):Xt;return et(ue($t(ye,Ae),Ee,Ie),ge,W)},Zt,jt)},Et.translateBy=function(It,Xt,Zt,jt){Et.transform(It,function(){return et(this.__zoom.translate("function"==typeof Xt?Xt.apply(this,arguments):Xt,"function"==typeof Zt?Zt.apply(this,arguments):Zt),nt.apply(this,arguments),W)},null,jt)},Et.translateTo=function(It,Xt,Zt,jt,ge){Et.transform(It,function(){var ye=nt.apply(this,arguments),Ee=this.__zoom,Ie=null==jt?ut(ye):"function"==typeof jt?jt.apply(this,arguments):jt;return et(f.translate(Ie[0],Ie[1]).scale(Ee.k).translate("function"==typeof Xt?-Xt.apply(this,arguments):-Xt,"function"==typeof Zt?-Zt.apply(this,arguments):-Zt),ye,W)},jt,ge)},Nt.prototype={event:function(It){return It&&(this.sourceEvent=It),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(It,Xt){return this.mouse&&"mouse"!==It&&(this.mouse[1]=Xt.invert(this.mouse[0])),this.touch0&&"touch"!==It&&(this.touch0[1]=Xt.invert(this.touch0[0])),this.touch1&&"touch"!==It&&(this.touch1[1]=Xt.invert(this.touch1[0])),this.that.__zoom=Xt,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(It){var Xt=(0,m.Z)(this.that).datum();Q.call(It,this.that,new l(It,{sourceEvent:this.sourceEvent,target:Et,type:It,transform:this.that.__zoom,dispatch:Q}),Xt)}},Et.wheelDelta=function(It){return arguments.length?(st="function"==typeof It?It:d(+It),Et):st},Et.filter=function(It){return arguments.length?(V="function"==typeof It?It:d(!!It),Et):V},Et.touchable=function(It){return arguments.length?(K="function"==typeof It?It:d(!!It),Et):K},Et.extent=function(It){return arguments.length?(nt="function"==typeof It?It:d([[+It[0][0],+It[0][1]],[+It[1][0],+It[1][1]]]),Et):nt},Et.scaleExtent=function(It){return arguments.length?(X[0]=+It[0],X[1]=+It[1],Et):[X[0],X[1]]},Et.translateExtent=function(It){return arguments.length?(W[0][0]=+It[0][0],W[1][0]=+It[1][0],W[0][1]=+It[0][1],W[1][1]=+It[1][1],Et):[[W[0][0],W[0][1]],[W[1][0],W[1][1]]]},Et.constrain=function(It){return arguments.length?(et=It,Et):et},Et.duration=function(It){return arguments.length?(at=+It,Et):at},Et.interpolate=function(It){return arguments.length?(H=It,Et):H},Et.on=function(){var It=Q.on.apply(Q,arguments);return It===Q?Et:It},Et.clickDistance=function(It){return arguments.length?(St=(It=+It)*It,Et):Math.sqrt(St)},Et.tapDistance=function(It){return arguments.length?(Mt=+It,Et):Mt},Et}u.prototype=h.prototype},59695:(w,E,s)=>{w.exports={graphlib:s(36456),layout:s(14850),debug:s(71914),util:{time:s(11510).time,notime:s(11510).notime},version:s(28126)}},12234:(w,E,s)=>{"use strict";var c=s(45760),x=s(67365);w.exports={run:function _(t){var d="greedy"===t.graph().acyclicer?x(t,function l(h){return function(f){return h.edge(f).weight}}(t)):function m(t){var d=[],l={},h={};return c.forEach(t.nodes(),function f(u){c.has(h,u)||(h[u]=!0,l[u]=!0,c.forEach(t.outEdges(u),function(g){c.has(l,g.w)?d.push(g):f(g.w)}),delete l[u])}),d}(t);c.forEach(d,function(h){var f=t.edge(h);t.removeEdge(h),f.forwardName=h.name,f.reversed=!0,t.setEdge(h.w,h.v,f,c.uniqueId("rev"))})},undo:function p(t){c.forEach(t.edges(),function(d){var l=t.edge(d);if(l.reversed){t.removeEdge(d);var h=l.forwardName;delete l.reversed,delete l.forwardName,t.setEdge(d.w,d.v,l,h)}})}}},79999:(w,E,s)=>{var c=s(45760),x=s(11510);function m(p,t,d,l,h,f){var g=h[t][f-1],C=x.addDummyNode(p,"border",{width:0,height:0,rank:f,borderType:t},d);h[t][f]=C,p.setParent(C,l),g&&p.setEdge(g,C,{weight:1})}w.exports=function _(p){c.forEach(p.children(),function t(d){var l=p.children(d),h=p.node(d);if(l.length&&c.forEach(l,t),c.has(h,"minRank")){h.borderLeft=[],h.borderRight=[];for(var f=h.minRank,u=h.maxRank+1;f<u;++f)m(p,"borderLeft","_bl",d,h,f),m(p,"borderRight","_br",d,h,f)}})}},83870:(w,E,s)=>{"use strict";var c=s(45760);function m(f){c.forEach(f.nodes(),function(u){p(f.node(u))}),c.forEach(f.edges(),function(u){p(f.edge(u))})}function p(f){var u=f.width;f.width=f.height,f.height=u}function d(f){f.y=-f.y}function h(f){var u=f.x;f.x=f.y,f.y=u}w.exports={adjust:function x(f){var u=f.graph().rankdir.toLowerCase();("lr"===u||"rl"===u)&&m(f)},undo:function _(f){var u=f.graph().rankdir.toLowerCase();("bt"===u||"rl"===u)&&function t(f){c.forEach(f.nodes(),function(u){d(f.node(u))}),c.forEach(f.edges(),function(u){var g=f.edge(u);c.forEach(g.points,d),c.has(g,"y")&&d(g)})}(f),("lr"===u||"rl"===u)&&(function l(f){c.forEach(f.nodes(),function(u){h(f.node(u))}),c.forEach(f.edges(),function(u){var g=f.edge(u);c.forEach(g.points,h),c.has(g,"x")&&h(g)})}(f),m(f))}}},3226:w=>{function E(){var x={};x._next=x._prev=x,this._sentinel=x}function s(x){x._prev._next=x._next,x._next._prev=x._prev,delete x._next,delete x._prev}function c(x,_){if("_next"!==x&&"_prev"!==x)return _}w.exports=E,E.prototype.dequeue=function(){var x=this._sentinel,_=x._prev;if(_!==x)return s(_),_},E.prototype.enqueue=function(x){var _=this._sentinel;x._prev&&x._next&&s(x),x._next=_._next,_._next._prev=x,_._next=x,x._prev=_},E.prototype.toString=function(){for(var x=[],_=this._sentinel,m=_._prev;m!==_;)x.push(JSON.stringify(m,c)),m=m._prev;return"["+x.join(", ")+"]"}},71914:(w,E,s)=>{var c=s(45760),x=s(11510),_=s(36456).Graph;w.exports={debugOrdering:function m(p){var t=x.buildLayerMatrix(p),d=new _({compound:!0,multigraph:!0}).setGraph({});return c.forEach(p.nodes(),function(l){d.setNode(l,{label:l}),d.setParent(l,"layer"+p.node(l).rank)}),c.forEach(p.edges(),function(l){d.setEdge(l.v,l.w,{},l.name)}),c.forEach(t,function(l,h){d.setNode("layer"+h,{rank:"same"}),c.reduce(l,function(u,g){return d.setEdge(u,g,{style:"invis"}),g})}),d}}},36456:(w,E,s)=>{var c;try{c=s(85510)}catch{}c||(c=window.graphlib),w.exports=c},67365:(w,E,s)=>{var c=s(45760),x=s(36456).Graph,_=s(3226);w.exports=function p(f,u){if(f.nodeCount()<=1)return[];var g=function l(f,u){var g=new x,C=0,L=0;c.forEach(f.nodes(),function(M){g.setNode(M,{v:M,in:0,out:0})}),c.forEach(f.edges(),function(M){var F=g.edge(M.v,M.w)||0,B=u(M);g.setEdge(M.v,M.w,F+B),L=Math.max(L,g.node(M.v).out+=B),C=Math.max(C,g.node(M.w).in+=B)});var I=c.range(L+C+3).map(function(){return new _}),R=C+1;return c.forEach(g.nodes(),function(M){h(I,R,g.node(M))}),{graph:g,buckets:I,zeroIdx:R}}(f,u||m),C=function t(f,u,g){for(var R,C=[],L=u[u.length-1],I=u[0];f.nodeCount();){for(;R=I.dequeue();)d(f,u,g,R);for(;R=L.dequeue();)d(f,u,g,R);if(f.nodeCount())for(var M=u.length-2;M>0;--M)if(R=u[M].dequeue()){C=C.concat(d(f,u,g,R,!0));break}}return C}(g.graph,g.buckets,g.zeroIdx);return c.flatten(c.map(C,function(L){return f.outEdges(L.v,L.w)}),!0)};var m=c.constant(1);function d(f,u,g,C,L){var I=L?[]:void 0;return c.forEach(f.inEdges(C.v),function(R){var M=f.edge(R),F=f.node(R.v);L&&I.push({v:R.v,w:R.w}),F.out-=M,h(u,g,F)}),c.forEach(f.outEdges(C.v),function(R){var M=f.edge(R),B=f.node(R.w);B.in-=M,h(u,g,B)}),f.removeNode(C.v),I}function h(f,u,g){g.out?g.in?f[g.out-g.in+u].enqueue(g):f[f.length-1].enqueue(g):f[0].enqueue(g)}},14850:(w,E,s)=>{"use strict";var c=s(45760),x=s(12234),_=s(91496),m=s(94124),p=s(11510).normalizeRanks,t=s(60162),d=s(11510).removeEmptyRanks,l=s(1230),h=s(79999),f=s(83870),u=s(32974),g=s(78226),C=s(11510),L=s(36456).Graph;w.exports=function I(ut,ft){var gt=ft&&ft.debugTiming?C.time:C.notime;gt("layout",function(){var Nt=gt("  buildLayoutGraph",function(){return function X(ut){var ft=new L({multigraph:!0,compound:!0}),gt=ue(ut.graph());return ft.setGraph(c.merge({},B,$t(gt,F),c.pick(gt,Y))),c.forEach(ut.nodes(),function(Nt){var ee=ue(ut.node(Nt));ft.setNode(Nt,c.defaults($t(ee,V),nt)),ft.setParent(Nt,ut.parent(Nt))}),c.forEach(ut.edges(),function(Nt){var ee=ue(ut.edge(Nt));ft.setEdge(Nt,c.merge({},st,$t(ee,et),c.pick(ee,K)))}),ft}(ut)});gt("  runLayout",function(){!function R(ut,ft){ft("    makeSpaceForEdgeLabels",function(){!function W(ut){var ft=ut.graph();ft.ranksep/=2,c.forEach(ut.edges(),function(gt){var Nt=ut.edge(gt);Nt.minlen*=2,"c"!==Nt.labelpos.toLowerCase()&&("TB"===ft.rankdir||"BT"===ft.rankdir?Nt.width+=Nt.labeloffset:Nt.height+=Nt.labeloffset)})}(ut)}),ft("    removeSelfEdges",function(){!function St(ut){c.forEach(ut.edges(),function(ft){if(ft.v===ft.w){var gt=ut.node(ft.v);gt.selfEdges||(gt.selfEdges=[]),gt.selfEdges.push({e:ft,label:ut.edge(ft)}),ut.removeEdge(ft)}})}(ut)}),ft("    acyclic",function(){x.run(ut)}),ft("    nestingGraph.run",function(){l.run(ut)}),ft("    rank",function(){m(C.asNonCompoundGraph(ut))}),ft("    injectEdgeLabelProxies",function(){!function at(ut){c.forEach(ut.edges(),function(ft){var gt=ut.edge(ft);if(gt.width&&gt.height){var Nt=ut.node(ft.v),ee=ut.node(ft.w);C.addDummyNode(ut,"edge-proxy",{rank:(ee.rank-Nt.rank)/2+Nt.rank,e:ft},"_ep")}})}(ut)}),ft("    removeEmptyRanks",function(){d(ut)}),ft("    nestingGraph.cleanup",function(){l.cleanup(ut)}),ft("    normalizeRanks",function(){p(ut)}),ft("    assignRankMinMax",function(){!function H(ut){var ft=0;c.forEach(ut.nodes(),function(gt){var Nt=ut.node(gt);Nt.borderTop&&(Nt.minRank=ut.node(Nt.borderTop).rank,Nt.maxRank=ut.node(Nt.borderBottom).rank,ft=c.max(ft,Nt.maxRank))}),ut.graph().maxRank=ft}(ut)}),ft("    removeEdgeLabelProxies",function(){!function Q(ut){c.forEach(ut.nodes(),function(ft){var gt=ut.node(ft);"edge-proxy"===gt.dummy&&(ut.edge(gt.e).labelRank=gt.rank,ut.removeNode(ft))})}(ut)}),ft("    normalize.run",function(){_.run(ut)}),ft("    parentDummyChains",function(){t(ut)}),ft("    addBorderSegments",function(){h(ut)}),ft("    order",function(){u(ut)}),ft("    insertSelfEdges",function(){!function Mt(ut){var ft=C.buildLayerMatrix(ut);c.forEach(ft,function(gt){var Nt=0;c.forEach(gt,function(ee,Kt){var ce=ut.node(ee);ce.order=Kt+Nt,c.forEach(ce.selfEdges,function(xe){C.addDummyNode(ut,"selfedge",{width:xe.label.width,height:xe.label.height,rank:ce.rank,order:Kt+ ++Nt,e:xe.e,label:xe.label},"_se")}),delete ce.selfEdges})})}(ut)}),ft("    adjustCoordinateSystem",function(){f.adjust(ut)}),ft("    position",function(){g(ut)}),ft("    positionSelfEdges",function(){!function Et(ut){c.forEach(ut.nodes(),function(ft){var gt=ut.node(ft);if("selfedge"===gt.dummy){var Nt=ut.node(gt.e.v),ee=Nt.x+Nt.width/2,Kt=Nt.y,ce=gt.x-ee,xe=Nt.height/2;ut.setEdge(gt.e,gt.label),ut.removeNode(ft),gt.label.points=[{x:ee+2*ce/3,y:Kt-xe},{x:ee+5*ce/6,y:Kt-xe},{x:ee+ce,y:Kt},{x:ee+5*ce/6,y:Kt+xe},{x:ee+2*ce/3,y:Kt+xe}],gt.label.x=gt.x,gt.label.y=gt.y}})}(ut)}),ft("    removeBorderNodes",function(){!function mt(ut){c.forEach(ut.nodes(),function(ft){if(ut.children(ft).length){var gt=ut.node(ft),Nt=ut.node(gt.borderTop),ee=ut.node(gt.borderBottom),Kt=ut.node(c.last(gt.borderLeft)),ce=ut.node(c.last(gt.borderRight));gt.width=Math.abs(ce.x-Kt.x),gt.height=Math.abs(ee.y-Nt.y),gt.x=Kt.x+gt.width/2,gt.y=Nt.y+gt.height/2}}),c.forEach(ut.nodes(),function(ft){"border"===ut.node(ft).dummy&&ut.removeNode(ft)})}(ut)}),ft("    normalize.undo",function(){_.undo(ut)}),ft("    fixupEdgeLabelCoords",function(){!function U(ut){c.forEach(ut.edges(),function(ft){var gt=ut.edge(ft);if(c.has(gt,"x"))switch(("l"===gt.labelpos||"r"===gt.labelpos)&&(gt.width-=gt.labeloffset),gt.labelpos){case"l":gt.x-=gt.width/2+gt.labeloffset;break;case"r":gt.x+=gt.width/2+gt.labeloffset}})}(ut)}),ft("    undoCoordinateSystem",function(){f.undo(ut)}),ft("    translateGraph",function(){!function it(ut){var ft=Number.POSITIVE_INFINITY,gt=0,Nt=Number.POSITIVE_INFINITY,ee=0,Kt=ut.graph(),ce=Kt.marginx||0,xe=Kt.marginy||0;function Ge(Ne){var It=Ne.x,Xt=Ne.y,Zt=Ne.width,jt=Ne.height;ft=Math.min(ft,It-Zt/2),gt=Math.max(gt,It+Zt/2),Nt=Math.min(Nt,Xt-jt/2),ee=Math.max(ee,Xt+jt/2)}c.forEach(ut.nodes(),function(Ne){Ge(ut.node(Ne))}),c.forEach(ut.edges(),function(Ne){var It=ut.edge(Ne);c.has(It,"x")&&Ge(It)}),ft-=ce,Nt-=xe,c.forEach(ut.nodes(),function(Ne){var It=ut.node(Ne);It.x-=ft,It.y-=Nt}),c.forEach(ut.edges(),function(Ne){var It=ut.edge(Ne);c.forEach(It.points,function(Xt){Xt.x-=ft,Xt.y-=Nt}),c.has(It,"x")&&(It.x-=ft),c.has(It,"y")&&(It.y-=Nt)}),Kt.width=gt-ft+ce,Kt.height=ee-Nt+xe}(ut)}),ft("    assignNodeIntersects",function(){!function q(ut){c.forEach(ut.edges(),function(ft){var Kt,ce,gt=ut.edge(ft),Nt=ut.node(ft.v),ee=ut.node(ft.w);gt.points?(Kt=gt.points[0],ce=gt.points[gt.points.length-1]):(gt.points=[],Kt=ee,ce=Nt),gt.points.unshift(C.intersectRect(Nt,Kt)),gt.points.push(C.intersectRect(ee,ce))})}(ut)}),ft("    reversePoints",function(){!function D(ut){c.forEach(ut.edges(),function(ft){var gt=ut.edge(ft);gt.reversed&&gt.points.reverse()})}(ut)}),ft("    acyclic.undo",function(){x.undo(ut)})}(Nt,gt)}),gt("  updateInputGraph",function(){!function M(ut,ft){c.forEach(ut.nodes(),function(gt){var Nt=ut.node(gt),ee=ft.node(gt);Nt&&(Nt.x=ee.x,Nt.y=ee.y,ft.children(gt).length&&(Nt.width=ee.width,Nt.height=ee.height))}),c.forEach(ut.edges(),function(gt){var Nt=ut.edge(gt),ee=ft.edge(gt);Nt.points=ee.points,c.has(ee,"x")&&(Nt.x=ee.x,Nt.y=ee.y)}),ut.graph().width=ft.graph().width,ut.graph().height=ft.graph().height}(ut,Nt)})})};var F=["nodesep","edgesep","ranksep","marginx","marginy"],B={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Y=["acyclicer","ranker","rankdir","align"],V=["width","height"],nt={width:0,height:0},et=["minlen","weight","width","height","labeloffset"],st={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},K=["labelpos"];function $t(ut,ft){return c.mapValues(c.pick(ut,ft),Number)}function ue(ut){var ft={};return c.forEach(ut,function(gt,Nt){ft[Nt.toLowerCase()]=gt}),ft}},45760:(w,E,s)=>{var c;try{c={cloneDeep:s(90733),constant:s(76684),defaults:s(28800),each:s(35474),filter:s(35281),find:s(62516),flatten:s(22274),forEach:s(89851),forIn:s(41176),has:s(54842),isUndefined:s(34235),last:s(25809),map:s(19984),mapValues:s(10203),max:s(18176),merge:s(80567),min:s(29439),minBy:s(29525),now:s(31710),pick:s(16372),range:s(90361),reduce:s(81337),sortBy:s(12906),uniqueId:s(51541),values:s(90377),zipObject:s(21617)}}catch{}c||(c=window._),w.exports=c},1230:(w,E,s)=>{var c=s(45760),x=s(11510);function m(l,h,f,u,g,C,L){var I=l.children(L);if(I.length){var R=x.addBorderNode(l,"_bt"),M=x.addBorderNode(l,"_bb"),F=l.node(L);l.setParent(R,L),F.borderTop=R,l.setParent(M,L),F.borderBottom=M,c.forEach(I,function(B){m(l,h,f,u,g,C,B);var Y=l.node(B),V=Y.borderTop?Y.borderTop:B,nt=Y.borderBottom?Y.borderBottom:B,et=Y.borderTop?u:2*u,st=V!==nt?1:g-C[L]+1;l.setEdge(R,V,{weight:et,minlen:st,nestingEdge:!0}),l.setEdge(nt,M,{weight:et,minlen:st,nestingEdge:!0})}),l.parent(L)||l.setEdge(h,R,{weight:0,minlen:g+C[L]})}else L!==h&&l.setEdge(h,L,{weight:0,minlen:f})}w.exports={run:function _(l){var h=x.addDummyNode(l,"root",{},"_root"),f=function p(l){var h={};function f(u,g){var C=l.children(u);C&&C.length&&c.forEach(C,function(L){f(L,g+1)}),h[u]=g}return c.forEach(l.children(),function(u){f(u,1)}),h}(l),u=c.max(c.values(f))-1,g=2*u+1;l.graph().nestingRoot=h,c.forEach(l.edges(),function(L){l.edge(L).minlen*=g});var C=function t(l){return c.reduce(l.edges(),function(h,f){return h+l.edge(f).weight},0)}(l)+1;c.forEach(l.children(),function(L){m(l,h,g,C,u,f,L)}),l.graph().nodeRankFactor=g},cleanup:function d(l){var h=l.graph();l.removeNode(h.nestingRoot),delete h.nestingRoot,c.forEach(l.edges(),function(f){l.edge(f).nestingEdge&&l.removeEdge(f)})}}},91496:(w,E,s)=>{"use strict";var c=s(45760),x=s(11510);w.exports={run:function _(t){t.graph().dummyChains=[],c.forEach(t.edges(),function(d){!function m(t,d){var l=d.v,h=t.node(l).rank,f=d.w,u=t.node(f).rank,g=d.name,C=t.edge(d),L=C.labelRank;if(u!==h+1){var I,R,M;for(t.removeEdge(d),M=0,++h;h<u;++M,++h)C.points=[],I=x.addDummyNode(t,"edge",R={width:0,height:0,edgeLabel:C,edgeObj:d,rank:h},"_d"),h===L&&(R.width=C.width,R.height=C.height,R.dummy="edge-label",R.labelpos=C.labelpos),t.setEdge(l,I,{weight:C.weight},g),0===M&&t.graph().dummyChains.push(I),l=I;t.setEdge(l,f,{weight:C.weight},g)}}(t,d)})},undo:function p(t){c.forEach(t.graph().dummyChains,function(d){var f,l=t.node(d),h=l.edgeLabel;for(t.setEdge(l.edgeObj,h);l.dummy;)f=t.successors(d)[0],t.removeNode(d),h.points.push({x:l.x,y:l.y}),"edge-label"===l.dummy&&(h.x=l.x,h.y=l.y,h.width=l.width,h.height=l.height),l=t.node(d=f)})}}},33034:(w,E,s)=>{var c=s(45760);w.exports=function x(_,m,p){var d,t={};c.forEach(p,function(l){for(var f,u,h=_.parent(l);h;){if((f=_.parent(h))?(u=t[f],t[f]=h):(u=d,d=h),u&&u!==h)return void m.setEdge(u,h);h=f}})}},81323:(w,E,s)=>{var c=s(45760);w.exports=function x(_,m){return c.map(m,function(p){var t=_.inEdges(p);if(t.length){var d=c.reduce(t,function(l,h){var f=_.edge(h),u=_.node(h.v);return{sum:l.sum+f.weight*u.order,weight:l.weight+f.weight}},{sum:0,weight:0});return{v:p,barycenter:d.sum/d.weight,weight:d.weight}}return{v:p}})}},1686:(w,E,s)=>{var c=s(45760),x=s(36456).Graph;w.exports=function _(p,t,d){var l=function m(p){for(var t;p.hasNode(t=c.uniqueId("_root")););return t}(p),h=new x({compound:!0}).setGraph({root:l}).setDefaultNodeLabel(function(f){return p.node(f)});return c.forEach(p.nodes(),function(f){var u=p.node(f),g=p.parent(f);(u.rank===t||u.minRank<=t&&t<=u.maxRank)&&(h.setNode(f),h.setParent(f,g||l),c.forEach(p[d](f),function(C){var L=C.v===f?C.w:C.v,I=h.edge(L,f),R=c.isUndefined(I)?0:I.weight;h.setEdge(L,f,{weight:p.edge(C).weight+R})}),c.has(u,"minRank")&&h.setNode(f,{borderLeft:u.borderLeft[t],borderRight:u.borderRight[t]}))}),h}},18796:(w,E,s)=>{"use strict";var c=s(45760);function _(m,p,t){for(var d=c.zipObject(t,c.map(t,function(C,L){return L})),l=c.flatten(c.map(p,function(C){return c.sortBy(c.map(m.outEdges(C),function(L){return{pos:d[L.w],weight:m.edge(L).weight}}),"pos")}),!0),h=1;h<t.length;)h<<=1;var f=2*h-1;h-=1;var u=c.map(new Array(f),function(){return 0}),g=0;return c.forEach(l.forEach(function(C){var L=C.pos+h;u[L]+=C.weight;for(var I=0;L>0;)L%2&&(I+=u[L+1]),u[L=L-1>>1]+=C.weight;g+=C.weight*I})),g}w.exports=function x(m,p){for(var t=0,d=1;d<p.length;++d)t+=_(m,p[d-1],p[d]);return t}},32974:(w,E,s)=>{"use strict";var c=s(45760),x=s(49402),_=s(18796),m=s(61057),p=s(1686),t=s(33034),d=s(36456).Graph,l=s(11510);function f(C,L,I){return c.map(L,function(R){return p(C,R,I)})}function u(C,L){var I=new d;c.forEach(C,function(R){var M=R.graph().root,F=m(R,M,I,L);c.forEach(F.vs,function(B,Y){R.node(B).order=Y}),t(R,I,F.vs)})}function g(C,L){c.forEach(L,function(I){c.forEach(I,function(R,M){C.node(R).order=M})})}w.exports=function h(C){var L=l.maxRank(C),I=f(C,c.range(1,L+1),"inEdges"),R=f(C,c.range(L-1,-1,-1),"outEdges"),M=x(C);g(C,M);for(var B,F=Number.POSITIVE_INFINITY,Y=0,V=0;V<4;++Y,++V){u(Y%2?I:R,Y%4>=2),M=l.buildLayerMatrix(C);var nt=_(C,M);nt<F&&(V=0,B=c.cloneDeep(M),F=nt)}g(C,B)}},49402:(w,E,s)=>{"use strict";var c=s(45760);w.exports=function x(_){var m={},p=c.filter(_.nodes(),function(f){return!_.children(f).length}),t=c.max(c.map(p,function(f){return _.node(f).rank})),d=c.map(c.range(t+1),function(){return[]}),h=c.sortBy(p,function(f){return _.node(f).rank});return c.forEach(h,function l(f){if(!c.has(m,f)){m[f]=!0;var u=_.node(f);d[u.rank].push(f),c.forEach(_.successors(f),l)}}),d}},83826:(w,E,s)=>{"use strict";var c=s(45760);w.exports=function x(p,t){var d={};return c.forEach(p,function(h,f){var u=d[h.v]={indegree:0,in:[],out:[],vs:[h.v],i:f};c.isUndefined(h.barycenter)||(u.barycenter=h.barycenter,u.weight=h.weight)}),c.forEach(t.edges(),function(h){var f=d[h.v],u=d[h.w];!c.isUndefined(f)&&!c.isUndefined(u)&&(u.indegree++,f.out.push(d[h.w]))}),function _(p){var t=[];function d(f){return function(u){u.merged||(c.isUndefined(u.barycenter)||c.isUndefined(f.barycenter)||u.barycenter>=f.barycenter)&&function m(p,t){var d=0,l=0;p.weight&&(d+=p.barycenter*p.weight,l+=p.weight),t.weight&&(d+=t.barycenter*t.weight,l+=t.weight),p.vs=t.vs.concat(p.vs),p.barycenter=d/l,p.weight=l,p.i=Math.min(t.i,p.i),t.merged=!0}(f,u)}}function l(f){return function(u){u.in.push(f),0==--u.indegree&&p.push(u)}}for(;p.length;){var h=p.pop();t.push(h),c.forEach(h.in.reverse(),d(h)),c.forEach(h.out,l(h))}return c.map(c.filter(t,function(f){return!f.merged}),function(f){return c.pick(f,["vs","i","barycenter","weight"])})}(c.filter(d,function(h){return!h.indegree}))}},61057:(w,E,s)=>{var c=s(45760),x=s(81323),_=s(83826),m=s(93803);w.exports=function p(l,h,f,u){var g=l.children(h),C=l.node(h),L=C?C.borderLeft:void 0,I=C?C.borderRight:void 0,R={};L&&(g=c.filter(g,function(nt){return nt!==L&&nt!==I}));var M=x(l,g);c.forEach(M,function(nt){if(l.children(nt.v).length){var et=p(l,nt.v,f,u);R[nt.v]=et,c.has(et,"barycenter")&&function d(l,h){c.isUndefined(l.barycenter)?(l.barycenter=h.barycenter,l.weight=h.weight):(l.barycenter=(l.barycenter*l.weight+h.barycenter*h.weight)/(l.weight+h.weight),l.weight+=h.weight)}(nt,et)}});var F=_(M,f);!function t(l,h){c.forEach(l,function(f){f.vs=c.flatten(f.vs.map(function(u){return h[u]?h[u].vs:u}),!0)})}(F,R);var B=m(F,u);if(L&&(B.vs=c.flatten([L,B.vs,I],!0),l.predecessors(L).length)){var Y=l.node(l.predecessors(L)[0]),V=l.node(l.predecessors(I)[0]);c.has(B,"barycenter")||(B.barycenter=0,B.weight=0),B.barycenter=(B.barycenter*B.weight+Y.order+V.order)/(B.weight+2),B.weight+=2}return B}},93803:(w,E,s)=>{var c=s(45760),x=s(11510);function m(t,d,l){for(var h;d.length&&(h=c.last(d)).i<=l;)d.pop(),t.push(h.vs),l++;return l}w.exports=function _(t,d){var l=x.partition(t,function(R){return c.has(R,"barycenter")}),h=l.lhs,f=c.sortBy(l.rhs,function(R){return-R.i}),u=[],g=0,C=0,L=0;h.sort(function p(t){return function(d,l){return d.barycenter<l.barycenter?-1:d.barycenter>l.barycenter?1:t?l.i-d.i:d.i-l.i}}(!!d)),L=m(u,f,L),c.forEach(h,function(R){L+=R.vs.length,u.push(R.vs),g+=R.barycenter*R.weight,C+=R.weight,L=m(u,f,L)});var I={vs:c.flatten(u,!0)};return C&&(I.barycenter=g/C,I.weight=C),I}},60162:(w,E,s)=>{var c=s(45760);w.exports=function x(p){var t=function m(p){var t={},d=0;return c.forEach(p.children(),function l(h){var f=d;c.forEach(p.children(h),l),t[h]={low:f,lim:d++}}),t}(p);c.forEach(p.graph().dummyChains,function(d){for(var l=p.node(d),h=l.edgeObj,f=function _(p,t,d,l){var C,L,h=[],f=[],u=Math.min(t[d].low,t[l].low),g=Math.max(t[d].lim,t[l].lim);C=d;do{C=p.parent(C),h.push(C)}while(C&&(t[C].low>u||g>t[C].lim));for(L=C,C=l;(C=p.parent(C))!==L;)f.push(C);return{path:h.concat(f.reverse()),lca:L}}(p,t,h.v,h.w),u=f.path,g=f.lca,C=0,L=u[C],I=!0;d!==h.w;){if(l=p.node(d),I){for(;(L=u[C])!==g&&p.node(L).maxRank<l.rank;)C++;L===g&&(I=!1)}if(!I){for(;C<u.length-1&&p.node(L=u[C+1]).minRank<=l.rank;)C++;L=u[C]}p.setParent(d,L),d=p.successors(d)[0]}})}},54058:(w,E,s)=>{"use strict";var c=s(45760),x=s(36456).Graph,_=s(11510);function m(F,B){var Y={};return c.reduce(B,function V(nt,et){var st=0,K=0,X=nt.length,W=c.last(et);return c.forEach(et,function(at,H){var Q=function t(F,B){if(F.node(B).dummy)return c.find(F.predecessors(B),function(Y){return F.node(Y).dummy})}(F,at),it=Q?F.node(Q).order:X;(Q||at===W)&&(c.forEach(et.slice(K,H+1),function(q){c.forEach(F.predecessors(q),function(U){var D=F.node(U),mt=D.order;(mt<st||it<mt)&&(!D.dummy||!F.node(q).dummy)&&d(Y,U,q)})}),K=H+1,st=it)}),et}),Y}function p(F,B){var Y={};function V(et,st,K,X,W){var at;c.forEach(c.range(st,K),function(H){F.node(at=et[H]).dummy&&c.forEach(F.predecessors(at),function(Q){var it=F.node(Q);it.dummy&&(it.order<X||it.order>W)&&d(Y,Q,at)})})}return c.reduce(B,function nt(et,st){var X,K=-1,W=0;return c.forEach(st,function(at,H){if("border"===F.node(at).dummy){var Q=F.predecessors(at);Q.length&&(X=F.node(Q[0]).order,V(st,W,H,K,X),W=H,K=X)}V(st,W,st.length,X,et.length)}),st}),Y}function d(F,B,Y){if(B>Y){var V=B;B=Y,Y=V}var nt=F[B];nt||(F[B]=nt={}),nt[Y]=!0}function l(F,B,Y){if(B>Y){var V=B;B=Y,Y=V}return c.has(F[B],Y)}function h(F,B,Y,V){var nt={},et={},st={};return c.forEach(B,function(K){c.forEach(K,function(X,W){nt[X]=X,et[X]=X,st[X]=W})}),c.forEach(B,function(K){var X=-1;c.forEach(K,function(W){var at=V(W);if(at.length)for(var H=((at=c.sortBy(at,function(U){return st[U]})).length-1)/2,Q=Math.floor(H),it=Math.ceil(H);Q<=it;++Q){var q=at[Q];et[W]===W&&X<st[q]&&!l(Y,W,q)&&(et[q]=W,et[W]=nt[W]=nt[q],X=st[q])}})}),{root:nt,align:et}}function f(F,B,Y,V,nt){var et={},st=function u(F,B,Y,V){var nt=new x,et=F.graph(),st=function R(F,B,Y){return function(V,nt,et){var W,st=V.node(nt),K=V.node(et),X=0;if(X+=st.width/2,c.has(st,"labelpos"))switch(st.labelpos.toLowerCase()){case"l":W=-st.width/2;break;case"r":W=st.width/2}if(W&&(X+=Y?W:-W),W=0,X+=(st.dummy?B:F)/2,X+=(K.dummy?B:F)/2,X+=K.width/2,c.has(K,"labelpos"))switch(K.labelpos.toLowerCase()){case"l":W=K.width/2;break;case"r":W=-K.width/2}return W&&(X+=Y?W:-W),W=0,X}}(et.nodesep,et.edgesep,V);return c.forEach(B,function(K){var X;c.forEach(K,function(W){var at=Y[W];if(nt.setNode(at),X){var H=Y[X],Q=nt.edge(H,at);nt.setEdge(H,at,Math.max(st(F,W,X),Q||0))}X=W})}),nt}(F,B,Y,nt),K=nt?"borderLeft":"borderRight";function X(H,Q){for(var it=st.nodes(),q=it.pop(),U={};q;)U[q]?H(q):(U[q]=!0,it.push(q),it=it.concat(Q(q))),q=it.pop()}return X(function W(H){et[H]=st.inEdges(H).reduce(function(Q,it){return Math.max(Q,et[it.v]+st.edge(it))},0)},st.predecessors.bind(st)),X(function at(H){var Q=st.outEdges(H).reduce(function(q,U){return Math.min(q,et[U.w]-st.edge(U))},Number.POSITIVE_INFINITY),it=F.node(H);Q!==Number.POSITIVE_INFINITY&&it.borderType!==K&&(et[H]=Math.max(et[H],Q))},st.successors.bind(st)),c.forEach(V,function(H){et[H]=et[Y[H]]}),et}function g(F,B){return c.minBy(c.values(B),function(Y){var V=Number.NEGATIVE_INFINITY,nt=Number.POSITIVE_INFINITY;return c.forIn(Y,function(et,st){var K=function M(F,B){return F.node(B).width}(F,st)/2;V=Math.max(et+K,V),nt=Math.min(et-K,nt)}),V-nt})}function C(F,B){var Y=c.values(B),V=c.min(Y),nt=c.max(Y);c.forEach(["u","d"],function(et){c.forEach(["l","r"],function(st){var W,K=et+st,X=F[K];if(X!==B){var at=c.values(X);(W="l"===st?V-c.min(at):nt-c.max(at))&&(F[K]=c.mapValues(X,function(H){return H+W}))}})})}function L(F,B){return c.mapValues(F.ul,function(Y,V){if(B)return F[B.toLowerCase()][V];var nt=c.sortBy(c.map(F,V));return(nt[1]+nt[2])/2})}w.exports={positionX:function I(F){var nt,B=_.buildLayerMatrix(F),Y=c.merge(m(F,B),p(F,B)),V={};c.forEach(["u","d"],function(st){nt="u"===st?B:c.values(B).reverse(),c.forEach(["l","r"],function(K){"r"===K&&(nt=c.map(nt,function(H){return c.values(H).reverse()}));var X=("u"===st?F.predecessors:F.successors).bind(F),W=h(0,nt,Y,X),at=f(F,nt,W.root,W.align,"r"===K);"r"===K&&(at=c.mapValues(at,function(H){return-H})),V[st+K]=at})});var et=g(F,V);return C(V,et),L(V,F.graph().align)},findType1Conflicts:m,findType2Conflicts:p,addConflict:d,hasConflict:l,verticalAlignment:h,horizontalCompaction:f,alignCoordinates:C,findSmallestWidthAlignment:g,balance:L}},78226:(w,E,s)=>{"use strict";var c=s(45760),x=s(11510),_=s(54058).positionX;w.exports=function m(t){(function p(t){var d=x.buildLayerMatrix(t),l=t.graph().ranksep,h=0;c.forEach(d,function(f){var u=c.max(c.map(f,function(g){return t.node(g).height}));c.forEach(f,function(g){t.node(g).y=h+u/2}),h+=u+l})})(t=x.asNonCompoundGraph(t)),c.forEach(_(t),function(d,l){t.node(l).x=d})}},96632:(w,E,s)=>{"use strict";var c=s(45760),x=s(36456).Graph,_=s(1916).slack;function p(l,h){return c.forEach(l.nodes(),function f(u){c.forEach(h.nodeEdges(u),function(g){var C=g.v,L=u===C?g.w:C;!l.hasNode(L)&&!_(h,g)&&(l.setNode(L,{}),l.setEdge(u,L,{}),f(L))})}),l.nodeCount()}function t(l,h){return c.minBy(h.edges(),function(f){if(l.hasNode(f.v)!==l.hasNode(f.w))return _(h,f)})}function d(l,h,f){c.forEach(l.nodes(),function(u){h.node(u).rank+=f})}w.exports=function m(l){var g,C,h=new x({directed:!1}),f=l.nodes()[0],u=l.nodeCount();for(h.setNode(f,{});p(h,l)<u;)g=t(h,l),C=h.hasNode(g.v)?_(l,g):-_(l,g),d(h,l,C);return h}},94124:(w,E,s)=>{"use strict";var x=s(1916).longestPath,_=s(96632),m=s(63804);w.exports=function p(h){switch(h.graph().ranker){case"network-simplex":default:!function l(h){m(h)}(h);break;case"tight-tree":!function d(h){x(h),_(h)}(h);break;case"longest-path":t(h)}};var t=x},63804:(w,E,s)=>{"use strict";var c=s(45760),x=s(96632),_=s(1916).slack,m=s(1916).longestPath,p=s(36456).alg.preorder,t=s(36456).alg.postorder,d=s(11510).simplify;function l(Y){Y=d(Y),m(Y);var nt,V=x(Y);for(g(V),h(V,Y);nt=L(V);)R(V,Y,nt,I(V,Y,nt))}function h(Y,V){var nt=t(Y,Y.nodes());nt=nt.slice(0,nt.length-1),c.forEach(nt,function(et){!function f(Y,V,nt){var et=Y.node(nt);Y.edge(nt,et.parent).cutvalue=u(Y,V,nt)}(Y,V,et)})}function u(Y,V,nt){var st=Y.node(nt).parent,K=!0,X=V.edge(nt,st),W=0;return X||(K=!1,X=V.edge(st,nt)),W=X.weight,c.forEach(V.nodeEdges(nt),function(at){var H=at.v===nt,Q=H?at.w:at.v;if(Q!==st){var it=H===K,q=V.edge(at).weight;if(W+=it?q:-q,function F(Y,V,nt){return Y.hasEdge(V,nt)}(Y,nt,Q)){var U=Y.edge(nt,Q).cutvalue;W+=it?-U:U}}}),W}function g(Y,V){arguments.length<2&&(V=Y.nodes()[0]),C(Y,{},1,V)}function C(Y,V,nt,et,st){var K=nt,X=Y.node(et);return V[et]=!0,c.forEach(Y.neighbors(et),function(W){c.has(V,W)||(nt=C(Y,V,nt,W,et))}),X.low=K,X.lim=nt++,st?X.parent=st:delete X.parent,nt}function L(Y){return c.find(Y.edges(),function(V){return Y.edge(V).cutvalue<0})}function I(Y,V,nt){var et=nt.v,st=nt.w;V.hasEdge(et,st)||(et=nt.w,st=nt.v);var K=Y.node(et),X=Y.node(st),W=K,at=!1;K.lim>X.lim&&(W=X,at=!0);var H=c.filter(V.edges(),function(Q){return at===B(0,Y.node(Q.v),W)&&at!==B(0,Y.node(Q.w),W)});return c.minBy(H,function(Q){return _(V,Q)})}function R(Y,V,nt,et){Y.removeEdge(nt.v,nt.w),Y.setEdge(et.v,et.w,{}),g(Y),h(Y,V),function M(Y,V){var nt=c.find(Y.nodes(),function(st){return!V.node(st).parent}),et=p(Y,nt);et=et.slice(1),c.forEach(et,function(st){var K=Y.node(st).parent,X=V.edge(st,K),W=!1;X||(X=V.edge(K,st),W=!0),V.node(st).rank=V.node(K).rank+(W?X.minlen:-X.minlen)})}(Y,V)}function B(Y,V,nt){return nt.low<=V.lim&&V.lim<=nt.lim}w.exports=l,l.initLowLimValues=g,l.initCutValues=h,l.calcCutValue=u,l.leaveEdge=L,l.enterEdge=I,l.exchangeEdges=R},1916:(w,E,s)=>{"use strict";var c=s(45760);w.exports={longestPath:function x(m){var p={};c.forEach(m.sources(),function t(d){var l=m.node(d);if(c.has(p,d))return l.rank;p[d]=!0;var h=c.min(c.map(m.outEdges(d),function(f){return t(f.w)-m.edge(f).minlen}));return(h===Number.POSITIVE_INFINITY||null==h)&&(h=0),l.rank=h})},slack:function _(m,p){return m.node(p.w).rank-m.node(p.v).rank-m.edge(p).minlen}}},11510:(w,E,s)=>{"use strict";var c=s(45760),x=s(36456).Graph;function _(M,F,B,Y){var V;do{V=c.uniqueId(Y)}while(M.hasNode(V));return B.dummy=F,M.setNode(V,B),V}function C(M){return c.max(c.map(M.nodes(),function(F){var B=M.node(F).rank;if(!c.isUndefined(B))return B}))}w.exports={addDummyNode:_,simplify:function m(M){var F=(new x).setGraph(M.graph());return c.forEach(M.nodes(),function(B){F.setNode(B,M.node(B))}),c.forEach(M.edges(),function(B){var Y=F.edge(B.v,B.w)||{weight:0,minlen:1},V=M.edge(B);F.setEdge(B.v,B.w,{weight:Y.weight+V.weight,minlen:Math.max(Y.minlen,V.minlen)})}),F},asNonCompoundGraph:function p(M){var F=new x({multigraph:M.isMultigraph()}).setGraph(M.graph());return c.forEach(M.nodes(),function(B){M.children(B).length||F.setNode(B,M.node(B))}),c.forEach(M.edges(),function(B){F.setEdge(B,M.edge(B))}),F},successorWeights:function t(M){var F=c.map(M.nodes(),function(B){var Y={};return c.forEach(M.outEdges(B),function(V){Y[V.w]=(Y[V.w]||0)+M.edge(V).weight}),Y});return c.zipObject(M.nodes(),F)},predecessorWeights:function d(M){var F=c.map(M.nodes(),function(B){var Y={};return c.forEach(M.inEdges(B),function(V){Y[V.v]=(Y[V.v]||0)+M.edge(V).weight}),Y});return c.zipObject(M.nodes(),F)},intersectRect:function l(M,F){var K,X,B=M.x,Y=M.y,V=F.x-B,nt=F.y-Y,et=M.width/2,st=M.height/2;if(!V&&!nt)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(nt)*et>Math.abs(V)*st?(nt<0&&(st=-st),K=st*V/nt,X=st):(V<0&&(et=-et),K=et,X=et*nt/V),{x:B+K,y:Y+X}},buildLayerMatrix:function h(M){var F=c.map(c.range(C(M)+1),function(){return[]});return c.forEach(M.nodes(),function(B){var Y=M.node(B),V=Y.rank;c.isUndefined(V)||(F[V][Y.order]=B)}),F},normalizeRanks:function f(M){var F=c.min(c.map(M.nodes(),function(B){return M.node(B).rank}));c.forEach(M.nodes(),function(B){var Y=M.node(B);c.has(Y,"rank")&&(Y.rank-=F)})},removeEmptyRanks:function u(M){var F=c.min(c.map(M.nodes(),function(nt){return M.node(nt).rank})),B=[];c.forEach(M.nodes(),function(nt){var et=M.node(nt).rank-F;B[et]||(B[et]=[]),B[et].push(nt)});var Y=0,V=M.graph().nodeRankFactor;c.forEach(B,function(nt,et){c.isUndefined(nt)&&et%V!=0?--Y:Y&&c.forEach(nt,function(st){M.node(st).rank+=Y})})},addBorderNode:function g(M,F,B,Y){var V={width:0,height:0};return arguments.length>=4&&(V.rank=B,V.order=Y),_(M,"border",V,F)},maxRank:C,partition:function L(M,F){var B={lhs:[],rhs:[]};return c.forEach(M,function(Y){F(Y)?B.lhs.push(Y):B.rhs.push(Y)}),B},time:function I(M,F){var B=c.now();try{return F()}finally{console.log(M+" time: "+(c.now()-B)+"ms")}},notime:function R(M,F){return F()}}},28126:w=>{w.exports="0.8.5"},85510:(w,E,s)=>{var c=s(51838);w.exports={Graph:c.Graph,json:s(21088),alg:s(83430),version:c.version}},86730:(w,E,s)=>{var c=s(79138);w.exports=function x(_){var t,m={},p=[];function d(l){c.has(m,l)||(m[l]=!0,t.push(l),c.each(_.successors(l),d),c.each(_.predecessors(l),d))}return c.each(_.nodes(),function(l){t=[],d(l),t.length&&p.push(t)}),p}},22163:(w,E,s)=>{var c=s(79138);function _(m,p,t,d,l,h){c.has(d,p)||(d[p]=!0,t||h.push(p),c.each(l(p),function(f){_(m,f,t,d,l,h)}),t&&h.push(p))}w.exports=function x(m,p,t){c.isArray(p)||(p=[p]);var d=(m.isDirected()?m.successors:m.neighbors).bind(m),l=[],h={};return c.each(p,function(f){if(!m.hasNode(f))throw new Error("Graph does not have node: "+f);_(m,f,"post"===t,h,d,l)}),l}},25668:(w,E,s)=>{var c=s(61718),x=s(79138);w.exports=function _(m,p,t){return x.transform(m.nodes(),function(d,l){d[l]=c(m,l,p,t)},{})}},61718:(w,E,s)=>{var c=s(79138),x=s(31919);w.exports=function m(t,d,l,h){return function p(t,d,l,h){var g,C,f={},u=new x,L=function(I){var R=I.v!==g?I.v:I.w,M=f[R],F=l(I),B=C.distance+F;if(F<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+I+" Weight: "+F);B<M.distance&&(M.distance=B,M.predecessor=g,u.decrease(R,B))};for(t.nodes().forEach(function(I){var R=I===d?0:Number.POSITIVE_INFINITY;f[I]={distance:R},u.add(I,R)});u.size()>0&&(g=u.removeMin(),(C=f[g]).distance!==Number.POSITIVE_INFINITY);)h(g).forEach(L);return f}(t,String(d),l||_,h||function(f){return t.outEdges(f)})};var _=c.constant(1)},9611:(w,E,s)=>{var c=s(79138),x=s(73585);w.exports=function _(m){return c.filter(x(m),function(p){return p.length>1||1===p.length&&m.hasEdge(p[0],p[0])})}},22881:(w,E,s)=>{var c=s(79138);w.exports=function _(p,t,d){return function m(p,t,d){var l={},h=p.nodes();return h.forEach(function(f){l[f]={},l[f][f]={distance:0},h.forEach(function(u){f!==u&&(l[f][u]={distance:Number.POSITIVE_INFINITY})}),d(f).forEach(function(u){var g=u.v===f?u.w:u.v,C=t(u);l[f][g]={distance:C,predecessor:f}})}),h.forEach(function(f){var u=l[f];h.forEach(function(g){var C=l[g];h.forEach(function(L){var R=u[L],M=C[L],F=C[f].distance+R.distance;F<M.distance&&(M.distance=F,M.predecessor=R.predecessor)})})}),l}(p,t||x,d||function(l){return p.outEdges(l)})};var x=c.constant(1)},83430:(w,E,s)=>{w.exports={components:s(86730),dijkstra:s(61718),dijkstraAll:s(25668),findCycles:s(9611),floydWarshall:s(22881),isAcyclic:s(46693),postorder:s(46694),preorder:s(5330),prim:s(46823),tarjan:s(73585),topsort:s(52180)}},46693:(w,E,s)=>{var c=s(52180);w.exports=function x(_){try{c(_)}catch(m){if(m instanceof c.CycleException)return!1;throw m}return!0}},46694:(w,E,s)=>{var c=s(22163);w.exports=function x(_,m){return c(_,m,"post")}},5330:(w,E,s)=>{var c=s(22163);w.exports=function x(_,m){return c(_,m,"pre")}},46823:(w,E,s)=>{var c=s(79138),x=s(66568),_=s(31919);w.exports=function m(p,t){var f,d=new x,l={},h=new _;function u(C){var L=C.v===f?C.w:C.v,I=h.priority(L);if(void 0!==I){var R=t(C);R<I&&(l[L]=f,h.decrease(L,R))}}if(0===p.nodeCount())return d;c.each(p.nodes(),function(C){h.add(C,Number.POSITIVE_INFINITY),d.setNode(C)}),h.decrease(p.nodes()[0],0);for(var g=!1;h.size()>0;){if(f=h.removeMin(),c.has(l,f))d.setEdge(f,l[f]);else{if(g)throw new Error("Input graph is not connected: "+p);g=!0}p.nodeEdges(f).forEach(u)}return d}},73585:(w,E,s)=>{var c=s(79138);w.exports=function x(_){var m=0,p=[],t={},d=[];function l(h){var f=t[h]={onStack:!0,lowlink:m,index:m++};if(p.push(h),_.successors(h).forEach(function(C){c.has(t,C)?t[C].onStack&&(f.lowlink=Math.min(f.lowlink,t[C].index)):(l(C),f.lowlink=Math.min(f.lowlink,t[C].lowlink))}),f.lowlink===f.index){var g,u=[];do{g=p.pop(),t[g].onStack=!1,u.push(g)}while(h!==g);d.push(u)}}return _.nodes().forEach(function(h){c.has(t,h)||l(h)}),d}},52180:(w,E,s)=>{var c=s(79138);function x(m){var p={},t={},d=[];if(c.each(m.sinks(),function l(h){if(c.has(t,h))throw new _;c.has(p,h)||(t[h]=!0,p[h]=!0,c.each(m.predecessors(h),l),delete t[h],d.push(h))}),c.size(p)!==m.nodeCount())throw new _;return d}function _(){}w.exports=x,x.CycleException=_,_.prototype=new Error},31919:(w,E,s)=>{var c=s(79138);function x(){this._arr=[],this._keyIndices={}}w.exports=x,x.prototype.size=function(){return this._arr.length},x.prototype.keys=function(){return this._arr.map(function(_){return _.key})},x.prototype.has=function(_){return c.has(this._keyIndices,_)},x.prototype.priority=function(_){var m=this._keyIndices[_];if(void 0!==m)return this._arr[m].priority},x.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},x.prototype.add=function(_,m){var p=this._keyIndices;if(_=String(_),!c.has(p,_)){var t=this._arr,d=t.length;return p[_]=d,t.push({key:_,priority:m}),this._decrease(d),!0}return!1},x.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var _=this._arr.pop();return delete this._keyIndices[_.key],this._heapify(0),_.key},x.prototype.decrease=function(_,m){var p=this._keyIndices[_];if(m>this._arr[p].priority)throw new Error("New priority is greater than current priority. Key: "+_+" Old: "+this._arr[p].priority+" New: "+m);this._arr[p].priority=m,this._decrease(p)},x.prototype._heapify=function(_){var m=this._arr,p=2*_,t=p+1,d=_;p<m.length&&(d=m[p].priority<m[d].priority?p:d,t<m.length&&(d=m[t].priority<m[d].priority?t:d),d!==_&&(this._swap(_,d),this._heapify(d)))},x.prototype._decrease=function(_){for(var t,m=this._arr,p=m[_].priority;0!==_&&!(m[t=_>>1].priority<p);)this._swap(_,t),_=t},x.prototype._swap=function(_,m){var p=this._arr,t=this._keyIndices,d=p[_],l=p[m];p[_]=l,p[m]=d,t[l.key]=_,t[d.key]=m}},66568:(w,E,s)=>{"use strict";var c=s(79138);w.exports=p;var _="\0";function p(u){this._isDirected=!c.has(u,"directed")||u.directed,this._isMultigraph=!!c.has(u,"multigraph")&&u.multigraph,this._isCompound=!!c.has(u,"compound")&&u.compound,this._label=void 0,this._defaultNodeLabelFn=c.constant(void 0),this._defaultEdgeLabelFn=c.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[_]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function t(u,g){u[g]?u[g]++:u[g]=1}function d(u,g){--u[g]||delete u[g]}function l(u,g,C,L){var I=""+g,R=""+C;if(!u&&I>R){var M=I;I=R,R=M}return I+"\x01"+R+"\x01"+(c.isUndefined(L)?"\0":L)}function h(u,g,C,L){var I=""+g,R=""+C;if(!u&&I>R){var M=I;I=R,R=M}var F={v:I,w:R};return L&&(F.name=L),F}function f(u,g){return l(u,g.v,g.w,g.name)}p.prototype._nodeCount=0,p.prototype._edgeCount=0,p.prototype.isDirected=function(){return this._isDirected},p.prototype.isMultigraph=function(){return this._isMultigraph},p.prototype.isCompound=function(){return this._isCompound},p.prototype.setGraph=function(u){return this._label=u,this},p.prototype.graph=function(){return this._label},p.prototype.setDefaultNodeLabel=function(u){return c.isFunction(u)||(u=c.constant(u)),this._defaultNodeLabelFn=u,this},p.prototype.nodeCount=function(){return this._nodeCount},p.prototype.nodes=function(){return c.keys(this._nodes)},p.prototype.sources=function(){var u=this;return c.filter(this.nodes(),function(g){return c.isEmpty(u._in[g])})},p.prototype.sinks=function(){var u=this;return c.filter(this.nodes(),function(g){return c.isEmpty(u._out[g])})},p.prototype.setNodes=function(u,g){var C=arguments,L=this;return c.each(u,function(I){C.length>1?L.setNode(I,g):L.setNode(I)}),this},p.prototype.setNode=function(u,g){return c.has(this._nodes,u)?(arguments.length>1&&(this._nodes[u]=g),this):(this._nodes[u]=arguments.length>1?g:this._defaultNodeLabelFn(u),this._isCompound&&(this._parent[u]=_,this._children[u]={},this._children[_][u]=!0),this._in[u]={},this._preds[u]={},this._out[u]={},this._sucs[u]={},++this._nodeCount,this)},p.prototype.node=function(u){return this._nodes[u]},p.prototype.hasNode=function(u){return c.has(this._nodes,u)},p.prototype.removeNode=function(u){var g=this;if(c.has(this._nodes,u)){var C=function(L){g.removeEdge(g._edgeObjs[L])};delete this._nodes[u],this._isCompound&&(this._removeFromParentsChildList(u),delete this._parent[u],c.each(this.children(u),function(L){g.setParent(L)}),delete this._children[u]),c.each(c.keys(this._in[u]),C),delete this._in[u],delete this._preds[u],c.each(c.keys(this._out[u]),C),delete this._out[u],delete this._sucs[u],--this._nodeCount}return this},p.prototype.setParent=function(u,g){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(c.isUndefined(g))g=_;else{for(var C=g+="";!c.isUndefined(C);C=this.parent(C))if(C===u)throw new Error("Setting "+g+" as parent of "+u+" would create a cycle");this.setNode(g)}return this.setNode(u),this._removeFromParentsChildList(u),this._parent[u]=g,this._children[g][u]=!0,this},p.prototype._removeFromParentsChildList=function(u){delete this._children[this._parent[u]][u]},p.prototype.parent=function(u){if(this._isCompound){var g=this._parent[u];if(g!==_)return g}},p.prototype.children=function(u){if(c.isUndefined(u)&&(u=_),this._isCompound){var g=this._children[u];if(g)return c.keys(g)}else{if(u===_)return this.nodes();if(this.hasNode(u))return[]}},p.prototype.predecessors=function(u){var g=this._preds[u];if(g)return c.keys(g)},p.prototype.successors=function(u){var g=this._sucs[u];if(g)return c.keys(g)},p.prototype.neighbors=function(u){var g=this.predecessors(u);if(g)return c.union(g,this.successors(u))},p.prototype.isLeaf=function(u){return 0===(this.isDirected()?this.successors(u):this.neighbors(u)).length},p.prototype.filterNodes=function(u){var g=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});g.setGraph(this.graph());var C=this;c.each(this._nodes,function(R,M){u(M)&&g.setNode(M,R)}),c.each(this._edgeObjs,function(R){g.hasNode(R.v)&&g.hasNode(R.w)&&g.setEdge(R,C.edge(R))});var L={};function I(R){var M=C.parent(R);return void 0===M||g.hasNode(M)?(L[R]=M,M):M in L?L[M]:I(M)}return this._isCompound&&c.each(g.nodes(),function(R){g.setParent(R,I(R))}),g},p.prototype.setDefaultEdgeLabel=function(u){return c.isFunction(u)||(u=c.constant(u)),this._defaultEdgeLabelFn=u,this},p.prototype.edgeCount=function(){return this._edgeCount},p.prototype.edges=function(){return c.values(this._edgeObjs)},p.prototype.setPath=function(u,g){var C=this,L=arguments;return c.reduce(u,function(I,R){return L.length>1?C.setEdge(I,R,g):C.setEdge(I,R),R}),this},p.prototype.setEdge=function(){var u,g,C,L,I=!1,R=arguments[0];"object"==typeof R&&null!==R&&"v"in R?(u=R.v,g=R.w,C=R.name,2===arguments.length&&(L=arguments[1],I=!0)):(u=R,g=arguments[1],C=arguments[3],arguments.length>2&&(L=arguments[2],I=!0)),u=""+u,g=""+g,c.isUndefined(C)||(C=""+C);var M=l(this._isDirected,u,g,C);if(c.has(this._edgeLabels,M))return I&&(this._edgeLabels[M]=L),this;if(!c.isUndefined(C)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(u),this.setNode(g),this._edgeLabels[M]=I?L:this._defaultEdgeLabelFn(u,g,C);var F=h(this._isDirected,u,g,C);return u=F.v,g=F.w,Object.freeze(F),this._edgeObjs[M]=F,t(this._preds[g],u),t(this._sucs[u],g),this._in[g][M]=F,this._out[u][M]=F,this._edgeCount++,this},p.prototype.edge=function(u,g,C){var L=1===arguments.length?f(this._isDirected,arguments[0]):l(this._isDirected,u,g,C);return this._edgeLabels[L]},p.prototype.hasEdge=function(u,g,C){var L=1===arguments.length?f(this._isDirected,arguments[0]):l(this._isDirected,u,g,C);return c.has(this._edgeLabels,L)},p.prototype.removeEdge=function(u,g,C){var L=1===arguments.length?f(this._isDirected,arguments[0]):l(this._isDirected,u,g,C),I=this._edgeObjs[L];return I&&(u=I.v,g=I.w,delete this._edgeLabels[L],delete this._edgeObjs[L],d(this._preds[g],u),d(this._sucs[u],g),delete this._in[g][L],delete this._out[u][L],this._edgeCount--),this},p.prototype.inEdges=function(u,g){var C=this._in[u];if(C){var L=c.values(C);return g?c.filter(L,function(I){return I.v===g}):L}},p.prototype.outEdges=function(u,g){var C=this._out[u];if(C){var L=c.values(C);return g?c.filter(L,function(I){return I.w===g}):L}},p.prototype.nodeEdges=function(u,g){var C=this.inEdges(u,g);if(C)return C.concat(this.outEdges(u,g))}},51838:(w,E,s)=>{w.exports={Graph:s(66568),version:s(75089)}},21088:(w,E,s)=>{var c=s(79138),x=s(66568);function m(d){return c.map(d.nodes(),function(l){var h=d.node(l),f=d.parent(l),u={v:l};return c.isUndefined(h)||(u.value=h),c.isUndefined(f)||(u.parent=f),u})}function p(d){return c.map(d.edges(),function(l){var h=d.edge(l),f={v:l.v,w:l.w};return c.isUndefined(l.name)||(f.name=l.name),c.isUndefined(h)||(f.value=h),f})}w.exports={write:function _(d){var l={options:{directed:d.isDirected(),multigraph:d.isMultigraph(),compound:d.isCompound()},nodes:m(d),edges:p(d)};return c.isUndefined(d.graph())||(l.value=c.clone(d.graph())),l},read:function t(d){var l=new x(d.options).setGraph(d.value);return c.each(d.nodes,function(h){l.setNode(h.v,h.value),h.parent&&l.setParent(h.v,h.parent)}),c.each(d.edges,function(h){l.setEdge({v:h.v,w:h.w,name:h.name},h.value)}),l}}},79138:(w,E,s)=>{var c;try{c={clone:s(11094),constant:s(76684),each:s(35474),filter:s(35281),has:s(54842),isArray:s(21503),isEmpty:s(71973),isFunction:s(75946),isUndefined:s(34235),keys:s(118),map:s(19984),reduce:s(81337),size:s(55637),transform:s(89416),union:s(68921),values:s(90377)}}catch{}c||(c=window._),w.exports=c},75089:w=>{w.exports="2.1.8"},50623:w=>{"use strict";w.exports=function(s){return null!=s&&"object"==typeof s&&!1===Array.isArray(s)}},52872:w=>{var E=Object.prototype.toString;function s(h){return"function"==typeof h.constructor?h.constructor.name:null}w.exports=function(f){if(void 0===f)return"undefined";if(null===f)return"null";var u=typeof f;if("boolean"===u)return"boolean";if("string"===u)return"string";if("number"===u)return"number";if("symbol"===u)return"symbol";if("function"===u)return function p(h,f){return"GeneratorFunction"===s(h)}(f)?"generatorfunction":"function";if(function c(h){return Array.isArray?Array.isArray(h):h instanceof Array}(f))return"array";if(function l(h){return!(!h.constructor||"function"!=typeof h.constructor.isBuffer)&&h.constructor.isBuffer(h)}(f))return"buffer";if(function d(h){try{if("number"==typeof h.length&&"function"==typeof h.callee)return!0}catch(f){if(-1!==f.message.indexOf("callee"))return!0}return!1}(f))return"arguments";if(function _(h){return h instanceof Date||"function"==typeof h.toDateString&&"function"==typeof h.getDate&&"function"==typeof h.setDate}(f))return"date";if(function x(h){return h instanceof Error||"string"==typeof h.message&&h.constructor&&"number"==typeof h.constructor.stackTraceLimit}(f))return"error";if(function m(h){return h instanceof RegExp||"string"==typeof h.flags&&"boolean"==typeof h.ignoreCase&&"boolean"==typeof h.multiline&&"boolean"==typeof h.global}(f))return"regexp";switch(s(f)){case"Symbol":return"symbol";case"Promise":return"promise";case"WeakMap":return"weakmap";case"WeakSet":return"weakset";case"Map":return"map";case"Set":return"set";case"Int8Array":return"int8array";case"Uint8Array":return"uint8array";case"Uint8ClampedArray":return"uint8clampedarray";case"Int16Array":return"int16array";case"Uint16Array":return"uint16array";case"Int32Array":return"int32array";case"Uint32Array":return"uint32array";case"Float32Array":return"float32array";case"Float64Array":return"float64array"}if(function t(h){return"function"==typeof h.throw&&"function"==typeof h.return&&"function"==typeof h.next}(f))return"generator";switch(u=E.call(f)){case"[object Object]":return"object";case"[object Map Iterator]":return"mapiterator";case"[object Set Iterator]":return"setiterator";case"[object String Iterator]":return"stringiterator";case"[object Array Iterator]":return"arrayiterator"}return u.slice(8,-1).toLowerCase().replace(/\s/g,"")}},37244:(w,E,s)=>{var _=s(53436)(s(12119),"DataView");w.exports=_},54994:(w,E,s)=>{var c=s(64312),x=s(46421),_=s(15764),m=s(18685),p=s(26676);function t(d){var l=-1,h=null==d?0:d.length;for(this.clear();++l<h;){var f=d[l];this.set(f[0],f[1])}}t.prototype.clear=c,t.prototype.delete=x,t.prototype.get=_,t.prototype.has=m,t.prototype.set=p,w.exports=t},9215:(w,E,s)=>{var c=s(41840),x=s(34378),_=s(54981),m=s(67343),p=s(98895);function t(d){var l=-1,h=null==d?0:d.length;for(this.clear();++l<h;){var f=d[l];this.set(f[0],f[1])}}t.prototype.clear=c,t.prototype.delete=x,t.prototype.get=_,t.prototype.has=m,t.prototype.set=p,w.exports=t},51501:(w,E,s)=>{var _=s(53436)(s(12119),"Map");w.exports=_},99850:(w,E,s)=>{var c=s(10638),x=s(11184),_=s(70866),m=s(43771),p=s(51772);function t(d){var l=-1,h=null==d?0:d.length;for(this.clear();++l<h;){var f=d[l];this.set(f[0],f[1])}}t.prototype.clear=c,t.prototype.delete=x,t.prototype.get=_,t.prototype.has=m,t.prototype.set=p,w.exports=t},44267:(w,E,s)=>{var _=s(53436)(s(12119),"Promise");w.exports=_},46323:(w,E,s)=>{var _=s(53436)(s(12119),"Set");w.exports=_},58849:(w,E,s)=>{var c=s(99850),x=s(4600),_=s(31387);function m(p){var t=-1,d=null==p?0:p.length;for(this.__data__=new c;++t<d;)this.add(p[t])}m.prototype.add=m.prototype.push=x,m.prototype.has=_,w.exports=m},2858:(w,E,s)=>{var c=s(9215),x=s(13720),_=s(64410),m=s(45576),p=s(22247),t=s(41585);function d(l){var h=this.__data__=new c(l);this.size=h.size}d.prototype.clear=x,d.prototype.delete=_,d.prototype.get=m,d.prototype.has=p,d.prototype.set=t,w.exports=d},60443:(w,E,s)=>{var c=s(12119);w.exports=c.Symbol},73457:(w,E,s)=>{var c=s(12119);w.exports=c.Uint8Array},24243:(w,E,s)=>{var _=s(53436)(s(12119),"WeakMap");w.exports=_},26999:w=>{w.exports=function E(s,c,x){switch(x.length){case 0:return s.call(c);case 1:return s.call(c,x[0]);case 2:return s.call(c,x[0],x[1]);case 3:return s.call(c,x[0],x[1],x[2])}return s.apply(c,x)}},96837:w=>{w.exports=function E(s,c){for(var x=-1,_=null==s?0:s.length;++x<_&&!1!==c(s[x],x,s););return s}},69779:w=>{w.exports=function E(s,c){for(var x=-1,_=null==s?0:s.length,m=0,p=[];++x<_;){var t=s[x];c(t,x,s)&&(p[m++]=t)}return p}},61253:(w,E,s)=>{var c=s(14164);w.exports=function x(_,m){return!(null==_||!_.length)&&c(_,m,0)>-1}},37609:w=>{w.exports=function E(s,c,x){for(var _=-1,m=null==s?0:s.length;++_<m;)if(x(c,s[_]))return!0;return!1}},72271:(w,E,s)=>{var c=s(85334),x=s(77151),_=s(21503),m=s(80891),p=s(58442),t=s(48159),l=Object.prototype.hasOwnProperty;w.exports=function h(f,u){var g=_(f),C=!g&&x(f),L=!g&&!C&&m(f),I=!g&&!C&&!L&&t(f),R=g||C||L||I,M=R?c(f.length,String):[],F=M.length;for(var B in f)(u||l.call(f,B))&&(!R||!("length"==B||L&&("offset"==B||"parent"==B)||I&&("buffer"==B||"byteLength"==B||"byteOffset"==B)||p(B,F)))&&M.push(B);return M}},84633:w=>{w.exports=function E(s,c){for(var x=-1,_=null==s?0:s.length,m=Array(_);++x<_;)m[x]=c(s[x],x,s);return m}},85059:w=>{w.exports=function E(s,c){for(var x=-1,_=c.length,m=s.length;++x<_;)s[m+x]=c[x];return s}},8745:w=>{w.exports=function E(s,c,x,_){var m=-1,p=null==s?0:s.length;for(_&&p&&(x=s[++m]);++m<p;)x=c(x,s[m],m,s);return x}},79503:w=>{w.exports=function E(s,c){for(var x=-1,_=null==s?0:s.length;++x<_;)if(c(s[x],x,s))return!0;return!1}},75481:(w,E,s)=>{var x=s(11847)("length");w.exports=x},49276:(w,E,s)=>{var c=s(85683),x=s(20217);w.exports=function _(m,p,t){(void 0!==t&&!x(m[p],t)||void 0===t&&!(p in m))&&c(m,p,t)}},89719:(w,E,s)=>{var c=s(85683),x=s(20217),m=Object.prototype.hasOwnProperty;w.exports=function p(t,d,l){var h=t[d];(!m.call(t,d)||!x(h,l)||void 0===l&&!(d in t))&&c(t,d,l)}},43503:(w,E,s)=>{var c=s(20217);w.exports=function x(_,m){for(var p=_.length;p--;)if(c(_[p][0],m))return p;return-1}},94121:(w,E,s)=>{var c=s(31989),x=s(118);w.exports=function _(m,p){return m&&c(p,x(p),m)}},99287:(w,E,s)=>{var c=s(31989),x=s(16555);w.exports=function _(m,p){return m&&c(p,x(p),m)}},85683:(w,E,s)=>{var c=s(56713);w.exports=function x(_,m,p){"__proto__"==m&&c?c(_,m,{configurable:!0,enumerable:!0,value:p,writable:!0}):_[m]=p}},44462:(w,E,s)=>{var c=s(2858),x=s(96837),_=s(89719),m=s(94121),p=s(99287),t=s(19292),d=s(99454),l=s(84444),h=s(59905),f=s(47597),u=s(6967),g=s(28794),C=s(76782),L=s(37878),I=s(4264),R=s(21503),M=s(80891),F=s(13222),B=s(25940),Y=s(90799),V=s(118),nt=s(16555),X="[object Arguments]",it="[object Function]",mt="[object Object]",Xt={};Xt[X]=Xt["[object Array]"]=Xt["[object ArrayBuffer]"]=Xt["[object DataView]"]=Xt["[object Boolean]"]=Xt["[object Date]"]=Xt["[object Float32Array]"]=Xt["[object Float64Array]"]=Xt["[object Int8Array]"]=Xt["[object Int16Array]"]=Xt["[object Int32Array]"]=Xt["[object Map]"]=Xt["[object Number]"]=Xt[mt]=Xt["[object RegExp]"]=Xt["[object Set]"]=Xt["[object String]"]=Xt["[object Symbol]"]=Xt["[object Uint8Array]"]=Xt["[object Uint8ClampedArray]"]=Xt["[object Uint16Array]"]=Xt["[object Uint32Array]"]=!0,Xt["[object Error]"]=Xt[it]=Xt["[object WeakMap]"]=!1,w.exports=function Zt(jt,ge,ye,Ee,Ie,Ae){var Ue,Ze=1&ge,ei=2&ge,ve=4&ge;if(ye&&(Ue=Ie?ye(jt,Ee,Ie,Ae):ye(jt)),void 0!==Ue)return Ue;if(!B(jt))return jt;var oi=R(jt);if(oi){if(Ue=C(jt),!Ze)return d(jt,Ue)}else{var Ct=g(jt),Ht=Ct==it||"[object GeneratorFunction]"==Ct;if(M(jt))return t(jt,Ze);if(Ct==mt||Ct==X||Ht&&!Ie){if(Ue=ei||Ht?{}:I(jt),!Ze)return ei?h(jt,p(Ue,jt)):l(jt,m(Ue,jt))}else{if(!Xt[Ct])return Ie?jt:{};Ue=L(jt,Ct,Ze)}}Ae||(Ae=new c);var se=Ae.get(jt);if(se)return se;Ae.set(jt,Ue),Y(jt)?jt.forEach(function(Be){Ue.add(Zt(Be,ge,ye,Be,jt,Ae))}):F(jt)&&jt.forEach(function(Be,ze){Ue.set(ze,Zt(Be,ge,ye,ze,jt,Ae))});var qt=oi?void 0:(ve?ei?u:f:ei?nt:V)(jt);return x(qt||jt,function(Be,ze){qt&&(Be=jt[ze=Be]),_(Ue,ze,Zt(Be,ge,ye,ze,jt,Ae))}),Ue}},78858:(w,E,s)=>{var c=s(25940),x=Object.create,_=function(){function m(){}return function(p){if(!c(p))return{};if(x)return x(p);m.prototype=p;var t=new m;return m.prototype=void 0,t}}();w.exports=_},43132:(w,E,s)=>{var c=s(45184),_=s(16539)(c);w.exports=_},67308:(w,E,s)=>{var c=s(44129);w.exports=function x(_,m,p){for(var t=-1,d=_.length;++t<d;){var l=_[t],h=m(l);if(null!=h&&(void 0===f?h==h&&!c(h):p(h,f)))var f=h,u=l}return u}},33609:(w,E,s)=>{var c=s(43132);w.exports=function x(_,m){var p=[];return c(_,function(t,d,l){m(t,d,l)&&p.push(t)}),p}},65317:w=>{w.exports=function E(s,c,x,_){for(var m=s.length,p=x+(_?1:-1);_?p--:++p<m;)if(c(s[p],p,s))return p;return-1}},50686:(w,E,s)=>{var c=s(85059),x=s(75039);w.exports=function _(m,p,t,d,l){var h=-1,f=m.length;for(t||(t=x),l||(l=[]);++h<f;){var u=m[h];p>0&&t(u)?p>1?_(u,p-1,t,d,l):c(l,u):d||(l[l.length]=u)}return l}},30755:(w,E,s)=>{var x=s(40456)();w.exports=x},45184:(w,E,s)=>{var c=s(30755),x=s(118);w.exports=function _(m,p){return m&&c(m,p,x)}},15456:(w,E,s)=>{var c=s(65456),x=s(68533);w.exports=function _(m,p){for(var t=0,d=(p=c(p,m)).length;null!=m&&t<d;)m=m[x(p[t++])];return t&&t==d?m:void 0}},38247:(w,E,s)=>{var c=s(85059),x=s(21503);w.exports=function _(m,p,t){var d=p(m);return x(m)?d:c(d,t(m))}},93337:(w,E,s)=>{var c=s(60443),x=s(21318),_=s(92902),t=c?c.toStringTag:void 0;w.exports=function d(l){return null==l?void 0===l?"[object Undefined]":"[object Null]":t&&t in Object(l)?x(l):_(l)}},31100:w=>{w.exports=function E(s,c){return s>c}},84781:w=>{var s=Object.prototype.hasOwnProperty;w.exports=function c(x,_){return null!=x&&s.call(x,_)}},69989:w=>{w.exports=function E(s,c){return null!=s&&c in Object(s)}},14164:(w,E,s)=>{var c=s(65317),x=s(70968),_=s(24977);w.exports=function m(p,t,d){return t==t?_(p,t,d):c(p,x,d)}},60186:(w,E,s)=>{var c=s(93337),x=s(72671);w.exports=function m(p){return x(p)&&"[object Arguments]"==c(p)}},85740:(w,E,s)=>{var c=s(58325),x=s(72671);w.exports=function _(m,p,t,d,l){return m===p||(null==m||null==p||!x(m)&&!x(p)?m!=m&&p!=p:c(m,p,t,d,_,l))}},58325:(w,E,s)=>{var c=s(2858),x=s(63914),_=s(78583),m=s(32286),p=s(28794),t=s(21503),d=s(80891),l=s(48159),f="[object Arguments]",u="[object Array]",g="[object Object]",L=Object.prototype.hasOwnProperty;w.exports=function I(R,M,F,B,Y,V){var nt=t(R),et=t(M),st=nt?u:p(R),K=et?u:p(M),X=(st=st==f?g:st)==g,W=(K=K==f?g:K)==g,at=st==K;if(at&&d(R)){if(!d(M))return!1;nt=!0,X=!1}if(at&&!X)return V||(V=new c),nt||l(R)?x(R,M,F,B,Y,V):_(R,M,st,F,B,Y,V);if(!(1&F)){var H=X&&L.call(R,"__wrapped__"),Q=W&&L.call(M,"__wrapped__");if(H||Q){var it=H?R.value():R,q=Q?M.value():M;return V||(V=new c),Y(it,q,F,B,V)}}return!!at&&(V||(V=new c),m(R,M,F,B,Y,V))}},97021:(w,E,s)=>{var c=s(28794),x=s(72671);w.exports=function m(p){return x(p)&&"[object Map]"==c(p)}},40431:(w,E,s)=>{var c=s(2858),x=s(85740);w.exports=function p(t,d,l,h){var f=l.length,u=f,g=!h;if(null==t)return!u;for(t=Object(t);f--;){var C=l[f];if(g&&C[2]?C[1]!==t[C[0]]:!(C[0]in t))return!1}for(;++f<u;){var L=(C=l[f])[0],I=t[L],R=C[1];if(g&&C[2]){if(void 0===I&&!(L in t))return!1}else{var M=new c;if(h)var F=h(I,R,L,t,d,M);if(!(void 0===F?x(R,I,3,h,M):F))return!1}}return!0}},70968:w=>{w.exports=function E(s){return s!=s}},37304:(w,E,s)=>{var c=s(75946),x=s(91943),_=s(25940),m=s(52827),t=/^\[object .+?Constructor\]$/,u=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");w.exports=function g(C){return!(!_(C)||x(C))&&(c(C)?u:t).test(m(C))}},771:(w,E,s)=>{var c=s(28794),x=s(72671);w.exports=function m(p){return x(p)&&"[object Set]"==c(p)}},1083:(w,E,s)=>{var c=s(93337),x=s(96231),_=s(72671),at={};at["[object Float32Array]"]=at["[object Float64Array]"]=at["[object Int8Array]"]=at["[object Int16Array]"]=at["[object Int32Array]"]=at["[object Uint8Array]"]=at["[object Uint8ClampedArray]"]=at["[object Uint16Array]"]=at["[object Uint32Array]"]=!0,at["[object Arguments]"]=at["[object Array]"]=at["[object ArrayBuffer]"]=at["[object Boolean]"]=at["[object DataView]"]=at["[object Date]"]=at["[object Error]"]=at["[object Function]"]=at["[object Map]"]=at["[object Number]"]=at["[object Object]"]=at["[object RegExp]"]=at["[object Set]"]=at["[object String]"]=at["[object WeakMap]"]=!1,w.exports=function H(Q){return _(Q)&&x(Q.length)&&!!at[c(Q)]}},96517:(w,E,s)=>{var c=s(98133),x=s(9458),_=s(32608),m=s(21503),p=s(87495);w.exports=function t(d){return"function"==typeof d?d:null==d?_:"object"==typeof d?m(d)?x(d[0],d[1]):c(d):p(d)}},81172:(w,E,s)=>{var c=s(45488),x=s(85491),m=Object.prototype.hasOwnProperty;w.exports=function p(t){if(!c(t))return x(t);var d=[];for(var l in Object(t))m.call(t,l)&&"constructor"!=l&&d.push(l);return d}},92809:(w,E,s)=>{var c=s(25940),x=s(45488),_=s(32158),p=Object.prototype.hasOwnProperty;w.exports=function t(d){if(!c(d))return _(d);var l=x(d),h=[];for(var f in d)"constructor"==f&&(l||!p.call(d,f))||h.push(f);return h}},99069:w=>{w.exports=function E(s,c){return s<c}},92046:(w,E,s)=>{var c=s(43132),x=s(56507);w.exports=function _(m,p){var t=-1,d=x(m)?Array(m.length):[];return c(m,function(l,h,f){d[++t]=p(l,h,f)}),d}},98133:(w,E,s)=>{var c=s(40431),x=s(22379),_=s(642);w.exports=function m(p){var t=x(p);return 1==t.length&&t[0][2]?_(t[0][0],t[0][1]):function(d){return d===p||c(d,p,t)}}},9458:(w,E,s)=>{var c=s(85740),x=s(8817),_=s(11172),m=s(45352),p=s(22442),t=s(642),d=s(68533);w.exports=function f(u,g){return m(u)&&p(g)?t(d(u),g):function(C){var L=x(C,u);return void 0===L&&L===g?_(C,u):c(g,L,3)}}},73842:(w,E,s)=>{var c=s(2858),x=s(49276),_=s(30755),m=s(33675),p=s(25940),t=s(16555),d=s(99351);w.exports=function l(h,f,u,g,C){h!==f&&_(f,function(L,I){if(C||(C=new c),p(L))m(h,f,I,u,l,g,C);else{var R=g?g(d(h,I),L,I+"",h,f,C):void 0;void 0===R&&(R=L),x(h,I,R)}},t)}},33675:(w,E,s)=>{var c=s(49276),x=s(19292),_=s(65208),m=s(99454),p=s(4264),t=s(77151),d=s(21503),l=s(92377),h=s(80891),f=s(75946),u=s(25940),g=s(97614),C=s(48159),L=s(99351),I=s(8067);w.exports=function R(M,F,B,Y,V,nt,et){var st=L(M,B),K=L(F,B),X=et.get(K);if(X)c(M,B,X);else{var W=nt?nt(st,K,B+"",M,F,et):void 0,at=void 0===W;if(at){var H=d(K),Q=!H&&h(K),it=!H&&!Q&&C(K);W=K,H||Q||it?d(st)?W=st:l(st)?W=m(st):Q?(at=!1,W=x(K,!0)):it?(at=!1,W=_(K,!0)):W=[]:g(K)||t(K)?(W=st,t(st)?W=I(st):(!u(st)||f(st))&&(W=p(K))):at=!1}at&&(et.set(K,W),V(W,K,Y,nt,et),et.delete(K)),c(M,B,W)}}},6119:(w,E,s)=>{var c=s(84633),x=s(15456),_=s(96517),m=s(92046),p=s(42061),t=s(85647),d=s(41215),l=s(32608),h=s(21503);w.exports=function f(u,g,C){g=g.length?c(g,function(R){return h(R)?function(M){return x(M,1===R.length?R[0]:R)}:R}):[l];var L=-1;g=c(g,t(_));var I=m(u,function(R,M,F){return{criteria:c(g,function(Y){return Y(R)}),index:++L,value:R}});return p(I,function(R,M){return d(R,M,C)})}},83021:(w,E,s)=>{var c=s(95495),x=s(11172);w.exports=function _(m,p){return c(m,p,function(t,d){return x(m,d)})}},95495:(w,E,s)=>{var c=s(15456),x=s(55963),_=s(65456);w.exports=function m(p,t,d){for(var l=-1,h=t.length,f={};++l<h;){var u=t[l],g=c(p,u);d(g,u)&&x(f,_(u,p),g)}return f}},11847:w=>{w.exports=function E(s){return function(c){return c?.[s]}}},39222:(w,E,s)=>{var c=s(15456);w.exports=function x(_){return function(m){return c(m,_)}}},16307:w=>{var E=Math.ceil,s=Math.max;w.exports=function c(x,_,m,p){for(var t=-1,d=s(E((_-x)/(m||1)),0),l=Array(d);d--;)l[p?d:++t]=x,x+=m;return l}},13570:w=>{w.exports=function E(s,c,x,_,m){return m(s,function(p,t,d){x=_?(_=!1,p):c(x,p,t,d)}),x}},23269:(w,E,s)=>{var c=s(32608),x=s(53983),_=s(72185);w.exports=function m(p,t){return _(x(p,t,c),p+"")}},55963:(w,E,s)=>{var c=s(89719),x=s(65456),_=s(58442),m=s(25940),p=s(68533);w.exports=function t(d,l,h,f){if(!m(d))return d;for(var u=-1,g=(l=x(l,d)).length,C=g-1,L=d;null!=L&&++u<g;){var I=p(l[u]),R=h;if("__proto__"===I||"constructor"===I||"prototype"===I)return d;if(u!=C){var M=L[I];void 0===(R=f?f(M,I,L):void 0)&&(R=m(M)?M:_(l[u+1])?[]:{})}c(L,I,R),L=L[I]}return d}},69510:(w,E,s)=>{var c=s(76684),x=s(56713),_=s(32608);w.exports=x?function(p,t){return x(p,"toString",{configurable:!0,enumerable:!1,value:c(t),writable:!0})}:_},42061:w=>{w.exports=function E(s,c){var x=s.length;for(s.sort(c);x--;)s[x]=s[x].value;return s}},85334:w=>{w.exports=function E(s,c){for(var x=-1,_=Array(s);++x<s;)_[x]=c(x);return _}},93935:(w,E,s)=>{var c=s(60443),x=s(84633),_=s(21503),m=s(44129),t=c?c.prototype:void 0,d=t?t.toString:void 0;w.exports=function l(h){if("string"==typeof h)return h;if(_(h))return x(h,l)+"";if(m(h))return d?d.call(h):"";var f=h+"";return"0"==f&&1/h==-1/0?"-0":f}},83348:(w,E,s)=>{var c=s(42760),x=/^\s+/;w.exports=function _(m){return m&&m.slice(0,c(m)+1).replace(x,"")}},85647:w=>{w.exports=function E(s){return function(c){return s(c)}}},80707:(w,E,s)=>{var c=s(58849),x=s(61253),_=s(37609),m=s(25972),p=s(14575),t=s(24174);w.exports=function l(h,f,u){var g=-1,C=x,L=h.length,I=!0,R=[],M=R;if(u)I=!1,C=_;else if(L>=200){var F=f?null:p(h);if(F)return t(F);I=!1,C=m,M=new c}else M=f?[]:R;t:for(;++g<L;){var B=h[g],Y=f?f(B):B;if(B=u||0!==B?B:0,I&&Y==Y){for(var V=M.length;V--;)if(M[V]===Y)continue t;f&&M.push(Y),R.push(B)}else C(M,Y,u)||(M!==R&&M.push(Y),R.push(B))}return R}},19179:(w,E,s)=>{var c=s(84633);w.exports=function x(_,m){return c(m,function(p){return _[p]})}},38645:w=>{w.exports=function E(s,c,x){for(var _=-1,m=s.length,p=c.length,t={};++_<m;)x(t,s[_],_<p?c[_]:void 0);return t}},25972:w=>{w.exports=function E(s,c){return s.has(c)}},21481:(w,E,s)=>{var c=s(32608);w.exports=function x(_){return"function"==typeof _?_:c}},65456:(w,E,s)=>{var c=s(21503),x=s(45352),_=s(32855),m=s(73943);w.exports=function p(t,d){return c(t)?t:x(t,d)?[t]:_(m(t))}},43362:(w,E,s)=>{var c=s(73457);w.exports=function x(_){var m=new _.constructor(_.byteLength);return new c(m).set(new c(_)),m}},19292:(w,E,s)=>{w=s.nmd(w);var c=s(12119),x=E&&!E.nodeType&&E,_=x&&w&&!w.nodeType&&w,p=_&&_.exports===x?c.Buffer:void 0,t=p?p.allocUnsafe:void 0;w.exports=function d(l,h){if(h)return l.slice();var f=l.length,u=t?t(f):new l.constructor(f);return l.copy(u),u}},17e3:(w,E,s)=>{var c=s(43362);w.exports=function x(_,m){var p=m?c(_.buffer):_.buffer;return new _.constructor(p,_.byteOffset,_.byteLength)}},74098:w=>{var E=/\w*$/;w.exports=function s(c){var x=new c.constructor(c.source,E.exec(c));return x.lastIndex=c.lastIndex,x}},62533:(w,E,s)=>{var c=s(60443),x=c?c.prototype:void 0,_=x?x.valueOf:void 0;w.exports=function m(p){return _?Object(_.call(p)):{}}},65208:(w,E,s)=>{var c=s(43362);w.exports=function x(_,m){var p=m?c(_.buffer):_.buffer;return new _.constructor(p,_.byteOffset,_.length)}},13443:(w,E,s)=>{var c=s(44129);w.exports=function x(_,m){if(_!==m){var p=void 0!==_,t=null===_,d=_==_,l=c(_),h=void 0!==m,f=null===m,u=m==m,g=c(m);if(!f&&!g&&!l&&_>m||l&&h&&u&&!f&&!g||t&&h&&u||!p&&u||!d)return 1;if(!t&&!l&&!g&&_<m||g&&p&&d&&!t&&!l||f&&p&&d||!h&&d||!u)return-1}return 0}},41215:(w,E,s)=>{var c=s(13443);w.exports=function x(_,m,p){for(var t=-1,d=_.criteria,l=m.criteria,h=d.length,f=p.length;++t<h;){var u=c(d[t],l[t]);if(u)return t>=f?u:u*("desc"==p[t]?-1:1)}return _.index-m.index}},99454:w=>{w.exports=function E(s,c){var x=-1,_=s.length;for(c||(c=Array(_));++x<_;)c[x]=s[x];return c}},31989:(w,E,s)=>{var c=s(89719),x=s(85683);w.exports=function _(m,p,t,d){var l=!t;t||(t={});for(var h=-1,f=p.length;++h<f;){var u=p[h],g=d?d(t[u],m[u],u,t,m):void 0;void 0===g&&(g=m[u]),l?x(t,u,g):c(t,u,g)}return t}},84444:(w,E,s)=>{var c=s(31989),x=s(39383);w.exports=function _(m,p){return c(m,x(m),p)}},59905:(w,E,s)=>{var c=s(31989),x=s(53051);w.exports=function _(m,p){return c(m,x(m),p)}},24610:(w,E,s)=>{var c=s(12119);w.exports=c["__core-js_shared__"]},84944:(w,E,s)=>{var c=s(23269),x=s(93342);w.exports=function _(m){return c(function(p,t){var d=-1,l=t.length,h=l>1?t[l-1]:void 0,f=l>2?t[2]:void 0;for(h=m.length>3&&"function"==typeof h?(l--,h):void 0,f&&x(t[0],t[1],f)&&(h=l<3?void 0:h,l=1),p=Object(p);++d<l;){var u=t[d];u&&m(p,u,d,h)}return p})}},16539:(w,E,s)=>{var c=s(56507);w.exports=function x(_,m){return function(p,t){if(null==p)return p;if(!c(p))return _(p,t);for(var d=p.length,l=m?d:-1,h=Object(p);(m?l--:++l<d)&&!1!==t(h[l],l,h););return p}}},40456:w=>{w.exports=function E(s){return function(c,x,_){for(var m=-1,p=Object(c),t=_(c),d=t.length;d--;){var l=t[s?d:++m];if(!1===x(p[l],l,p))break}return c}}},24653:(w,E,s)=>{var c=s(96517),x=s(56507),_=s(118);w.exports=function m(p){return function(t,d,l){var h=Object(t);if(!x(t)){var f=c(d,3);t=_(t),d=function(g){return f(h[g],g,h)}}var u=p(t,d,l);return u>-1?h[f?t[u]:u]:void 0}}},97509:(w,E,s)=>{var c=s(16307),x=s(93342),_=s(12232);w.exports=function m(p){return function(t,d,l){return l&&"number"!=typeof l&&x(t,d,l)&&(d=l=void 0),t=_(t),void 0===d?(d=t,t=0):d=_(d),l=void 0===l?t<d?1:-1:_(l),c(t,d,l,p)}}},14575:(w,E,s)=>{var c=s(46323),x=s(12552),_=s(24174),p=c&&1/_(new c([,-0]))[1]==1/0?function(t){return new c(t)}:x;w.exports=p},56713:(w,E,s)=>{var c=s(53436),x=function(){try{var _=c(Object,"defineProperty");return _({},"",{}),_}catch{}}();w.exports=x},63914:(w,E,s)=>{var c=s(58849),x=s(79503),_=s(25972);w.exports=function t(d,l,h,f,u,g){var C=1&h,L=d.length,I=l.length;if(L!=I&&!(C&&I>L))return!1;var R=g.get(d),M=g.get(l);if(R&&M)return R==l&&M==d;var F=-1,B=!0,Y=2&h?new c:void 0;for(g.set(d,l),g.set(l,d);++F<L;){var V=d[F],nt=l[F];if(f)var et=C?f(nt,V,F,l,d,g):f(V,nt,F,d,l,g);if(void 0!==et){if(et)continue;B=!1;break}if(Y){if(!x(l,function(st,K){if(!_(Y,K)&&(V===st||u(V,st,h,f,g)))return Y.push(K)})){B=!1;break}}else if(V!==nt&&!u(V,nt,h,f,g)){B=!1;break}}return g.delete(d),g.delete(l),B}},78583:(w,E,s)=>{var c=s(60443),x=s(73457),_=s(20217),m=s(63914),p=s(83205),t=s(24174),Y=c?c.prototype:void 0,V=Y?Y.valueOf:void 0;w.exports=function nt(et,st,K,X,W,at,H){switch(K){case"[object DataView]":if(et.byteLength!=st.byteLength||et.byteOffset!=st.byteOffset)return!1;et=et.buffer,st=st.buffer;case"[object ArrayBuffer]":return!(et.byteLength!=st.byteLength||!at(new x(et),new x(st)));case"[object Boolean]":case"[object Date]":case"[object Number]":return _(+et,+st);case"[object Error]":return et.name==st.name&&et.message==st.message;case"[object RegExp]":case"[object String]":return et==st+"";case"[object Map]":var Q=p;case"[object Set]":if(Q||(Q=t),et.size!=st.size&&!(1&X))return!1;var q=H.get(et);if(q)return q==st;X|=2,H.set(et,st);var U=m(Q(et),Q(st),X,W,at,H);return H.delete(et),U;case"[object Symbol]":if(V)return V.call(et)==V.call(st)}return!1}},32286:(w,E,s)=>{var c=s(47597),m=Object.prototype.hasOwnProperty;w.exports=function p(t,d,l,h,f,u){var g=1&l,C=c(t),L=C.length;if(L!=c(d).length&&!g)return!1;for(var M=L;M--;){var F=C[M];if(!(g?F in d:m.call(d,F)))return!1}var B=u.get(t),Y=u.get(d);if(B&&Y)return B==d&&Y==t;var V=!0;u.set(t,d),u.set(d,t);for(var nt=g;++M<L;){var et=t[F=C[M]],st=d[F];if(h)var K=g?h(st,et,F,d,t,u):h(et,st,F,t,d,u);if(!(void 0===K?et===st||f(et,st,l,h,u):K)){V=!1;break}nt||(nt="constructor"==F)}if(V&&!nt){var X=t.constructor,W=d.constructor;X!=W&&"constructor"in t&&"constructor"in d&&!("function"==typeof X&&X instanceof X&&"function"==typeof W&&W instanceof W)&&(V=!1)}return u.delete(t),u.delete(d),V}},3975:(w,E,s)=>{var c=s(22274),x=s(53983),_=s(72185);w.exports=function m(p){return _(x(p,void 0,c),p+"")}},79122:w=>{var E="object"==typeof global&&global&&global.Object===Object&&global;w.exports=E},47597:(w,E,s)=>{var c=s(38247),x=s(39383),_=s(118);w.exports=function m(p){return c(p,_,x)}},6967:(w,E,s)=>{var c=s(38247),x=s(53051),_=s(16555);w.exports=function m(p){return c(p,_,x)}},54537:(w,E,s)=>{var c=s(23819);w.exports=function x(_,m){var p=_.__data__;return c(m)?p["string"==typeof m?"string":"hash"]:p.map}},22379:(w,E,s)=>{var c=s(22442),x=s(118);w.exports=function _(m){for(var p=x(m),t=p.length;t--;){var d=p[t],l=m[d];p[t]=[d,l,c(l)]}return p}},53436:(w,E,s)=>{var c=s(37304),x=s(51990);w.exports=function _(m,p){var t=x(m,p);return c(t)?t:void 0}},29519:(w,E,s)=>{var x=s(69385)(Object.getPrototypeOf,Object);w.exports=x},21318:(w,E,s)=>{var c=s(60443),x=Object.prototype,_=x.hasOwnProperty,m=x.toString,p=c?c.toStringTag:void 0;w.exports=function t(d){var l=_.call(d,p),h=d[p];try{d[p]=void 0;var f=!0}catch{}var u=m.call(d);return f&&(l?d[p]=h:delete d[p]),u}},39383:(w,E,s)=>{var c=s(69779),x=s(49975),m=Object.prototype.propertyIsEnumerable,p=Object.getOwnPropertySymbols;w.exports=p?function(d){return null==d?[]:(d=Object(d),c(p(d),function(l){return m.call(d,l)}))}:x},53051:(w,E,s)=>{var c=s(85059),x=s(29519),_=s(39383),m=s(49975);w.exports=Object.getOwnPropertySymbols?function(d){for(var l=[];d;)c(l,_(d)),d=x(d);return l}:m},28794:(w,E,s)=>{var c=s(37244),x=s(51501),_=s(44267),m=s(46323),p=s(24243),t=s(93337),d=s(52827),l="[object Map]",f="[object Promise]",u="[object Set]",g="[object WeakMap]",C="[object DataView]",L=d(c),I=d(x),R=d(_),M=d(m),F=d(p),B=t;(c&&B(new c(new ArrayBuffer(1)))!=C||x&&B(new x)!=l||_&&B(_.resolve())!=f||m&&B(new m)!=u||p&&B(new p)!=g)&&(B=function(Y){var V=t(Y),nt="[object Object]"==V?Y.constructor:void 0,et=nt?d(nt):"";if(et)switch(et){case L:return C;case I:return l;case R:return f;case M:return u;case F:return g}return V}),w.exports=B},51990:w=>{w.exports=function E(s,c){return s?.[c]}},47283:(w,E,s)=>{var c=s(65456),x=s(77151),_=s(21503),m=s(58442),p=s(96231),t=s(68533);w.exports=function d(l,h,f){for(var u=-1,g=(h=c(h,l)).length,C=!1;++u<g;){var L=t(h[u]);if(!(C=null!=l&&f(l,L)))break;l=l[L]}return C||++u!=g?C:!!(g=null==l?0:l.length)&&p(g)&&m(L,g)&&(_(l)||x(l))}},77609:w=>{var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");w.exports=function d(l){return t.test(l)}},64312:(w,E,s)=>{var c=s(60862);w.exports=function x(){this.__data__=c?c(null):{},this.size=0}},46421:w=>{w.exports=function E(s){var c=this.has(s)&&delete this.__data__[s];return this.size-=c?1:0,c}},15764:(w,E,s)=>{var c=s(60862),m=Object.prototype.hasOwnProperty;w.exports=function p(t){var d=this.__data__;if(c){var l=d[t];return"__lodash_hash_undefined__"===l?void 0:l}return m.call(d,t)?d[t]:void 0}},18685:(w,E,s)=>{var c=s(60862),_=Object.prototype.hasOwnProperty;w.exports=function m(p){var t=this.__data__;return c?void 0!==t[p]:_.call(t,p)}},26676:(w,E,s)=>{var c=s(60862);w.exports=function _(m,p){var t=this.__data__;return this.size+=this.has(m)?0:1,t[m]=c&&void 0===p?"__lodash_hash_undefined__":p,this}},76782:w=>{var s=Object.prototype.hasOwnProperty;w.exports=function c(x){var _=x.length,m=new x.constructor(_);return _&&"string"==typeof x[0]&&s.call(x,"index")&&(m.index=x.index,m.input=x.input),m}},37878:(w,E,s)=>{var c=s(43362),x=s(17e3),_=s(74098),m=s(62533),p=s(65208);w.exports=function K(X,W,at){var H=X.constructor;switch(W){case"[object ArrayBuffer]":return c(X);case"[object Boolean]":case"[object Date]":return new H(+X);case"[object DataView]":return x(X,at);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return p(X,at);case"[object Map]":case"[object Set]":return new H;case"[object Number]":case"[object String]":return new H(X);case"[object RegExp]":return _(X);case"[object Symbol]":return m(X)}}},4264:(w,E,s)=>{var c=s(78858),x=s(29519),_=s(45488);w.exports=function m(p){return"function"!=typeof p.constructor||_(p)?{}:c(x(p))}},75039:(w,E,s)=>{var c=s(60443),x=s(77151),_=s(21503),m=c?c.isConcatSpreadable:void 0;w.exports=function p(t){return _(t)||x(t)||!!(m&&t&&t[m])}},58442:w=>{var s=/^(?:0|[1-9]\d*)$/;w.exports=function c(x,_){var m=typeof x;return!!(_=_??9007199254740991)&&("number"==m||"symbol"!=m&&s.test(x))&&x>-1&&x%1==0&&x<_}},93342:(w,E,s)=>{var c=s(20217),x=s(56507),_=s(58442),m=s(25940);w.exports=function p(t,d,l){if(!m(l))return!1;var h=typeof d;return!!("number"==h?x(l)&&_(d,l.length):"string"==h&&d in l)&&c(l[d],t)}},45352:(w,E,s)=>{var c=s(21503),x=s(44129),_=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,m=/^\w*$/;w.exports=function p(t,d){if(c(t))return!1;var l=typeof t;return!("number"!=l&&"symbol"!=l&&"boolean"!=l&&null!=t&&!x(t))||m.test(t)||!_.test(t)||null!=d&&t in Object(d)}},23819:w=>{w.exports=function E(s){var c=typeof s;return"string"==c||"number"==c||"symbol"==c||"boolean"==c?"__proto__"!==s:null===s}},91943:(w,E,s)=>{var m,c=s(24610),x=(m=/[^.]+$/.exec(c&&c.keys&&c.keys.IE_PROTO||""))?"Symbol(src)_1."+m:"";w.exports=function _(m){return!!x&&x in m}},45488:w=>{var E=Object.prototype;w.exports=function s(c){var x=c&&c.constructor;return c===("function"==typeof x&&x.prototype||E)}},22442:(w,E,s)=>{var c=s(25940);w.exports=function x(_){return _==_&&!c(_)}},41840:w=>{w.exports=function E(){this.__data__=[],this.size=0}},34378:(w,E,s)=>{var c=s(43503),_=Array.prototype.splice;w.exports=function m(p){var t=this.__data__,d=c(t,p);return!(d<0||(d==t.length-1?t.pop():_.call(t,d,1),--this.size,0))}},54981:(w,E,s)=>{var c=s(43503);w.exports=function x(_){var m=this.__data__,p=c(m,_);return p<0?void 0:m[p][1]}},67343:(w,E,s)=>{var c=s(43503);w.exports=function x(_){return c(this.__data__,_)>-1}},98895:(w,E,s)=>{var c=s(43503);w.exports=function x(_,m){var p=this.__data__,t=c(p,_);return t<0?(++this.size,p.push([_,m])):p[t][1]=m,this}},10638:(w,E,s)=>{var c=s(54994),x=s(9215),_=s(51501);w.exports=function m(){this.size=0,this.__data__={hash:new c,map:new(_||x),string:new c}}},11184:(w,E,s)=>{var c=s(54537);w.exports=function x(_){var m=c(this,_).delete(_);return this.size-=m?1:0,m}},70866:(w,E,s)=>{var c=s(54537);w.exports=function x(_){return c(this,_).get(_)}},43771:(w,E,s)=>{var c=s(54537);w.exports=function x(_){return c(this,_).has(_)}},51772:(w,E,s)=>{var c=s(54537);w.exports=function x(_,m){var p=c(this,_),t=p.size;return p.set(_,m),this.size+=p.size==t?0:1,this}},83205:w=>{w.exports=function E(s){var c=-1,x=Array(s.size);return s.forEach(function(_,m){x[++c]=[m,_]}),x}},642:w=>{w.exports=function E(s,c){return function(x){return null!=x&&x[s]===c&&(void 0!==c||s in Object(x))}}},15144:(w,E,s)=>{var c=s(30535);w.exports=function _(m){var p=c(m,function(d){return 500===t.size&&t.clear(),d}),t=p.cache;return p}},60862:(w,E,s)=>{var x=s(53436)(Object,"create");w.exports=x},85491:(w,E,s)=>{var x=s(69385)(Object.keys,Object);w.exports=x},32158:w=>{w.exports=function E(s){var c=[];if(null!=s)for(var x in Object(s))c.push(x);return c}},73597:(w,E,s)=>{w=s.nmd(w);var c=s(79122),x=E&&!E.nodeType&&E,_=x&&w&&!w.nodeType&&w,p=_&&_.exports===x&&c.process,t=function(){try{return _&&_.require&&_.require("util").types||p&&p.binding&&p.binding("util")}catch{}}();w.exports=t},92902:w=>{var s=Object.prototype.toString;w.exports=function c(x){return s.call(x)}},69385:w=>{w.exports=function E(s,c){return function(x){return s(c(x))}}},53983:(w,E,s)=>{var c=s(26999),x=Math.max;w.exports=function _(m,p,t){return p=x(void 0===p?m.length-1:p,0),function(){for(var d=arguments,l=-1,h=x(d.length-p,0),f=Array(h);++l<h;)f[l]=d[p+l];l=-1;for(var u=Array(p+1);++l<p;)u[l]=d[l];return u[p]=t(f),c(m,this,u)}}},12119:(w,E,s)=>{var c=s(79122),x="object"==typeof self&&self&&self.Object===Object&&self,_=c||x||Function("return this")();w.exports=_},99351:w=>{w.exports=function E(s,c){if(("constructor"!==c||"function"!=typeof s[c])&&"__proto__"!=c)return s[c]}},4600:w=>{w.exports=function s(c){return this.__data__.set(c,"__lodash_hash_undefined__"),this}},31387:w=>{w.exports=function E(s){return this.__data__.has(s)}},24174:w=>{w.exports=function E(s){var c=-1,x=Array(s.size);return s.forEach(function(_){x[++c]=_}),x}},72185:(w,E,s)=>{var c=s(69510),_=s(10029)(c);w.exports=_},10029:w=>{var c=Date.now;w.exports=function x(_){var m=0,p=0;return function(){var t=c(),d=16-(t-p);if(p=t,d>0){if(++m>=800)return arguments[0]}else m=0;return _.apply(void 0,arguments)}}},13720:(w,E,s)=>{var c=s(9215);w.exports=function x(){this.__data__=new c,this.size=0}},64410:w=>{w.exports=function E(s){var c=this.__data__,x=c.delete(s);return this.size=c.size,x}},45576:w=>{w.exports=function E(s){return this.__data__.get(s)}},22247:w=>{w.exports=function E(s){return this.__data__.has(s)}},41585:(w,E,s)=>{var c=s(9215),x=s(51501),_=s(99850);w.exports=function p(t,d){var l=this.__data__;if(l instanceof c){var h=l.__data__;if(!x||h.length<199)return h.push([t,d]),this.size=++l.size,this;l=this.__data__=new _(h)}return l.set(t,d),this.size=l.size,this}},24977:w=>{w.exports=function E(s,c,x){for(var _=x-1,m=s.length;++_<m;)if(s[_]===c)return _;return-1}},52315:(w,E,s)=>{var c=s(75481),x=s(77609),_=s(81149);w.exports=function m(p){return x(p)?_(p):c(p)}},32855:(w,E,s)=>{var c=s(15144),x=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_=/\\(\\)?/g,m=c(function(p){var t=[];return 46===p.charCodeAt(0)&&t.push(""),p.replace(x,function(d,l,h,f){t.push(h?f.replace(_,"$1"):l||d)}),t});w.exports=m},68533:(w,E,s)=>{var c=s(44129);w.exports=function _(m){if("string"==typeof m||c(m))return m;var p=m+"";return"0"==p&&1/m==-1/0?"-0":p}},52827:w=>{var s=Function.prototype.toString;w.exports=function c(x){if(null!=x){try{return s.call(x)}catch{}try{return x+""}catch{}}return""}},42760:w=>{var E=/\s/;w.exports=function s(c){for(var x=c.length;x--&&E.test(c.charAt(x)););return x}},81149:w=>{var E="\\ud800-\\udfff",p="["+E+"]",t="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",d="\\ud83c[\\udffb-\\udfff]",h="[^"+E+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",u="[\\ud800-\\udbff][\\udc00-\\udfff]",C="(?:"+t+"|"+d+")?",L="[\\ufe0e\\ufe0f]?",R=L+C+"(?:\\u200d(?:"+[h,f,u].join("|")+")"+L+C+")*",M="(?:"+[h+t+"?",t,f,u,p].join("|")+")",F=RegExp(d+"(?="+d+")|"+M+R,"g");w.exports=function B(Y){for(var V=F.lastIndex=0;F.test(Y);)++V;return V}},11094:(w,E,s)=>{var c=s(44462);w.exports=function _(m){return c(m,4)}},90733:(w,E,s)=>{var c=s(44462);w.exports=function m(p){return c(p,5)}},76684:w=>{w.exports=function E(s){return function(){return s}}},28800:(w,E,s)=>{var c=s(23269),x=s(20217),_=s(93342),m=s(16555),p=Object.prototype,t=p.hasOwnProperty,d=c(function(l,h){l=Object(l);var f=-1,u=h.length,g=u>2?h[2]:void 0;for(g&&_(h[0],h[1],g)&&(u=1);++f<u;)for(var C=h[f],L=m(C),I=-1,R=L.length;++I<R;){var M=L[I],F=l[M];(void 0===F||x(F,p[M])&&!t.call(l,M))&&(l[M]=C[M])}return l});w.exports=d},35474:(w,E,s)=>{w.exports=s(89851)},20217:w=>{w.exports=function E(s,c){return s===c||s!=s&&c!=c}},35281:(w,E,s)=>{var c=s(69779),x=s(33609),_=s(96517),m=s(21503);w.exports=function p(t,d){return(m(t)?c:x)(t,_(d,3))}},62516:(w,E,s)=>{var _=s(24653)(s(36397));w.exports=_},36397:(w,E,s)=>{var c=s(65317),x=s(96517),_=s(44401),m=Math.max;w.exports=function p(t,d,l){var h=null==t?0:t.length;if(!h)return-1;var f=null==l?0:_(l);return f<0&&(f=m(h+f,0)),c(t,x(d,3),f)}},22274:(w,E,s)=>{var c=s(50686);w.exports=function x(_){return null!=_&&_.length?c(_,1):[]}},89851:(w,E,s)=>{var c=s(96837),x=s(43132),_=s(21481),m=s(21503);w.exports=function p(t,d){return(m(t)?c:x)(t,_(d))}},41176:(w,E,s)=>{var c=s(30755),x=s(21481),_=s(16555);w.exports=function m(p,t){return null==p?p:c(p,x(t),_)}},8817:(w,E,s)=>{var c=s(15456);w.exports=function x(_,m,p){var t=null==_?void 0:c(_,m);return void 0===t?p:t}},54842:(w,E,s)=>{var c=s(84781),x=s(47283);w.exports=function _(m,p){return null!=m&&x(m,p,c)}},11172:(w,E,s)=>{var c=s(69989),x=s(47283);w.exports=function _(m,p){return null!=m&&x(m,p,c)}},32608:w=>{w.exports=function E(s){return s}},77151:(w,E,s)=>{var c=s(60186),x=s(72671),_=Object.prototype,m=_.hasOwnProperty,p=_.propertyIsEnumerable,t=c(function(){return arguments}())?c:function(d){return x(d)&&m.call(d,"callee")&&!p.call(d,"callee")};w.exports=t},21503:w=>{w.exports=Array.isArray},56507:(w,E,s)=>{var c=s(75946),x=s(96231);w.exports=function _(m){return null!=m&&x(m.length)&&!c(m)}},92377:(w,E,s)=>{var c=s(56507),x=s(72671);w.exports=function _(m){return x(m)&&c(m)}},80891:(w,E,s)=>{w=s.nmd(w);var c=s(12119),x=s(63580),_=E&&!E.nodeType&&E,m=_&&w&&!w.nodeType&&w,t=m&&m.exports===_?c.Buffer:void 0;w.exports=(t?t.isBuffer:void 0)||x},71973:(w,E,s)=>{var c=s(81172),x=s(28794),_=s(77151),m=s(21503),p=s(56507),t=s(80891),d=s(45488),l=s(48159),g=Object.prototype.hasOwnProperty;w.exports=function C(L){if(null==L)return!0;if(p(L)&&(m(L)||"string"==typeof L||"function"==typeof L.splice||t(L)||l(L)||_(L)))return!L.length;var I=x(L);if("[object Map]"==I||"[object Set]"==I)return!L.size;if(d(L))return!c(L).length;for(var R in L)if(g.call(L,R))return!1;return!0}},75946:(w,E,s)=>{var c=s(93337),x=s(25940);w.exports=function d(l){if(!x(l))return!1;var h=c(l);return"[object Function]"==h||"[object GeneratorFunction]"==h||"[object AsyncFunction]"==h||"[object Proxy]"==h}},96231:w=>{w.exports=function s(c){return"number"==typeof c&&c>-1&&c%1==0&&c<=9007199254740991}},13222:(w,E,s)=>{var c=s(97021),x=s(85647),_=s(73597),m=_&&_.isMap,p=m?x(m):c;w.exports=p},25940:w=>{w.exports=function E(s){var c=typeof s;return null!=s&&("object"==c||"function"==c)}},72671:w=>{w.exports=function E(s){return null!=s&&"object"==typeof s}},97614:(w,E,s)=>{var c=s(93337),x=s(29519),_=s(72671),d=Function.prototype.toString,l=Object.prototype.hasOwnProperty,h=d.call(Object);w.exports=function f(u){if(!_(u)||"[object Object]"!=c(u))return!1;var g=x(u);if(null===g)return!0;var C=l.call(g,"constructor")&&g.constructor;return"function"==typeof C&&C instanceof C&&d.call(C)==h}},90799:(w,E,s)=>{var c=s(771),x=s(85647),_=s(73597),m=_&&_.isSet,p=m?x(m):c;w.exports=p},30248:(w,E,s)=>{var c=s(93337),x=s(21503),_=s(72671);w.exports=function p(t){return"string"==typeof t||!x(t)&&_(t)&&"[object String]"==c(t)}},44129:(w,E,s)=>{var c=s(93337),x=s(72671);w.exports=function m(p){return"symbol"==typeof p||x(p)&&"[object Symbol]"==c(p)}},48159:(w,E,s)=>{var c=s(1083),x=s(85647),_=s(73597),m=_&&_.isTypedArray,p=m?x(m):c;w.exports=p},34235:w=>{w.exports=function E(s){return void 0===s}},118:(w,E,s)=>{var c=s(72271),x=s(81172),_=s(56507);w.exports=function m(p){return _(p)?c(p):x(p)}},16555:(w,E,s)=>{var c=s(72271),x=s(92809),_=s(56507);w.exports=function m(p){return _(p)?c(p,!0):x(p)}},25809:w=>{w.exports=function E(s){var c=null==s?0:s.length;return c?s[c-1]:void 0}},19984:(w,E,s)=>{var c=s(84633),x=s(96517),_=s(92046),m=s(21503);w.exports=function p(t,d){return(m(t)?c:_)(t,x(d,3))}},10203:(w,E,s)=>{var c=s(85683),x=s(45184),_=s(96517);w.exports=function m(p,t){var d={};return t=_(t,3),x(p,function(l,h,f){c(d,h,t(l,h,f))}),d}},18176:(w,E,s)=>{var c=s(67308),x=s(31100),_=s(32608);w.exports=function m(p){return p&&p.length?c(p,_,x):void 0}},30535:(w,E,s)=>{var c=s(99850);function _(m,p){if("function"!=typeof m||null!=p&&"function"!=typeof p)throw new TypeError("Expected a function");var t=function(){var d=arguments,l=p?p.apply(this,d):d[0],h=t.cache;if(h.has(l))return h.get(l);var f=m.apply(this,d);return t.cache=h.set(l,f)||h,f};return t.cache=new(_.Cache||c),t}_.Cache=c,w.exports=_},80567:(w,E,s)=>{var c=s(73842),_=s(84944)(function(m,p,t){c(m,p,t)});w.exports=_},29439:(w,E,s)=>{var c=s(67308),x=s(99069),_=s(32608);w.exports=function m(p){return p&&p.length?c(p,_,x):void 0}},29525:(w,E,s)=>{var c=s(67308),x=s(96517),_=s(99069);w.exports=function m(p,t){return p&&p.length?c(p,x(t,2),_):void 0}},12552:w=>{w.exports=function E(){}},31710:(w,E,s)=>{var c=s(12119);w.exports=function(){return c.Date.now()}},16372:(w,E,s)=>{var c=s(83021),_=s(3975)(function(m,p){return null==m?{}:c(m,p)});w.exports=_},87495:(w,E,s)=>{var c=s(11847),x=s(39222),_=s(45352),m=s(68533);w.exports=function p(t){return _(t)?c(m(t)):x(t)}},90361:(w,E,s)=>{var x=s(97509)();w.exports=x},81337:(w,E,s)=>{var c=s(8745),x=s(43132),_=s(96517),m=s(13570),p=s(21503);w.exports=function t(d,l,h){var f=p(d)?c:m,u=arguments.length<3;return f(d,_(l,4),h,u,x)}},55637:(w,E,s)=>{var c=s(81172),x=s(28794),_=s(56507),m=s(30248),p=s(52315);w.exports=function l(h){if(null==h)return 0;if(_(h))return m(h)?p(h):h.length;var f=x(h);return"[object Map]"==f||"[object Set]"==f?h.size:c(h).length}},12906:(w,E,s)=>{var c=s(50686),x=s(6119),_=s(23269),m=s(93342),p=_(function(t,d){if(null==t)return[];var l=d.length;return l>1&&m(t,d[0],d[1])?d=[]:l>2&&m(d[0],d[1],d[2])&&(d=[d[0]]),x(t,c(d,1),[])});w.exports=p},49975:w=>{w.exports=function E(){return[]}},63580:w=>{w.exports=function E(){return!1}},12232:(w,E,s)=>{var c=s(51467),x=1/0;w.exports=function m(p){return p?(p=c(p))===x||p===-x?17976931348623157e292*(p<0?-1:1):p==p?p:0:0===p?p:0}},44401:(w,E,s)=>{var c=s(12232);w.exports=function x(_){var m=c(_),p=m%1;return m==m?p?m-p:m:0}},51467:(w,E,s)=>{var c=s(83348),x=s(25940),_=s(44129),p=/^[-+]0x[0-9a-f]+$/i,t=/^0b[01]+$/i,d=/^0o[0-7]+$/i,l=parseInt;w.exports=function h(f){if("number"==typeof f)return f;if(_(f))return NaN;if(x(f)){var u="function"==typeof f.valueOf?f.valueOf():f;f=x(u)?u+"":u}if("string"!=typeof f)return 0===f?f:+f;f=c(f);var g=t.test(f);return g||d.test(f)?l(f.slice(2),g?2:8):p.test(f)?NaN:+f}},8067:(w,E,s)=>{var c=s(31989),x=s(16555);w.exports=function _(m){return c(m,x(m))}},73943:(w,E,s)=>{var c=s(93935);w.exports=function x(_){return null==_?"":c(_)}},89416:(w,E,s)=>{var c=s(96837),x=s(78858),_=s(45184),m=s(96517),p=s(29519),t=s(21503),d=s(80891),l=s(75946),h=s(25940),f=s(48159);w.exports=function u(g,C,L){var I=t(g),R=I||d(g)||f(g);if(C=m(C,4),null==L){var M=g&&g.constructor;L=R?I?new M:[]:h(g)&&l(M)?x(p(g)):{}}return(R?c:_)(g,function(F,B,Y){return C(L,F,B,Y)}),L}},68921:(w,E,s)=>{var c=s(50686),x=s(23269),_=s(80707),m=s(92377),p=x(function(t){return _(c(t,1,m,!0))});w.exports=p},51541:(w,E,s)=>{var c=s(73943),x=0;w.exports=function _(m){var p=++x;return c(m)+p}},90377:(w,E,s)=>{var c=s(19179),x=s(118);w.exports=function _(m){return null==m?[]:c(m,x(m))}},21617:(w,E,s)=>{var c=s(89719),x=s(38645);w.exports=function _(m,p){return x(m||[],p||[],c)}},34315:(w,E,s)=>{"use strict";const c=Symbol.prototype.valueOf,x=s(52872);w.exports=function _(h,f){switch(x(h)){case"array":return h.slice();case"object":return Object.assign({},h);case"date":return new h.constructor(Number(h));case"map":return new Map(h);case"set":return new Set(h);case"buffer":return function d(h){const f=h.length,u=Buffer.allocUnsafe?Buffer.allocUnsafe(f):Buffer.from(f);return h.copy(u),u}(h);case"symbol":return function l(h){return c?Object(c.call(h)):{}}(h);case"arraybuffer":return function p(h){const f=new h.constructor(h.byteLength);return new Uint8Array(f).set(new Uint8Array(h)),f}(h);case"float32array":case"float64array":case"int16array":case"int32array":case"int8array":case"uint16array":case"uint32array":case"uint8clampedarray":case"uint8array":return function t(h,f){return new h.constructor(h.buffer,h.byteOffset,h.length)}(h);case"regexp":return function m(h){const f=void 0!==h.flags?h.flags:/\w+$/.exec(h)||void 0,u=new h.constructor(h.source,f);return u.lastIndex=h.lastIndex,u}(h);case"error":return Object.create(h);default:return h}}},67824:(w,E,s)=>{"use strict";function c(x){for(var _ in x)E.hasOwnProperty(_)||(E[_]=x[_])}Object.defineProperty(E,"__esModule",{value:!0}),c(s(95085)),c(s(26243)),c(s(91786)),c(s(30225)),c(s(76767)),c(s(30345)),c(s(15675)),c(s(86461)),c(s(58802)),c(s(33900)),c(s(88866)),c(s(94655)),c(s(4068)),c(s(33858)),c(s(98237)),c(s(83292))},95085:function(w,E,s){"use strict";var p,c=this&&this.__extends||(p=function(t,d){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var f in h)h.hasOwnProperty(f)&&(l[f]=h[f])})(t,d)},function(t,d){function l(){this.constructor=t}p(t,d),t.prototype=null===d?Object.create(d):(l.prototype=d.prototype,new l)});Object.defineProperty(E,"__esModule",{value:!0});var x=s(15675),_=function(p){function t(d){var l=p.call(this)||this,f=d;return f.trigger&&(l.trigger=f.trigger),f.kick&&(l.kick=f.kick),f.drag&&(l.drag=f.drag),f.on&&(l.on=f.on),l.dragstart=l.dragStart=x.Layout.dragStart,l.dragend=l.dragEnd=x.Layout.dragEnd,l}return c(t,p),t.prototype.trigger=function(d){},t.prototype.kick=function(){},t.prototype.drag=function(){},t.prototype.on=function(d,l){return this},t}(x.Layout);E.LayoutAdaptor=_,E.adaptor=function m(p){return new _(p)}},83292:(w,E,s)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});var c=s(15675),x=s(76767);E.gridify=function _(t,d,l,h){t.cola.start(0,0,0,10,!1);var f=function m(t,d,l,h){t.forEach(function(u){u.routerNode={name:u.name,bounds:u.bounds.inflate(-l)}}),d.forEach(function(u){u.routerNode={bounds:u.bounds.inflate(-h),children:(typeof u.groups<"u"?u.groups.map(function(g){return t.length+g.id}):[]).concat(typeof u.leaves<"u"?u.leaves.map(function(g){return g.index}):[])}});var f=t.concat(d).map(function(u,g){return u.routerNode.id=g,u.routerNode});return new x.GridRouter(f,{getChildren:function(u){return u.children},getBounds:function(u){return u.bounds}},l-h)}(t.cola.nodes(),t.cola.groups(),l,h);return f.routeEdges(t.powerGraph.powerEdges,d,function(u){return u.source.routerNode.id},function(u){return u.target.routerNode.id})},E.powerGraphGridLayout=function p(t,d,l){var h;t.nodes.forEach(function(C,L){return C.index=L}),(new c.Layout).avoidOverlaps(!1).nodes(t.nodes).links(t.links).powerGraphGroups(function(C){(h=C).groups.forEach(function(L){return L.padding=l})});var f=t.nodes.length,u=[],g=t.nodes.slice(0);return g.forEach(function(C,L){return C.index=L}),h.groups.forEach(function(C){var L=C.index=C.id+f;g.push(C),typeof C.leaves<"u"&&C.leaves.forEach(function(I){return u.push({source:L,target:I.index})}),typeof C.groups<"u"&&C.groups.forEach(function(I){return u.push({source:L,target:I.id+f})})}),h.powerEdges.forEach(function(C){u.push({source:C.source.index,target:C.target.index})}),(new c.Layout).size(d).nodes(g).links(u).avoidOverlaps(!1).linkDistance(30).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(100,0,0,0,!1),{cola:(new c.Layout).convergenceThreshold(.001).size(d).avoidOverlaps(!0).nodes(t.nodes).links(t.links).groupCompactness(1e-4).linkDistance(30).symmetricDiffLinkLengths(5).powerGraphGroups(function(C){(h=C).groups.forEach(function(L){L.padding=l})}).start(50,0,100,0,!1),powerGraph:h}}},26243:(w,E,s)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});var c=s(49346),x=s(22487);E.d3adaptor=function _(p){return!p||function m(p){return p.version&&null!==p.version.match(/^3\./)}(p)?new c.D3StyleLayoutAdaptor:new x.D3StyleLayoutAdaptor(p)}},49346:function(w,E,s){"use strict";var p,c=this&&this.__extends||(p=function(t,d){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var f in h)h.hasOwnProperty(f)&&(l[f]=h[f])})(t,d)},function(t,d){function l(){this.constructor=t}p(t,d),t.prototype=null===d?Object.create(d):(l.prototype=d.prototype,new l)});Object.defineProperty(E,"__esModule",{value:!0});var x=s(15675),_=function(p){function t(){var d=p.call(this)||this;d.event=d3.dispatch(x.EventType[x.EventType.start],x.EventType[x.EventType.tick],x.EventType[x.EventType.end]);var l=d;return d.drag=function(){if(!f)var f=d3.behavior.drag().origin(x.Layout.dragOrigin).on("dragstart.d3adaptor",x.Layout.dragStart).on("drag.d3adaptor",function(u){x.Layout.drag(u,d3.event),l.resume()}).on("dragend.d3adaptor",x.Layout.dragEnd);if(!arguments.length)return f;this.call(f)},d}return c(t,p),t.prototype.trigger=function(d){var l={type:x.EventType[d.type],alpha:d.alpha,stress:d.stress};this.event[l.type](l)},t.prototype.kick=function(){var d=this;d3.timer(function(){return p.prototype.tick.call(d)})},t.prototype.on=function(d,l){return this.event.on("string"==typeof d?d:x.EventType[d],l),this},t}(x.Layout);E.D3StyleLayoutAdaptor=_,E.d3adaptor=function m(){return new _}},22487:function(w,E,s){"use strict";var m,c=this&&this.__extends||(m=function(p,t){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,l){d.__proto__=l}||function(d,l){for(var h in l)l.hasOwnProperty(h)&&(d[h]=l[h])})(p,t)},function(p,t){function d(){this.constructor=p}m(p,t),p.prototype=null===t?Object.create(t):(d.prototype=t.prototype,new d)});Object.defineProperty(E,"__esModule",{value:!0});var x=s(15675),_=function(m){function p(t){var d=m.call(this)||this;d.d3Context=t,d.event=t.dispatch(x.EventType[x.EventType.start],x.EventType[x.EventType.tick],x.EventType[x.EventType.end]);var l=d;return d.drag=function(){if(!f)var f=t.drag().subject(x.Layout.dragOrigin).on("start.d3adaptor",x.Layout.dragStart).on("drag.d3adaptor",function(u){x.Layout.drag(u,t.event),l.resume()}).on("end.d3adaptor",x.Layout.dragEnd);if(!arguments.length)return f;arguments[0].call(f)},d}return c(p,m),p.prototype.trigger=function(t){var d={type:x.EventType[t.type],alpha:t.alpha,stress:t.stress};this.event.call(d.type,d)},p.prototype.kick=function(){var t=this,d=this.d3Context.timer(function(){return m.prototype.tick.call(t)&&d.stop()})},p.prototype.on=function(t,d){return this.event.on("string"==typeof t?t:x.EventType[t],d),this},p}(x.Layout);E.D3StyleLayoutAdaptor=_},91786:(w,E)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});var s=function(){function _(){this.locks={}}return _.prototype.add=function(m,p){this.locks[m]=p},_.prototype.clear=function(){this.locks={}},_.prototype.isEmpty=function(){for(var m in this.locks)return!1;return!0},_.prototype.apply=function(m){for(var p in this.locks)m(Number(p),this.locks[p])},_}();E.Locks=s;var c=function(){function _(m,p,t){void 0===t&&(t=null),this.D=p,this.G=t,this.threshold=1e-4,this.numGridSnapNodes=0,this.snapGridSize=100,this.snapStrength=1e3,this.scaleSnapByMaxH=!1,this.random=new x,this.project=null,this.x=m,this.k=m.length;var d=this.n=m[0].length;this.H=new Array(this.k),this.g=new Array(this.k),this.Hd=new Array(this.k),this.a=new Array(this.k),this.b=new Array(this.k),this.c=new Array(this.k),this.d=new Array(this.k),this.e=new Array(this.k),this.ia=new Array(this.k),this.ib=new Array(this.k),this.xtmp=new Array(this.k),this.locks=new s,this.minD=Number.MAX_VALUE;for(var h,l=d;l--;)for(h=d;--h>l;){var f=p[l][h];f>0&&f<this.minD&&(this.minD=f)}for(this.minD===Number.MAX_VALUE&&(this.minD=1),l=this.k;l--;){for(this.g[l]=new Array(d),this.H[l]=new Array(d),h=d;h--;)this.H[l][h]=new Array(d);this.Hd[l]=new Array(d),this.a[l]=new Array(d),this.b[l]=new Array(d),this.c[l]=new Array(d),this.d[l]=new Array(d),this.e[l]=new Array(d),this.ia[l]=new Array(d),this.ib[l]=new Array(d),this.xtmp[l]=new Array(d)}}return _.createSquareMatrix=function(m,p){for(var t=new Array(m),d=0;d<m;++d){t[d]=new Array(m);for(var l=0;l<m;++l)t[d][l]=p(d,l)}return t},_.prototype.offsetDir=function(){for(var m=this,p=new Array(this.k),t=0,d=0;d<this.k;++d){var l=p[d]=this.random.getNextBetween(.01,1)-.5;t+=l*l}return t=Math.sqrt(t),p.map(function(h){return h*(m.minD/t)})},_.prototype.computeDerivatives=function(m){var p=this,t=this.n;if(!(t<1)){for(var d,l=new Array(this.k),h=new Array(this.k),f=new Array(this.k),u=0,g=0;g<t;++g){for(d=0;d<this.k;++d)f[d]=this.g[d][g]=0;for(var C=0;C<t;++C)if(g!==C){for(var L=t;L--;){var I=0;for(d=0;d<this.k;++d){var R=l[d]=m[d][g]-m[d][C];I+=h[d]=R*R}if(I>1e-9)break;var M=this.offsetDir();for(d=0;d<this.k;++d)m[d][C]+=M[d]}var F=Math.sqrt(I),B=this.D[g][C],Y=null!=this.G?this.G[g][C]:1;if(Y>1&&F>B||!isFinite(B)){for(d=0;d<this.k;++d)this.H[d][g][C]=0;continue}Y>1&&(Y=1);var V=B*B,nt=2*Y*(F-B)/(V*F),et=F*F*F,st=2*-Y/(V*et);for(isFinite(nt)||console.log(nt),d=0;d<this.k;++d)this.g[d][g]+=l[d]*nt,f[d]-=this.H[d][g][C]=st*(et+B*(h[d]-I)+F*I)}for(d=0;d<this.k;++d)u=Math.max(u,this.H[d][g][g]=f[d])}var K=this.snapGridSize/2,X=this.snapGridSize,at=this.snapStrength/(K*K),H=this.numGridSnapNodes;for(g=0;g<H;++g)for(d=0;d<this.k;++d){var Q=this.x[d][g],it=Q/X,q=it%1,U=it-q;-K<(R=Math.abs(q)<=.5?Q-U*X:Q>0?Q-(U+1)*X:Q-(U-1)*X)&&R<=K&&(this.scaleSnapByMaxH?(this.g[d][g]+=u*at*R,this.H[d][g][g]+=u*at):(this.g[d][g]+=at*R,this.H[d][g][g]+=at))}this.locks.isEmpty()||this.locks.apply(function(mt,St){for(d=0;d<p.k;++d)p.H[d][mt][mt]+=u,p.g[d][mt]-=u*(St[d]-m[d][mt])})}},_.dotProd=function(m,p){for(var t=0,d=m.length;d--;)t+=m[d]*p[d];return t},_.rightMultiply=function(m,p,t){for(var d=m.length;d--;)t[d]=_.dotProd(m[d],p)},_.prototype.computeStepSize=function(m){for(var p=0,t=0,d=0;d<this.k;++d)p+=_.dotProd(this.g[d],m[d]),_.rightMultiply(this.H[d],m[d],this.Hd[d]),t+=_.dotProd(m[d],this.Hd[d]);return 0!==t&&isFinite(t)?1*p/t:0},_.prototype.reduceStress=function(){this.computeDerivatives(this.x);for(var m=this.computeStepSize(this.g),p=0;p<this.k;++p)this.takeDescentStep(this.x[p],this.g[p],m);return this.computeStress()},_.copy=function(m,p){for(var t=m.length,d=p[0].length,l=0;l<t;++l)for(var h=0;h<d;++h)p[l][h]=m[l][h]},_.prototype.stepAndProject=function(m,p,t,d){_.copy(m,p),this.takeDescentStep(p[0],t[0],d),this.project&&this.project[0](m[0],m[1],p[0]),this.takeDescentStep(p[1],t[1],d),this.project&&this.project[1](p[0],m[1],p[1]);for(var l=2;l<this.k;l++)this.takeDescentStep(p[l],t[l],d)},_.mApply=function(m,p,t){for(var d=m;d-- >0;)for(var l=p;l-- >0;)t(d,l)},_.prototype.matrixApply=function(m){_.mApply(this.k,this.n,m)},_.prototype.computeNextPosition=function(m,p){var t=this;this.computeDerivatives(m);var d=this.computeStepSize(this.g);if(this.stepAndProject(m,p,this.g,d),this.project){this.matrixApply(function(h,f){return t.e[h][f]=m[h][f]-p[h][f]});var l=this.computeStepSize(this.e);l=Math.max(.2,Math.min(l,1)),this.stepAndProject(m,p,this.e,l)}},_.prototype.run=function(m){for(var p=Number.MAX_VALUE,t=!1;!t&&m-- >0;){var d=this.rungeKutta();t=Math.abs(p/d-1)<this.threshold,p=d}return p},_.prototype.rungeKutta=function(){var m=this;this.computeNextPosition(this.x,this.a),_.mid(this.x,this.a,this.ia),this.computeNextPosition(this.ia,this.b),_.mid(this.x,this.b,this.ib),this.computeNextPosition(this.ib,this.c),this.computeNextPosition(this.c,this.d);var p=0;return this.matrixApply(function(t,d){var l=(m.a[t][d]+2*m.b[t][d]+2*m.c[t][d]+m.d[t][d])/6,h=m.x[t][d]-l;p+=h*h,m.x[t][d]=l}),p},_.mid=function(m,p,t){_.mApply(m.length,m[0].length,function(d,l){return t[d][l]=m[d][l]+(p[d][l]-m[d][l])/2})},_.prototype.takeDescentStep=function(m,p,t){for(var d=0;d<this.n;++d)m[d]=m[d]-t*p[d]},_.prototype.computeStress=function(){for(var m=0,p=0,t=this.n-1;p<t;++p)for(var d=p+1,l=this.n;d<l;++d){for(var h=0,f=0;f<this.k;++f){var u=this.x[f][p]-this.x[f][d];h+=u*u}h=Math.sqrt(h);var g=this.D[p][d];if(isFinite(g)){var C=g-h;m+=C*C/(g*g)}}return m},_.zeroDistance=1e-10,_}();E.Descent=c;var x=function(){function _(m){void 0===m&&(m=1),this.seed=m,this.a=214013,this.c=2531011,this.m=2147483648,this.range=32767}return _.prototype.getNext=function(){return this.seed=(this.seed*this.a+this.c)%this.m,(this.seed>>16)/this.range},_.prototype.getNextBetween=function(m,p){return m+this.getNext()*(p-m)},_}();E.PseudoRandom=x},30225:function(w,E,s){"use strict";var q,c=this&&this.__extends||(q=function(U,D){return(q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(mt,St){mt.__proto__=St}||function(mt,St){for(var Mt in St)St.hasOwnProperty(Mt)&&(mt[Mt]=St[Mt])})(U,D)},function(U,D){function mt(){this.constructor=U}q(U,D),U.prototype=null===D?Object.create(D):(mt.prototype=D.prototype,new mt)});Object.defineProperty(E,"__esModule",{value:!0});var x=s(4068),_=function q(){};E.Point=_;var m=function q(U,D,mt,St){this.x1=U,this.y1=D,this.x2=mt,this.y2=St};E.LineSegment=m;var p=function(q){function U(){return null!==q&&q.apply(this,arguments)||this}return c(U,q),U}(_);function t(q,U,D){return(U.x-q.x)*(D.y-q.y)-(D.x-q.x)*(U.y-q.y)}function d(q,U,D){return t(q,U,D)>0}function l(q,U,D){return t(q,U,D)<0}function C(q,U){var D=U.slice(0);return D.push(U[0]),{rtan:L(q,D),ltan:I(q,D)}}function L(q,U){var mt,St,Mt,$t,D=U.length-1;if(l(q,U[1],U[0])&&!d(q,U[D-1],U[0]))return 0;for(mt=0,St=D;;){if(St-mt==1)return d(q,U[mt],U[St])?mt:St;if(($t=l(q,U[(Mt=Math.floor((mt+St)/2))+1],U[Mt]))&&!d(q,U[Mt-1],U[Mt]))return Mt;d(q,U[mt+1],U[mt])?$t||d(q,U[mt],U[Mt])?St=Mt:mt=Mt:$t&&l(q,U[mt],U[Mt])?St=Mt:mt=Mt}}function I(q,U){var mt,St,Mt,$t,D=U.length-1;if(d(q,U[D-1],U[0])&&!l(q,U[1],U[0]))return 0;for(mt=0,St=D;;){if(St-mt==1)return l(q,U[mt],U[St])?mt:St;if($t=l(q,U[(Mt=Math.floor((mt+St)/2))+1],U[Mt]),d(q,U[Mt-1],U[Mt])&&!$t)return Mt;l(q,U[mt+1],U[mt])?$t?l(q,U[mt],U[Mt])?St=Mt:mt=Mt:St=Mt:$t?mt=Mt:d(q,U[mt],U[Mt])?St=Mt:mt=Mt}}function R(q,U,D,mt,St,Mt){var Et,$t;$t=mt(q[Et=D(U[0],q)],U);for(var ue=!1;!ue;){for(ue=!0;Et===q.length-1&&(Et=0),!St(U[$t],q[Et],q[Et+1]);)++Et;for(;0===$t&&($t=U.length-1),!Mt(q[Et],U[$t],U[$t-1]);)--$t,ue=!1}return{t1:Et,t2:$t}}function F(q,U){return R(q,U,L,I,d,l)}E.PolyPoint=p,E.isLeft=t,E.ConvexHull=function h(q){var mt,U=q.slice(0).sort(function(Nt,ee){return Nt.x!==ee.x?ee.x-Nt.x:ee.y-Nt.y}),D=q.length,Mt=U[0].x;for(mt=1;mt<D&&U[mt].x===Mt;++mt);var Et=mt-1,$t=[];if($t.push(U[0]),Et===D-1)U[Et].y!==U[0].y&&$t.push(U[Et]);else{var ue,ut=D-1,ft=U[D-1].x;for(mt=D-2;mt>=0&&U[mt].x===ft;mt--);for(ue=mt+1,mt=Et;++mt<=ue;)if(!(t(U[0],U[ue],U[mt])>=0&&mt<ue)){for(;$t.length>1&&!(t($t[$t.length-2],$t[$t.length-1],U[mt])>0);)$t.length-=1;0!=mt&&$t.push(U[mt])}ut!=ue&&$t.push(U[ut]);var gt=$t.length;for(mt=ue;--mt>=Et;)if(!(t(U[ut],U[Et],U[mt])>=0&&mt>Et)){for(;$t.length>gt&&!(t($t[$t.length-2],$t[$t.length-1],U[mt])>0);)$t.length-=1;0!=mt&&$t.push(U[mt])}}return $t},E.clockwiseRadialSweep=function f(q,U,D){U.slice(0).sort(function(mt,St){return Math.atan2(mt.y-q.y,mt.x-q.x)-Math.atan2(St.y-q.y,St.x-q.x)}).forEach(D)},E.tangent_PolyPolyC=R,E.LRtangent_PolyPolyC=function M(q,U){var D=F(U,q);return{t1:D.t2,t2:D.t1}},E.RLtangent_PolyPolyC=F,E.LLtangent_PolyPolyC=function B(q,U){return R(q,U,I,I,l,l)},E.RRtangent_PolyPolyC=function Y(q,U){return R(q,U,L,L,d,d)};var V=function q(U,D){this.t1=U,this.t2=D};E.BiTangent=V;var nt=function q(){};E.BiTangents=nt;var et=function(q){function U(){return null!==q&&q.apply(this,arguments)||this}return c(U,q),U}(_);E.TVGPoint=et;var st=function q(U,D,mt,St){this.id=U,this.polyid=D,this.polyvertid=mt,this.p=St,St.vv=this};E.VisibilityVertex=st;var K=function(){function q(U,D){this.source=U,this.target=D}return q.prototype.length=function(){var U=this.source.p.x-this.target.p.x,D=this.source.p.y-this.target.p.y;return Math.sqrt(U*U+D*D)},q}();E.VisibilityEdge=K;var X=function(){function q(U,D){if(this.P=U,this.V=[],this.E=[],D)this.V=D.V.slice(0),this.E=D.E.slice(0);else{for(var mt=U.length,St=0;St<mt;St++){for(var Mt=U[St],Et=0;Et<Mt.length;++Et){var ue=new st(this.V.length,St,Et,Mt[Et]);this.V.push(ue),Et>0&&this.E.push(new K(Mt[Et-1].vv,ue))}Mt.length>1&&this.E.push(new K(Mt[0].vv,Mt[Mt.length-1].vv))}for(St=0;St<mt-1;St++){var ut=U[St];for(Et=St+1;Et<mt;Et++){var ft=U[Et],gt=at(ut,ft);for(var Nt in gt){var ee=gt[Nt];this.addEdgeIfVisible(ut[ee.t1],ft[ee.t2],St,Et)}}}}}return q.prototype.addEdgeIfVisible=function(U,D,mt,St){this.intersectsPolys(new m(U.x,U.y,D.x,D.y),mt,St)||this.E.push(new K(U.vv,D.vv))},q.prototype.addPoint=function(U,D){var mt=this.P.length;this.V.push(new st(this.V.length,mt,0,U));for(var St=0;St<mt;++St)if(St!==D){var Mt=this.P[St],Et=C(U,Mt);this.addEdgeIfVisible(U,Mt[Et.ltan],D,St),this.addEdgeIfVisible(U,Mt[Et.rtan],D,St)}return U.vv},q.prototype.intersectsPolys=function(U,D,mt){for(var St=0,Mt=this.P.length;St<Mt;++St)if(St!=D&&St!=mt&&W(U,this.P[St]).length>0)return!0;return!1},q}();function W(q,U){for(var D=[],mt=1,St=U.length;mt<St;++mt){var Mt=x.Rectangle.lineIntersection(q.x1,q.y1,q.x2,q.y2,U[mt-1].x,U[mt-1].y,U[mt].x,U[mt].y);Mt&&D.push(Mt)}return D}function at(q,U){for(var D=q.length-1,mt=U.length-1,St=new nt,Mt=0;Mt<D;++Mt)for(var Et=0;Et<mt;++Et){var $t=q[0==Mt?D-1:Mt-1],ue=q[Mt],ut=q[Mt+1],ft=U[0==Et?mt-1:Et-1],gt=U[Et],Nt=U[Et+1],ee=t($t,ue,gt),Kt=t(ue,ft,gt),ce=t(ue,gt,Nt),xe=t(ft,gt,ue),Ge=t(gt,$t,ue),Ne=t(gt,ue,ut);ee>=0&&Kt>=0&&ce<0&&xe>=0&&Ge>=0&&Ne<0?St.ll=new V(Mt,Et):ee<=0&&Kt<=0&&ce>0&&xe<=0&&Ge<=0&&Ne>0?St.rr=new V(Mt,Et):ee<=0&&Kt>0&&ce<=0&&xe>=0&&Ge<0&&Ne>=0?St.rl=new V(Mt,Et):ee>=0&&Kt<0&&ce>=0&&xe<=0&&Ge>0&&Ne<=0&&(St.lr=new V(Mt,Et))}return St}function Q(q,U){return!q.every(function(D){return!function H(q,U){for(var D=1,mt=U.length;D<mt;++D)if(l(U[D-1],U[D],q))return!1;return!0}(D,U)})}E.TangentVisibilityGraph=X,E.tangents=at,E.polysOverlap=function it(q,U){if(Q(q,U)||Q(U,q))return!0;for(var D=1,mt=q.length;D<mt;++D){var St=q[D],Mt=q[D-1];if(W(new m(Mt.x,Mt.y,St.x,St.y),U).length>0)return!0}return!1}},76767:(w,E,s)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});var c=s(4068),x=s(98237),_=s(33858),m=function l(h,f,u){this.id=h,this.rect=f,this.children=u,this.leaf=typeof u>"u"||0===u.length};E.NodeWrapper=m;var p=function l(h,f,u,g,C){void 0===g&&(g=null),void 0===C&&(C=null),this.id=h,this.x=f,this.y=u,this.node=g,this.line=C};E.Vert=p;var t=function(){function l(h,f){this.s=h,this.t=f;var u=l.findMatch(h,f),g=f.slice(0).reverse(),C=l.findMatch(h,g);u.length>=C.length?(this.length=u.length,this.si=u.si,this.ti=u.ti,this.reversed=!1):(this.length=C.length,this.si=C.si,this.ti=f.length-C.ti-C.length,this.reversed=!0)}return l.findMatch=function(h,f){for(var u=h.length,g=f.length,C={length:0,si:-1,ti:-1},L=new Array(u),I=0;I<u;I++){L[I]=new Array(g);for(var R=0;R<g;R++)if(h[I]===f[R]){var M=L[I][R]=0===I||0===R?1:L[I-1][R-1]+1;M>C.length&&(C.length=M,C.si=I-M+1,C.ti=R-M+1)}else L[I][R]=0}return C},l.prototype.getSequence=function(){return this.length>=0?this.s.slice(this.si,this.si+this.length):[]},l}();E.LongestCommonSubsequence=t;var d=function(){function l(h,f,u){var g=this;void 0===u&&(u=12),this.originalnodes=h,this.groupPadding=u,this.leaves=null,this.nodes=h.map(function(et,st){return new m(st,f.getBounds(et),f.getChildren(et))}),this.leaves=this.nodes.filter(function(et){return et.leaf}),this.groups=this.nodes.filter(function(et){return!et.leaf}),this.cols=this.getGridLines("x"),this.rows=this.getGridLines("y"),this.groups.forEach(function(et){return et.children.forEach(function(st){return g.nodes[st].parent=et})}),this.root={children:[]},this.nodes.forEach(function(et){typeof et.parent>"u"&&(et.parent=g.root,g.root.children.push(et.id)),et.ports=[]}),this.backToFront=this.nodes.slice(0),this.backToFront.sort(function(et,st){return g.getDepth(et)-g.getDepth(st)}),this.backToFront.slice(0).reverse().filter(function(et){return!et.leaf}).forEach(function(et){var st=c.Rectangle.empty();et.children.forEach(function(K){return st=st.union(g.nodes[K].rect)}),et.rect=st.inflate(g.groupPadding)});var L=this.midPoints(this.cols.map(function(et){return et.pos})),I=this.midPoints(this.rows.map(function(et){return et.pos})),R=L[0],M=L[L.length-1],F=I[0],B=I[I.length-1],Y=this.rows.map(function(et){return{x1:R,x2:M,y1:et.pos,y2:et.pos}}).concat(I.map(function(et){return{x1:R,x2:M,y1:et,y2:et}})),V=this.cols.map(function(et){return{x1:et.pos,x2:et.pos,y1:F,y2:B}}).concat(L.map(function(et){return{x1:et,x2:et,y1:F,y2:B}})),nt=Y.concat(V);nt.forEach(function(et){return et.verts=[]}),this.verts=[],this.edges=[],Y.forEach(function(et){return V.forEach(function(st){var K=new p(g.verts.length,st.x1,et.y1);et.verts.push(K),st.verts.push(K),g.verts.push(K);for(var X=g.backToFront.length;X-- >0;){var W=g.backToFront[X],at=W.rect,H=Math.abs(K.x-at.cx()),Q=Math.abs(K.y-at.cy());if(H<at.width()/2&&Q<at.height()/2){K.node=W;break}}})}),nt.forEach(function(et,st){g.nodes.forEach(function(Q,it){Q.rect.lineIntersections(et.x1,et.y1,et.x2,et.y2).forEach(function(q,U){var D=new p(g.verts.length,q.x,q.y,Q,et);g.verts.push(D),et.verts.push(D),Q.ports.push(D)})});var K=Math.abs(et.y1-et.y2)<.1,X=function(Q,it){return K?it.x-Q.x:it.y-Q.y};et.verts.sort(X);for(var W=1;W<et.verts.length;W++){var at=et.verts[W-1],H=et.verts[W];at.node&&at.node===H.node&&at.node.leaf||g.edges.push({source:at.id,target:H.id,length:Math.abs(X(at,H))})}})}return l.prototype.avg=function(h){return h.reduce(function(f,u){return f+u})/h.length},l.prototype.getGridLines=function(h){for(var f=[],u=this.leaves.slice(0,this.leaves.length);u.length>0;){var g=u.filter(function(L){return L.rect["overlap"+h.toUpperCase()](u[0].rect)}),C={nodes:g,pos:this.avg(g.map(function(L){return L.rect["c"+h]()}))};f.push(C),C.nodes.forEach(function(L){return u.splice(u.indexOf(L),1)})}return f.sort(function(L,I){return L.pos-I.pos}),f},l.prototype.getDepth=function(h){for(var f=0;h.parent!==this.root;)f++,h=h.parent;return f},l.prototype.midPoints=function(h){for(var f=h[1]-h[0],u=[h[0]-f/2],g=1;g<h.length;g++)u.push((h[g]+h[g-1])/2);return u.push(h[h.length-1]+f/2),u},l.prototype.findLineage=function(h){var f=[h];do{f.push(h=h.parent)}while(h!==this.root);return f.reverse()},l.prototype.findAncestorPathBetween=function(h,f){for(var u=this.findLineage(h),g=this.findLineage(f),C=0;u[C]===g[C];)C++;return{commonAncestor:u[C-1],lineages:u.slice(C).concat(g.slice(C))}},l.prototype.siblingObstacles=function(h,f){var u=this,g=this.findAncestorPathBetween(h,f),C={};g.lineages.forEach(function(I){return C[I.id]={}});var L=g.commonAncestor.children.filter(function(I){return!(I in C)});return g.lineages.filter(function(I){return I.parent!==g.commonAncestor}).forEach(function(I){return L=L.concat(I.parent.children.filter(function(R){return R!==I.id}))}),L.map(function(I){return u.nodes[I]})},l.getSegmentSets=function(h,f,u){for(var g=[],C=0;C<h.length;C++)for(var L=h[C],I=0;I<L.length;I++)(R=L[I]).edgeid=C,R.i=I,Math.abs(R[1][f]-R[0][f])<.1&&g.push(R);g.sort(function(V,nt){return V[0][f]-nt[0][f]});for(var F=[],B=null,Y=0;Y<g.length;Y++){var R=g[Y];(!B||Math.abs(R[0][f]-B.pos)>.1)&&F.push(B={pos:R[0][f],segments:[]}),B.segments.push(R)}return F},l.nudgeSegs=function(h,f,u,g,C,L){var I=g.length;if(!(I<=1)){for(var R=g.map(function(W){return new x.Variable(W[0][h])}),M=[],F=0;F<I;F++)for(var B=0;B<I;B++)if(F!==B){var Y=g[F],nt=Y.edgeid,et=g[B].edgeid,st=-1,K=-1;"x"==h?C(nt,et)&&(Y[0][f]<Y[1][f]?(st=B,K=F):(st=F,K=B)):C(nt,et)&&(Y[0][f]<Y[1][f]?(st=F,K=B):(st=B,K=F)),st>=0&&M.push(new x.Constraint(R[st],R[K],L))}new x.Solver(R,M).solve(),R.forEach(function(W,at){var H=g[at],Q=W.position();H[0][h]=H[1][h]=Q;var it=u[H.edgeid];H.i>0&&(it[H.i-1][1][h]=Q),H.i<it.length-1&&(it[H.i+1][0][h]=Q)})}},l.nudgeSegments=function(h,f,u,g,C){for(var L=l.getSegmentSets(h,f,u),I=0;I<L.length;I++){for(var R=L[I],M=[],F=0;F<R.segments.length;F++){var B=R.segments[F];M.push({type:0,s:B,pos:Math.min(B[0][u],B[1][u])}),M.push({type:1,s:B,pos:Math.max(B[0][u],B[1][u])})}M.sort(function(nt,et){return nt.pos-et.pos+nt.type-et.type});var Y=[],V=0;M.forEach(function(nt){0===nt.type?(Y.push(nt.s),V++):V--,0==V&&(l.nudgeSegs(f,u,h,Y,g,C),Y=[])})}},l.prototype.routeEdges=function(h,f,u,g){var C=this,L=h.map(function(M){return C.route(u(M),g(M))}),I=l.orderEdges(L),R=L.map(function(M){return l.makeSegments(M)});return l.nudgeSegments(R,"x","y",I,f),l.nudgeSegments(R,"y","x",I,f),l.unreverseEdges(R,L),R},l.unreverseEdges=function(h,f){h.forEach(function(u,g){f[g].reversed&&(u.reverse(),u.forEach(function(L){L.reverse()}))})},l.angleBetween2Lines=function(h,f){var u=Math.atan2(h[0].y-h[1].y,h[0].x-h[1].x),g=Math.atan2(f[0].y-f[1].y,f[0].x-f[1].x),C=u-g;return(C>Math.PI||C<-Math.PI)&&(C=g-u),C},l.isLeft=function(h,f,u){return(f.x-h.x)*(u.y-h.y)-(f.y-h.y)*(u.x-h.x)<=0},l.getOrder=function(h){for(var f={},u=0;u<h.length;u++){var g=h[u];typeof f[g.l]>"u"&&(f[g.l]={}),f[g.l][g.r]=!0}return function(C,L){return typeof f[C]<"u"&&f[C][L]}},l.orderEdges=function(h){for(var f=[],u=0;u<h.length-1;u++)for(var g=u+1;g<h.length;g++){var R,M,F,C=h[u],L=h[g],I=new t(C,L);if(0!==I.length){if(I.reversed&&(L.reverse(),L.reversed=!0,I=new t(C,L)),(I.si<=0||I.ti<=0)&&(I.si+I.length>=C.length||I.ti+I.length>=L.length)){f.push({l:u,r:g});continue}I.si+I.length>=C.length||I.ti+I.length>=L.length?(R=C[I.si+1],F=C[I.si-1],M=L[I.ti-1]):(R=C[I.si+I.length-2],M=C[I.si+I.length],F=L[I.ti+I.length]),l.isLeft(R,M,F)?f.push({l:g,r:u}):f.push({l:u,r:g})}}return l.getOrder(f)},l.makeSegments=function(h){function f(M){return{x:M.x,y:M.y}}for(var g=[],C=f(h[0]),L=1;L<h.length;L++){var I=f(h[L]),R=L<h.length-1?h[L+1]:null;(!R||(M=C,F=I,B=R,!(Math.abs((F.x-M.x)*(B.y-M.y)-(F.y-M.y)*(B.x-M.x))<.001)))&&(g.push([C,I]),C=I)}var M,F,B;return g},l.prototype.route=function(h,f){var u=this,g=this.nodes[h],C=this.nodes[f];this.obstacles=this.siblingObstacles(g,C);var L={};this.obstacles.forEach(function(K){return L[K.id]=K}),this.passableEdges=this.edges.filter(function(K){var X=u.verts[K.source],W=u.verts[K.target];return!(X.node&&X.node.id in L||W.node&&W.node.id in L)});for(var I=1;I<g.ports.length;I++)this.passableEdges.push({source:g.ports[0].id,target:g.ports[I].id,length:0});for(I=1;I<C.ports.length;I++)this.passableEdges.push({source:C.ports[0].id,target:C.ports[I].id,length:0});var st=new _.Calculator(this.verts.length,this.passableEdges,function(K){return K.source},function(K){return K.target},function(K){return K.length}).PathFromNodeToNodeWithPrevCost(g.ports[0].id,C.ports[0].id,function(K,X,W){var at=u.verts[K],H=u.verts[X],Q=u.verts[W],it=Math.abs(Q.x-at.x),q=Math.abs(Q.y-at.y);return at.node===g&&at.node===H.node||H.node===C&&H.node===Q.node?0:it>1&&q>1?1e3:0}).reverse().map(function(K){return u.verts[K]});return st.push(this.nodes[C.id].ports[0]),st.filter(function(K,X){return!(X<st.length-1&&st[X+1].node===g&&K.node===g||X>0&&K.node===C&&st[X-1].node===C)})},l.getRoutePath=function(h,f,u,g){var I,R,M,it,q,C={routepath:"M "+h[0][0].x+" "+h[0][0].y+" ",arrowpath:""};if(h.length>1)for(var L=0;L<h.length;L++){var F=(R=(I=h[L])[1].x)-I[0].x,B=(M=I[1].y)-I[0].y;if(L<h.length-1){Math.abs(F)>0?R-=F/Math.abs(F)*f:M-=B/Math.abs(B)*f,C.routepath+="L "+R+" "+M+" ";var Y=h[L+1],V=Y[0].x,nt=Y[0].y;F=Y[1].x-V,B=Y[1].y-nt;var X,W,K=l.angleBetween2Lines(I,Y)<0?1:0;Math.abs(F)>0?(X=V+F/Math.abs(F)*f,W=nt):(X=V,W=nt+B/Math.abs(B)*f);var at=Math.abs(X-R),H=Math.abs(W-M);C.routepath+="A "+at+" "+H+" 0 0 "+K+" "+X+" "+W+" "}else{var Q=[R,M];Math.abs(F)>0?(it=[R-=F/Math.abs(F)*g,M+u],q=[R,M-u]):(it=[R+u,M-=B/Math.abs(B)*g],q=[R-u,M]),C.routepath+="L "+R+" "+M+" ",g>0&&(C.arrowpath="M "+Q[0]+" "+Q[1]+" L "+it[0]+" "+it[1]+" L "+q[0]+" "+q[1])}}else F=(R=(I=h[0])[1].x)-I[0].x,B=(M=I[1].y)-I[0].y,Q=[R,M],Math.abs(F)>0?(it=[R-=F/Math.abs(F)*g,M+u],q=[R,M-u]):(it=[R+u,M-=B/Math.abs(B)*g],q=[R-u,M]),C.routepath+="L "+R+" "+M+" ",g>0&&(C.arrowpath="M "+Q[0]+" "+Q[1]+" L "+it[0]+" "+it[1]+" L "+q[0]+" "+q[1]);return C},l}();E.GridRouter=d},30345:(w,E)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});var s_GOLDEN_SECTION=(1+Math.sqrt(5))/2;E.applyPacking=function c(_,m,p,L,C,l){void 0===C&&(C=1),void 0===l&&(l=!0);var u=m,g=p,I=(C=typeof C<"u"?C:1,L=typeof L<"u"?L:0,0),R=0,M=0,F=0,B=[];function et(W,at){B=[],I=0,R=0,F=0;for(var H=0;H<W.length;H++)st(W[H],at);return Math.abs(function X(){return I/R}()-C)}function st(W,at){for(var H=void 0,Q=0;Q<B.length;Q++)if(B[Q].space_left>=W.height&&B[Q].x+B[Q].width+W.width+10-at<=1e-4){H=B[Q];break}B.push(W),void 0!==H?(W.x=H.x+H.width+10,W.y=H.bottom,W.space_left=W.height,W.bottom=W.y,H.space_left-=W.height+10,H.bottom+=W.height+10):(W.y=F,F+=W.height+10,W.x=0,W.bottom=W.y,W.space_left=W.height),W.y+W.height-R>-1e-4&&(R=W.y+W.height-0),W.x+W.width-I>-1e-4&&(I=W.x+W.width-0)}0!=_.length&&(function Y(W){W.forEach(function(H){!function at(H){var Q=Number.MAX_VALUE,it=Number.MAX_VALUE,q=0,U=0;H.array.forEach(function(D){var mt=typeof D.width<"u"?D.width:L,St=typeof D.height<"u"?D.height:L;mt/=2,St/=2,q=Math.max(D.x+mt,q),Q=Math.min(D.x-mt,Q),U=Math.max(D.y+St,U),it=Math.min(D.y-St,it)}),H.width=q-Q,H.height=U-it}(H)})}(_),function nt(W,at){var H=Number.POSITIVE_INFINITY,Q=0;W.sort(function(ut,ft){return ft.height-ut.height});for(var it=$t=M=W.reduce(function(ut,ft){return ut.width<ft.width?ut.width:ft.width}),q=ue=function K(W){var at=0;return W.forEach(function(H){return at+=H.width+10}),at}(W),U=0,D=Number.MAX_VALUE,mt=Number.MAX_VALUE,St=-1,Mt=Number.MAX_VALUE,Et=Number.MAX_VALUE;Mt>M||Et>1e-4;){if(1!=St){var $t=q-(q-it)/s_GOLDEN_SECTION;D=et(W,$t)}if(0!=St){var ue=it+(q-it)/s_GOLDEN_SECTION;mt=et(W,ue)}if(Mt=Math.abs($t-ue),Et=Math.abs(D-mt),D<H&&(H=D,Q=$t),mt<H&&(H=mt,Q=ue),D>mt?(it=$t,$t=ue,D=mt,St=1):(q=ue,ue=$t,mt=D,St=0),U++>100)break}et(W,Q)}(_),l&&function V(W){W.forEach(function(at){var H={x:0,y:0};at.array.forEach(function(q){H.x+=q.x,H.y+=q.y}),H.x/=at.array.length,H.y/=at.array.length;var it_x=at.x-(H.x-at.width/2)+u/2-I/2,it_y=at.y-(H.y-at.height/2)+g/2-R/2;at.array.forEach(function(q){q.x+=it_x,q.y+=it_y})})}(_))},E.separateGraphs=function x(_,m){for(var p={},t={},d=[],l=0,h=0;h<m.length;h++){var f=m[h],u=f.source,g=f.target;t[u.index]?t[u.index].push(g):t[u.index]=[g],t[g.index]?t[g.index].push(u):t[g.index]=[u]}for(h=0;h<_.length;h++){var C=_[h];p[C.index]||L(C,!0)}function L(I,R){if(void 0===p[I.index]){R&&(l++,d.push({array:[]})),p[I.index]=l,d[l-1].array.push(I);var M=t[I.index];if(M)for(var F=0;F<M.length;F++)L(M[F],!1)}}return d}},15675:(w,E,s)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});var l,u,c=s(33900),x=s(58802),_=s(91786),m=s(4068),p=s(33858),t=s(30225),d=s(30345);function h(u){return typeof u.leaves<"u"||typeof u.groups<"u"}(u=l=E.EventType||(E.EventType={}))[u.start=0]="start",u[u.tick=1]="tick",u[u.end=2]="end";var f=function(){function u(){var g=this;this._canvasSize=[1,1],this._linkDistance=20,this._defaultNodeSize=10,this._linkLengthCalculator=null,this._linkType=null,this._avoidOverlaps=!1,this._handleDisconnected=!0,this._running=!1,this._nodes=[],this._groups=[],this._rootGroup=null,this._links=[],this._constraints=[],this._distanceMatrix=null,this._descent=null,this._directedLinkConstraints=null,this._threshold=.01,this._visibilityGraph=null,this._groupCompactness=1e-6,this.event=null,this.linkAccessor={getSourceIndex:u.getSourceIndex,getTargetIndex:u.getTargetIndex,setLength:u.setLinkLength,getType:function(C){return"function"==typeof g._linkType?g._linkType(C):0}}}return u.prototype.on=function(g,C){return this.event||(this.event={}),"string"==typeof g?this.event[l[g]]=C:this.event[g]=C,this},u.prototype.trigger=function(g){this.event&&typeof this.event[g.type]<"u"&&this.event[g.type](g)},u.prototype.kick=function(){for(;!this.tick(););},u.prototype.tick=function(){if(this._alpha<this._threshold)return this._running=!1,this.trigger({type:l.end,alpha:this._alpha=0,stress:this._lastStress}),!0;var L,I,g=this._nodes.length;for(this._descent.locks.clear(),I=0;I<g;++I)(L=this._nodes[I]).fixed&&((typeof L.px>"u"||typeof L.py>"u")&&(L.px=L.x,L.py=L.y),this._descent.locks.add(I,[L.px,L.py]));var M=this._descent.rungeKutta();return 0===M?this._alpha=0:typeof this._lastStress<"u"&&(this._alpha=M),this._lastStress=M,this.updateNodePositions(),this.trigger({type:l.tick,alpha:this._alpha,stress:this._lastStress}),!1},u.prototype.updateNodePositions=function(){for(var L,g=this._descent.x[0],C=this._descent.x[1],I=this._nodes.length;I--;)(L=this._nodes[I]).x=g[I],L.y=C[I]},u.prototype.nodes=function(g){if(!g){if(0===this._nodes.length&&this._links.length>0){var C=0;this._links.forEach(function(I){C=Math.max(C,I.source,I.target)}),this._nodes=new Array(++C);for(var L=0;L<C;++L)this._nodes[L]={}}return this._nodes}return this._nodes=g,this},u.prototype.groups=function(g){var C=this;return g?(this._groups=g,this._rootGroup={},this._groups.forEach(function(L){typeof L.padding>"u"&&(L.padding=1),typeof L.leaves<"u"&&L.leaves.forEach(function(I,R){"number"==typeof I&&((L.leaves[R]=C._nodes[I]).parent=L)}),typeof L.groups<"u"&&L.groups.forEach(function(I,R){"number"==typeof I&&((L.groups[R]=C._groups[I]).parent=L)})}),this._rootGroup.leaves=this._nodes.filter(function(L){return typeof L.parent>"u"}),this._rootGroup.groups=this._groups.filter(function(L){return typeof L.parent>"u"}),this):this._groups},u.prototype.powerGraphGroups=function(g){var C=c.getGroups(this._nodes,this._links,this.linkAccessor,this._rootGroup);return this.groups(C.groups),g(C),this},u.prototype.avoidOverlaps=function(g){return arguments.length?(this._avoidOverlaps=g,this):this._avoidOverlaps},u.prototype.handleDisconnected=function(g){return arguments.length?(this._handleDisconnected=g,this):this._handleDisconnected},u.prototype.flowLayout=function(g,C){return arguments.length||(g="y"),this._directedLinkConstraints={axis:g,getMinSeparation:"number"==typeof C?function(){return C}:C},this},u.prototype.links=function(g){return arguments.length?(this._links=g,this):this._links},u.prototype.constraints=function(g){return arguments.length?(this._constraints=g,this):this._constraints},u.prototype.distanceMatrix=function(g){return arguments.length?(this._distanceMatrix=g,this):this._distanceMatrix},u.prototype.size=function(g){return g?(this._canvasSize=g,this):this._canvasSize},u.prototype.defaultNodeSize=function(g){return g?(this._defaultNodeSize=g,this):this._defaultNodeSize},u.prototype.groupCompactness=function(g){return g?(this._groupCompactness=g,this):this._groupCompactness},u.prototype.linkDistance=function(g){return g?(this._linkDistance="function"==typeof g?g:+g,this._linkLengthCalculator=null,this):this._linkDistance},u.prototype.linkType=function(g){return this._linkType=g,this},u.prototype.convergenceThreshold=function(g){return g?(this._threshold="function"==typeof g?g:+g,this):this._threshold},u.prototype.alpha=function(g){return arguments.length?(g=+g,this._alpha?this._alpha=g>0?g:0:g>0&&(this._running||(this._running=!0,this.trigger({type:l.start,alpha:this._alpha=g}),this.kick())),this):this._alpha},u.prototype.getLinkLength=function(g){return"function"==typeof this._linkDistance?+this._linkDistance(g):this._linkDistance},u.setLinkLength=function(g,C){g.length=C},u.prototype.getLinkType=function(g){return"function"==typeof this._linkType?this._linkType(g):0},u.prototype.symmetricDiffLinkLengths=function(g,C){var L=this;return void 0===C&&(C=1),this.linkDistance(function(I){return g*I.length}),this._linkLengthCalculator=function(){return x.symmetricDiffLinkLengths(L._links,L.linkAccessor,C)},this},u.prototype.jaccardLinkLengths=function(g,C){var L=this;return void 0===C&&(C=1),this.linkDistance(function(I){return g*I.length}),this._linkLengthCalculator=function(){return x.jaccardLinkLengths(L._links,L.linkAccessor,C)},this},u.prototype.start=function(g,C,L,I,R,M){var F=this;void 0===g&&(g=0),void 0===C&&(C=0),void 0===L&&(L=0),void 0===I&&(I=0),void 0===R&&(R=!0),void 0===M&&(M=!0);var Q,V=this.nodes().length,nt=V+2*this._groups.length,st=this._canvasSize[0],K=this._canvasSize[1],X=new Array(nt),W=new Array(nt),at=null,H=this._avoidOverlaps;this._nodes.forEach(function(Mt,Et){Mt.index=Et,typeof Mt.x>"u"&&(Mt.x=st/2,Mt.y=K/2),X[Et]=Mt.x,W[Et]=Mt.y}),this._linkLengthCalculator&&this._linkLengthCalculator(),this._distanceMatrix?Q=this._distanceMatrix:(Q=new p.Calculator(nt,this._links,u.getSourceIndex,u.getTargetIndex,function(Mt){return F.getLinkLength(Mt)}).DistanceMatrix(),at=_.Descent.createSquareMatrix(nt,function(){return 2}),this._links.forEach(function(Mt){"number"==typeof Mt.source&&(Mt.source=F._nodes[Mt.source]),"number"==typeof Mt.target&&(Mt.target=F._nodes[Mt.target])}),this._links.forEach(function(Mt){var Et=u.getSourceIndex(Mt),$t=u.getTargetIndex(Mt);at[Et][$t]=at[$t][Et]=Mt.weight||1}));var it=_.Descent.createSquareMatrix(nt,function(Mt,Et){return Q[Mt][Et]});if(this._rootGroup&&typeof this._rootGroup.groups<"u"){var B=V;this._groups.forEach(function(Et){(function(Et,$t,ue,ut){at[Et][$t]=at[$t][Et]=ue,it[Et][$t]=it[$t][Et]=.1})(B,B+1,F._groupCompactness),X[B]=0,W[B++]=0,X[B]=0,W[B++]=0})}else this._rootGroup={leaves:this._nodes,groups:[]};var U=this._constraints||[];for(this._directedLinkConstraints&&(this.linkAccessor.getMinSeparation=this._directedLinkConstraints.getMinSeparation,U=U.concat(x.generateDirectedEdgeConstraints(V,this._links,this._directedLinkConstraints.axis,this.linkAccessor))),this.avoidOverlaps(!1),this._descent=new _.Descent([X,W],it),this._descent.locks.clear(),B=0;B<V;++B){var D=this._nodes[B];D.fixed&&(D.px=D.x,D.py=D.y,this._descent.locks.add(B,[D.x,D.y]))}if(this._descent.threshold=this._threshold,this.initialLayout(g,X,W),U.length>0&&(this._descent.project=new m.Projection(this._nodes,this._groups,this._rootGroup,U).projectFunctions()),this._descent.run(C),this.separateOverlappingComponents(st,K,M),this.avoidOverlaps(H),H&&(this._nodes.forEach(function(Mt,Et){Mt.x=X[Et],Mt.y=W[Et]}),this._descent.project=new m.Projection(this._nodes,this._groups,this._rootGroup,U,!0).projectFunctions(),this._nodes.forEach(function(Mt,Et){X[Et]=Mt.x,W[Et]=Mt.y})),this._descent.G=at,this._descent.run(L),I){this._descent.snapStrength=1e3,this._descent.snapGridSize=this._nodes[0].width,this._descent.numGridSnapNodes=V,this._descent.scaleSnapByMaxH=V!=nt;var St=_.Descent.createSquareMatrix(nt,function(Mt,Et){return Mt>=V||Et>=V?at[Mt][Et]:0});this._descent.G=St,this._descent.run(I)}return this.updateNodePositions(),this.separateOverlappingComponents(st,K,M),R?this.resume():this},u.prototype.initialLayout=function(g,C,L){if(this._groups.length>0&&g>0){var I=this._nodes.length,R=this._links.map(function(F){return{source:F.source.index,target:F.target.index}}),M=this._nodes.map(function(F){return{index:F.index}});this._groups.forEach(function(F,B){M.push({index:F.index=I+B})}),this._groups.forEach(function(F,B){typeof F.leaves<"u"&&F.leaves.forEach(function(Y){return R.push({source:F.index,target:Y.index})}),typeof F.groups<"u"&&F.groups.forEach(function(Y){return R.push({source:F.index,target:Y.index})})}),(new u).size(this.size()).nodes(M).links(R).avoidOverlaps(!1).linkDistance(this.linkDistance()).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(g,0,0,0,!1),this._nodes.forEach(function(F){C[F.index]=M[F.index].x,L[F.index]=M[F.index].y})}else this._descent.run(g)},u.prototype.separateOverlappingComponents=function(g,C,L){var I=this;if(void 0===L&&(L=!0),!this._distanceMatrix&&this._handleDisconnected){var R=this._descent.x[0],M=this._descent.x[1];this._nodes.forEach(function(B,Y){B.x=R[Y],B.y=M[Y]});var F=d.separateGraphs(this._nodes,this._links);d.applyPacking(F,g,C,this._defaultNodeSize,1,L),this._nodes.forEach(function(B,Y){I._descent.x[0][Y]=B.x,I._descent.x[1][Y]=B.y,B.bounds&&(B.bounds.setXCentre(B.x),B.bounds.setYCentre(B.y))})}},u.prototype.resume=function(){return this.alpha(.1)},u.prototype.stop=function(){return this.alpha(0)},u.prototype.prepareEdgeRouting=function(g){void 0===g&&(g=0),this._visibilityGraph=new t.TangentVisibilityGraph(this._nodes.map(function(C){return C.bounds.inflate(-g).vertices()}))},u.prototype.routeEdge=function(g,C,L){void 0===C&&(C=5);var I=[],R=new t.TangentVisibilityGraph(this._visibilityGraph.P,{V:this._visibilityGraph.V,E:this._visibilityGraph.E}),M={x:g.source.x,y:g.source.y},F={x:g.target.x,y:g.target.y},B=R.addPoint(M,g.source.index),Y=R.addPoint(F,g.target.index);R.addEdgeIfVisible(M,F,g.source.index,g.target.index),typeof L<"u"&&L(R);var K=new p.Calculator(R.V.length,R.E,function(it){return it.source.id},function(it){return it.target.id},function(it){return it.length()}).PathFromNodeToNode(B.id,Y.id);if(1===K.length||K.length===R.V.length){var X=m.makeEdgeBetween(g.source.innerBounds,g.target.innerBounds,C);I=[X.sourceIntersection,X.arrowStart]}else{for(var W=K.length-2,at=R.V[K[W]].p,H=R.V[K[0]].p,Q=(I=[g.source.innerBounds.rayIntersection(at.x,at.y)],W);Q>=0;--Q)I.push(R.V[K[Q]].p);I.push(m.makeEdgeTo(H,g.target.innerBounds,C))}return I},u.getSourceIndex=function(g){return"number"==typeof g.source?g.source:g.source.index},u.getTargetIndex=function(g){return"number"==typeof g.target?g.target:g.target.index},u.linkId=function(g){return u.getSourceIndex(g)+"-"+u.getTargetIndex(g)},u.dragStart=function(g){h(g)?u.storeOffset(g,u.dragOrigin(g)):(u.stopNode(g),g.fixed|=2)},u.stopNode=function(g){g.px=g.x,g.py=g.y},u.storeOffset=function(g,C){typeof g.leaves<"u"&&g.leaves.forEach(function(L){L.fixed|=2,u.stopNode(L),L._dragGroupOffsetX=L.x-C.x,L._dragGroupOffsetY=L.y-C.y}),typeof g.groups<"u"&&g.groups.forEach(function(L){return u.storeOffset(L,C)})},u.dragOrigin=function(g){return h(g)?{x:g.bounds.cx(),y:g.bounds.cy()}:g},u.drag=function(g,C){h(g)?(typeof g.leaves<"u"&&g.leaves.forEach(function(L){g.bounds.setXCentre(C.x),g.bounds.setYCentre(C.y),L.px=L._dragGroupOffsetX+C.x,L.py=L._dragGroupOffsetY+C.y}),typeof g.groups<"u"&&g.groups.forEach(function(L){return u.drag(L,C)})):(g.px=C.x,g.py=C.y)},u.dragEnd=function(g){h(g)?(typeof g.leaves<"u"&&g.leaves.forEach(function(C){u.dragEnd(C),delete C._dragGroupOffsetX,delete C._dragGroupOffsetY}),typeof g.groups<"u"&&g.groups.forEach(u.dragEnd)):g.fixed&=-7},u.mouseOver=function(g){g.fixed|=4,g.px=g.x,g.py=g.y},u.mouseOut=function(g){g.fixed&=-5},u}();E.Layout=f},86461:(w,E,s)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});var c=s(33858),x=s(91786),_=s(4068),m=s(58802),p=function(){function h(f,u){this.source=f,this.target=u}return h.prototype.actualLength=function(f){var u=this;return Math.sqrt(f.reduce(function(g,C){var L=C[u.target]-C[u.source];return g+L*L},0))},h}();E.Link3D=p,E.Node3D=function h(f,u,g){void 0===f&&(f=0),void 0===u&&(u=0),void 0===g&&(g=0),this.x=f,this.y=u,this.z=g};var d=function(){function h(f,u,g){var C=this;void 0===g&&(g=1),this.nodes=f,this.links=u,this.idealLinkLength=g,this.constraints=null,this.useJaccardLinkLengths=!0,this.result=new Array(h.k);for(var L=0;L<h.k;++L)this.result[L]=new Array(f.length);f.forEach(function(I,R){for(var M=0,F=h.dims;M<F.length;M++){var B=F[M];typeof I[B]>"u"&&(I[B]=Math.random())}C.result[0][R]=I.x,C.result[1][R]=I.y,C.result[2][R]=I.z})}return h.prototype.linkLength=function(f){return f.actualLength(this.result)},h.prototype.start=function(f){var u=this;void 0===f&&(f=100);var g=this.nodes.length,C=new l;this.useJaccardLinkLengths&&m.jaccardLinkLengths(this.links,C,1.5),this.links.forEach(function(B){return B.length*=u.idealLinkLength});var L=new c.Calculator(g,this.links,function(B){return B.source},function(B){return B.target},function(B){return B.length}).DistanceMatrix(),I=x.Descent.createSquareMatrix(g,function(B,Y){return L[B][Y]}),R=x.Descent.createSquareMatrix(g,function(){return 2});this.links.forEach(function(B){var Y=B.source,V=B.target;return R[Y][V]=R[V][Y]=1}),this.descent=new x.Descent(this.result,I),this.descent.threshold=.001,this.descent.G=R,this.constraints&&(this.descent.project=new _.Projection(this.nodes,null,null,this.constraints).projectFunctions());for(var M=0;M<this.nodes.length;M++){var F=this.nodes[M];F.fixed&&this.descent.locks.add(M,[F.x,F.y,F.z])}return this.descent.run(f),this},h.prototype.tick=function(){this.descent.locks.clear();for(var f=0;f<this.nodes.length;f++){var u=this.nodes[f];u.fixed&&this.descent.locks.add(f,[u.x,u.y,u.z])}return this.descent.rungeKutta()},h.k=(h.dims=["x","y","z"]).length,h}();E.Layout3D=d;var l=function(){function h(){}return h.prototype.getSourceIndex=function(f){return f.source},h.prototype.getTargetIndex=function(f){return f.target},h.prototype.getLength=function(f){return f.length},h.prototype.setLength=function(f,u){f.length=u},h}()},58802:(w,E)=>{"use strict";function s(l,h){var f={};for(var u in l)f[u]={};for(var u in h)f[u]={};return Object.keys(f).length}function c(l,h){var f=0;for(var u in l)typeof h[u]<"u"&&++f;return f}function _(l,h,f,u){var g=function x(l,h){var f={},u=function(g,C){typeof f[g]>"u"&&(f[g]={}),f[g][C]={}};return l.forEach(function(g){var C=h.getSourceIndex(g),L=h.getTargetIndex(g);u(C,L),u(L,C)}),f}(l,u);l.forEach(function(C){var L=g[u.getSourceIndex(C)],I=g[u.getTargetIndex(C)];u.setLength(C,1+h*f(L,I))})}function d(l,h,f){var u=[],g=0,C=[],L=[];function I(K){K.index=K.lowlink=g++,C.push(K),K.onStack=!0;for(var X=0,W=K.out;X<W.length;X++){var at=W[X];typeof at.index>"u"?(I(at),K.lowlink=Math.min(K.lowlink,at.lowlink)):at.onStack&&(K.lowlink=Math.min(K.lowlink,at.index))}if(K.lowlink===K.index){for(var H=[];C.length&&((at=C.pop()).onStack=!1,H.push(at),at!==K););L.push(H.map(function(Q){return Q.id}))}}for(var R=0;R<l;R++)u.push({id:R,out:[]});for(var M=0,F=h;M<F.length;M++){var B=F[M],Y=u[f.getSourceIndex(B)],V=u[f.getTargetIndex(B)];Y.out.push(V)}for(var nt=0,et=u;nt<et.length;nt++){var st=et[nt];typeof st.index>"u"&&I(st)}return L}Object.defineProperty(E,"__esModule",{value:!0}),E.symmetricDiffLinkLengths=function m(l,h,f){void 0===f&&(f=1),_(l,f,function(u,g){return Math.sqrt(s(u,g)-c(u,g))},h)},E.jaccardLinkLengths=function p(l,h,f){void 0===f&&(f=1),_(l,f,function(u,g){return Math.min(Object.keys(u).length,Object.keys(g).length)<1.1?0:c(u,g)/s(u,g)},h)},E.generateDirectedEdgeConstraints=function t(l,h,f,u){var g=d(l,h,u),C={};g.forEach(function(I,R){return I.forEach(function(M){return C[M]=R})});var L=[];return h.forEach(function(I){var R=u.getSourceIndex(I),M=u.getTargetIndex(I);C[R]!==C[M]&&L.push({axis:f,left:R,right:M,gap:u.getMinSeparation(I)})}),L},E.stronglyConnectedComponents=d},33900:(w,E)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});var s=function h(f,u,g){this.source=f,this.target=u,this.type=g};E.PowerEdge=s;var c=function(){function h(f,u,g,C){var L=this;if(this.linkAccessor=g,this.modules=new Array(f),this.roots=[],C)this.initModulesFromGroup(C);else{this.roots.push(new p);for(var I=0;I<f;++I)this.roots[0].add(this.modules[I]=new _(I))}this.R=u.length,u.forEach(function(R){var M=L.modules[g.getSourceIndex(R)],F=L.modules[g.getTargetIndex(R)],B=g.getType(R);M.outgoing.add(B,F),F.incoming.add(B,M)})}return h.prototype.initModulesFromGroup=function(f){var u=new p;this.roots.push(u);for(var g=0;g<f.leaves.length;++g){var C=f.leaves[g],L=new _(C.id);this.modules[C.id]=L,u.add(L)}if(f.groups)for(var I=0;I<f.groups.length;++I){var R=f.groups[I],M={};for(var F in R)"leaves"!==F&&"groups"!==F&&R.hasOwnProperty(F)&&(M[F]=R[F]);u.add(new _(-1-I,new t,new t,this.initModulesFromGroup(R),M))}return u},h.prototype.merge=function(f,u,g){void 0===g&&(g=0);var C=f.incoming.intersection(u.incoming),L=f.outgoing.intersection(u.outgoing),I=new p;I.add(f),I.add(u);var R=new _(this.modules.length,L,C,I);this.modules.push(R);var M=function(F,B,Y){F.forAll(function(V,nt){V.forAll(function(et){var st=et[B];st.add(nt,R),st.remove(nt,f),st.remove(nt,u),f[Y].remove(nt,et),u[Y].remove(nt,et)})})};return M(L,"incoming","outgoing"),M(C,"outgoing","incoming"),this.R-=C.count()+L.count(),this.roots[g].remove(f),this.roots[g].remove(u),this.roots[g].add(R),R},h.prototype.rootMerges=function(f){void 0===f&&(f=0);for(var u=this.roots[f].modules(),g=u.length,C=new Array(g*(g-1)),L=0,I=0,R=g-1;I<R;++I)for(var M=I+1;M<g;++M){var F=u[I],B=u[M];C[L]={id:L,nEdges:this.nEdges(F,B),a:F,b:B},L++}return C},h.prototype.greedyMerge=function(){for(var f=0;f<this.roots.length;++f)if(!(this.roots[f].modules().length<2)){var g=this.rootMerges(f).sort(function(C,L){return C.nEdges==L.nEdges?C.id-L.id:C.nEdges-L.nEdges})[0];if(!(g.nEdges>=this.R))return this.merge(g.a,g.b,f),!0}},h.prototype.nEdges=function(f,u){var g=f.incoming.intersection(u.incoming),C=f.outgoing.intersection(u.outgoing);return this.R-g.count()-C.count()},h.prototype.getGroupHierarchy=function(f){var u=this,g=[];return x(this.roots[0],{},g),this.allEdges().forEach(function(I){var R=u.modules[I.source],M=u.modules[I.target];f.push(new s(typeof R.gid>"u"?I.source:g[R.gid],typeof M.gid>"u"?I.target:g[M.gid],I.type))}),g},h.prototype.allEdges=function(){var f=[];return h.getEdges(this.roots[0],f),f},h.getEdges=function(f,u){f.forAll(function(g){g.getEdges(u),h.getEdges(g.children,u)})},h}();function x(h,f,u){h.forAll(function(g){if(g.isLeaf())f.leaves||(f.leaves=[]),f.leaves.push(g.id);else{var C=f;if(g.gid=u.length,!g.isIsland()||g.isPredefined()){if(C={id:g.gid},g.isPredefined())for(var L in g.definition)C[L]=g.definition[L];f.groups||(f.groups=[]),f.groups.push(g.gid),u.push(C)}x(g.children,C,u)}})}E.Configuration=c;var _=function(){function h(f,u,g,C,L){void 0===u&&(u=new t),void 0===g&&(g=new t),void 0===C&&(C=new p),this.id=f,this.outgoing=u,this.incoming=g,this.children=C,this.definition=L}return h.prototype.getEdges=function(f){var u=this;this.outgoing.forAll(function(g,C){g.forAll(function(L){f.push(new s(u.id,L.id,C))})})},h.prototype.isLeaf=function(){return 0===this.children.count()},h.prototype.isIsland=function(){return 0===this.outgoing.count()&&0===this.incoming.count()},h.prototype.isPredefined=function(){return typeof this.definition<"u"},h}();E.Module=_;var p=function(){function h(){this.table={}}return h.prototype.count=function(){return Object.keys(this.table).length},h.prototype.intersection=function(f){var u=new h;return u.table=function m(h,f){var u={};for(var g in h)g in f&&(u[g]=h[g]);return u}(this.table,f.table),u},h.prototype.intersectionCount=function(f){return this.intersection(f).count()},h.prototype.contains=function(f){return f in this.table},h.prototype.add=function(f){this.table[f.id]=f},h.prototype.remove=function(f){delete this.table[f.id]},h.prototype.forAll=function(f){for(var u in this.table)f(this.table[u])},h.prototype.modules=function(){var f=[];return this.forAll(function(u){u.isPredefined()||f.push(u)}),f},h}();E.ModuleSet=p;var t=function(){function h(){this.sets={},this.n=0}return h.prototype.count=function(){return this.n},h.prototype.contains=function(f){var u=!1;return this.forAllModules(function(g){!u&&g.id==f&&(u=!0)}),u},h.prototype.add=function(f,u){(f in this.sets?this.sets[f]:this.sets[f]=new p).add(u),++this.n},h.prototype.remove=function(f,u){var g=this.sets[f];g.remove(u),0===g.count()&&delete this.sets[f],--this.n},h.prototype.forAll=function(f){for(var u in this.sets)f(this.sets[u],Number(u))},h.prototype.forAllModules=function(f){this.forAll(function(u,g){return u.forAll(f)})},h.prototype.intersection=function(f){var u=new h;return this.forAll(function(g,C){if(C in f.sets){var L=g.intersection(f.sets[C]),I=L.count();I>0&&(u.sets[C]=L,u.n+=I)}}),u},h}();E.LinkSets=t,E.getGroups=function l(h,f,u,g){for(var L=new c(h.length,f,u,g);L.greedyMerge(););var I=[],R=L.getGroupHierarchy(I);return I.forEach(function(M){var F=function(B){var Y=M[B];"number"==typeof Y&&(M[B]=h[Y])};F("source"),F("target")}),{groups:R,powerEdges:I}}},88866:(w,E)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});var s=function(){function x(_){this.elem=_,this.subheaps=[]}return x.prototype.toString=function(_){for(var m="",p=!1,t=0;t<this.subheaps.length;++t){var d=this.subheaps[t];d.elem?(p&&(m+=","),m+=d.toString(_),p=!0):p=!1}return""!==m&&(m="("+m+")"),(this.elem?_(this.elem):"")+m},x.prototype.forEach=function(_){this.empty()||(_(this.elem,this),this.subheaps.forEach(function(m){return m.forEach(_)}))},x.prototype.count=function(){return this.empty()?0:1+this.subheaps.reduce(function(_,m){return _+m.count()},0)},x.prototype.min=function(){return this.elem},x.prototype.empty=function(){return null==this.elem},x.prototype.contains=function(_){if(this===_)return!0;for(var m=0;m<this.subheaps.length;m++)if(this.subheaps[m].contains(_))return!0;return!1},x.prototype.isHeap=function(_){var m=this;return this.subheaps.every(function(p){return _(m.elem,p.elem)&&p.isHeap(_)})},x.prototype.insert=function(_,m){return this.merge(new x(_),m)},x.prototype.merge=function(_,m){return this.empty()?_:_.empty()?this:m(this.elem,_.elem)?(this.subheaps.push(_),this):(_.subheaps.push(this),_)},x.prototype.removeMin=function(_){return this.empty()?null:this.mergePairs(_)},x.prototype.mergePairs=function(_){if(0==this.subheaps.length)return new x(null);if(1==this.subheaps.length)return this.subheaps[0];var m=this.subheaps.pop().merge(this.subheaps.pop(),_),p=this.mergePairs(_);return m.merge(p,_)},x.prototype.decreaseKey=function(_,m,p,t){var d=_.removeMin(t);_.elem=d.elem,_.subheaps=d.subheaps,null!==p&&null!==d.elem&&p(_.elem,_);var l=new x(m);return null!==p&&p(m,l),this.merge(l,t)},x}();E.PairingHeap=s;var c=function(){function x(_){this.lessThan=_}return x.prototype.top=function(){return this.empty()?null:this.root.elem},x.prototype.push=function(){for(var _=[],m=0;m<arguments.length;m++)_[m]=arguments[m];for(var p,d,t=0;d=_[t];++t)p=new s(d),this.root=this.empty()?p:this.root.merge(p,this.lessThan);return p},x.prototype.empty=function(){return!this.root||!this.root.elem},x.prototype.isHeap=function(){return this.root.isHeap(this.lessThan)},x.prototype.forEach=function(_){this.root.forEach(_)},x.prototype.pop=function(){if(this.empty())return null;var _=this.root.min();return this.root=this.root.removeMin(this.lessThan),_},x.prototype.reduceKey=function(_,m,p){void 0===p&&(p=null),this.root=this.root.decreaseKey(_,m,p,this.lessThan)},x.prototype.toString=function(_){return this.root.toString(_)},x.prototype.count=function(){return this.root.count()},x}();E.PriorityQueue=c},94655:function(w,E){"use strict";var p,s=this&&this.__extends||(p=function(t,d){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var f in h)h.hasOwnProperty(f)&&(l[f]=h[f])})(t,d)},function(t,d){function l(){this.constructor=t}p(t,d),t.prototype=null===d?Object.create(d):(l.prototype=d.prototype,new l)});Object.defineProperty(E,"__esModule",{value:!0});var c=function(){function p(){this.findIter=function(t){for(var d=this._root,l=this.iterator();null!==d;){var h=this._comparator(t,d.data);if(0===h)return l._cursor=d,l;l._ancestors.push(d),d=d.get_child(h>0)}return null}}return p.prototype.clear=function(){this._root=null,this.size=0},p.prototype.find=function(t){for(var d=this._root;null!==d;){var l=this._comparator(t,d.data);if(0===l)return d.data;d=d.get_child(l>0)}return null},p.prototype.lowerBound=function(t){return this._bound(t,this._comparator)},p.prototype.upperBound=function(t){var d=this._comparator;return this._bound(t,function l(h,f){return d(f,h)})},p.prototype.min=function(){var t=this._root;if(null===t)return null;for(;null!==t.left;)t=t.left;return t.data},p.prototype.max=function(){var t=this._root;if(null===t)return null;for(;null!==t.right;)t=t.right;return t.data},p.prototype.iterator=function(){return new x(this)},p.prototype.each=function(t){for(var l,d=this.iterator();null!==(l=d.next());)t(l)},p.prototype.reach=function(t){for(var l,d=this.iterator();null!==(l=d.prev());)t(l)},p.prototype._bound=function(t,d){for(var l=this._root,h=this.iterator();null!==l;){var f=this._comparator(t,l.data);if(0===f)return h._cursor=l,h;h._ancestors.push(l),l=l.get_child(f>0)}for(var u=h._ancestors.length-1;u>=0;--u)if(d(t,(l=h._ancestors[u]).data)>0)return h._cursor=l,h._ancestors.length=u,h;return h._ancestors.length=0,h},p}();E.TreeBase=c;var x=function(){function p(t){this._tree=t,this._ancestors=[],this._cursor=null}return p.prototype.data=function(){return null!==this._cursor?this._cursor.data:null},p.prototype.next=function(){if(null===this._cursor){var t=this._tree._root;null!==t&&this._minNode(t)}else if(null===this._cursor.right){var d;do{if(d=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.right===d)}else this._ancestors.push(this._cursor),this._minNode(this._cursor.right);return null!==this._cursor?this._cursor.data:null},p.prototype.prev=function(){if(null===this._cursor){var t=this._tree._root;null!==t&&this._maxNode(t)}else if(null===this._cursor.left){var d;do{if(d=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.left===d)}else this._ancestors.push(this._cursor),this._maxNode(this._cursor.left);return null!==this._cursor?this._cursor.data:null},p.prototype._minNode=function(t){for(;null!==t.left;)this._ancestors.push(t),t=t.left;this._cursor=t},p.prototype._maxNode=function(t){for(;null!==t.right;)this._ancestors.push(t),t=t.right;this._cursor=t},p}();E.Iterator=x;var _=function(){function p(t){this.data=t,this.left=null,this.right=null,this.red=!0}return p.prototype.get_child=function(t){return t?this.right:this.left},p.prototype.set_child=function(t,d){t?this.right=d:this.left=d},p}(),m=function(p){function t(d){var l=p.call(this)||this;return l._root=null,l._comparator=d,l.size=0,l}return s(t,p),t.prototype.insert=function(d){var l=!1;if(null===this._root)this._root=new _(d),l=!0,this.size++;else{var h=new _(void 0),f=!1,u=!1,g=null,C=h,L=null,I=this._root;for(C.right=this._root;;){if(null===I?(I=new _(d),L.set_child(f,I),l=!0,this.size++):t.is_red(I.left)&&t.is_red(I.right)&&(I.red=!0,I.left.red=!1,I.right.red=!1),t.is_red(I)&&t.is_red(L)){var R=C.right===g;I===L.get_child(u)?C.set_child(R,t.single_rotate(g,!u)):C.set_child(R,t.double_rotate(g,!u))}var M=this._comparator(I.data,d);if(0===M)break;u=f,null!==g&&(C=g),g=L,L=I,I=I.get_child(f=M<0)}this._root=h.right}return this._root.red=!1,l},t.prototype.remove=function(d){if(null===this._root)return!1;var l=new _(void 0),h=l;h.right=this._root;for(var f=null,u=null,g=null,C=!0;null!==h.get_child(C);){var L=C;u=f,f=h,h=h.get_child(C);var I=this._comparator(d,h.data);if(C=I>0,0===I&&(g=h),!t.is_red(h)&&!t.is_red(h.get_child(C)))if(t.is_red(h.get_child(!C))){var R=t.single_rotate(h,C);f.set_child(L,R),f=R}else if(!t.is_red(h.get_child(!C))){var M=f.get_child(!L);if(null!==M)if(t.is_red(M.get_child(!L))||t.is_red(M.get_child(L))){var F=u.right===f;t.is_red(M.get_child(L))?u.set_child(F,t.double_rotate(f,L)):t.is_red(M.get_child(!L))&&u.set_child(F,t.single_rotate(f,L));var B=u.get_child(F);B.red=!0,h.red=!0,B.left.red=!1,B.right.red=!1}else f.red=!1,M.red=!0,h.red=!0}}return null!==g&&(g.data=h.data,f.set_child(f.right===h,h.get_child(null===h.left)),this.size--),this._root=l.right,null!==this._root&&(this._root.red=!1),null!==g},t.is_red=function(d){return null!==d&&d.red},t.single_rotate=function(d,l){var h=d.get_child(!l);return d.set_child(!l,h.get_child(l)),h.set_child(l,d),d.red=!0,h.red=!1,h},t.double_rotate=function(d,l){return d.set_child(!l,t.single_rotate(d.get_child(!l),!l)),t.single_rotate(d,l)},t}(c);E.RBTree=m},4068:function(w,E,s){"use strict";var K,c=this&&this.__extends||(K=function(X,W){return(K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(at,H){at.__proto__=H}||function(at,H){for(var Q in H)H.hasOwnProperty(Q)&&(at[Q]=H[Q])})(X,W)},function(X,W){function at(){this.constructor=X}K(X,W),X.prototype=null===W?Object.create(W):(at.prototype=W.prototype,new at)});Object.defineProperty(E,"__esModule",{value:!0});var x=s(98237),_=s(94655);function m(K){return K.bounds=typeof K.leaves<"u"?K.leaves.reduce(function(X,W){return W.bounds.union(X)},p.empty()):p.empty(),typeof K.groups<"u"&&(K.bounds=K.groups.reduce(function(X,W){return m(W).union(X)},K.bounds)),K.bounds=K.bounds.inflate(K.padding),K.bounds}E.computeGroupBounds=m;var p=function(){function K(X,W,at,H){this.x=X,this.X=W,this.y=at,this.Y=H}return K.empty=function(){return new K(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)},K.prototype.cx=function(){return(this.x+this.X)/2},K.prototype.cy=function(){return(this.y+this.Y)/2},K.prototype.overlapX=function(X){var W=this.cx(),at=X.cx();return W<=at&&X.x<this.X?this.X-X.x:at<=W&&this.x<X.X?X.X-this.x:0},K.prototype.overlapY=function(X){var W=this.cy(),at=X.cy();return W<=at&&X.y<this.Y?this.Y-X.y:at<=W&&this.y<X.Y?X.Y-this.y:0},K.prototype.setXCentre=function(X){var W=X-this.cx();this.x+=W,this.X+=W},K.prototype.setYCentre=function(X){var W=X-this.cy();this.y+=W,this.Y+=W},K.prototype.width=function(){return this.X-this.x},K.prototype.height=function(){return this.Y-this.y},K.prototype.union=function(X){return new K(Math.min(this.x,X.x),Math.max(this.X,X.X),Math.min(this.y,X.y),Math.max(this.Y,X.Y))},K.prototype.lineIntersections=function(X,W,at,H){for(var Q=[[this.x,this.y,this.X,this.y],[this.X,this.y,this.X,this.Y],[this.X,this.Y,this.x,this.Y],[this.x,this.Y,this.x,this.y]],it=[],q=0;q<4;++q){var U=K.lineIntersection(X,W,at,H,Q[q][0],Q[q][1],Q[q][2],Q[q][3]);null!==U&&it.push({x:U.x,y:U.y})}return it},K.prototype.rayIntersection=function(X,W){var at=this.lineIntersections(this.cx(),this.cy(),X,W);return at.length>0?at[0]:null},K.prototype.vertices=function(){return[{x:this.x,y:this.y},{x:this.X,y:this.y},{x:this.X,y:this.Y},{x:this.x,y:this.Y}]},K.lineIntersection=function(X,W,at,H,Q,it,q,U){var D=at-X,mt=q-Q,St=H-W,Mt=U-it,Et=Mt*D-mt*St;if(0==Et)return null;var $t=X-Q,ue=W-it,ft=(mt*ue-Mt*$t)/Et,Nt=(D*ue-St*$t)/Et;return ft>=0&&ft<=1&&Nt>=0&&Nt<=1?{x:X+ft*D,y:W+ft*St}:null},K.prototype.inflate=function(X){return new K(this.x-X,this.X+X,this.y-X,this.Y+X)},K}();E.Rectangle=p,E.makeEdgeBetween=function t(K,X,W){var at=K.rayIntersection(X.cx(),X.cy())||{x:K.cx(),y:K.cy()},H=X.rayIntersection(K.cx(),K.cy())||{x:X.cx(),y:X.cy()},Q=H.x-at.x,it=H.y-at.y,q=Math.sqrt(Q*Q+it*it),U=q-W;return{sourceIntersection:at,targetIntersection:H,arrowStart:{x:at.x+U*Q/q,y:at.y+U*it/q}}},E.makeEdgeTo=function d(K,X,W){var at=X.rayIntersection(K.x,K.y);at||(at={x:X.cx(),y:X.cy()});var H=at.x-K.x,Q=at.y-K.y,it=Math.sqrt(H*H+Q*Q);return{x:at.x-W*H/it,y:at.y-W*Q/it}};var l=function K(X,W,at){this.v=X,this.r=W,this.pos=at,this.prev=u(),this.next=u()},h=function K(X,W,at){this.isOpen=X,this.v=W,this.pos=at};function f(K,X){return K.pos>X.pos?1:K.pos<X.pos||K.isOpen?-1:X.isOpen?1:0}function u(){return new _.RBTree(function(K,X){return K.pos-X.pos})}var g={getCentre:function(K){return K.cx()},getOpen:function(K){return K.y},getClose:function(K){return K.Y},getSize:function(K){return K.width()},makeRect:function(K,X,W,at){return new p(W-at/2,W+at/2,K,X)},findNeighbours:function R(K,X){var W=function(at,H){for(var it,Q=X.findIter(K);null!==(it=Q[at]());){var q=it.r.overlapX(K.r);if((q<=0||q<=it.r.overlapY(K.r))&&(K[at].insert(it),it[H].insert(K)),q<=0)break}};W("next","prev"),W("prev","next")}},C={getCentre:function(K){return K.cy()},getOpen:function(K){return K.x},getClose:function(K){return K.X},getSize:function(K){return K.height()},makeRect:function(K,X,W,at){return new p(K,X,W-at/2,W+at/2)},findNeighbours:function M(K,X){var W=function(at,H){var Q=X.findIter(K)[at]();null!==Q&&Q.r.overlapX(K.r)>0&&(K[at].insert(Q),Q[H].insert(K))};W("next","prev"),W("prev","next")}};function L(K,X,W,at){void 0===at&&(at=!1);var H=K.padding,Q=typeof K.groups<"u"?K.groups.length:0,it=typeof K.leaves<"u"?K.leaves.length:0,q=Q?K.groups.reduce(function(Kt,ce){return Kt.concat(L(ce,X,W,!0))},[]):[],U=(at?2:0)+it+Q,D=new Array(U),mt=new Array(U),St=0,Mt=function(Kt,ce){mt[St]=Kt,D[St++]=ce};if(at){var Et=K.bounds,$t=X.getCentre(Et),ue=X.getSize(Et)/2,ut=X.getOpen(Et),ft=X.getClose(Et),gt=$t-ue+H/2,Nt=$t+ue-H/2;K.minVar.desiredPosition=gt,Mt(X.makeRect(ut,ft,gt,H),K.minVar),K.maxVar.desiredPosition=Nt,Mt(X.makeRect(ut,ft,Nt,H),K.maxVar)}it&&K.leaves.forEach(function(Kt){return Mt(Kt.bounds,Kt.variable)}),Q&&K.groups.forEach(function(Kt){var ce=Kt.bounds;Mt(X.makeRect(X.getOpen(ce),X.getClose(ce),X.getCentre(ce),X.getSize(ce)),Kt.minVar)});var ee=I(mt,D,X,W);return Q&&(D.forEach(function(Kt){Kt.cOut=[],Kt.cIn=[]}),ee.forEach(function(Kt){Kt.left.cOut.push(Kt),Kt.right.cIn.push(Kt)}),K.groups.forEach(function(Kt){var ce=(Kt.padding-X.getSize(Kt.bounds))/2;Kt.minVar.cIn.forEach(function(xe){return xe.gap+=ce}),Kt.minVar.cOut.forEach(function(xe){xe.left=Kt.maxVar,xe.gap+=ce})})),q.concat(ee)}function I(K,X,W,at){var H,Q=K.length,it=2*Q;console.assert(X.length>=Q);var q=new Array(it);for(H=0;H<Q;++H){var U=K[H],D=new l(X[H],U,W.getCentre(U));q[H]=new h(!0,D,W.getOpen(U)),q[H+Q]=new h(!1,D,W.getClose(U))}q.sort(f);var mt=new Array,St=u();for(H=0;H<it;++H){var Mt=q[H];if(D=Mt.v,Mt.isOpen)St.insert(D),W.findNeighbours(D,St);else{St.remove(D);var Et=function(ut,ft){var gt=(W.getSize(ut.r)+W.getSize(ft.r))/2+at;mt.push(new x.Constraint(ut.v,ft.v,gt))},$t=function(ut,ft,gt){for(var Nt,ee=D[ut].iterator();null!==(Nt=ee[ut]());)gt(Nt,D),Nt[ft].remove(D)};$t("prev","next",function(ut,ft){return Et(ut,ft)}),$t("next","prev",function(ut,ft){return Et(ft,ut)})}}return console.assert(0===St.size),mt}function F(K,X){return I(K,X,g,1e-6)}function B(K,X){return I(K,X,C,1e-6)}function Y(K){return L(K,g,1e-6)}function V(K){return L(K,C,1e-6)}E.generateXConstraints=F,E.generateYConstraints=B,E.generateXGroupConstraints=Y,E.generateYGroupConstraints=V,E.removeOverlaps=function nt(K){var X=K.map(function(H){return new x.Variable(H.cx())}),W=F(K,X),at=new x.Solver(X,W);at.solve(),X.forEach(function(H,Q){return K[Q].setXCentre(H.position())}),X=K.map(function(H){return new x.Variable(H.cy())}),W=B(K,X),(at=new x.Solver(X,W)).solve(),X.forEach(function(H,Q){return K[Q].setYCentre(H.position())})};var et=function(K){function X(W,at){var H=K.call(this,0,at)||this;return H.index=W,H}return c(X,K),X}(x.Variable);E.IndexedVariable=et;var st=function(){function K(X,W,at,H,Q){var it=this;if(void 0===at&&(at=null),void 0===H&&(H=null),void 0===Q&&(Q=!1),this.nodes=X,this.groups=W,this.rootGroup=at,this.avoidOverlaps=Q,this.variables=X.map(function(U,D){return U.variable=new et(D,1)}),H&&this.createConstraints(H),Q&&at&&typeof at.groups<"u"){X.forEach(function(U){if(U.width&&U.height){var D=U.width/2,mt=U.height/2;U.bounds=new p(U.x-D,U.x+D,U.y-mt,U.y+mt)}else U.bounds=new p(U.x,U.x,U.y,U.y)}),m(at);var q=X.length;W.forEach(function(U){it.variables[q]=U.minVar=new et(q++,typeof U.stiffness<"u"?U.stiffness:.01),it.variables[q]=U.maxVar=new et(q++,typeof U.stiffness<"u"?U.stiffness:.01)})}}return K.prototype.createSeparation=function(X){return new x.Constraint(this.nodes[X.left].variable,this.nodes[X.right].variable,X.gap,typeof X.equality<"u"&&X.equality)},K.prototype.makeFeasible=function(X){var W=this;if(this.avoidOverlaps){var at="x",H="width";"x"===X.axis&&(at="y",H="height");var Q=X.offsets.map(function(q){return W.nodes[q.node]}).sort(function(q,U){return q[at]-U[at]}),it=null;Q.forEach(function(q){if(it){var U=it[at]+it[H];U>q[at]&&(q[at]=U)}it=q})}},K.prototype.createAlignment=function(X){var W=this,at=this.nodes[X.offsets[0].node].variable;this.makeFeasible(X);var H="x"===X.axis?this.xConstraints:this.yConstraints;X.offsets.slice(1).forEach(function(Q){H.push(new x.Constraint(at,W.nodes[Q.node].variable,Q.offset,!0))})},K.prototype.createConstraints=function(X){var W=this,at=function(H){return typeof H.type>"u"||"separation"===H.type};this.xConstraints=X.filter(function(H){return"x"===H.axis&&at(H)}).map(function(H){return W.createSeparation(H)}),this.yConstraints=X.filter(function(H){return"y"===H.axis&&at(H)}).map(function(H){return W.createSeparation(H)}),X.filter(function(H){return"alignment"===H.type}).forEach(function(H){return W.createAlignment(H)})},K.prototype.setupVariablesAndBounds=function(X,W,at,H){this.nodes.forEach(function(Q,it){Q.fixed?(Q.variable.weight=Q.fixedWeight?Q.fixedWeight:1e3,at[it]=H(Q)):Q.variable.weight=1;var q=(Q.width||0)/2,U=(Q.height||0)/2,D=X[it],mt=W[it];Q.bounds=new p(D-q,D+q,mt-U,mt+U)})},K.prototype.xProject=function(X,W,at){!this.rootGroup&&!this.avoidOverlaps&&!this.xConstraints||this.project(X,W,X,at,function(H){return H.px},this.xConstraints,Y,function(H){return H.bounds.setXCentre(at[H.variable.index]=H.variable.position())},function(H){var Q=at[H.minVar.index]=H.minVar.position(),it=at[H.maxVar.index]=H.maxVar.position(),q=H.padding/2;H.bounds.x=Q-q,H.bounds.X=it+q})},K.prototype.yProject=function(X,W,at){!this.rootGroup&&!this.yConstraints||this.project(X,W,W,at,function(H){return H.py},this.yConstraints,V,function(H){return H.bounds.setYCentre(at[H.variable.index]=H.variable.position())},function(H){var Q=at[H.minVar.index]=H.minVar.position(),it=at[H.maxVar.index]=H.maxVar.position(),q=H.padding/2;H.bounds.y=Q-q,H.bounds.Y=it+q})},K.prototype.projectFunctions=function(){var X=this;return[function(W,at,H){return X.xProject(W,at,H)},function(W,at,H){return X.yProject(W,at,H)}]},K.prototype.project=function(X,W,at,H,Q,it,q,U,D){this.setupVariablesAndBounds(X,W,H,Q),this.rootGroup&&this.avoidOverlaps&&(m(this.rootGroup),it=it.concat(q(this.rootGroup))),this.solve(this.variables,it,at,H),this.nodes.forEach(U),this.rootGroup&&this.avoidOverlaps&&(this.groups.forEach(D),m(this.rootGroup))},K.prototype.solve=function(X,W,at,H){var Q=new x.Solver(X,W);Q.setStartingPositions(at),Q.setDesiredPositions(H),Q.solve()},K}();E.Projection=st},33858:(w,E,s)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});var c=s(88866),x=function t(d,l){this.id=d,this.distance=l},_=function t(d){this.id=d,this.neighbours=[]},m=function t(d,l,h){this.node=d,this.prev=l,this.d=h},p=function(){function t(d,l,h,f,u){this.n=d,this.es=l,this.neighbours=new Array(this.n);for(var g=this.n;g--;)this.neighbours[g]=new _(g);for(g=this.es.length;g--;){var C=this.es[g],L=h(C),I=f(C),R=u(C);this.neighbours[L].neighbours.push(new x(I,R)),this.neighbours[I].neighbours.push(new x(L,R))}}return t.prototype.DistanceMatrix=function(){for(var d=new Array(this.n),l=0;l<this.n;++l)d[l]=this.dijkstraNeighbours(l);return d},t.prototype.DistancesFromNode=function(d){return this.dijkstraNeighbours(d)},t.prototype.PathFromNodeToNode=function(d,l){return this.dijkstraNeighbours(d,l)},t.prototype.PathFromNodeToNodeWithPrevCost=function(d,l,h){var f=new c.PriorityQueue(function(V,nt){return V.d<=nt.d}),u=this.neighbours[d],g=new m(u,null,0),C={};for(f.push(g);!f.empty()&&(u=(g=f.pop()).node).id!==l;)for(var L=u.neighbours.length;L--;){var I=u.neighbours[L],R=this.neighbours[I.id];if(!g.prev||R.id!==g.prev.node.id){var M=R.id+","+u.id;if(!(M in C&&C[M]<=g.d)){var F=g.prev?h(g.prev.node.id,u.id,R.id):0,B=g.d+I.distance+F;C[M]=B,f.push(new m(R,g,B))}}}for(var Y=[];g.prev;)Y.push((g=g.prev).node.id);return Y},t.prototype.dijkstraNeighbours=function(d,l){void 0===l&&(l=-1);for(var h=new c.PriorityQueue(function(F,B){return F.d<=B.d}),f=this.neighbours.length,u=new Array(f);f--;){var g=this.neighbours[f];g.d=f===d?0:Number.POSITIVE_INFINITY,g.q=h.push(g)}for(;!h.empty();){var C=h.pop();if(u[C.id]=C.d,C.id===l){for(var L=[],I=C;typeof I.prev<"u";)L.push(I.prev.id),I=I.prev;return L}for(f=C.neighbours.length;f--;){var R=C.neighbours[f],M=(I=this.neighbours[R.id],C.d+R.distance);C.d!==Number.MAX_VALUE&&I.d>M&&(I.d=M,I.prev=C,h.reduceKey(I.q,I,function(B,Y){return B.q=Y}))}}return u},t}();E.Calculator=p},98237:(w,E)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});var s=function(){function d(l){this.scale=l,this.AB=0,this.AD=0,this.A2=0}return d.prototype.addVariable=function(l){var h=this.scale/l.scale,u=l.weight;this.AB+=u*h*(l.offset/l.scale),this.AD+=u*h*l.desiredPosition,this.A2+=u*h*h},d.prototype.getPosn=function(){return(this.AD-this.AB)/this.A2},d}();E.PositionStats=s;var c=function(){function d(l,h,f,u){void 0===u&&(u=!1),this.left=l,this.right=h,this.gap=f,this.equality=u,this.active=!1,this.unsatisfiable=!1,this.left=l,this.right=h,this.gap=f,this.equality=u}return d.prototype.slack=function(){return this.unsatisfiable?Number.MAX_VALUE:this.right.scale*this.right.position()-this.gap-this.left.scale*this.left.position()},d}();E.Constraint=c;var x=function(){function d(l,h,f){void 0===h&&(h=1),void 0===f&&(f=1),this.desiredPosition=l,this.weight=h,this.scale=f,this.offset=0}return d.prototype.dfdv=function(){return 2*this.weight*(this.position()-this.desiredPosition)},d.prototype.position=function(){return(this.block.ps.scale*this.block.posn+this.offset)/this.scale},d.prototype.visitNeighbours=function(l,h){var f=function(u,g){return u.active&&l!==g&&h(u,g)};this.cOut.forEach(function(u){return f(u,u.right)}),this.cIn.forEach(function(u){return f(u,u.left)})},d}();E.Variable=x;var _=function(){function d(l){this.vars=[],l.offset=0,this.ps=new s(l.scale),this.addVariable(l)}return d.prototype.addVariable=function(l){l.block=this,this.vars.push(l),this.ps.addVariable(l),this.posn=this.ps.getPosn()},d.prototype.updateWeightedPosition=function(){this.ps.AB=this.ps.AD=this.ps.A2=0;for(var l=0,h=this.vars.length;l<h;++l)this.ps.addVariable(this.vars[l]);this.posn=this.ps.getPosn()},d.prototype.compute_lm=function(l,h,f){var u=this,g=l.dfdv();return l.visitNeighbours(h,function(C,L){var I=u.compute_lm(L,l,f);L===C.right?(g+=I*C.left.scale,C.lm=I):(g+=I*C.right.scale,C.lm=-I),f(C)}),g/l.scale},d.prototype.populateSplitBlock=function(l,h){var f=this;l.visitNeighbours(h,function(u,g){g.offset=l.offset+(g===u.right?u.gap:-u.gap),f.addVariable(g),f.populateSplitBlock(g,l)})},d.prototype.traverse=function(l,h,f,u){var g=this;void 0===f&&(f=this.vars[0]),void 0===u&&(u=null),f.visitNeighbours(u,function(C,L){h.push(l(C)),g.traverse(l,h,L,f)})},d.prototype.findMinLM=function(){var l=null;return this.compute_lm(this.vars[0],null,function(h){!h.equality&&(null===l||h.lm<l.lm)&&(l=h)}),l},d.prototype.findMinLMBetween=function(l,h){this.compute_lm(l,null,function(){});var f=null;return this.findPath(l,null,h,function(u,g){!u.equality&&u.right===g&&(null===f||u.lm<f.lm)&&(f=u)}),f},d.prototype.findPath=function(l,h,f,u){var g=this,C=!1;return l.visitNeighbours(h,function(L,I){!C&&(I===f||g.findPath(I,l,f,u))&&(C=!0,u(L,I))}),C},d.prototype.isActiveDirectedPathBetween=function(l,h){if(l===h)return!0;for(var f=l.cOut.length;f--;){var u=l.cOut[f];if(u.active&&this.isActiveDirectedPathBetween(u.right,h))return!0}return!1},d.split=function(l){return l.active=!1,[d.createSplitBlock(l.left),d.createSplitBlock(l.right)]},d.createSplitBlock=function(l){var h=new d(l);return h.populateSplitBlock(l,null),h},d.prototype.splitBetween=function(l,h){var f=this.findMinLMBetween(l,h);if(null!==f){var u=d.split(f);return{constraint:f,lb:u[0],rb:u[1]}}return null},d.prototype.mergeAcross=function(l,h,f){h.active=!0;for(var u=0,g=l.vars.length;u<g;++u){var C=l.vars[u];C.offset+=f,this.addVariable(C)}this.posn=this.ps.getPosn()},d.prototype.cost=function(){for(var l=0,h=this.vars.length;h--;){var f=this.vars[h],u=f.position()-f.desiredPosition;l+=u*u*f.weight}return l},d}();E.Block=_;var m=function(){function d(l){this.vs=l;var h=l.length;for(this.list=new Array(h);h--;){var f=new _(l[h]);this.list[h]=f,f.blockInd=h}}return d.prototype.cost=function(){for(var l=0,h=this.list.length;h--;)l+=this.list[h].cost();return l},d.prototype.insert=function(l){l.blockInd=this.list.length,this.list.push(l)},d.prototype.remove=function(l){var h=this.list.length-1,f=this.list[h];this.list.length=h,l!==f&&(this.list[l.blockInd]=f,f.blockInd=l.blockInd)},d.prototype.merge=function(l){var h=l.left.block,f=l.right.block,u=l.right.offset-l.left.offset-l.gap;h.vars.length<f.vars.length?(f.mergeAcross(h,l,u),this.remove(h)):(h.mergeAcross(f,l,-u),this.remove(f))},d.prototype.forEach=function(l){this.list.forEach(l)},d.prototype.updateBlockPositions=function(){this.list.forEach(function(l){return l.updateWeightedPosition()})},d.prototype.split=function(l){var h=this;this.updateBlockPositions(),this.list.forEach(function(f){var u=f.findMinLM();null!==u&&u.lm<p.LAGRANGIAN_TOLERANCE&&(f=u.left.block,_.split(u).forEach(function(g){return h.insert(g)}),h.remove(f),l.push(u))})},d}();E.Blocks=m;var p=function(){function d(l,h){this.vs=l,this.cs=h,this.vs=l,l.forEach(function(f){f.cIn=[],f.cOut=[]}),this.cs=h,h.forEach(function(f){f.left.cOut.push(f),f.right.cIn.push(f)}),this.inactive=h.map(function(f){return f.active=!1,f}),this.bs=null}return d.prototype.cost=function(){return this.bs.cost()},d.prototype.setStartingPositions=function(l){this.inactive=this.cs.map(function(h){return h.active=!1,h}),this.bs=new m(this.vs),this.bs.forEach(function(h,f){return h.posn=l[f]})},d.prototype.setDesiredPositions=function(l){this.vs.forEach(function(h,f){return h.desiredPosition=l[f]})},d.prototype.mostViolated=function(){for(var l=Number.MAX_VALUE,h=null,f=this.inactive,u=f.length,g=u,C=0;C<u;++C){var L=f[C];if(!L.unsatisfiable){var I=L.slack();if((L.equality||I<l)&&(l=I,h=L,g=C,L.equality))break}}return g!==u&&(l<d.ZERO_UPPERBOUND&&!h.active||h.equality)&&(f[g]=f[u-1],f.length=u-1),h},d.prototype.satisfy=function(){null==this.bs&&(this.bs=new m(this.vs)),this.bs.split(this.inactive);for(var l=null;(l=this.mostViolated())&&(l.equality||l.slack()<d.ZERO_UPPERBOUND&&!l.active);){var h=l.left.block;if(h!==l.right.block)this.bs.merge(l);else{if(h.isActiveDirectedPathBetween(l.right,l.left)){l.unsatisfiable=!0;continue}var u=h.splitBetween(l.left,l.right);if(null===u){l.unsatisfiable=!0;continue}this.bs.insert(u.lb),this.bs.insert(u.rb),this.bs.remove(h),this.inactive.push(u.constraint),l.slack()>=0?this.inactive.push(l):this.bs.merge(l)}}},d.prototype.solve=function(){this.satisfy();for(var l=Number.MAX_VALUE,h=this.bs.cost();Math.abs(l-h)>1e-4;)this.satisfy(),l=h,h=this.bs.cost();return h},d.LAGRANGIAN_TOLERANCE=-1e-4,d.ZERO_UPPERBOUND=-1e-10,d}();E.Solver=p,E.removeOverlapInOneDimension=function t(d,l,h){for(var f=d.map(function(et){return new x(et.desiredCenter)}),u=[],g=d.length,C=0;C<g-1;C++)u.push(new c(f[C],f[C+1],(d[C].size+d[C+1].size)/2));var R=f[0],M=f[g-1],F=d[0].size/2,B=d[g-1].size/2,Y=null,V=null;return l&&(Y=new x(l,1e3*R.weight),f.push(Y),u.push(new c(Y,R,F))),h&&(V=new x(h,1e3*M.weight),f.push(V),u.push(new c(M,V,B))),new p(f,u).solve(),{newCenters:f.slice(0,d.length).map(function(et){return et.position()}),lowerBound:Y?Y.position():R.position()-F,upperBound:V?V.position():M.position()+B}}}}]);