<div class="user-theme">
  <h1 class="page-title">{{'IDENTITIES.IDP' | customTranslate | translate}}</h1>
  <button mat-flat-button color="accent" (click)="addIdentity()" [disabled]="loading">
    {{'IDENTITIES.ADD' | customTranslate | translate}}
  </button>
  <button
    (click)="removeIdentity(idpSelection)"
    [disabled]="idpSelection.selected.length === 0 || loading"
    class="ms-2"
    color="warn"
    mat-flat-button>
    {{'IDENTITIES.REMOVE' | customTranslate | translate}}
  </button>
  <div class="position-relative">
    <perun-web-apps-user-ext-sources-list
      *perunWebAppsLoader="loading; indicator: spinner"
      [userExtSources]="idpExtSources"
      [selection]="idpSelection"
      [displayedColumns]="displayedColumnsIdp"
      [loginHeader]="loginIdp"
      [disableRouting]="true"></perun-web-apps-user-ext-sources-list>
  </div>

  <div *ngIf="displayCertificates">
    <h1 class="page-title mt-5">{{'IDENTITIES.CERT' | customTranslate | translate}}</h1>
    <button mat-flat-button color="accent" (click)="addIdentity()" [disabled]="loading">
      {{'IDENTITIES.ADD' | customTranslate | translate}}
    </button>
    <button
      (click)="removeIdentity(certSelection)"
      [disabled]="certSelection.selected.length === 0 || loading"
      class="ms-2"
      color="warn"
      mat-flat-button>
      {{'IDENTITIES.REMOVE' | customTranslate | translate}}
    </button>
    <div class="position-relative">
      <perun-web-apps-user-ext-sources-list
        *perunWebAppsLoader="loading; indicator: spinner"
        [userExtSources]="certExtSources"
        [selection]="certSelection"
        [extSourceNameHeader]="extSourceNameCert"
        [loginHeader]="loginCert"
        [displayedColumns]="displayedColumnsCert"
        [disableRouting]="true"></perun-web-apps-user-ext-sources-list>
    </div>
  </div>

  <h1 class="page-title mt-5">
    {{'IDENTITIES.OTHER' | customTranslate | translate}}
    <mat-icon
      [matTooltip]="'IDENTITIES.OTHER_TOOLTIP' | customTranslate | translate"
      class="center-icon"
      matTooltipPosition="above">
      info_outline
    </mat-icon>
  </h1>
  <div class="position-relative">
    <perun-web-apps-user-ext-sources-list
      *perunWebAppsLoader="loading; indicator: spinner"
      [userExtSources]="otherExtSources"
      [selection]="otherSelection"
      [extSourceNameHeader]="extSourceNameOther"
      [displayedColumns]="displayedColumnsOther"
      [disableRouting]="true"></perun-web-apps-user-ext-sources-list>
  </div>
  <ng-template #spinner>
    <perun-web-apps-loading-table></perun-web-apps-loading-table>
  </ng-template>
</div>
